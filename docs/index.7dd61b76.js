!function(){function r(r,n,i,o){Object.defineProperty(r,n,{get:i,set:o,enumerable:!0,configurable:!0})}var n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I,L,A,z,P,O,D,R,F,B,N,j,V,U,q,$,H,Z,G,W,X,Y,K,J,Q,ee,et,er,en,ei,eo,ea,es,el,eu,ec,eh,ed,ef,ep,em,eg,ey,e_,ev,eb,ex,ew="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function eE(r){return r&&r.__esModule?r.default:r}var eC={},eS={},eT=ew.parcelRequire2073;null==eT&&((eT=function(r){if(r in eC)return eC[r].exports;if(r in eS){var n=eS[r];delete eS[r];var i={id:r,exports:{}};return eC[r]=i,n.call(i.exports,i,i.exports),i.exports}var o=Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(r,n){eS[r]=n},ew.parcelRequire2073=eT),eT.register("6ObR8",function(n,i){r(n.exports,"Fragment",function(){return o},function(r){return o=r}),r(n.exports,"jsx",function(){return a},function(r){return a=r}),r(n.exports,"jsxs",function(){return s},function(r){return s=r});var o,a,s,l=eT("exYeM"),u=Symbol.for("react.element"),c=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,d=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function p(r,n,i){var o,a={},s=null,l=null;for(o in void 0!==i&&(s=""+i),void 0!==n.key&&(s=""+n.key),void 0!==n.ref&&(l=n.ref),n)h.call(n,o)&&!f.hasOwnProperty(o)&&(a[o]=n[o]);if(r&&r.defaultProps)for(o in n=r.defaultProps)void 0===a[o]&&(a[o]=n[o]);return{$$typeof:u,type:r,key:s,ref:l,props:a,_owner:d.current}}o=c,a=p,s=p}),eT.register("exYeM",function(r,n){r.exports=eT("bzfnW")}),eT.register("bzfnW",function(n,i){r(n.exports,"Children",function(){return o},function(r){return o=r}),r(n.exports,"Component",function(){return a},function(r){return a=r}),r(n.exports,"Fragment",function(){return s},function(r){return s=r}),r(n.exports,"Profiler",function(){return l},function(r){return l=r}),r(n.exports,"PureComponent",function(){return u},function(r){return u=r}),r(n.exports,"StrictMode",function(){return c},function(r){return c=r}),r(n.exports,"Suspense",function(){return h},function(r){return h=r}),r(n.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",function(){return d},function(r){return d=r}),r(n.exports,"cloneElement",function(){return f},function(r){return f=r}),r(n.exports,"createContext",function(){return p},function(r){return p=r}),r(n.exports,"createElement",function(){return m},function(r){return m=r}),r(n.exports,"createFactory",function(){return g},function(r){return g=r}),r(n.exports,"createRef",function(){return y},function(r){return y=r}),r(n.exports,"forwardRef",function(){return _},function(r){return _=r}),r(n.exports,"isValidElement",function(){return v},function(r){return v=r}),r(n.exports,"lazy",function(){return b},function(r){return b=r}),r(n.exports,"memo",function(){return x},function(r){return x=r}),r(n.exports,"startTransition",function(){return w},function(r){return w=r}),r(n.exports,"unstable_act",function(){return E},function(r){return E=r}),r(n.exports,"useCallback",function(){return C},function(r){return C=r}),r(n.exports,"useContext",function(){return S},function(r){return S=r}),r(n.exports,"useDebugValue",function(){return T},function(r){return T=r}),r(n.exports,"useDeferredValue",function(){return M},function(r){return M=r}),r(n.exports,"useEffect",function(){return k},function(r){return k=r}),r(n.exports,"useId",function(){return I},function(r){return I=r}),r(n.exports,"useImperativeHandle",function(){return L},function(r){return L=r}),r(n.exports,"useInsertionEffect",function(){return A},function(r){return A=r}),r(n.exports,"useLayoutEffect",function(){return z},function(r){return z=r}),r(n.exports,"useMemo",function(){return P},function(r){return P=r}),r(n.exports,"useReducer",function(){return O},function(r){return O=r}),r(n.exports,"useRef",function(){return D},function(r){return D=r}),r(n.exports,"useState",function(){return R},function(r){return R=r}),r(n.exports,"useSyncExternalStore",function(){return F},function(r){return F=r}),r(n.exports,"useTransition",function(){return B},function(r){return B=r}),r(n.exports,"version",function(){return N},function(r){return N=r});var o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I,L,A,z,P,O,D,R,F,B,N,j=Symbol.for("react.element"),V=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),Z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),X=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),K=Symbol.iterator,J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,ee={};function et(r,n,i){this.props=r,this.context=n,this.refs=ee,this.updater=i||J}function er(){}function en(r,n,i){this.props=r,this.context=n,this.refs=ee,this.updater=i||J}et.prototype.isReactComponent={},et.prototype.setState=function(r,n){if("object"!=typeof r&&"function"!=typeof r&&null!=r)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,n,"setState")},et.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")},er.prototype=et.prototype;var ei=en.prototype=new er;ei.constructor=en,Q(ei,et.prototype),ei.isPureReactComponent=!0;var eo=Array.isArray,ea=Object.prototype.hasOwnProperty,es={current:null},el={key:!0,ref:!0,__self:!0,__source:!0};function eu(r,n,i){var o,a={},s=null,l=null;if(null!=n)for(o in void 0!==n.ref&&(l=n.ref),void 0!==n.key&&(s=""+n.key),n)ea.call(n,o)&&!el.hasOwnProperty(o)&&(a[o]=n[o]);var u=arguments.length-2;if(1===u)a.children=i;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];a.children=c}if(r&&r.defaultProps)for(o in u=r.defaultProps)void 0===a[o]&&(a[o]=u[o]);return{$$typeof:j,type:r,key:s,ref:l,props:a,_owner:es.current}}function ec(r){return"object"==typeof r&&null!==r&&r.$$typeof===j}var eh=/\/+/g;function ed(r,n){var i,o;return"object"==typeof r&&null!==r&&null!=r.key?(i=""+r.key,o={"=":"=0",":":"=2"},"$"+i.replace(/[=:]/g,function(r){return o[r]})):n.toString(36)}function ef(r,n,i){if(null==r)return r;var o=[],a=0;return function r(n,i,o,a,s){var l,u,c,h=typeof n;("undefined"===h||"boolean"===h)&&(n=null);var d=!1;if(null===n)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(n.$$typeof){case j:case V:d=!0}}if(d)return s=s(d=n),n=""===a?"."+ed(d,0):a,eo(s)?(o="",null!=n&&(o=n.replace(eh,"$&/")+"/"),r(s,i,o,"",function(r){return r})):null!=s&&(ec(s)&&(l=s,u=o+(!s.key||d&&d.key===s.key?"":(""+s.key).replace(eh,"$&/")+"/")+n,s={$$typeof:j,type:l.type,key:u,ref:l.ref,props:l.props,_owner:l._owner}),i.push(s)),1;if(d=0,a=""===a?".":a+":",eo(n))for(var f=0;f<n.length;f++){var p=a+ed(h=n[f],f);d+=r(h,i,o,p,s)}else if("function"==typeof(p=null===(c=n)||"object"!=typeof c?null:"function"==typeof(c=K&&c[K]||c["@@iterator"])?c:null))for(n=p.call(n),f=0;!(h=n.next()).done;)p=a+ed(h=h.value,f++),d+=r(h,i,o,p,s);else if("object"===h)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(i=String(n))?"object with keys {"+Object.keys(n).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return d}(r,o,"","",function(r){return n.call(i,r,a++)}),o}function ep(r){if(-1===r._status){var n=r._result;(n=n()).then(function(n){(0===r._status||-1===r._status)&&(r._status=1,r._result=n)},function(n){(0===r._status||-1===r._status)&&(r._status=2,r._result=n)}),-1===r._status&&(r._status=0,r._result=n)}if(1===r._status)return r._result.default;throw r._result}var em={current:null},eg={transition:null};o={map:ef,forEach:function(r,n,i){ef(r,function(){n.apply(this,arguments)},i)},count:function(r){var n=0;return ef(r,function(){n++}),n},toArray:function(r){return ef(r,function(r){return r})||[]},only:function(r){if(!ec(r))throw Error("React.Children.only expected to receive a single React element child.");return r}},a=et,s=U,l=$,u=en,c=q,h=W,d={ReactCurrentDispatcher:em,ReactCurrentBatchConfig:eg,ReactCurrentOwner:es},f=function(r,n,i){if(null==r)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var o=Q({},r.props),a=r.key,s=r.ref,l=r._owner;if(null!=n){if(void 0!==n.ref&&(s=n.ref,l=es.current),void 0!==n.key&&(a=""+n.key),r.type&&r.type.defaultProps)var u=r.type.defaultProps;for(c in n)ea.call(n,c)&&!el.hasOwnProperty(c)&&(o[c]=void 0===n[c]&&void 0!==u?u[c]:n[c])}var c=arguments.length-2;if(1===c)o.children=i;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];o.children=u}return{$$typeof:j,type:r.type,key:a,ref:s,props:o,_owner:l}},p=function(r){return(r={$$typeof:Z,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:H,_context:r},r.Consumer=r},m=eu,g=function(r){var n=eu.bind(null,r);return n.type=r,n},y=function(){return{current:null}},_=function(r){return{$$typeof:G,render:r}},v=ec,b=function(r){return{$$typeof:Y,_payload:{_status:-1,_result:r},_init:ep}},x=function(r,n){return{$$typeof:X,type:r,compare:void 0===n?null:n}},w=function(r){var n=eg.transition;eg.transition={};try{r()}finally{eg.transition=n}},E=function(){throw Error("act(...) is not supported in production builds of React.")},C=function(r,n){return em.current.useCallback(r,n)},S=function(r){return em.current.useContext(r)},T=function(){},M=function(r){return em.current.useDeferredValue(r)},k=function(r,n){return em.current.useEffect(r,n)},I=function(){return em.current.useId()},L=function(r,n,i){return em.current.useImperativeHandle(r,n,i)},A=function(r,n){return em.current.useInsertionEffect(r,n)},z=function(r,n){return em.current.useLayoutEffect(r,n)},P=function(r,n){return em.current.useMemo(r,n)},O=function(r,n,i){return em.current.useReducer(r,n,i)},D=function(r){return em.current.useRef(r)},R=function(r){return em.current.useState(r)},F=function(r,n,i){return em.current.useSyncExternalStore(r,n,i)},B=function(){return em.current.useTransition()},N="18.2.0"}),eT.register("h8vP0",function(n,i){r(n.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",function(){return $},function(r){return $=r}),r(n.exports,"createPortal",function(){return H},function(r){return H=r}),r(n.exports,"createRoot",function(){return Z},function(r){return Z=r}),r(n.exports,"findDOMNode",function(){return G},function(r){return G=r}),r(n.exports,"flushSync",function(){return W},function(r){return W=r}),r(n.exports,"hydrate",function(){return X},function(r){return X=r}),r(n.exports,"hydrateRoot",function(){return Y},function(r){return Y=r}),r(n.exports,"render",function(){return K},function(r){return K=r}),r(n.exports,"unmountComponentAtNode",function(){return J},function(r){return J=r}),r(n.exports,"unstable_batchedUpdates",function(){return Q},function(r){return Q=r}),r(n.exports,"unstable_renderSubtreeIntoContainer",function(){return ee},function(r){return ee=r}),r(n.exports,"version",function(){return et},function(r){return et=r});var o,a,s,l,u,c,h=eT("exYeM"),d=eT("ibqfJ");function f(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,m={};function g(r,n){y(r,n),y(r+"Capture",n)}function y(r,n){for(m[r]=n,r=0;r<n.length;r++)p.add(n[r])}var _=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),v=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},w={};function E(r,n,i,o,a,s,l){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=r,this.type=n,this.sanitizeURL=s,this.removeEmptyString=l}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){C[r]=new E(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];C[n]=new E(n,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){C[r]=new E(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){C[r]=new E(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){C[r]=new E(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){C[r]=new E(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){C[r]=new E(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){C[r]=new E(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){C[r]=new E(r,5,!1,r.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(r){return r[1].toUpperCase()}function M(r,n,i,o){var a,s=C.hasOwnProperty(n)?C[n]:null;(null!==s?0!==s.type:o||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(r,n,i,o){if(null==n||function(r,n,i,o){if(null!==i&&0===i.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":if(o)return!1;if(null!==i)return!i.acceptsBooleans;return"data-"!==(r=r.toLowerCase().slice(0,5))&&"aria-"!==r;default:return!1}}(r,n,i,o))return!0;if(o)return!1;if(null!==i)switch(i.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,i,s,o)&&(i=null),o||null===s?(a=n,(!!v.call(w,a)||!v.call(x,a)&&(b.test(a)?w[a]=!0:(x[a]=!0,!1)))&&(null===i?r.removeAttribute(n):r.setAttribute(n,""+i))):s.mustUseProperty?r[s.propertyName]=null===i?3!==s.type&&"":i:(n=s.attributeName,o=s.attributeNamespace,null===i?r.removeAttribute(n):(i=3===(s=s.type)||4===s&&!0===i?"":""+i,o?r.setAttributeNS(o,n,i):r.setAttribute(n,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(S,T);C[n]=new E(n,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(S,T);C[n]=new E(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(S,T);C[n]=new E(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){C[r]=new E(r,1,!1,r.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){C[r]=new E(r,1,!1,r.toLowerCase(),null,!0,!0)});var k=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),L=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var V=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var U=Symbol.iterator;function q(r){return null===r||"object"!=typeof r?null:"function"==typeof(r=U&&r[U]||r["@@iterator"])?r:null}var $,H,Z,G,W,X,Y,K,J,Q,ee,et,er,en=Object.assign;function ei(r){if(void 0===er)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);er=n&&n[1]||""}return"\n"+er+r}var eo=!1;function ea(r,n){if(!r||eo)return"";eo=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n){if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var o=r}Reflect.construct(r,[],n)}else{try{n.call()}catch(r){o=r}r.call(n.prototype)}}else{try{throw Error()}catch(r){o=r}r()}}catch(n){if(n&&o&&"string"==typeof n.stack){for(var a=n.stack.split("\n"),s=o.stack.split("\n"),l=a.length-1,u=s.length-1;1<=l&&0<=u&&a[l]!==s[u];)u--;for(;1<=l&&0<=u;l--,u--)if(a[l]!==s[u]){if(1!==l||1!==u)do if(l--,0>--u||a[l]!==s[u]){var c="\n"+a[l].replace(" at new "," at ");return r.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",r.displayName)),c}while(1<=l&&0<=u)break}}}finally{eo=!1,Error.prepareStackTrace=i}return(r=r?r.displayName||r.name:"")?ei(r):""}function es(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":case"object":return r;default:return""}}function el(r){var n=r.type;return(r=r.nodeName)&&"input"===r.toLowerCase()&&("checkbox"===n||"radio"===n)}function eu(r){r._valueTracker||(r._valueTracker=function(r){var n=el(r)?"checked":"value",i=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),o=""+r[n];if(!r.hasOwnProperty(n)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var a=i.get,s=i.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return a.call(this)},set:function(r){o=""+r,s.call(this,r)}}),Object.defineProperty(r,n,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(r){o=""+r},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}(r))}function ec(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return r&&(o=el(r)?r.checked?"true":"false":r.value),(r=o)!==i&&(n.setValue(r),!0)}function eh(r){if(void 0===(r=r||("undefined"!=typeof document?document:void 0)))return null;try{return r.activeElement||r.body}catch(n){return r.body}}function ed(r,n){var i=n.checked;return en({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:r._wrapperState.initialChecked})}function ef(r,n){var i=null==n.defaultValue?"":n.defaultValue,o=null!=n.checked?n.checked:n.defaultChecked;i=es(null!=n.value?n.value:i),r._wrapperState={initialChecked:o,initialValue:i,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function ep(r,n){null!=(n=n.checked)&&M(r,"checked",n,!1)}function em(r,n){ep(r,n);var i=es(n.value),o=n.type;if(null!=i)"number"===o?(0===i&&""===r.value||r.value!=i)&&(r.value=""+i):r.value!==""+i&&(r.value=""+i);else if("submit"===o||"reset"===o){r.removeAttribute("value");return}n.hasOwnProperty("value")?ey(r,n.type,i):n.hasOwnProperty("defaultValue")&&ey(r,n.type,es(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(r.defaultChecked=!!n.defaultChecked)}function eg(r,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var o=n.type;if(!("submit"!==o&&"reset"!==o||void 0!==n.value&&null!==n.value))return;n=""+r._wrapperState.initialValue,i||n===r.value||(r.value=n),r.defaultValue=n}""!==(i=r.name)&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,""!==i&&(r.name=i)}function ey(r,n,i){("number"!==n||eh(r.ownerDocument)!==r)&&(null==i?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+i&&(r.defaultValue=""+i))}var e_=Array.isArray;function ev(r,n,i,o){if(r=r.options,n){n={};for(var a=0;a<i.length;a++)n["$"+i[a]]=!0;for(i=0;i<r.length;i++)a=n.hasOwnProperty("$"+r[i].value),r[i].selected!==a&&(r[i].selected=a),a&&o&&(r[i].defaultSelected=!0)}else{for(a=0,i=""+es(i),n=null;a<r.length;a++){if(r[a].value===i){r[a].selected=!0,o&&(r[a].defaultSelected=!0);return}null!==n||r[a].disabled||(n=r[a])}null!==n&&(n.selected=!0)}}function eb(r,n){if(null!=n.dangerouslySetInnerHTML)throw Error(f(91));return en({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ex(r,n){var i=n.value;if(null==i){if(i=n.children,n=n.defaultValue,null!=i){if(null!=n)throw Error(f(92));if(e_(i)){if(1<i.length)throw Error(f(93));i=i[0]}n=i}null==n&&(n=""),i=n}r._wrapperState={initialValue:es(i)}}function ew(r,n){var i=es(n.value),o=es(n.defaultValue);null!=i&&((i=""+i)!==r.value&&(r.value=i),null==n.defaultValue&&r.defaultValue!==i&&(r.defaultValue=i)),null!=o&&(r.defaultValue=""+o)}function eE(r){var n=r.textContent;n===r._wrapperState.initialValue&&""!==n&&null!==n&&(r.value=n)}function eC(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eS(r,n){return null==r||"http://www.w3.org/1999/xhtml"===r?eC(n):"http://www.w3.org/2000/svg"===r&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":r}var eM,ek,eI=(eM=function(r,n){if("http://www.w3.org/2000/svg"!==r.namespaceURI||"innerHTML"in r)r.innerHTML=n;else{for((ek=ek||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ek.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(r,n,i,o){MSApp.execUnsafeLocalFunction(function(){return eM(r,n,i,o)})}:eM);function eL(r,n){if(n){var i=r.firstChild;if(i&&i===r.lastChild&&3===i.nodeType){i.nodeValue=n;return}}r.textContent=n}var eA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ez=["Webkit","ms","Moz","O"];function eP(r,n,i){return null==n||"boolean"==typeof n||""===n?"":i||"number"!=typeof n||0===n||eA.hasOwnProperty(r)&&eA[r]?(""+n).trim():n+"px"}function eO(r,n){for(var i in r=r.style,n)if(n.hasOwnProperty(i)){var o=0===i.indexOf("--"),a=eP(i,n[i],o);"float"===i&&(i="cssFloat"),o?r.setProperty(i,a):r[i]=a}}Object.keys(eA).forEach(function(r){ez.forEach(function(n){eA[n=n+r.charAt(0).toUpperCase()+r.substring(1)]=eA[r]})});var eD=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eR(r,n){if(n){if(eD[r]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(f(137,r));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(f(60));if("object"!=typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(f(61))}if(null!=n.style&&"object"!=typeof n.style)throw Error(f(62))}}function eF(r,n){if(-1===r.indexOf("-"))return"string"==typeof n.is;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eB=null;function eN(r){return(r=r.target||r.srcElement||window).correspondingUseElement&&(r=r.correspondingUseElement),3===r.nodeType?r.parentNode:r}var ej=null,eV=null,eU=null;function eq(r){if(r=nK(r)){if("function"!=typeof ej)throw Error(f(280));var n=r.stateNode;n&&(n=nQ(n),ej(r.stateNode,r.type,n))}}function e$(r){eV?eU?eU.push(r):eU=[r]:eV=r}function eH(){if(eV){var r=eV,n=eU;if(eU=eV=null,eq(r),n)for(r=0;r<n.length;r++)eq(n[r])}}function eZ(r,n){return r(n)}function eG(){}var eW=!1;function eX(r,n,i){if(eW)return r(n,i);eW=!0;try{return eZ(r,n,i)}finally{eW=!1,(null!==eV||null!==eU)&&(eG(),eH())}}function eY(r,n){var i=r.stateNode;if(null===i)return null;var o=nQ(i);if(null===o)return null;switch(i=o[n],n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(r=r.type)||"input"===r||"select"===r||"textarea"===r)),r=!o;break;default:r=!1}if(r)return null;if(i&&"function"!=typeof i)throw Error(f(231,n,typeof i));return i}var eK=!1;if(_)try{var eJ={};Object.defineProperty(eJ,"passive",{get:function(){eK=!0}}),window.addEventListener("test",eJ,eJ),window.removeEventListener("test",eJ,eJ)}catch(r){eK=!1}function eQ(r,n,i,o,a,s,l,u,c){var h=Array.prototype.slice.call(arguments,3);try{n.apply(i,h)}catch(r){this.onError(r)}}var e0=!1,e1=null,e2=!1,e4=null,e3={onError:function(r){e0=!0,e1=r}};function e5(r,n,i,o,a,s,l,u,c){e0=!1,e1=null,eQ.apply(e3,arguments)}function e6(r){var n=r,i=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do 0!=(4098&(n=r).flags)&&(i=n.return),r=n.return;while(r)}return 3===n.tag?i:null}function e8(r){if(13===r.tag){var n=r.memoizedState;if(null===n&&null!==(r=r.alternate)&&(n=r.memoizedState),null!==n)return n.dehydrated}return null}function e9(r){if(e6(r)!==r)throw Error(f(188))}function e7(r){return null!==(r=function(r){var n=r.alternate;if(!n){if(null===(n=e6(r)))throw Error(f(188));return n!==r?null:r}for(var i=r,o=n;;){var a=i.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(o=a.return)){i=o;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===i)return e9(a),r;if(s===o)return e9(a),n;s=s.sibling}throw Error(f(188))}if(i.return!==o.return)i=a,o=s;else{for(var l=!1,u=a.child;u;){if(u===i){l=!0,i=a,o=s;break}if(u===o){l=!0,o=a,i=s;break}u=u.sibling}if(!l){for(u=s.child;u;){if(u===i){l=!0,i=s,o=a;break}if(u===o){l=!0,o=s,i=a;break}u=u.sibling}if(!l)throw Error(f(189))}}if(i.alternate!==o)throw Error(f(190))}if(3!==i.tag)throw Error(f(188));return i.stateNode.current===i?r:n}(r))?function r(n){if(5===n.tag||6===n.tag)return n;for(n=n.child;null!==n;){var i=r(n);if(null!==i)return i;n=n.sibling}return null}(r):null}var te=d.unstable_scheduleCallback,tt=d.unstable_cancelCallback,tr=d.unstable_shouldYield,tn=d.unstable_requestPaint,ti=d.unstable_now,to=d.unstable_getCurrentPriorityLevel,ta=d.unstable_ImmediatePriority,ts=d.unstable_UserBlockingPriority,tl=d.unstable_NormalPriority,tu=d.unstable_LowPriority,tc=d.unstable_IdlePriority,th=null,td=null,tf=Math.clz32?Math.clz32:function(r){return 0==(r>>>=0)?32:31-(tp(r)/tm|0)|0},tp=Math.log,tm=Math.LN2,tg=64,ty=4194304;function t_(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&r;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&r;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function tv(r,n){var i=r.pendingLanes;if(0===i)return 0;var o=0,a=r.suspendedLanes,s=r.pingedLanes,l=268435455&i;if(0!==l){var u=l&~a;0!==u?o=t_(u):0!=(s&=l)&&(o=t_(s))}else 0!=(l=i&~a)?o=t_(l):0!==s&&(o=t_(s));if(0===o)return 0;if(0!==n&&n!==o&&0==(n&a)&&((a=o&-o)>=(s=n&-n)||16===a&&0!=(4194240&s)))return n;if(0!=(4&o)&&(o|=16&i),0!==(n=r.entangledLanes))for(r=r.entanglements,n&=o;0<n;)a=1<<(i=31-tf(n)),o|=r[i],n&=~a;return o}function tb(r){return 0!=(r=-1073741825&r.pendingLanes)?r:1073741824&r?1073741824:0}function tx(){var r=tg;return 0==(4194240&(tg<<=1))&&(tg=64),r}function tw(r){for(var n=[],i=0;31>i;i++)n.push(r);return n}function tE(r,n,i){r.pendingLanes|=n,536870912!==n&&(r.suspendedLanes=0,r.pingedLanes=0),(r=r.eventTimes)[n=31-tf(n)]=i}function tC(r,n){var i=r.entangledLanes|=n;for(r=r.entanglements;i;){var o=31-tf(i),a=1<<o;a&n|r[o]&n&&(r[o]|=n),i&=~a}}var tS=0;function tT(r){return 1<(r&=-r)?4<r?0!=(268435455&r)?16:536870912:4:1}var tM,tk,tI,tL,tA,tz=!1,tP=[],tO=null,tD=null,tR=null,tF=new Map,tB=new Map,tN=[],tj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tV(r,n){switch(r){case"focusin":case"focusout":tO=null;break;case"dragenter":case"dragleave":tD=null;break;case"mouseover":case"mouseout":tR=null;break;case"pointerover":case"pointerout":tF.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":tB.delete(n.pointerId)}}function tU(r,n,i,o,a,s){return null===r||r.nativeEvent!==s?(r={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:s,targetContainers:[a]},null!==n&&null!==(n=nK(n))&&tk(n)):(r.eventSystemFlags|=o,n=r.targetContainers,null!==a&&-1===n.indexOf(a)&&n.push(a)),r}function tq(r){var n=nY(r.target);if(null!==n){var i=e6(n);if(null!==i){if(13===(n=i.tag)){if(null!==(n=e8(i))){r.blockedOn=n,tA(r.priority,function(){tI(i)});return}}else if(3===n&&i.stateNode.current.memoizedState.isDehydrated){r.blockedOn=3===i.tag?i.stateNode.containerInfo:null;return}}}r.blockedOn=null}function t$(r){if(null!==r.blockedOn)return!1;for(var n=r.targetContainers;0<n.length;){var i=t1(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(null!==i)return null!==(n=nK(i))&&tk(n),r.blockedOn=i,!1;var o=new(i=r.nativeEvent).constructor(i.type,i);eB=o,i.target.dispatchEvent(o),eB=null,n.shift()}return!0}function tH(r,n,i){t$(r)&&i.delete(n)}function tZ(){tz=!1,null!==tO&&t$(tO)&&(tO=null),null!==tD&&t$(tD)&&(tD=null),null!==tR&&t$(tR)&&(tR=null),tF.forEach(tH),tB.forEach(tH)}function tG(r,n){r.blockedOn===n&&(r.blockedOn=null,tz||(tz=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,tZ)))}function tW(r){function n(n){return tG(n,r)}if(0<tP.length){tG(tP[0],r);for(var i=1;i<tP.length;i++){var o=tP[i];o.blockedOn===r&&(o.blockedOn=null)}}for(null!==tO&&tG(tO,r),null!==tD&&tG(tD,r),null!==tR&&tG(tR,r),tF.forEach(n),tB.forEach(n),i=0;i<tN.length;i++)(o=tN[i]).blockedOn===r&&(o.blockedOn=null);for(;0<tN.length&&null===(i=tN[0]).blockedOn;)tq(i),null===i.blockedOn&&tN.shift()}var tX=k.ReactCurrentBatchConfig,tY=!0;function tK(r,n,i,o){var a=tS,s=tX.transition;tX.transition=null;try{tS=1,tQ(r,n,i,o)}finally{tS=a,tX.transition=s}}function tJ(r,n,i,o){var a=tS,s=tX.transition;tX.transition=null;try{tS=4,tQ(r,n,i,o)}finally{tS=a,tX.transition=s}}function tQ(r,n,i,o){if(tY){var a=t1(r,n,i,o);if(null===a)nw(r,n,o,t0,i),tV(r,o);else if(function(r,n,i,o,a){switch(n){case"focusin":return tO=tU(tO,r,n,i,o,a),!0;case"dragenter":return tD=tU(tD,r,n,i,o,a),!0;case"mouseover":return tR=tU(tR,r,n,i,o,a),!0;case"pointerover":var s=a.pointerId;return tF.set(s,tU(tF.get(s)||null,r,n,i,o,a)),!0;case"gotpointercapture":return s=a.pointerId,tB.set(s,tU(tB.get(s)||null,r,n,i,o,a)),!0}return!1}(a,r,n,i,o))o.stopPropagation();else if(tV(r,o),4&n&&-1<tj.indexOf(r)){for(;null!==a;){var s=nK(a);if(null!==s&&tM(s),null===(s=t1(r,n,i,o))&&nw(r,n,o,t0,i),s===a)break;a=s}null!==a&&o.stopPropagation()}else nw(r,n,o,null,i)}}var t0=null;function t1(r,n,i,o){if(t0=null,null!==(r=nY(r=eN(o)))){if(null===(n=e6(r)))r=null;else if(13===(i=n.tag)){if(null!==(r=e8(n)))return r;r=null}else if(3===i){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null)}return t0=r,null}function t2(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(to()){case ta:return 1;case ts:return 4;case tl:case tu:return 16;case tc:return 536870912;default:return 16}default:return 16}}var t4=null,t3=null,t5=null;function t6(){if(t5)return t5;var r,n,i=t3,o=i.length,a="value"in t4?t4.value:t4.textContent,s=a.length;for(r=0;r<o&&i[r]===a[r];r++);var l=o-r;for(n=1;n<=l&&i[o-n]===a[s-n];n++);return t5=a.slice(r,1<n?1-n:void 0)}function t8(r){var n=r.keyCode;return"charCode"in r?0===(r=r.charCode)&&13===n&&(r=13):r=n,10===r&&(r=13),32<=r||13===r?r:0}function t9(){return!0}function t7(){return!1}function re(r){function n(n,i,o,a,s){for(var l in this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null,r)r.hasOwnProperty(l)&&(n=r[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?t9:t7,this.isPropagationStopped=t7,this}return en(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():"unknown"!=typeof r.returnValue&&(r.returnValue=!1),this.isDefaultPrevented=t9)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():"unknown"!=typeof r.cancelBubble&&(r.cancelBubble=!0),this.isPropagationStopped=t9)},persist:function(){},isPersistent:t9}),n}var rt,rr,rn,ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=re(ri),ra=en({},ri,{view:0,detail:0}),rs=re(ra),rl=en({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(r){return void 0===r.relatedTarget?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rn&&(rn&&"mousemove"===r.type?(rt=r.screenX-rn.screenX,rr=r.screenY-rn.screenY):rr=rt=0,rn=r),rt)},movementY:function(r){return"movementY"in r?r.movementY:rr}}),ru=re(rl),rc=re(en({},rl,{dataTransfer:0})),rh=re(en({},ra,{relatedTarget:0})),rd=re(en({},ri,{animationName:0,elapsedTime:0,pseudoElement:0})),rf=re(en({},ri,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}})),rp=re(en({},ri,{data:0})),rm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r_(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):!!(r=ry[r])&&!!n[r]}function rv(){return r_}var rb=re(en({},ra,{key:function(r){if(r.key){var n=rm[r.key]||r.key;if("Unidentified"!==n)return n}return"keypress"===r.type?13===(r=t8(r))?"Enter":String.fromCharCode(r):"keydown"===r.type||"keyup"===r.type?rg[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(r){return"keypress"===r.type?t8(r):0},keyCode:function(r){return"keydown"===r.type||"keyup"===r.type?r.keyCode:0},which:function(r){return"keypress"===r.type?t8(r):"keydown"===r.type||"keyup"===r.type?r.keyCode:0}})),rx=re(en({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),rw=re(en({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv})),rE=re(en({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0})),rC=re(en({},rl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0})),rS=[9,13,27,32],rT=_&&"CompositionEvent"in window,rM=null;_&&"documentMode"in document&&(rM=document.documentMode);var rk=_&&"TextEvent"in window&&!rM,rI=_&&(!rT||rM&&8<rM&&11>=rM),rL=!1;function rA(r,n){switch(r){case"keyup":return -1!==rS.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rz(r){return"object"==typeof(r=r.detail)&&"data"in r?r.data:null}var rP=!1,rO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rD(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return"input"===n?!!rO[r.type]:"textarea"===n}function rR(r,n,i,o){e$(o),0<(n=nC(n,"onChange")).length&&(i=new ro("onChange","change",null,i,o),r.push({event:i,listeners:n}))}var rF=null,rB=null;function rN(r){ng(r,0)}function rj(r){if(ec(nJ(r)))return r}function rV(r,n){if("change"===r)return n}var rU=!1;if(_){if(_){var rq="oninput"in document;if(!rq){var r$=document.createElement("div");r$.setAttribute("oninput","return;"),rq="function"==typeof r$.oninput}o=rq}else o=!1;rU=o&&(!document.documentMode||9<document.documentMode)}function rH(){rF&&(rF.detachEvent("onpropertychange",rZ),rB=rF=null)}function rZ(r){if("value"===r.propertyName&&rj(rB)){var n=[];rR(n,rB,r,eN(r)),eX(rN,n)}}function rG(r,n,i){"focusin"===r?(rH(),rF=n,rB=i,rF.attachEvent("onpropertychange",rZ)):"focusout"===r&&rH()}function rW(r){if("selectionchange"===r||"keyup"===r||"keydown"===r)return rj(rB)}function rX(r,n){if("click"===r)return rj(n)}function rY(r,n){if("input"===r||"change"===r)return rj(n)}var rK="function"==typeof Object.is?Object.is:function(r,n){return r===n&&(0!==r||1/r==1/n)||r!=r&&n!=n};function rJ(r,n){if(rK(r,n))return!0;if("object"!=typeof r||null===r||"object"!=typeof n||null===n)return!1;var i=Object.keys(r),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var a=i[o];if(!v.call(n,a)||!rK(r[a],n[a]))return!1}return!0}function rQ(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function r0(r,n){var i,o=rQ(r);for(r=0;o;){if(3===o.nodeType){if(i=r+o.textContent.length,r<=n&&i>=n)return{node:o,offset:n-r};r=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=rQ(o)}}function r1(){for(var r=window,n=eh();n instanceof r.HTMLIFrameElement;){try{var i="string"==typeof n.contentWindow.location.href}catch(r){i=!1}if(i)r=n.contentWindow;else break;n=eh(r.document)}return n}function r2(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&("input"===n&&("text"===r.type||"search"===r.type||"tel"===r.type||"url"===r.type||"password"===r.type)||"textarea"===n||"true"===r.contentEditable)}var r4=_&&"documentMode"in document&&11>=document.documentMode,r3=null,r5=null,r6=null,r8=!1;function r9(r,n,i){var o=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;r8||null==r3||r3!==eh(o)||(o="selectionStart"in(o=r3)&&r2(o)?{start:o.selectionStart,end:o.selectionEnd}:{anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},r6&&rJ(r6,o)||(r6=o,0<(o=nC(r5,"onSelect")).length&&(n=new ro("onSelect","select",null,n,i),r.push({event:n,listeners:o}),n.target=r3)))}function r7(r,n){var i={};return i[r.toLowerCase()]=n.toLowerCase(),i["Webkit"+r]="webkit"+n,i["Moz"+r]="moz"+n,i}var ne={animationend:r7("Animation","AnimationEnd"),animationiteration:r7("Animation","AnimationIteration"),animationstart:r7("Animation","AnimationStart"),transitionend:r7("Transition","TransitionEnd")},nt={},nr={};function nn(r){if(nt[r])return nt[r];if(!ne[r])return r;var n,i=ne[r];for(n in i)if(i.hasOwnProperty(n)&&n in nr)return nt[r]=i[n];return r}_&&(nr=document.createElement("div").style,"AnimationEvent"in window||(delete ne.animationend.animation,delete ne.animationiteration.animation,delete ne.animationstart.animation),"TransitionEvent"in window||delete ne.transitionend.transition);var ni=nn("animationend"),no=nn("animationiteration"),na=nn("animationstart"),ns=nn("transitionend"),nl=new Map,nu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nc(r,n){nl.set(r,n),g(n,[r])}for(var nh=0;nh<nu.length;nh++){var nd=nu[nh];nc(nd.toLowerCase(),"on"+(nd[0].toUpperCase()+nd.slice(1)))}nc(ni,"onAnimationEnd"),nc(no,"onAnimationIteration"),nc(na,"onAnimationStart"),nc("dblclick","onDoubleClick"),nc("focusin","onFocus"),nc("focusout","onBlur"),nc(ns,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),np=new Set("cancel close invalid load scroll toggle".split(" ").concat(nf));function nm(r,n,i){var o=r.type||"unknown-event";r.currentTarget=i,function(r,n,i,o,a,s,l,u,c){if(e5.apply(this,arguments),e0){if(e0){var h=e1;e0=!1,e1=null}else throw Error(f(198));e2||(e2=!0,e4=h)}}(o,n,void 0,r),r.currentTarget=null}function ng(r,n){n=0!=(4&n);for(var i=0;i<r.length;i++){var o=r[i],a=o.event;o=o.listeners;e:{var s=void 0;if(n)for(var l=o.length-1;0<=l;l--){var u=o[l],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==s&&a.isPropagationStopped())break e;nm(a,u,h),s=c}else for(l=0;l<o.length;l++){if(c=(u=o[l]).instance,h=u.currentTarget,u=u.listener,c!==s&&a.isPropagationStopped())break e;nm(a,u,h),s=c}}}if(e2)throw r=e4,e2=!1,e4=null,r}function ny(r,n){var i=n[nG];void 0===i&&(i=n[nG]=new Set);var o=r+"__bubble";i.has(o)||(nx(n,r,2,!1),i.add(o))}function n_(r,n,i){var o=0;n&&(o|=4),nx(i,r,o,n)}var nv="_reactListening"+Math.random().toString(36).slice(2);function nb(r){if(!r[nv]){r[nv]=!0,p.forEach(function(n){"selectionchange"!==n&&(np.has(n)||n_(n,!1,r),n_(n,!0,r))});var n=9===r.nodeType?r:r.ownerDocument;null===n||n[nv]||(n[nv]=!0,n_("selectionchange",!1,n))}}function nx(r,n,i,o){switch(t2(n)){case 1:var a=tK;break;case 4:a=tJ;break;default:a=tQ}i=a.bind(null,n,i,r),a=void 0,eK&&("touchstart"===n||"touchmove"===n||"wheel"===n)&&(a=!0),o?void 0!==a?r.addEventListener(n,i,{capture:!0,passive:a}):r.addEventListener(n,i,!0):void 0!==a?r.addEventListener(n,i,{passive:a}):r.addEventListener(n,i,!1)}function nw(r,n,i,o,a){var s=o;if(0==(1&n)&&0==(2&n)&&null!==o)e:for(;;){if(null===o)return;var l=o.tag;if(3===l||4===l){var u=o.stateNode.containerInfo;if(u===a||8===u.nodeType&&u.parentNode===a)break;if(4===l)for(l=o.return;null!==l;){var c=l.tag;if((3===c||4===c)&&((c=l.stateNode.containerInfo)===a||8===c.nodeType&&c.parentNode===a))return;l=l.return}for(;null!==u;){if(null===(l=nY(u)))return;if(5===(c=l.tag)||6===c){o=s=l;continue e}u=u.parentNode}}o=o.return}eX(function(){var o=s,a=eN(i),l=[];e:{var u=nl.get(r);if(void 0!==u){var c=ro,h=r;switch(r){case"keypress":if(0===t8(i))break e;case"keydown":case"keyup":c=rb;break;case"focusin":h="focus",c=rh;break;case"focusout":h="blur",c=rh;break;case"beforeblur":case"afterblur":c=rh;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=rw;break;case ni:case no:case na:c=rd;break;case ns:c=rE;break;case"scroll":c=rs;break;case"wheel":c=rC;break;case"copy":case"cut":case"paste":c=rf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=rx}var d=0!=(4&n),f=!d&&"scroll"===r,p=d?null!==u?u+"Capture":null:u;d=[];for(var m,g=o;null!==g;){var y=(m=g).stateNode;if(5===m.tag&&null!==y&&(m=y,null!==p&&null!=(y=eY(g,p))&&d.push(nE(g,y,m))),f)break;g=g.return}0<d.length&&(u=new c(u,h,null,i,a),l.push({event:u,listeners:d}))}}if(0==(7&n)){if(u="mouseover"===r||"pointerover"===r,c="mouseout"===r||"pointerout"===r,!(u&&i!==eB&&(h=i.relatedTarget||i.fromElement)&&(nY(h)||h[nZ]))&&(c||u)&&(u=a.window===a?a:(u=a.ownerDocument)?u.defaultView||u.parentWindow:window,c?(h=i.relatedTarget||i.toElement,c=o,null!==(h=h?nY(h):null)&&(f=e6(h),h!==f||5!==h.tag&&6!==h.tag)&&(h=null)):(c=null,h=o),c!==h)){if(d=ru,y="onMouseLeave",p="onMouseEnter",g="mouse",("pointerout"===r||"pointerover"===r)&&(d=rx,y="onPointerLeave",p="onPointerEnter",g="pointer"),f=null==c?u:nJ(c),m=null==h?u:nJ(h),(u=new d(y,g+"leave",c,i,a)).target=f,u.relatedTarget=m,y=null,nY(a)===o&&((d=new d(p,g+"enter",h,i,a)).target=m,d.relatedTarget=f,y=d),f=y,c&&h)t:{for(d=c,p=h,g=0,m=d;m;m=nS(m))g++;for(m=0,y=p;y;y=nS(y))m++;for(;0<g-m;)d=nS(d),g--;for(;0<m-g;)p=nS(p),m--;for(;g--;){if(d===p||null!==p&&d===p.alternate)break t;d=nS(d),p=nS(p)}d=null}else d=null;null!==c&&nT(l,u,c,d,!1),null!==h&&null!==f&&nT(l,f,h,d,!0)}e:{if("select"===(c=(u=o?nJ(o):window).nodeName&&u.nodeName.toLowerCase())||"input"===c&&"file"===u.type)var _,v=rV;else if(rD(u)){if(rU)v=rY;else{v=rW;var b=rG}}else(c=u.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(v=rX);if(v&&(v=v(r,o))){rR(l,v,i,a);break e}b&&b(r,u,o),"focusout"===r&&(b=u._wrapperState)&&b.controlled&&"number"===u.type&&ey(u,"number",u.value)}switch(b=o?nJ(o):window,r){case"focusin":(rD(b)||"true"===b.contentEditable)&&(r3=b,r5=o,r6=null);break;case"focusout":r6=r5=r3=null;break;case"mousedown":r8=!0;break;case"contextmenu":case"mouseup":case"dragend":r8=!1,r9(l,i,a);break;case"selectionchange":if(r4)break;case"keydown":case"keyup":r9(l,i,a)}if(rT)t:{switch(r){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else rP?rA(r,i)&&(x="onCompositionEnd"):"keydown"===r&&229===i.keyCode&&(x="onCompositionStart");x&&(rI&&"ko"!==i.locale&&(rP||"onCompositionStart"!==x?"onCompositionEnd"===x&&rP&&(_=t6()):(t3="value"in(t4=a)?t4.value:t4.textContent,rP=!0)),0<(b=nC(o,x)).length&&(x=new rp(x,r,null,i,a),l.push({event:x,listeners:b}),_?x.data=_:null!==(_=rz(i))&&(x.data=_))),(_=rk?function(r,n){switch(r){case"compositionend":return rz(n);case"keypress":if(32!==n.which)return null;return rL=!0," ";case"textInput":return" "===(r=n.data)&&rL?null:r;default:return null}}(r,i):function(r,n){if(rP)return"compositionend"===r||!rT&&rA(r,n)?(r=t6(),t5=t3=t4=null,rP=!1,r):null;switch(r){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return rI&&"ko"!==n.locale?null:n.data}}(r,i))&&0<(o=nC(o,"onBeforeInput")).length&&(a=new rp("onBeforeInput","beforeinput",null,i,a),l.push({event:a,listeners:o}),a.data=_)}ng(l,n)})}function nE(r,n,i){return{instance:r,listener:n,currentTarget:i}}function nC(r,n){for(var i=n+"Capture",o=[];null!==r;){var a=r,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=eY(r,i))&&o.unshift(nE(r,s,a)),null!=(s=eY(r,n))&&o.push(nE(r,s,a))),r=r.return}return o}function nS(r){if(null===r)return null;do r=r.return;while(r&&5!==r.tag)return r||null}function nT(r,n,i,o,a){for(var s=n._reactName,l=[];null!==i&&i!==o;){var u=i,c=u.alternate,h=u.stateNode;if(null!==c&&c===o)break;5===u.tag&&null!==h&&(u=h,a?null!=(c=eY(i,s))&&l.unshift(nE(i,c,u)):a||null!=(c=eY(i,s))&&l.push(nE(i,c,u))),i=i.return}0!==l.length&&r.push({event:n,listeners:l})}var nM=/\r\n?/g,nk=/\u0000|\uFFFD/g;function nI(r){return("string"==typeof r?r:""+r).replace(nM,"\n").replace(nk,"")}function nL(r,n,i){if(n=nI(n),nI(r)!==n&&i)throw Error(f(425))}function nA(){}var nz=null,nP=null;function nO(r,n){return"textarea"===r||"noscript"===r||"string"==typeof n.children||"number"==typeof n.children||"object"==typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var nD="function"==typeof setTimeout?setTimeout:void 0,nR="function"==typeof clearTimeout?clearTimeout:void 0,nF="function"==typeof Promise?Promise:void 0,nB="function"==typeof queueMicrotask?queueMicrotask:void 0!==nF?function(r){return nF.resolve(null).then(r).catch(nN)}:nD;function nN(r){setTimeout(function(){throw r})}function nj(r,n){var i=n,o=0;do{var a=i.nextSibling;if(r.removeChild(i),a&&8===a.nodeType){if("/$"===(i=a.data)){if(0===o){r.removeChild(a),tW(n);return}o--}else"$"!==i&&"$?"!==i&&"$!"!==i||o++}i=a}while(i)tW(n)}function nV(r){for(;null!=r;r=r.nextSibling){var n=r.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=r.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return r}function nU(r){r=r.previousSibling;for(var n=0;r;){if(8===r.nodeType){var i=r.data;if("$"===i||"$!"===i||"$?"===i){if(0===n)return r;n--}else"/$"===i&&n++}r=r.previousSibling}return null}var nq=Math.random().toString(36).slice(2),n$="__reactFiber$"+nq,nH="__reactProps$"+nq,nZ="__reactContainer$"+nq,nG="__reactEvents$"+nq,nW="__reactListeners$"+nq,nX="__reactHandles$"+nq;function nY(r){var n=r[n$];if(n)return n;for(var i=r.parentNode;i;){if(n=i[nZ]||i[n$]){if(i=n.alternate,null!==n.child||null!==i&&null!==i.child)for(r=nU(r);null!==r;){if(i=r[n$])return i;r=nU(r)}return n}i=(r=i).parentNode}return null}function nK(r){return(r=r[n$]||r[nZ])&&(5===r.tag||6===r.tag||13===r.tag||3===r.tag)?r:null}function nJ(r){if(5===r.tag||6===r.tag)return r.stateNode;throw Error(f(33))}function nQ(r){return r[nH]||null}var n0=[],n1=-1;function n2(r){return{current:r}}function n4(r){0>n1||(r.current=n0[n1],n0[n1]=null,n1--)}function n3(r,n){n0[++n1]=r.current,r.current=n}var n5={},n6=n2(n5),n8=n2(!1),n9=n5;function n7(r,n){var i=r.type.contextTypes;if(!i)return n5;var o=r.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===n)return o.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in i)s[a]=n[a];return o&&((r=r.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=s),s}function ie(r){return null!=(r=r.childContextTypes)}function it(){n4(n8),n4(n6)}function ir(r,n,i){if(n6.current!==n5)throw Error(f(168));n3(n6,n),n3(n8,i)}function ii(r,n,i){var o=r.stateNode;if(n=n.childContextTypes,"function"!=typeof o.getChildContext)return i;for(var a in o=o.getChildContext())if(!(a in n))throw Error(f(108,function(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=(r=n.render).displayName||r.name||"",n.displayName||(""!==r?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function r(n){if(null==n)return null;if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n;switch(n){case A:return"Fragment";case L:return"Portal";case P:return"Profiler";case z:return"StrictMode";case F:return"Suspense";case B:return"SuspenseList"}if("object"==typeof n)switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case O:return(n._context.displayName||"Context")+".Provider";case R:var i=n.render;return(n=n.displayName)||(n=""!==(n=i.displayName||i.name||"")?"ForwardRef("+n+")":"ForwardRef"),n;case N:return null!==(i=n.displayName||null)?i:r(n.type)||"Memo";case j:i=n._payload,n=n._init;try{return r(n(i))}catch(r){}}return null}(n);case 8:return n===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n}return null}(r)||"Unknown",a));return en({},i,o)}function io(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||n5,n9=n6.current,n3(n6,r),n3(n8,n8.current),!0}function ia(r,n,i){var o=r.stateNode;if(!o)throw Error(f(169));i?(r=ii(r,n,n9),o.__reactInternalMemoizedMergedChildContext=r,n4(n8),n4(n6),n3(n6,r)):n4(n8),n3(n8,i)}var is=null,il=!1,iu=!1;function ic(r){null===is?is=[r]:is.push(r)}function ih(){if(!iu&&null!==is){iu=!0;var r=0,n=tS;try{var i=is;for(tS=1;r<i.length;r++){var o=i[r];do o=o(!0);while(null!==o)}is=null,il=!1}catch(n){throw null!==is&&(is=is.slice(r+1)),te(ta,ih),n}finally{tS=n,iu=!1}}return null}var id=[],ip=0,im=null,ig=0,iy=[],i_=0,iv=null,ib=1,ix="";function iw(r,n){id[ip++]=ig,id[ip++]=im,im=r,ig=n}function iE(r,n,i){iy[i_++]=ib,iy[i_++]=ix,iy[i_++]=iv,iv=r;var o=ib;r=ix;var a=32-tf(o)-1;o&=~(1<<a),i+=1;var s=32-tf(n)+a;if(30<s){var l=a-a%5;s=(o&(1<<l)-1).toString(32),o>>=l,a-=l,ib=1<<32-tf(n)+a|i<<a|o,ix=s+r}else ib=1<<s|i<<a|o,ix=r}function iC(r){null!==r.return&&(iw(r,1),iE(r,1,0))}function iS(r){for(;r===im;)im=id[--ip],id[ip]=null,ig=id[--ip],id[ip]=null;for(;r===iv;)iv=iy[--i_],iy[i_]=null,ix=iy[--i_],iy[i_]=null,ib=iy[--i_],iy[i_]=null}var iT=null,iM=null,ik=!1,iI=null;function iL(r,n){var i=le(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=r,null===(n=r.deletions)?(r.deletions=[i],r.flags|=16):n.push(i)}function iA(r,n){switch(r.tag){case 5:var i=r.type;return null!==(n=1!==n.nodeType||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(r.stateNode=n,iT=r,iM=nV(n.firstChild),!0);case 6:return null!==(n=""===r.pendingProps||3!==n.nodeType?null:n)&&(r.stateNode=n,iT=r,iM=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(i=null!==iv?{id:ib,overflow:ix}:null,r.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},(i=le(18,null,null,0)).stateNode=n,i.return=r,r.child=i,iT=r,iM=null,!0);default:return!1}}function iz(r){return 0!=(1&r.mode)&&0==(128&r.flags)}function iP(r){if(ik){var n=iM;if(n){var i=n;if(!iA(r,n)){if(iz(r))throw Error(f(418));n=nV(i.nextSibling);var o=iT;n&&iA(r,n)?iL(o,i):(r.flags=-4097&r.flags|2,ik=!1,iT=r)}}else{if(iz(r))throw Error(f(418));r.flags=-4097&r.flags|2,ik=!1,iT=r}}}function iO(r){for(r=r.return;null!==r&&5!==r.tag&&3!==r.tag&&13!==r.tag;)r=r.return;iT=r}function iD(r){if(r!==iT)return!1;if(!ik)return iO(r),ik=!0,!1;if((n=3!==r.tag)&&!(n=5!==r.tag)&&(n="head"!==(n=r.type)&&"body"!==n&&!nO(r.type,r.memoizedProps)),n&&(n=iM)){if(iz(r))throw iR(),Error(f(418));for(;n;)iL(r,n),n=nV(n.nextSibling)}if(iO(r),13===r.tag){if(!(r=null!==(r=r.memoizedState)?r.dehydrated:null))throw Error(f(317));e:{for(n=0,r=r.nextSibling;r;){if(8===r.nodeType){var n,i=r.data;if("/$"===i){if(0===n){iM=nV(r.nextSibling);break e}n--}else"$"!==i&&"$!"!==i&&"$?"!==i||n++}r=r.nextSibling}iM=null}}else iM=iT?nV(r.stateNode.nextSibling):null;return!0}function iR(){for(var r=iM;r;)r=nV(r.nextSibling)}function iF(){iM=iT=null,ik=!1}function iB(r){null===iI?iI=[r]:iI.push(r)}var iN=k.ReactCurrentBatchConfig;function ij(r,n){if(r&&r.defaultProps)for(var i in n=en({},n),r=r.defaultProps)void 0===n[i]&&(n[i]=r[i]);return n}var iV=n2(null),iU=null,iq=null,i$=null;function iH(){i$=iq=iU=null}function iZ(r){var n=iV.current;n4(iV),r._currentValue=n}function iG(r,n,i){for(;null!==r;){var o=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,null!==o&&(o.childLanes|=n)):null!==o&&(o.childLanes&n)!==n&&(o.childLanes|=n),r===i)break;r=r.return}}function iW(r,n){iU=r,i$=iq=null,null!==(r=r.dependencies)&&null!==r.firstContext&&(0!=(r.lanes&n)&&(aE=!0),r.firstContext=null)}function iX(r){var n=r._currentValue;if(i$!==r){if(r={context:r,memoizedValue:n,next:null},null===iq){if(null===iU)throw Error(f(308));iq=r,iU.dependencies={lanes:0,firstContext:r}}else iq=iq.next=r}return n}var iY=null;function iK(r){null===iY?iY=[r]:iY.push(r)}function iJ(r,n,i,o){var a=n.interleaved;return null===a?(i.next=i,iK(n)):(i.next=a.next,a.next=i),n.interleaved=i,iQ(r,o)}function iQ(r,n){r.lanes|=n;var i=r.alternate;for(null!==i&&(i.lanes|=n),i=r,r=r.return;null!==r;)r.childLanes|=n,null!==(i=r.alternate)&&(i.childLanes|=n),i=r,r=r.return;return 3===i.tag?i.stateNode:null}var i0=!1;function i1(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i2(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function i4(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function i3(r,n,i){var o=r.updateQueue;if(null===o)return null;if(o=o.shared,0!=(2&sc)){var a=o.pending;return null===a?n.next=n:(n.next=a.next,a.next=n),o.pending=n,iQ(r,i)}return null===(a=o.interleaved)?(n.next=n,iK(o)):(n.next=a.next,a.next=n),o.interleaved=n,iQ(r,i)}function i5(r,n,i){if(null!==(n=n.updateQueue)&&(n=n.shared,0!=(4194240&i))){var o=n.lanes;o&=r.pendingLanes,i|=o,n.lanes=i,tC(r,i)}}function i6(r,n){var i=r.updateQueue,o=r.alternate;if(null!==o&&i===(o=o.updateQueue)){var a=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var l={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===s?a=s=l:s=s.next=l,i=i.next}while(null!==i)null===s?a=s=n:s=s.next=n}else a=s=n;i={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:o.shared,effects:o.effects},r.updateQueue=i;return}null===(r=i.lastBaseUpdate)?i.firstBaseUpdate=n:r.next=n,i.lastBaseUpdate=n}function i8(r,n,i,o){var a=r.updateQueue;i0=!1;var s=a.firstBaseUpdate,l=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,h=c.next;c.next=null,null===l?s=h:l.next=h,l=c;var d=r.alternate;null!==d&&(u=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===u?d.firstBaseUpdate=h:u.next=h,d.lastBaseUpdate=c)}if(null!==s){var f=a.baseState;for(l=0,d=h=c=null,u=s;;){var p=u.lane,m=u.eventTime;if((o&p)===p){null!==d&&(d=d.next={eventTime:m,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var g=r,y=u;switch(p=n,m=i,y.tag){case 1:if("function"==typeof(g=y.payload)){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(p="function"==typeof(g=y.payload)?g.call(m,f,p):g))break e;f=en({},f,p);break e;case 2:i0=!0}}null!==u.callback&&0!==u.lane&&(r.flags|=64,null===(p=a.effects)?a.effects=[u]:p.push(u))}else m={eventTime:m,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===d?(h=d=m,c=f):d=d.next=m,l|=p;if(null===(u=u.next)){if(null===(u=a.shared.pending))break;u=(p=u).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===d&&(c=f),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=d,null!==(n=a.shared.interleaved)){a=n;do l|=a.lane,a=a.next;while(a!==n)}else null===s&&(a.shared.lanes=0);s_|=l,r.lanes=l,r.memoizedState=f}}function i9(r,n,i){if(r=n.effects,n.effects=null,null!==r)for(n=0;n<r.length;n++){var o=r[n],a=o.callback;if(null!==a){if(o.callback=null,o=i,"function"!=typeof a)throw Error(f(191,a));a.call(o)}}}var i7=(new h.Component).refs;function oe(r,n,i,o){i=null==(i=i(o,n=r.memoizedState))?n:en({},n,i),r.memoizedState=i,0===r.lanes&&(r.updateQueue.baseState=i)}var ot={isMounted:function(r){return!!(r=r._reactInternals)&&e6(r)===r},enqueueSetState:function(r,n,i){r=r._reactInternals;var o=sR(),a=sF(r),s=i4(o,a);s.payload=n,null!=i&&(s.callback=i),null!==(n=i3(r,s,a))&&(sB(n,r,a,o),i5(n,r,a))},enqueueReplaceState:function(r,n,i){r=r._reactInternals;var o=sR(),a=sF(r),s=i4(o,a);s.tag=1,s.payload=n,null!=i&&(s.callback=i),null!==(n=i3(r,s,a))&&(sB(n,r,a,o),i5(n,r,a))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var i=sR(),o=sF(r),a=i4(i,o);a.tag=2,null!=n&&(a.callback=n),null!==(n=i3(r,a,o))&&(sB(n,r,o,i),i5(n,r,o))}};function or(r,n,i,o,a,s,l){return"function"==typeof(r=r.stateNode).shouldComponentUpdate?r.shouldComponentUpdate(o,s,l):!n.prototype||!n.prototype.isPureReactComponent||!rJ(i,o)||!rJ(a,s)}function on(r,n,i){var o=!1,a=n5,s=n.contextType;return"object"==typeof s&&null!==s?s=iX(s):(a=ie(n)?n9:n6.current,s=(o=null!=(o=n.contextTypes))?n7(r,a):n5),n=new n(i,s),r.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=ot,r.stateNode=n,n._reactInternals=r,o&&((r=r.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=s),n}function oi(r,n,i,o){r=n.state,"function"==typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(i,o),"function"==typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==r&&ot.enqueueReplaceState(n,n.state,null)}function oo(r,n,i,o){var a=r.stateNode;a.props=i,a.state=r.memoizedState,a.refs=i7,i1(r);var s=n.contextType;"object"==typeof s&&null!==s?a.context=iX(s):(s=ie(n)?n9:n6.current,a.context=n7(r,s)),a.state=r.memoizedState,"function"==typeof(s=n.getDerivedStateFromProps)&&(oe(r,n,s,i),a.state=r.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(n=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),n!==a.state&&ot.enqueueReplaceState(a,a.state,null),i8(r,i,a,o),a.state=r.memoizedState),"function"==typeof a.componentDidMount&&(r.flags|=4194308)}function oa(r,n,i){if(null!==(r=i.ref)&&"function"!=typeof r&&"object"!=typeof r){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(f(309));var o=i.stateNode}if(!o)throw Error(f(147,r));var a=o,s=""+r;return null!==n&&null!==n.ref&&"function"==typeof n.ref&&n.ref._stringRef===s?n.ref:((n=function(r){var n=a.refs;n===i7&&(n=a.refs={}),null===r?delete n[s]:n[s]=r})._stringRef=s,n)}if("string"!=typeof r)throw Error(f(284));if(!i._owner)throw Error(f(290,r))}return r}function os(r,n){throw Error(f(31,"[object Object]"===(r=Object.prototype.toString.call(n))?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function ol(r){return(0,r._init)(r._payload)}function ou(r){function n(n,i){if(r){var o=n.deletions;null===o?(n.deletions=[i],n.flags|=16):o.push(i)}}function i(i,o){if(!r)return null;for(;null!==o;)n(i,o),o=o.sibling;return null}function o(r,n){for(r=new Map;null!==n;)null!==n.key?r.set(n.key,n):r.set(n.index,n),n=n.sibling;return r}function a(r,n){return(r=lr(r,n)).index=0,r.sibling=null,r}function s(n,i,o){return(n.index=o,r)?null!==(o=n.alternate)?(o=o.index)<i?(n.flags|=2,i):o:(n.flags|=2,i):(n.flags|=1048576,i)}function l(n){return r&&null===n.alternate&&(n.flags|=2),n}function u(r,n,i,o){return null===n||6!==n.tag?(n=la(i,r.mode,o)).return=r:(n=a(n,i)).return=r,n}function c(r,n,i,o){var s=i.type;return s===A?d(r,n,i.props.children,o,i.key):(null!==n&&(n.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===j&&ol(s)===n.type)?(o=a(n,i.props)).ref=oa(r,n,i):(o=ln(i.type,i.key,i.props,null,r.mode,o)).ref=oa(r,n,i),o.return=r,o)}function h(r,n,i,o){return null===n||4!==n.tag||n.stateNode.containerInfo!==i.containerInfo||n.stateNode.implementation!==i.implementation?(n=ls(i,r.mode,o)).return=r:(n=a(n,i.children||[])).return=r,n}function d(r,n,i,o,s){return null===n||7!==n.tag?(n=li(i,r.mode,o,s)).return=r:(n=a(n,i)).return=r,n}function p(r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return(n=la(""+n,r.mode,i)).return=r,n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case I:return(i=ln(n.type,n.key,n.props,null,r.mode,i)).ref=oa(r,null,n),i.return=r,i;case L:return(n=ls(n,r.mode,i)).return=r,n;case j:return p(r,(0,n._init)(n._payload),i)}if(e_(n)||q(n))return(n=li(n,r.mode,i,null)).return=r,n;os(r,n)}return null}function m(r,n,i,o){var a=null!==n?n.key:null;if("string"==typeof i&&""!==i||"number"==typeof i)return null!==a?null:u(r,n,""+i,o);if("object"==typeof i&&null!==i){switch(i.$$typeof){case I:return i.key===a?c(r,n,i,o):null;case L:return i.key===a?h(r,n,i,o):null;case j:return m(r,n,(a=i._init)(i._payload),o)}if(e_(i)||q(i))return null!==a?null:d(r,n,i,o,null);os(r,i)}return null}function g(r,n,i,o,a){if("string"==typeof o&&""!==o||"number"==typeof o)return u(n,r=r.get(i)||null,""+o,a);if("object"==typeof o&&null!==o){switch(o.$$typeof){case I:return c(n,r=r.get(null===o.key?i:o.key)||null,o,a);case L:return h(n,r=r.get(null===o.key?i:o.key)||null,o,a);case j:return g(r,n,i,(0,o._init)(o._payload),a)}if(e_(o)||q(o))return d(n,r=r.get(i)||null,o,a,null);os(n,o)}return null}return function u(c,h,d,y){if("object"==typeof d&&null!==d&&d.type===A&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case I:e:{for(var _=d.key,v=h;null!==v;){if(v.key===_){if((_=d.type)===A){if(7===v.tag){i(c,v.sibling),(h=a(v,d.props.children)).return=c,c=h;break e}}else if(v.elementType===_||"object"==typeof _&&null!==_&&_.$$typeof===j&&ol(_)===v.type){i(c,v.sibling),(h=a(v,d.props)).ref=oa(c,v,d),h.return=c,c=h;break e}i(c,v);break}n(c,v),v=v.sibling}d.type===A?((h=li(d.props.children,c.mode,y,d.key)).return=c,c=h):((y=ln(d.type,d.key,d.props,null,c.mode,y)).ref=oa(c,h,d),y.return=c,c=y)}return l(c);case L:e:{for(v=d.key;null!==h;){if(h.key===v){if(4===h.tag&&h.stateNode.containerInfo===d.containerInfo&&h.stateNode.implementation===d.implementation){i(c,h.sibling),(h=a(h,d.children||[])).return=c,c=h;break e}i(c,h);break}n(c,h),h=h.sibling}(h=ls(d,c.mode,y)).return=c,c=h}return l(c);case j:return u(c,h,(v=d._init)(d._payload),y)}if(e_(d))return function(a,l,u,c){for(var h=null,d=null,f=l,y=l=0,_=null;null!==f&&y<u.length;y++){f.index>y?(_=f,f=null):_=f.sibling;var v=m(a,f,u[y],c);if(null===v){null===f&&(f=_);break}r&&f&&null===v.alternate&&n(a,f),l=s(v,l,y),null===d?h=v:d.sibling=v,d=v,f=_}if(y===u.length)return i(a,f),ik&&iw(a,y),h;if(null===f){for(;y<u.length;y++)null!==(f=p(a,u[y],c))&&(l=s(f,l,y),null===d?h=f:d.sibling=f,d=f);return ik&&iw(a,y),h}for(f=o(a,f);y<u.length;y++)null!==(_=g(f,a,y,u[y],c))&&(r&&null!==_.alternate&&f.delete(null===_.key?y:_.key),l=s(_,l,y),null===d?h=_:d.sibling=_,d=_);return r&&f.forEach(function(r){return n(a,r)}),ik&&iw(a,y),h}(c,h,d,y);if(q(d))return function(a,l,u,c){var h=q(u);if("function"!=typeof h)throw Error(f(150));if(null==(u=h.call(u)))throw Error(f(151));for(var d=h=null,y=l,_=l=0,v=null,b=u.next();null!==y&&!b.done;_++,b=u.next()){y.index>_?(v=y,y=null):v=y.sibling;var x=m(a,y,b.value,c);if(null===x){null===y&&(y=v);break}r&&y&&null===x.alternate&&n(a,y),l=s(x,l,_),null===d?h=x:d.sibling=x,d=x,y=v}if(b.done)return i(a,y),ik&&iw(a,_),h;if(null===y){for(;!b.done;_++,b=u.next())null!==(b=p(a,b.value,c))&&(l=s(b,l,_),null===d?h=b:d.sibling=b,d=b);return ik&&iw(a,_),h}for(y=o(a,y);!b.done;_++,b=u.next())null!==(b=g(y,a,_,b.value,c))&&(r&&null!==b.alternate&&y.delete(null===b.key?_:b.key),l=s(b,l,_),null===d?h=b:d.sibling=b,d=b);return r&&y.forEach(function(r){return n(a,r)}),ik&&iw(a,_),h}(c,h,d,y);os(c,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==h&&6===h.tag?(i(c,h.sibling),(h=a(h,d)).return=c):(i(c,h),(h=la(d,c.mode,y)).return=c),l(c=h)):i(c,h)}}var oc=ou(!0),oh=ou(!1),od={},of=n2(od),op=n2(od),om=n2(od);function og(r){if(r===od)throw Error(f(174));return r}function oy(r,n){switch(n3(om,n),n3(op,r),n3(of,od),r=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:eS(null,"");break;default:n=eS(n=(r=8===r?n.parentNode:n).namespaceURI||null,r=r.tagName)}n4(of),n3(of,n)}function o_(){n4(of),n4(op),n4(om)}function ov(r){og(om.current);var n=og(of.current),i=eS(n,r.type);n!==i&&(n3(op,r),n3(of,i))}function ob(r){op.current===r&&(n4(of),n4(op))}var ox=n2(0);function ow(r){for(var n=r;null!==n;){if(13===n.tag){var i=n.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!=(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===r)break;for(;null===n.sibling;){if(null===n.return||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var oE=[];function oC(){for(var r=0;r<oE.length;r++)oE[r]._workInProgressVersionPrimary=null;oE.length=0}var oS=k.ReactCurrentDispatcher,oT=k.ReactCurrentBatchConfig,oM=0,ok=null,oI=null,oL=null,oA=!1,oz=!1,oP=0,oO=0;function oD(){throw Error(f(321))}function oR(r,n){if(null===n)return!1;for(var i=0;i<n.length&&i<r.length;i++)if(!rK(r[i],n[i]))return!1;return!0}function oF(r,n,i,o,a,s){if(oM=s,ok=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,oS.current=null===r||null===r.memoizedState?ac:ah,r=i(o,a),oz){s=0;do{if(oz=!1,oP=0,25<=s)throw Error(f(301));s+=1,oL=oI=null,n.updateQueue=null,oS.current=ad,r=i(o,a)}while(oz)}if(oS.current=au,n=null!==oI&&null!==oI.next,oM=0,oL=oI=ok=null,oA=!1,n)throw Error(f(300));return r}function oB(){var r=0!==oP;return oP=0,r}function oN(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oL?ok.memoizedState=oL=r:oL=oL.next=r,oL}function oj(){if(null===oI){var r=ok.alternate;r=null!==r?r.memoizedState:null}else r=oI.next;var n=null===oL?ok.memoizedState:oL.next;if(null!==n)oL=n,oI=r;else{if(null===r)throw Error(f(310));r={memoizedState:(oI=r).memoizedState,baseState:oI.baseState,baseQueue:oI.baseQueue,queue:oI.queue,next:null},null===oL?ok.memoizedState=oL=r:oL=oL.next=r}return oL}function oV(r,n){return"function"==typeof n?n(r):n}function oU(r){var n=oj(),i=n.queue;if(null===i)throw Error(f(311));i.lastRenderedReducer=r;var o=oI,a=o.baseQueue,s=i.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}o.baseQueue=a=s,i.pending=null}if(null!==a){s=a.next,o=o.baseState;var u=l=null,c=null,h=s;do{var d=h.lane;if((oM&d)===d)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),o=h.hasEagerState?h.eagerState:r(o,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(u=c=p,l=o):c=c.next=p,ok.lanes|=d,s_|=d}h=h.next}while(null!==h&&h!==s)null===c?l=o:c.next=u,rK(o,n.memoizedState)||(aE=!0),n.memoizedState=o,n.baseState=l,n.baseQueue=c,i.lastRenderedState=o}if(null!==(r=i.interleaved)){a=r;do s=a.lane,ok.lanes|=s,s_|=s,a=a.next;while(a!==r)}else null===a&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function oq(r){var n=oj(),i=n.queue;if(null===i)throw Error(f(311));i.lastRenderedReducer=r;var o=i.dispatch,a=i.pending,s=n.memoizedState;if(null!==a){i.pending=null;var l=a=a.next;do s=r(s,l.action),l=l.next;while(l!==a)rK(s,n.memoizedState)||(aE=!0),n.memoizedState=s,null===n.baseQueue&&(n.baseState=s),i.lastRenderedState=s}return[s,o]}function o$(){}function oH(r,n){var i=ok,o=oj(),a=n(),s=!rK(o.memoizedState,a);if(s&&(o.memoizedState=a,aE=!0),o=o.queue,o4(oW.bind(null,i,o,r),[r]),o.getSnapshot!==n||s||null!==oL&&1&oL.memoizedState.tag){if(i.flags|=2048,oJ(9,oG.bind(null,i,o,a,n),void 0,null),null===sh)throw Error(f(349));0!=(30&oM)||oZ(i,n,a)}return a}function oZ(r,n,i){r.flags|=16384,r={getSnapshot:n,value:i},null===(n=ok.updateQueue)?(n={lastEffect:null,stores:null},ok.updateQueue=n,n.stores=[r]):null===(i=n.stores)?n.stores=[r]:i.push(r)}function oG(r,n,i,o){n.value=i,n.getSnapshot=o,oX(n)&&oY(r)}function oW(r,n,i){return i(function(){oX(n)&&oY(r)})}function oX(r){var n=r.getSnapshot;r=r.value;try{var i=n();return!rK(r,i)}catch(r){return!0}}function oY(r){var n=iQ(r,1);null!==n&&sB(n,r,1,-1)}function oK(r){var n=oN();return"function"==typeof r&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oV,lastRenderedState:r},n.queue=r,r=r.dispatch=ao.bind(null,ok,r),[n.memoizedState,r]}function oJ(r,n,i,o){return r={tag:r,create:n,destroy:i,deps:o,next:null},null===(n=ok.updateQueue)?(n={lastEffect:null,stores:null},ok.updateQueue=n,n.lastEffect=r.next=r):null===(i=n.lastEffect)?n.lastEffect=r.next=r:(o=i.next,i.next=r,r.next=o,n.lastEffect=r),r}function oQ(){return oj().memoizedState}function o0(r,n,i,o){var a=oN();ok.flags|=r,a.memoizedState=oJ(1|n,i,void 0,void 0===o?null:o)}function o1(r,n,i,o){var a=oj();o=void 0===o?null:o;var s=void 0;if(null!==oI){var l=oI.memoizedState;if(s=l.destroy,null!==o&&oR(o,l.deps)){a.memoizedState=oJ(n,i,s,o);return}}ok.flags|=r,a.memoizedState=oJ(1|n,i,s,o)}function o2(r,n){return o0(8390656,8,r,n)}function o4(r,n){return o1(2048,8,r,n)}function o3(r,n){return o1(4,2,r,n)}function o5(r,n){return o1(4,4,r,n)}function o6(r,n){return"function"==typeof n?(n(r=r()),function(){n(null)}):null!=n?(r=r(),n.current=r,function(){n.current=null}):void 0}function o8(r,n,i){return i=null!=i?i.concat([r]):null,o1(4,4,o6.bind(null,n,r),i)}function o9(){}function o7(r,n){var i=oj();n=void 0===n?null:n;var o=i.memoizedState;return null!==o&&null!==n&&oR(n,o[1])?o[0]:(i.memoizedState=[r,n],r)}function ae(r,n){var i=oj();n=void 0===n?null:n;var o=i.memoizedState;return null!==o&&null!==n&&oR(n,o[1])?o[0]:(r=r(),i.memoizedState=[r,n],r)}function at(r,n,i){return 0==(21&oM)?(r.baseState&&(r.baseState=!1,aE=!0),r.memoizedState=i):(rK(i,n)||(i=tx(),ok.lanes|=i,s_|=i,r.baseState=!0),n)}function ar(r,n){var i=tS;tS=0!==i&&4>i?i:4,r(!0);var o=oT.transition;oT.transition={};try{r(!1),n()}finally{tS=i,oT.transition=o}}function an(){return oj().memoizedState}function ai(r,n,i){var o=sF(r);i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},aa(r)?as(n,i):null!==(i=iJ(r,n,i,o))&&(sB(i,r,o,sR()),al(i,n,o))}function ao(r,n,i){var o=sF(r),a={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(aa(r))as(n,a);else{var s=r.alternate;if(0===r.lanes&&(null===s||0===s.lanes)&&null!==(s=n.lastRenderedReducer))try{var l=n.lastRenderedState,u=s(l,i);if(a.hasEagerState=!0,a.eagerState=u,rK(u,l)){var c=n.interleaved;null===c?(a.next=a,iK(n)):(a.next=c.next,c.next=a),n.interleaved=a;return}}catch(r){}finally{}null!==(i=iJ(r,n,a,o))&&(sB(i,r,o,a=sR()),al(i,n,o))}}function aa(r){var n=r.alternate;return r===ok||null!==n&&n===ok}function as(r,n){oz=oA=!0;var i=r.pending;null===i?n.next=n:(n.next=i.next,i.next=n),r.pending=n}function al(r,n,i){if(0!=(4194240&i)){var o=n.lanes;o&=r.pendingLanes,i|=o,n.lanes=i,tC(r,i)}}var au={readContext:iX,useCallback:oD,useContext:oD,useEffect:oD,useImperativeHandle:oD,useInsertionEffect:oD,useLayoutEffect:oD,useMemo:oD,useReducer:oD,useRef:oD,useState:oD,useDebugValue:oD,useDeferredValue:oD,useTransition:oD,useMutableSource:oD,useSyncExternalStore:oD,useId:oD,unstable_isNewReconciler:!1},ac={readContext:iX,useCallback:function(r,n){return oN().memoizedState=[r,void 0===n?null:n],r},useContext:iX,useEffect:o2,useImperativeHandle:function(r,n,i){return i=null!=i?i.concat([r]):null,o0(4194308,4,o6.bind(null,n,r),i)},useLayoutEffect:function(r,n){return o0(4194308,4,r,n)},useInsertionEffect:function(r,n){return o0(4,2,r,n)},useMemo:function(r,n){var i=oN();return n=void 0===n?null:n,r=r(),i.memoizedState=[r,n],r},useReducer:function(r,n,i){var o=oN();return n=void 0!==i?i(n):n,o.memoizedState=o.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},o.queue=r,r=r.dispatch=ai.bind(null,ok,r),[o.memoizedState,r]},useRef:function(r){return r={current:r},oN().memoizedState=r},useState:oK,useDebugValue:o9,useDeferredValue:function(r){return oN().memoizedState=r},useTransition:function(){var r=oK(!1),n=r[0];return r=ar.bind(null,r[1]),oN().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,i){var o=ok,a=oN();if(ik){if(void 0===i)throw Error(f(407));i=i()}else{if(i=n(),null===sh)throw Error(f(349));0!=(30&oM)||oZ(o,n,i)}a.memoizedState=i;var s={value:i,getSnapshot:n};return a.queue=s,o2(oW.bind(null,o,s,r),[r]),o.flags|=2048,oJ(9,oG.bind(null,o,s,i,n),void 0,null),i},useId:function(){var r=oN(),n=sh.identifierPrefix;if(ik){var i=ix,o=ib;n=":"+n+"R"+(i=(o&~(1<<32-tf(o)-1)).toString(32)+i),0<(i=oP++)&&(n+="H"+i.toString(32)),n+=":"}else n=":"+n+"r"+(i=oO++).toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},ah={readContext:iX,useCallback:o7,useContext:iX,useEffect:o4,useImperativeHandle:o8,useInsertionEffect:o3,useLayoutEffect:o5,useMemo:ae,useReducer:oU,useRef:oQ,useState:function(){return oU(oV)},useDebugValue:o9,useDeferredValue:function(r){return at(oj(),oI.memoizedState,r)},useTransition:function(){return[oU(oV)[0],oj().memoizedState]},useMutableSource:o$,useSyncExternalStore:oH,useId:an,unstable_isNewReconciler:!1},ad={readContext:iX,useCallback:o7,useContext:iX,useEffect:o4,useImperativeHandle:o8,useInsertionEffect:o3,useLayoutEffect:o5,useMemo:ae,useReducer:oq,useRef:oQ,useState:function(){return oq(oV)},useDebugValue:o9,useDeferredValue:function(r){var n=oj();return null===oI?n.memoizedState=r:at(n,oI.memoizedState,r)},useTransition:function(){return[oq(oV)[0],oj().memoizedState]},useMutableSource:o$,useSyncExternalStore:oH,useId:an,unstable_isNewReconciler:!1};function af(r,n){try{var i="",o=n;do i+=function(r){switch(r.tag){case 5:return ei(r.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return r=ea(r.type,!1);case 11:return r=ea(r.type.render,!1);case 1:return r=ea(r.type,!0);default:return""}}(o),o=o.return;while(o)var a=i}catch(r){a="\nError generating stack: "+r.message+"\n"+r.stack}return{value:r,source:n,stack:a,digest:null}}function ap(r,n,i){return{value:r,source:null,stack:null!=i?i:null,digest:null!=n?n:null}}function am(r,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var ag="function"==typeof WeakMap?WeakMap:Map;function ay(r,n,i){(i=i4(-1,i)).tag=3,i.payload={element:null};var o=n.value;return i.callback=function(){sT||(sT=!0,sM=o),am(r,n)},i}function a_(r,n,i){(i=i4(-1,i)).tag=3;var o=r.type.getDerivedStateFromError;if("function"==typeof o){var a=n.value;i.payload=function(){return o(a)},i.callback=function(){am(r,n)}}var s=r.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(i.callback=function(){am(r,n),"function"!=typeof o&&(null===sk?sk=new Set([this]):sk.add(this));var i=n.stack;this.componentDidCatch(n.value,{componentStack:null!==i?i:""})}),i}function av(r,n,i){var o=r.pingCache;if(null===o){o=r.pingCache=new ag;var a=new Set;o.set(n,a)}else void 0===(a=o.get(n))&&(a=new Set,o.set(n,a));a.has(i)||(a.add(i),r=s5.bind(null,r,n,i),n.then(r,r))}function ab(r){do{var n;if((n=13===r.tag)&&(n=null===(n=r.memoizedState)||null!==n.dehydrated),n)return r;r=r.return}while(null!==r)return null}function ax(r,n,i,o,a){return 0==(1&r.mode)?r===n?r.flags|=65536:(r.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((n=i4(-1,1)).tag=2,i3(i,n,1))),i.lanes|=1):(r.flags|=65536,r.lanes=a),r}var aw=k.ReactCurrentOwner,aE=!1;function aC(r,n,i,o){n.child=null===r?oh(n,null,i,o):oc(n,r.child,i,o)}function aS(r,n,i,o,a){i=i.render;var s=n.ref;return(iW(n,a),o=oF(r,n,i,o,s,a),i=oB(),null===r||aE)?(ik&&i&&iC(n),n.flags|=1,aC(r,n,o,a),n.child):(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~a,a$(r,n,a))}function aT(r,n,i,o,a){if(null===r){var s=i.type;return"function"!=typeof s||lt(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?((r=ln(i.type,null,o,n,n.mode,a)).ref=n.ref,r.return=n,n.child=r):(n.tag=15,n.type=s,aM(r,n,s,o,a))}if(s=r.child,0==(r.lanes&a)){var l=s.memoizedProps;if((i=null!==(i=i.compare)?i:rJ)(l,o)&&r.ref===n.ref)return a$(r,n,a)}return n.flags|=1,(r=lr(s,o)).ref=n.ref,r.return=n,n.child=r}function aM(r,n,i,o,a){if(null!==r){var s=r.memoizedProps;if(rJ(s,o)&&r.ref===n.ref){if(aE=!1,n.pendingProps=o=s,0==(r.lanes&a))return n.lanes=r.lanes,a$(r,n,a);0!=(131072&r.flags)&&(aE=!0)}}return aL(r,n,i,o,a)}function ak(r,n,i){var o=n.pendingProps,a=o.children,s=null!==r?r.memoizedState:null;if("hidden"===o.mode){if(0==(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},n3(sm,sp),sp|=i;else{if(0==(1073741824&i))return r=null!==s?s.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,n3(sm,sp),sp|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==s?s.baseLanes:i,n3(sm,sp),sp|=o}}else null!==s?(o=s.baseLanes|i,n.memoizedState=null):o=i,n3(sm,sp),sp|=o;return aC(r,n,a,i),n.child}function aI(r,n){var i=n.ref;(null===r&&null!==i||null!==r&&r.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function aL(r,n,i,o,a){var s=ie(i)?n9:n6.current;return(s=n7(n,s),iW(n,a),i=oF(r,n,i,o,s,a),o=oB(),null===r||aE)?(ik&&o&&iC(n),n.flags|=1,aC(r,n,i,a),n.child):(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~a,a$(r,n,a))}function aA(r,n,i,o,a){if(ie(i)){var s=!0;io(n)}else s=!1;if(iW(n,a),null===n.stateNode)aq(r,n),on(n,i,o),oo(n,i,o,a),o=!0;else if(null===r){var l=n.stateNode,u=n.memoizedProps;l.props=u;var c=l.context,h=i.contextType;h="object"==typeof h&&null!==h?iX(h):n7(n,h=ie(i)?n9:n6.current);var d=i.getDerivedStateFromProps,f="function"==typeof d||"function"==typeof l.getSnapshotBeforeUpdate;f||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(u!==o||c!==h)&&oi(n,l,o,h),i0=!1;var p=n.memoizedState;l.state=p,i8(n,o,l,a),c=n.memoizedState,u!==o||p!==c||n8.current||i0?("function"==typeof d&&(oe(n,i,d,o),c=n.memoizedState),(u=i0||or(n,i,u,o,p,c,h))?(f||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||("function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"==typeof l.componentDidMount&&(n.flags|=4194308)):("function"==typeof l.componentDidMount&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=c),l.props=o,l.state=c,l.context=h,o=u):("function"==typeof l.componentDidMount&&(n.flags|=4194308),o=!1)}else{l=n.stateNode,i2(r,n),u=n.memoizedProps,h=n.type===n.elementType?u:ij(n.type,u),l.props=h,f=n.pendingProps,p=l.context,c="object"==typeof(c=i.contextType)&&null!==c?iX(c):n7(n,c=ie(i)?n9:n6.current);var m=i.getDerivedStateFromProps;(d="function"==typeof m||"function"==typeof l.getSnapshotBeforeUpdate)||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(u!==f||p!==c)&&oi(n,l,o,c),i0=!1,p=n.memoizedState,l.state=p,i8(n,o,l,a);var g=n.memoizedState;u!==f||p!==g||n8.current||i0?("function"==typeof m&&(oe(n,i,m,o),g=n.memoizedState),(h=i0||or(n,i,h,o,p,g,c)||!1)?(d||"function"!=typeof l.UNSAFE_componentWillUpdate&&"function"!=typeof l.componentWillUpdate||("function"==typeof l.componentWillUpdate&&l.componentWillUpdate(o,g,c),"function"==typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(o,g,c)),"function"==typeof l.componentDidUpdate&&(n.flags|=4),"function"==typeof l.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!=typeof l.componentDidUpdate||u===r.memoizedProps&&p===r.memoizedState||(n.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||u===r.memoizedProps&&p===r.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=g),l.props=o,l.state=g,l.context=c,o=h):("function"!=typeof l.componentDidUpdate||u===r.memoizedProps&&p===r.memoizedState||(n.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||u===r.memoizedProps&&p===r.memoizedState||(n.flags|=1024),o=!1)}return az(r,n,i,o,s,a)}function az(r,n,i,o,a,s){aI(r,n);var l=0!=(128&n.flags);if(!o&&!l)return a&&ia(n,i,!1),a$(r,n,s);o=n.stateNode,aw.current=n;var u=l&&"function"!=typeof i.getDerivedStateFromError?null:o.render();return n.flags|=1,null!==r&&l?(n.child=oc(n,r.child,null,s),n.child=oc(n,null,u,s)):aC(r,n,u,s),n.memoizedState=o.state,a&&ia(n,i,!0),n.child}function aP(r){var n=r.stateNode;n.pendingContext?ir(r,n.pendingContext,n.pendingContext!==n.context):n.context&&ir(r,n.context,!1),oy(r,n.containerInfo)}function aO(r,n,i,o,a){return iF(),iB(a),n.flags|=256,aC(r,n,i,o),n.child}var aD={dehydrated:null,treeContext:null,retryLane:0};function aR(r){return{baseLanes:r,cachePool:null,transitions:null}}function aF(r,n,i){var o,a=n.pendingProps,s=ox.current,l=!1,u=0!=(128&n.flags);if((o=u)||(o=(null===r||null!==r.memoizedState)&&0!=(2&s)),o?(l=!0,n.flags&=-129):(null===r||null!==r.memoizedState)&&(s|=1),n3(ox,1&s),null===r)return(iP(n),null!==(r=n.memoizedState)&&null!==(r=r.dehydrated))?(0==(1&n.mode)?n.lanes=1:"$!"===r.data?n.lanes=8:n.lanes=1073741824,null):(u=a.children,r=a.fallback,l?(a=n.mode,l=n.child,u={mode:"hidden",children:u},0==(1&a)&&null!==l?(l.childLanes=0,l.pendingProps=u):l=lo(u,a,0,null),r=li(r,a,i,null),l.return=n,r.return=n,l.sibling=r,n.child=l,n.child.memoizedState=aR(i),n.memoizedState=aD,r):aB(n,u));if(null!==(s=r.memoizedState)&&null!==(o=s.dehydrated))return function(r,n,i,o,a,s,l){if(i)return 256&n.flags?(n.flags&=-257,aN(r,n,l,o=ap(Error(f(422))))):null!==n.memoizedState?(n.child=r.child,n.flags|=128,null):(s=o.fallback,a=n.mode,o=lo({mode:"visible",children:o.children},a,0,null),s=li(s,a,l,null),s.flags|=2,o.return=n,s.return=n,o.sibling=s,n.child=o,0!=(1&n.mode)&&oc(n,r.child,null,l),n.child.memoizedState=aR(l),n.memoizedState=aD,s);if(0==(1&n.mode))return aN(r,n,l,null);if("$!"===a.data){if(o=a.nextSibling&&a.nextSibling.dataset)var u=o.dgst;return o=u,aN(r,n,l,o=ap(s=Error(f(419)),o,void 0))}if(u=0!=(l&r.childLanes),aE||u){if(null!==(o=sh)){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(o.suspendedLanes|l))?0:a)&&a!==s.retryLane&&(s.retryLane=a,iQ(r,a),sB(o,r,a,-1))}return sK(),aN(r,n,l,o=ap(Error(f(421))))}return"$?"===a.data?(n.flags|=128,n.child=r.child,n=s8.bind(null,r),a._reactRetry=n,null):(r=s.treeContext,iM=nV(a.nextSibling),iT=n,ik=!0,iI=null,null!==r&&(iy[i_++]=ib,iy[i_++]=ix,iy[i_++]=iv,ib=r.id,ix=r.overflow,iv=n),n=aB(n,o.children),n.flags|=4096,n)}(r,n,u,a,o,s,i);if(l){l=a.fallback,u=n.mode,o=(s=r.child).sibling;var c={mode:"hidden",children:a.children};return 0==(1&u)&&n.child!==s?((a=n.child).childLanes=0,a.pendingProps=c,n.deletions=null):(a=lr(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==o?l=lr(o,l):(l=li(l,u,i,null),l.flags|=2),l.return=n,a.return=n,a.sibling=l,n.child=a,a=l,l=n.child,u=null===(u=r.child.memoizedState)?aR(i):{baseLanes:u.baseLanes|i,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=r.childLanes&~i,n.memoizedState=aD,a}return r=(l=r.child).sibling,a=lr(l,{mode:"visible",children:a.children}),0==(1&n.mode)&&(a.lanes=i),a.return=n,a.sibling=null,null!==r&&(null===(i=n.deletions)?(n.deletions=[r],n.flags|=16):i.push(r)),n.child=a,n.memoizedState=null,a}function aB(r,n){return(n=lo({mode:"visible",children:n},r.mode,0,null)).return=r,r.child=n}function aN(r,n,i,o){return null!==o&&iB(o),oc(n,r.child,null,i),r=aB(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function aj(r,n,i){r.lanes|=n;var o=r.alternate;null!==o&&(o.lanes|=n),iG(r.return,n,i)}function aV(r,n,i,o,a){var s=r.memoizedState;null===s?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:a}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=o,s.tail=i,s.tailMode=a)}function aU(r,n,i){var o=n.pendingProps,a=o.revealOrder,s=o.tail;if(aC(r,n,o.children,i),0!=(2&(o=ox.current)))o=1&o|2,n.flags|=128;else{if(null!==r&&0!=(128&r.flags))e:for(r=n.child;null!==r;){if(13===r.tag)null!==r.memoizedState&&aj(r,i,n);else if(19===r.tag)aj(r,i,n);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===n)break;for(;null===r.sibling;){if(null===r.return||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}o&=1}if(n3(ox,o),0==(1&n.mode))n.memoizedState=null;else switch(a){case"forwards":for(a=null,i=n.child;null!==i;)null!==(r=i.alternate)&&null===ow(r)&&(a=i),i=i.sibling;null===(i=a)?(a=n.child,n.child=null):(a=i.sibling,i.sibling=null),aV(n,!1,a,i,s);break;case"backwards":for(i=null,a=n.child,n.child=null;null!==a;){if(null!==(r=a.alternate)&&null===ow(r)){n.child=a;break}r=a.sibling,a.sibling=i,i=a,a=r}aV(n,!0,i,null,s);break;case"together":aV(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function aq(r,n){0==(1&n.mode)&&null!==r&&(r.alternate=null,n.alternate=null,n.flags|=2)}function a$(r,n,i){if(null!==r&&(n.dependencies=r.dependencies),s_|=n.lanes,0==(i&n.childLanes))return null;if(null!==r&&n.child!==r.child)throw Error(f(153));if(null!==n.child){for(i=lr(r=n.child,r.pendingProps),n.child=i,i.return=n;null!==r.sibling;)r=r.sibling,(i=i.sibling=lr(r,r.pendingProps)).return=n;i.sibling=null}return n.child}function aH(r,n){if(!ik)switch(r.tailMode){case"hidden":n=r.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?r.tail=null:i.sibling=null;break;case"collapsed":i=r.tail;for(var o=null;null!==i;)null!==i.alternate&&(o=i),i=i.sibling;null===o?n||null===r.tail?r.tail=null:r.tail.sibling=null:o.sibling=null}}function aZ(r){var n=null!==r.alternate&&r.alternate.child===r.child,i=0,o=0;if(n)for(var a=r.child;null!==a;)i|=a.lanes|a.childLanes,o|=14680064&a.subtreeFlags,o|=14680064&a.flags,a.return=r,a=a.sibling;else for(a=r.child;null!==a;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=r,a=a.sibling;return r.subtreeFlags|=o,r.childLanes=i,n}a=function(r,n){for(var i=n.child;null!==i;){if(5===i.tag||6===i.tag)r.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===n)break;for(;null===i.sibling;){if(null===i.return||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},s=function(){},l=function(r,n,i,o){var a=r.memoizedProps;if(a!==o){r=n.stateNode,og(of.current);var s,l=null;switch(i){case"input":a=ed(r,a),o=ed(r,o),l=[];break;case"select":a=en({},a,{value:void 0}),o=en({},o,{value:void 0}),l=[];break;case"textarea":a=eb(r,a),o=eb(r,o),l=[];break;default:"function"!=typeof a.onClick&&"function"==typeof o.onClick&&(r.onclick=nA)}for(h in eR(i,o),i=null,a)if(!o.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h]){if("style"===h){var u=a[h];for(s in u)u.hasOwnProperty(s)&&(i||(i={}),i[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(m.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null))}for(h in o){var c=o[h];if(u=null!=a?a[h]:void 0,o.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u)){if("style"===h){if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(i||(i={}),i[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(i||(i={}),i[s]=c[s])}else i||(l||(l=[]),l.push(h,i)),i=c}else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(l=l||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(l=l||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(m.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&ny("scroll",r),l||u===c||(l=[])):(l=l||[]).push(h,c))}}i&&(l=l||[]).push("style",i);var h=l;(n.updateQueue=h)&&(n.flags|=4)}},u=function(r,n,i,o){i!==o&&(n.flags|=4)};var aG=!1,aW=!1,aX="function"==typeof WeakSet?WeakSet:Set,aY=null;function aK(r,n){var i=r.ref;if(null!==i){if("function"==typeof i)try{i(null)}catch(i){s3(r,n,i)}else i.current=null}}function aJ(r,n,i){try{i()}catch(i){s3(r,n,i)}}var aQ=!1;function a0(r,n,i){var o=n.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var a=o=o.next;do{if((a.tag&r)===r){var s=a.destroy;a.destroy=void 0,void 0!==s&&aJ(n,i,s)}a=a.next}while(a!==o)}}function a1(r,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&r)===r){var o=i.create;i.destroy=o()}i=i.next}while(i!==n)}}function a2(r){var n=r.ref;if(null!==n){var i=r.stateNode;r.tag,r=i,"function"==typeof n?n(r):n.current=r}}function a4(r){return 5===r.tag||3===r.tag||4===r.tag}function a3(r){e:for(;;){for(;null===r.sibling;){if(null===r.return||a4(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags||null===r.child||4===r.tag)continue e;r.child.return=r,r=r.child}if(!(2&r.flags))return r.stateNode}}var a5=null,a6=!1;function a8(r,n,i){for(i=i.child;null!==i;)a9(r,n,i),i=i.sibling}function a9(r,n,i){if(td&&"function"==typeof td.onCommitFiberUnmount)try{td.onCommitFiberUnmount(th,i)}catch(r){}switch(i.tag){case 5:aW||aK(i,n);case 6:var o=a5,a=a6;a5=null,a8(r,n,i),a5=o,a6=a,null!==a5&&(a6?(r=a5,i=i.stateNode,8===r.nodeType?r.parentNode.removeChild(i):r.removeChild(i)):a5.removeChild(i.stateNode));break;case 18:null!==a5&&(a6?(r=a5,i=i.stateNode,8===r.nodeType?nj(r.parentNode,i):1===r.nodeType&&nj(r,i),tW(r)):nj(a5,i.stateNode));break;case 4:o=a5,a=a6,a5=i.stateNode.containerInfo,a6=!0,a8(r,n,i),a5=o,a6=a;break;case 0:case 11:case 14:case 15:if(!aW&&null!==(o=i.updateQueue)&&null!==(o=o.lastEffect)){a=o=o.next;do{var s=a,l=s.destroy;s=s.tag,void 0!==l&&(0!=(2&s)?aJ(i,n,l):0!=(4&s)&&aJ(i,n,l)),a=a.next}while(a!==o)}a8(r,n,i);break;case 1:if(!aW&&(aK(i,n),"function"==typeof(o=i.stateNode).componentWillUnmount))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(r){s3(i,n,r)}a8(r,n,i);break;case 21:default:a8(r,n,i);break;case 22:1&i.mode?(aW=(o=aW)||null!==i.memoizedState,a8(r,n,i),aW=o):a8(r,n,i)}}function a7(r){var n=r.updateQueue;if(null!==n){r.updateQueue=null;var i=r.stateNode;null===i&&(i=r.stateNode=new aX),n.forEach(function(n){var o=s9.bind(null,r,n);i.has(n)||(i.add(n),n.then(o,o))})}}function se(r,n){var i=n.deletions;if(null!==i)for(var o=0;o<i.length;o++){var a=i[o];try{var s=n,l=s;e:for(;null!==l;){switch(l.tag){case 5:a5=l.stateNode,a6=!1;break e;case 3:case 4:a5=l.stateNode.containerInfo,a6=!0;break e}l=l.return}if(null===a5)throw Error(f(160));a9(r,s,a),a5=null,a6=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(r){s3(a,n,r)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)st(n,r),n=n.sibling}function st(r,n){var i=r.alternate,o=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(se(n,r),sr(r),4&o){try{a0(3,r,r.return),a1(3,r)}catch(n){s3(r,r.return,n)}try{a0(5,r,r.return)}catch(n){s3(r,r.return,n)}}break;case 1:se(n,r),sr(r),512&o&&null!==i&&aK(i,i.return);break;case 5:if(se(n,r),sr(r),512&o&&null!==i&&aK(i,i.return),32&r.flags){var a=r.stateNode;try{eL(a,"")}catch(n){s3(r,r.return,n)}}if(4&o&&null!=(a=r.stateNode)){var s=r.memoizedProps,l=null!==i?i.memoizedProps:s,u=r.type,c=r.updateQueue;if(r.updateQueue=null,null!==c)try{"input"===u&&"radio"===s.type&&null!=s.name&&ep(a,s),eF(u,l);var h=eF(u,s);for(l=0;l<c.length;l+=2){var d=c[l],p=c[l+1];"style"===d?eO(a,p):"dangerouslySetInnerHTML"===d?eI(a,p):"children"===d?eL(a,p):M(a,d,p,h)}switch(u){case"input":em(a,s);break;case"textarea":ew(a,s);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var g=s.value;null!=g?ev(a,!!s.multiple,g,!1):!!s.multiple!==m&&(null!=s.defaultValue?ev(a,!!s.multiple,s.defaultValue,!0):ev(a,!!s.multiple,s.multiple?[]:"",!1))}a[nH]=s}catch(n){s3(r,r.return,n)}}break;case 6:if(se(n,r),sr(r),4&o){if(null===r.stateNode)throw Error(f(162));a=r.stateNode,s=r.memoizedProps;try{a.nodeValue=s}catch(n){s3(r,r.return,n)}}break;case 3:if(se(n,r),sr(r),4&o&&null!==i&&i.memoizedState.isDehydrated)try{tW(n.containerInfo)}catch(n){s3(r,r.return,n)}break;case 4:default:se(n,r),sr(r);break;case 13:se(n,r),sr(r),8192&(a=r.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,s&&(null===a.alternate||null===a.alternate.memoizedState)&&(sE=ti())),4&o&&a7(r);break;case 22:if(d=null!==i&&null!==i.memoizedState,1&r.mode?(aW=(h=aW)||d,se(n,r),aW=h):se(n,r),sr(r),8192&o){if(h=null!==r.memoizedState,(r.stateNode.isHidden=h)&&!d&&0!=(1&r.mode))for(aY=r,d=r.child;null!==d;){for(p=aY=d;null!==aY;){switch(g=(m=aY).child,m.tag){case 0:case 11:case 14:case 15:a0(4,m,m.return);break;case 1:aK(m,m.return);var y=m.stateNode;if("function"==typeof y.componentWillUnmount){o=m,i=m.return;try{n=o,y.props=n.memoizedProps,y.state=n.memoizedState,y.componentWillUnmount()}catch(r){s3(o,i,r)}}break;case 5:aK(m,m.return);break;case 22:if(null!==m.memoizedState){si(p);continue}}null!==g?(g.return=m,aY=g):si(p)}d=d.sibling}e:for(d=null,p=r;;){if(5===p.tag){if(null===d){d=p;try{a=p.stateNode,h?(s=a.style,"function"==typeof s.setProperty?s.setProperty("display","none","important"):s.display="none"):(u=p.stateNode,l=null!=(c=p.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,u.style.display=eP("display",l))}catch(n){s3(r,r.return,n)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(n){s3(r,r.return,n)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:se(n,r),sr(r),4&o&&a7(r);case 21:}}function sr(r){var n=r.flags;if(2&n){try{e:{for(var i=r.return;null!==i;){if(a4(i)){var o=i;break e}i=i.return}throw Error(f(160))}switch(o.tag){case 5:var a=o.stateNode;32&o.flags&&(eL(a,""),o.flags&=-33);var s=a3(r);!function r(n,i,o){var a=n.tag;if(5===a||6===a)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(4!==a&&null!==(n=n.child))for(r(n,i,o),n=n.sibling;null!==n;)r(n,i,o),n=n.sibling}(r,s,a);break;case 3:case 4:var l=o.stateNode.containerInfo,u=a3(r);!function r(n,i,o){var a=n.tag;if(5===a||6===a)n=n.stateNode,i?8===o.nodeType?o.parentNode.insertBefore(n,i):o.insertBefore(n,i):(8===o.nodeType?(i=o.parentNode).insertBefore(n,o):(i=o).appendChild(n),null!=(o=o._reactRootContainer)||null!==i.onclick||(i.onclick=nA));else if(4!==a&&null!==(n=n.child))for(r(n,i,o),n=n.sibling;null!==n;)r(n,i,o),n=n.sibling}(r,u,l);break;default:throw Error(f(161))}}catch(n){s3(r,r.return,n)}r.flags&=-3}4096&n&&(r.flags&=-4097)}function sn(r){for(;null!==aY;){var n=aY;if(0!=(8772&n.flags)){var i=n.alternate;try{if(0!=(8772&n.flags))switch(n.tag){case 0:case 11:case 15:aW||a1(5,n);break;case 1:var o=n.stateNode;if(4&n.flags&&!aW){if(null===i)o.componentDidMount();else{var a=n.elementType===n.type?i.memoizedProps:ij(n.type,i.memoizedProps);o.componentDidUpdate(a,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}}var s=n.updateQueue;null!==s&&i9(n,s,o);break;case 3:var l=n.updateQueue;if(null!==l){if(i=null,null!==n.child)switch(n.child.tag){case 5:case 1:i=n.child.stateNode}i9(n,l,i)}break;case 5:var u=n.stateNode;if(null===i&&4&n.flags){i=u;var c=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var h=n.alternate;if(null!==h){var d=h.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&tW(p)}}}break;default:throw Error(f(163))}aW||512&n.flags&&a2(n)}catch(r){s3(n,n.return,r)}}if(n===r){aY=null;break}if(null!==(i=n.sibling)){i.return=n.return,aY=i;break}aY=n.return}}function si(r){for(;null!==aY;){var n=aY;if(n===r){aY=null;break}var i=n.sibling;if(null!==i){i.return=n.return,aY=i;break}aY=n.return}}function so(r){for(;null!==aY;){var n=aY;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{a1(4,n)}catch(r){s3(n,i,r)}break;case 1:var o=n.stateNode;if("function"==typeof o.componentDidMount){var a=n.return;try{o.componentDidMount()}catch(r){s3(n,a,r)}}var s=n.return;try{a2(n)}catch(r){s3(n,s,r)}break;case 5:var l=n.return;try{a2(n)}catch(r){s3(n,l,r)}}}catch(r){s3(n,n.return,r)}if(n===r){aY=null;break}var u=n.sibling;if(null!==u){u.return=n.return,aY=u;break}aY=n.return}}var sa=Math.ceil,ss=k.ReactCurrentDispatcher,sl=k.ReactCurrentOwner,su=k.ReactCurrentBatchConfig,sc=0,sh=null,sd=null,sf=0,sp=0,sm=n2(0),sg=0,sy=null,s_=0,sv=0,sb=0,sx=null,sw=null,sE=0,sC=1/0,sS=null,sT=!1,sM=null,sk=null,sI=!1,sL=null,sA=0,sz=0,sP=null,sO=-1,sD=0;function sR(){return 0!=(6&sc)?ti():-1!==sO?sO:sO=ti()}function sF(r){return 0==(1&r.mode)?1:0!=(2&sc)&&0!==sf?sf&-sf:null!==iN.transition?(0===sD&&(sD=tx()),sD):0!==(r=tS)?r:r=void 0===(r=window.event)?16:t2(r.type)}function sB(r,n,i,o){if(50<sz)throw sz=0,sP=null,Error(f(185));tE(r,i,o),(0==(2&sc)||r!==sh)&&(r===sh&&(0==(2&sc)&&(sv|=i),4===sg&&sq(r,sf)),sN(r,o),1===i&&0===sc&&0==(1&n.mode)&&(sC=ti()+500,il&&ih()))}function sN(r,n){var i,o,a,s=r.callbackNode;!function(r,n){for(var i=r.suspendedLanes,o=r.pingedLanes,a=r.expirationTimes,s=r.pendingLanes;0<s;){var l=31-tf(s),u=1<<l,c=a[l];-1===c?(0==(u&i)||0!=(u&o))&&(a[l]=function(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return -1}}(u,n)):c<=n&&(r.expiredLanes|=u),s&=~u}}(r,n);var l=tv(r,r===sh?sf:0);if(0===l)null!==s&&tt(s),r.callbackNode=null,r.callbackPriority=0;else if(n=l&-l,r.callbackPriority!==n){if(null!=s&&tt(s),1===n)0===r.tag?(a=s$.bind(null,r),il=!0,ic(a)):ic(s$.bind(null,r)),nB(function(){0==(6&sc)&&ih()}),s=null;else{switch(tT(l)){case 1:s=ta;break;case 4:s=ts;break;case 16:default:s=tl;break;case 536870912:s=tc}s=te(s,sj.bind(null,r))}r.callbackPriority=n,r.callbackNode=s}}function sj(r,n){if(sO=-1,sD=0,0!=(6&sc))throw Error(f(327));var i=r.callbackNode;if(s2()&&r.callbackNode!==i)return null;var o=tv(r,r===sh?sf:0);if(0===o)return null;if(0!=(30&o)||0!=(o&r.expiredLanes)||n)n=sJ(r,o);else{n=o;var a=sc;sc|=2;var s=sY();for((sh!==r||sf!==n)&&(sS=null,sC=ti()+500,sW(r,n));;)try{(function(){for(;null!==sd&&!tr();)sQ(sd)})();break}catch(n){sX(r,n)}iH(),ss.current=s,sc=a,null!==sd?n=0:(sh=null,sf=0,n=sg)}if(0!==n){if(2===n&&0!==(a=tb(r))&&(o=a,n=sV(r,a)),1===n)throw i=sy,sW(r,0),sq(r,o),sN(r,ti()),i;if(6===n)sq(r,o);else{if(a=r.current.alternate,0==(30&o)&&!function(r){for(var n=r;;){if(16384&n.flags){var i=n.updateQueue;if(null!==i&&null!==(i=i.stores))for(var o=0;o<i.length;o++){var a=i[o],s=a.getSnapshot;a=a.value;try{if(!rK(s(),a))return!1}catch(r){return!1}}}if(i=n.child,16384&n.subtreeFlags&&null!==i)i.return=n,n=i;else{if(n===r)break;for(;null===n.sibling;){if(null===n.return||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(a)&&(2===(n=sJ(r,o))&&0!==(s=tb(r))&&(o=s,n=sV(r,s)),1===n))throw i=sy,sW(r,0),sq(r,o),sN(r,ti()),i;switch(r.finishedWork=a,r.finishedLanes=o,n){case 0:case 1:throw Error(f(345));case 2:case 5:s1(r,sw,sS);break;case 3:if(sq(r,o),(130023424&o)===o&&10<(n=sE+500-ti())){if(0!==tv(r,0))break;if(((a=r.suspendedLanes)&o)!==o){sR(),r.pingedLanes|=r.suspendedLanes&a;break}r.timeoutHandle=nD(s1.bind(null,r,sw,sS),n);break}s1(r,sw,sS);break;case 4:if(sq(r,o),(4194240&o)===o)break;for(a=-1,n=r.eventTimes;0<o;){var l=31-tf(o);s=1<<l,(l=n[l])>a&&(a=l),o&=~s}if(o=a,10<(o=(120>(o=ti()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*sa(o/1960))-o)){r.timeoutHandle=nD(s1.bind(null,r,sw,sS),o);break}s1(r,sw,sS);break;default:throw Error(f(329))}}}return sN(r,ti()),r.callbackNode===i?sj.bind(null,r):null}function sV(r,n){var i=sx;return r.current.memoizedState.isDehydrated&&(sW(r,n).flags|=256),2!==(r=sJ(r,n))&&(n=sw,sw=i,null!==n&&sU(n)),r}function sU(r){null===sw?sw=r:sw.push.apply(sw,r)}function sq(r,n){for(n&=~sb,n&=~sv,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var i=31-tf(n),o=1<<i;r[i]=-1,n&=~o}}function s$(r){if(0!=(6&sc))throw Error(f(327));s2();var n=tv(r,0);if(0==(1&n))return sN(r,ti()),null;var i=sJ(r,n);if(0!==r.tag&&2===i){var o=tb(r);0!==o&&(n=o,i=sV(r,o))}if(1===i)throw i=sy,sW(r,0),sq(r,n),sN(r,ti()),i;if(6===i)throw Error(f(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,s1(r,sw,sS),sN(r,ti()),null}function sH(r,n){var i=sc;sc|=1;try{return r(n)}finally{0===(sc=i)&&(sC=ti()+500,il&&ih())}}function sZ(r){null!==sL&&0===sL.tag&&0==(6&sc)&&s2();var n=sc;sc|=1;var i=su.transition,o=tS;try{if(su.transition=null,tS=1,r)return r()}finally{tS=o,su.transition=i,0==(6&(sc=n))&&ih()}}function sG(){sp=sm.current,n4(sm)}function sW(r,n){r.finishedWork=null,r.finishedLanes=0;var i=r.timeoutHandle;if(-1!==i&&(r.timeoutHandle=-1,nR(i)),null!==sd)for(i=sd.return;null!==i;){var o=i;switch(iS(o),o.tag){case 1:null!=(o=o.type.childContextTypes)&&it();break;case 3:o_(),n4(n8),n4(n6),oC();break;case 5:ob(o);break;case 4:o_();break;case 13:case 19:n4(ox);break;case 10:iZ(o.type._context);break;case 22:case 23:sG()}i=i.return}if(sh=r,sd=r=lr(r.current,null),sf=sp=n,sg=0,sy=null,sb=sv=s_=0,sw=sx=null,null!==iY){for(n=0;n<iY.length;n++)if(null!==(o=(i=iY[n]).interleaved)){i.interleaved=null;var a=o.next,s=i.pending;if(null!==s){var l=s.next;s.next=a,o.next=l}i.pending=o}iY=null}return r}function sX(r,n){for(;;){var i=sd;try{if(iH(),oS.current=au,oA){for(var o=ok.memoizedState;null!==o;){var a=o.queue;null!==a&&(a.pending=null),o=o.next}oA=!1}if(oM=0,oL=oI=ok=null,oz=!1,oP=0,sl.current=null,null===i||null===i.return){sg=1,sy=n,sd=null;break}e:{var s=r,l=i.return,u=i,c=n;if(n=sf,u.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var h=c,d=u,p=d.tag;if(0==(1&d.mode)&&(0===p||11===p||15===p)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ab(l);if(null!==g){g.flags&=-257,ax(g,l,u,s,n),1&g.mode&&av(s,h,n),n=g,c=h;var y=n.updateQueue;if(null===y){var _=new Set;_.add(c),n.updateQueue=_}else y.add(c);break e}if(0==(1&n)){av(s,h,n),sK();break e}c=Error(f(426))}else if(ik&&1&u.mode){var v=ab(l);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),ax(v,l,u,s,n),iB(af(c,u));break e}}s=c=af(c,u),4!==sg&&(sg=2),null===sx?sx=[s]:sx.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,n&=-n,s.lanes|=n;var b=ay(s,c,n);i6(s,b);break e;case 1:u=c;var x=s.type,w=s.stateNode;if(0==(128&s.flags)&&("function"==typeof x.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===sk||!sk.has(w)))){s.flags|=65536,n&=-n,s.lanes|=n;var E=a_(s,u,n);i6(s,E);break e}}s=s.return}while(null!==s)}s0(i)}catch(r){n=r,sd===i&&null!==i&&(sd=i=i.return);continue}break}}function sY(){var r=ss.current;return ss.current=au,null===r?au:r}function sK(){(0===sg||3===sg||2===sg)&&(sg=4),null===sh||0==(268435455&s_)&&0==(268435455&sv)||sq(sh,sf)}function sJ(r,n){var i=sc;sc|=2;var o=sY();for((sh!==r||sf!==n)&&(sS=null,sW(r,n));;)try{(function(){for(;null!==sd;)sQ(sd)})();break}catch(n){sX(r,n)}if(iH(),sc=i,ss.current=o,null!==sd)throw Error(f(261));return sh=null,sf=0,sg}function sQ(r){var n=c(r.alternate,r,sp);r.memoizedProps=r.pendingProps,null===n?s0(r):sd=n,sl.current=null}function s0(r){var n=r;do{var i=n.alternate;if(r=n.return,0==(32768&n.flags)){if(null!==(i=function(r,n,i){var o=n.pendingProps;switch(iS(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aZ(n),null;case 1:case 17:return ie(n.type)&&it(),aZ(n),null;case 3:return o=n.stateNode,o_(),n4(n8),n4(n6),oC(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===r||null===r.child)&&(iD(n)?n.flags|=4:null===r||r.memoizedState.isDehydrated&&0==(256&n.flags)||(n.flags|=1024,null!==iI&&(sU(iI),iI=null))),s(r,n),aZ(n),null;case 5:ob(n);var c=og(om.current);if(i=n.type,null!==r&&null!=n.stateNode)l(r,n,i,o,c),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!o){if(null===n.stateNode)throw Error(f(166));return aZ(n),null}if(r=og(of.current),iD(n)){o=n.stateNode,i=n.type;var h=n.memoizedProps;switch(o[n$]=n,o[nH]=h,r=0!=(1&n.mode),i){case"dialog":ny("cancel",o),ny("close",o);break;case"iframe":case"object":case"embed":ny("load",o);break;case"video":case"audio":for(c=0;c<nf.length;c++)ny(nf[c],o);break;case"source":ny("error",o);break;case"img":case"image":case"link":ny("error",o),ny("load",o);break;case"details":ny("toggle",o);break;case"input":ef(o,h),ny("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},ny("invalid",o);break;case"textarea":ex(o,h),ny("invalid",o)}for(var d in eR(i,h),c=null,h)if(h.hasOwnProperty(d)){var p=h[d];"children"===d?"string"==typeof p?o.textContent!==p&&(!0!==h.suppressHydrationWarning&&nL(o.textContent,p,r),c=["children",p]):"number"==typeof p&&o.textContent!==""+p&&(!0!==h.suppressHydrationWarning&&nL(o.textContent,p,r),c=["children",""+p]):m.hasOwnProperty(d)&&null!=p&&"onScroll"===d&&ny("scroll",o)}switch(i){case"input":eu(o),eg(o,h,!0);break;case"textarea":eu(o),eE(o);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(o.onclick=nA)}o=c,n.updateQueue=o,null!==o&&(n.flags|=4)}else{d=9===c.nodeType?c:c.ownerDocument,"http://www.w3.org/1999/xhtml"===r&&(r=eC(i)),"http://www.w3.org/1999/xhtml"===r?"script"===i?((r=d.createElement("div")).innerHTML="<script></script>",r=r.removeChild(r.firstChild)):"string"==typeof o.is?r=d.createElement(i,{is:o.is}):(r=d.createElement(i),"select"===i&&(d=r,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):r=d.createElementNS(r,i),r[n$]=n,r[nH]=o,a(r,n,!1,!1),n.stateNode=r;e:{switch(d=eF(i,o),i){case"dialog":ny("cancel",r),ny("close",r),c=o;break;case"iframe":case"object":case"embed":ny("load",r),c=o;break;case"video":case"audio":for(c=0;c<nf.length;c++)ny(nf[c],r);c=o;break;case"source":ny("error",r),c=o;break;case"img":case"image":case"link":ny("error",r),ny("load",r),c=o;break;case"details":ny("toggle",r),c=o;break;case"input":ef(r,o),c=ed(r,o),ny("invalid",r);break;case"option":default:c=o;break;case"select":r._wrapperState={wasMultiple:!!o.multiple},c=en({},o,{value:void 0}),ny("invalid",r);break;case"textarea":ex(r,o),c=eb(r,o),ny("invalid",r)}for(h in eR(i,c),p=c)if(p.hasOwnProperty(h)){var g=p[h];"style"===h?eO(r,g):"dangerouslySetInnerHTML"===h?null!=(g=g?g.__html:void 0)&&eI(r,g):"children"===h?"string"==typeof g?("textarea"!==i||""!==g)&&eL(r,g):"number"==typeof g&&eL(r,""+g):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(m.hasOwnProperty(h)?null!=g&&"onScroll"===h&&ny("scroll",r):null!=g&&M(r,h,g,d))}switch(i){case"input":eu(r),eg(r,o,!1);break;case"textarea":eu(r),eE(r);break;case"option":null!=o.value&&r.setAttribute("value",""+es(o.value));break;case"select":r.multiple=!!o.multiple,null!=(h=o.value)?ev(r,!!o.multiple,h,!1):null!=o.defaultValue&&ev(r,!!o.multiple,o.defaultValue,!0);break;default:"function"==typeof c.onClick&&(r.onclick=nA)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return aZ(n),null;case 6:if(r&&null!=n.stateNode)u(r,n,r.memoizedProps,o);else{if("string"!=typeof o&&null===n.stateNode)throw Error(f(166));if(i=og(om.current),og(of.current),iD(n)){if(o=n.stateNode,i=n.memoizedProps,o[n$]=n,(h=o.nodeValue!==i)&&null!==(r=iT))switch(r.tag){case 3:nL(o.nodeValue,i,0!=(1&r.mode));break;case 5:!0!==r.memoizedProps.suppressHydrationWarning&&nL(o.nodeValue,i,0!=(1&r.mode))}h&&(n.flags|=4)}else(o=(9===i.nodeType?i:i.ownerDocument).createTextNode(o))[n$]=n,n.stateNode=o}return aZ(n),null;case 13:if(n4(ox),o=n.memoizedState,null===r||null!==r.memoizedState&&null!==r.memoizedState.dehydrated){if(ik&&null!==iM&&0!=(1&n.mode)&&0==(128&n.flags))iR(),iF(),n.flags|=98560,h=!1;else if(h=iD(n),null!==o&&null!==o.dehydrated){if(null===r){if(!h)throw Error(f(318));if(!(h=null!==(h=n.memoizedState)?h.dehydrated:null))throw Error(f(317));h[n$]=n}else iF(),0==(128&n.flags)&&(n.memoizedState=null),n.flags|=4;aZ(n),h=!1}else null!==iI&&(sU(iI),iI=null),h=!0;if(!h)return 65536&n.flags?n:null}if(0!=(128&n.flags))return n.lanes=i,n;return(o=null!==o)!=(null!==r&&null!==r.memoizedState)&&o&&(n.child.flags|=8192,0!=(1&n.mode)&&(null===r||0!=(1&ox.current)?0===sg&&(sg=3):sK())),null!==n.updateQueue&&(n.flags|=4),aZ(n),null;case 4:return o_(),s(r,n),null===r&&nb(n.stateNode.containerInfo),aZ(n),null;case 10:return iZ(n.type._context),aZ(n),null;case 19:if(n4(ox),null===(h=n.memoizedState))return aZ(n),null;if(o=0!=(128&n.flags),null===(d=h.rendering)){if(o)aH(h,!1);else{if(0!==sg||null!==r&&0!=(128&r.flags))for(r=n.child;null!==r;){if(null!==(d=ow(r))){for(n.flags|=128,aH(h,!1),null!==(o=d.updateQueue)&&(n.updateQueue=o,n.flags|=4),n.subtreeFlags=0,o=i,i=n.child;null!==i;)h=i,r=o,h.flags&=14680066,null===(d=h.alternate)?(h.childLanes=0,h.lanes=r,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=d.childLanes,h.lanes=d.lanes,h.child=d.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=d.memoizedProps,h.memoizedState=d.memoizedState,h.updateQueue=d.updateQueue,h.type=d.type,r=d.dependencies,h.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return n3(ox,1&ox.current|2),n.child}r=r.sibling}null!==h.tail&&ti()>sC&&(n.flags|=128,o=!0,aH(h,!1),n.lanes=4194304)}}else{if(!o){if(null!==(r=ow(d))){if(n.flags|=128,o=!0,null!==(i=r.updateQueue)&&(n.updateQueue=i,n.flags|=4),aH(h,!0),null===h.tail&&"hidden"===h.tailMode&&!d.alternate&&!ik)return aZ(n),null}else 2*ti()-h.renderingStartTime>sC&&1073741824!==i&&(n.flags|=128,o=!0,aH(h,!1),n.lanes=4194304)}h.isBackwards?(d.sibling=n.child,n.child=d):(null!==(i=h.last)?i.sibling=d:n.child=d,h.last=d)}if(null!==h.tail)return n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=ti(),n.sibling=null,i=ox.current,n3(ox,o?1&i|2:1&i),n;return aZ(n),null;case 22:case 23:return sG(),o=null!==n.memoizedState,null!==r&&null!==r.memoizedState!==o&&(n.flags|=8192),o&&0!=(1&n.mode)?0!=(1073741824&sp)&&(aZ(n),6&n.subtreeFlags&&(n.flags|=8192)):aZ(n),null;case 24:case 25:return null}throw Error(f(156,n.tag))}(i,n,sp))){sd=i;return}}else{if(null!==(i=function(r,n){switch(iS(n),n.tag){case 1:return ie(n.type)&&it(),65536&(r=n.flags)?(n.flags=-65537&r|128,n):null;case 3:return o_(),n4(n8),n4(n6),oC(),0!=(65536&(r=n.flags))&&0==(128&r)?(n.flags=-65537&r|128,n):null;case 5:return ob(n),null;case 13:if(n4(ox),null!==(r=n.memoizedState)&&null!==r.dehydrated){if(null===n.alternate)throw Error(f(340));iF()}return 65536&(r=n.flags)?(n.flags=-65537&r|128,n):null;case 19:return n4(ox),null;case 4:return o_(),null;case 10:return iZ(n.type._context),null;case 22:case 23:return sG(),null;default:return null}}(i,n))){i.flags&=32767,sd=i;return}if(null!==r)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{sg=6,sd=null;return}}if(null!==(n=n.sibling)){sd=n;return}sd=n=r}while(null!==n)0===sg&&(sg=5)}function s1(r,n,i){var o=tS,a=su.transition;try{su.transition=null,tS=1,function(r,n,i,o){do s2();while(null!==sL)if(0!=(6&sc))throw Error(f(327));i=r.finishedWork;var a=r.finishedLanes;if(null!==i){if(r.finishedWork=null,r.finishedLanes=0,i===r.current)throw Error(f(177));r.callbackNode=null,r.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(r,n){var i=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var o=r.eventTimes;for(r=r.expirationTimes;0<i;){var a=31-tf(i),s=1<<a;n[a]=0,o[a]=-1,r[a]=-1,i&=~s}}(r,s),r===sh&&(sd=sh=null,sf=0),0==(2064&i.subtreeFlags)&&0==(2064&i.flags)||sI||(sI=!0,l=tl,u=function(){return s2(),null},te(l,u)),s=0!=(15990&i.flags),0!=(15990&i.subtreeFlags)||s){s=su.transition,su.transition=null;var l,u,c,h,d,p=tS;tS=1;var m=sc;sc|=4,sl.current=null,function(r,n){if(nz=tY,r2(r=r1())){if("selectionStart"in r)var i={start:r.selectionStart,end:r.selectionEnd};else e:{var o=(i=(i=r.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(o&&0!==o.rangeCount){i=o.anchorNode;var a,s=o.anchorOffset,l=o.focusNode;o=o.focusOffset;try{i.nodeType,l.nodeType}catch(r){i=null;break e}var u=0,c=-1,h=-1,d=0,p=0,m=r,g=null;t:for(;;){for(;m!==i||0!==s&&3!==m.nodeType||(c=u+s),m!==l||0!==o&&3!==m.nodeType||(h=u+o),3===m.nodeType&&(u+=m.nodeValue.length),null!==(a=m.firstChild);)g=m,m=a;for(;;){if(m===r)break t;if(g===i&&++d===s&&(c=u),g===l&&++p===o&&(h=u),null!==(a=m.nextSibling))break;g=(m=g).parentNode}m=a}i=-1===c||-1===h?null:{start:c,end:h}}else i=null}i=i||{start:0,end:0}}else i=null;for(nP={focusedElem:r,selectionRange:i},tY=!1,aY=n;null!==aY;)if(r=(n=aY).child,0!=(1028&n.subtreeFlags)&&null!==r)r.return=n,aY=r;else for(;null!==aY;){n=aY;try{var y=n.alternate;if(0!=(1024&n.flags))switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var _=y.memoizedProps,v=y.memoizedState,b=n.stateNode,x=b.getSnapshotBeforeUpdate(n.elementType===n.type?_:ij(n.type,_),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=n.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(f(163))}}catch(r){s3(n,n.return,r)}if(null!==(r=n.sibling)){r.return=n.return,aY=r;break}aY=n.return}y=aQ,aQ=!1}(r,i),st(i,r),function(r){var n=r1(),i=r.focusedElem,o=r.selectionRange;if(n!==i&&i&&i.ownerDocument&&function r(n,i){return!!n&&!!i&&(n===i||(!n||3!==n.nodeType)&&(i&&3===i.nodeType?r(n,i.parentNode):"contains"in n?n.contains(i):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(i))))}(i.ownerDocument.documentElement,i)){if(null!==o&&r2(i)){if(n=o.start,void 0===(r=o.end)&&(r=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(r,i.value.length);else if((r=(n=i.ownerDocument||document)&&n.defaultView||window).getSelection){r=r.getSelection();var a=i.textContent.length,s=Math.min(o.start,a);o=void 0===o.end?s:Math.min(o.end,a),!r.extend&&s>o&&(a=o,o=s,s=a),a=r0(i,s);var l=r0(i,o);a&&l&&(1!==r.rangeCount||r.anchorNode!==a.node||r.anchorOffset!==a.offset||r.focusNode!==l.node||r.focusOffset!==l.offset)&&((n=n.createRange()).setStart(a.node,a.offset),r.removeAllRanges(),s>o?(r.addRange(n),r.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),r.addRange(n)))}}for(n=[],r=i;r=r.parentNode;)1===r.nodeType&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for("function"==typeof i.focus&&i.focus(),i=0;i<n.length;i++)(r=n[i]).element.scrollLeft=r.left,r.element.scrollTop=r.top}}(nP),tY=!!nz,nP=nz=null,r.current=i,c=i,h=r,d=a,aY=c,function r(n,i,o){for(var a=0!=(1&n.mode);null!==aY;){var s=aY,l=s.child;if(22===s.tag&&a){var u=null!==s.memoizedState||aG;if(!u){var c=s.alternate,h=null!==c&&null!==c.memoizedState||aW;c=aG;var d=aW;if(aG=u,(aW=h)&&!d)for(aY=s;null!==aY;)h=(u=aY).child,22===u.tag&&null!==u.memoizedState?so(s):null!==h?(h.return=u,aY=h):so(s);for(;null!==l;)aY=l,r(l,i,o),l=l.sibling;aY=s,aG=c,aW=d}sn(n,i,o)}else 0!=(8772&s.subtreeFlags)&&null!==l?(l.return=s,aY=l):sn(n,i,o)}}(c,h,d),tn(),sc=m,tS=p,su.transition=s}else r.current=i;if(sI&&(sI=!1,sL=r,sA=a),0===(s=r.pendingLanes)&&(sk=null),function(r){if(td&&"function"==typeof td.onCommitFiberRoot)try{td.onCommitFiberRoot(th,r,void 0,128==(128&r.current.flags))}catch(r){}}(i.stateNode,o),sN(r,ti()),null!==n)for(o=r.onRecoverableError,i=0;i<n.length;i++)o((a=n[i]).value,{componentStack:a.stack,digest:a.digest});if(sT)throw sT=!1,r=sM,sM=null,r;0!=(1&sA)&&0!==r.tag&&s2(),0!=(1&(s=r.pendingLanes))?r===sP?sz++:(sz=0,sP=r):sz=0,ih()}}(r,n,i,o)}finally{su.transition=a,tS=o}return null}function s2(){if(null!==sL){var r=tT(sA),n=su.transition,i=tS;try{if(su.transition=null,tS=16>r?16:r,null===sL)var o=!1;else{if(r=sL,sL=null,sA=0,0!=(6&sc))throw Error(f(331));var a=sc;for(sc|=4,aY=r.current;null!==aY;){var s=aY,l=s.child;if(0!=(16&aY.flags)){var u=s.deletions;if(null!==u){for(var c=0;c<u.length;c++){var h=u[c];for(aY=h;null!==aY;){var d=aY;switch(d.tag){case 0:case 11:case 15:a0(8,d,s)}var p=d.child;if(null!==p)p.return=d,aY=p;else for(;null!==aY;){var m=(d=aY).sibling,g=d.return;if(function r(n){var i=n.alternate;null!==i&&(n.alternate=null,r(i)),n.child=null,n.deletions=null,n.sibling=null,5===n.tag&&null!==(i=n.stateNode)&&(delete i[n$],delete i[nH],delete i[nG],delete i[nW],delete i[nX]),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}(d),d===h){aY=null;break}if(null!==m){m.return=g,aY=m;break}aY=g}}}var y=s.alternate;if(null!==y){var _=y.child;if(null!==_){y.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(null!==_)}}aY=s}}if(0!=(2064&s.subtreeFlags)&&null!==l)l.return=s,aY=l;else for(;null!==aY;){if(s=aY,0!=(2048&s.flags))switch(s.tag){case 0:case 11:case 15:a0(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,aY=b;break}aY=s.return}}var x=r.current;for(aY=x;null!==aY;){var w=(l=aY).child;if(0!=(2064&l.subtreeFlags)&&null!==w)w.return=l,aY=w;else for(l=x;null!==aY;){if(u=aY,0!=(2048&u.flags))try{switch(u.tag){case 0:case 11:case 15:a1(9,u)}}catch(r){s3(u,u.return,r)}if(u===l){aY=null;break}var E=u.sibling;if(null!==E){E.return=u.return,aY=E;break}aY=u.return}}if(sc=a,ih(),td&&"function"==typeof td.onPostCommitFiberRoot)try{td.onPostCommitFiberRoot(th,r)}catch(r){}o=!0}return o}finally{tS=i,su.transition=n}}return!1}function s4(r,n,i){n=ay(r,n=af(i,n),1),r=i3(r,n,1),n=sR(),null!==r&&(tE(r,1,n),sN(r,n))}function s3(r,n,i){if(3===r.tag)s4(r,r,i);else for(;null!==n;){if(3===n.tag){s4(n,r,i);break}if(1===n.tag){var o=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof o.componentDidCatch&&(null===sk||!sk.has(o))){r=a_(n,r=af(i,r),1),n=i3(n,r,1),r=sR(),null!==n&&(tE(n,1,r),sN(n,r));break}}n=n.return}}function s5(r,n,i){var o=r.pingCache;null!==o&&o.delete(n),n=sR(),r.pingedLanes|=r.suspendedLanes&i,sh===r&&(sf&i)===i&&(4===sg||3===sg&&(130023424&sf)===sf&&500>ti()-sE?sW(r,0):sb|=i),sN(r,n)}function s6(r,n){0===n&&(0==(1&r.mode)?n=1:(n=ty,0==(130023424&(ty<<=1))&&(ty=4194304)));var i=sR();null!==(r=iQ(r,n))&&(tE(r,n,i),sN(r,i))}function s8(r){var n=r.memoizedState,i=0;null!==n&&(i=n.retryLane),s6(r,i)}function s9(r,n){var i=0;switch(r.tag){case 13:var o=r.stateNode,a=r.memoizedState;null!==a&&(i=a.retryLane);break;case 19:o=r.stateNode;break;default:throw Error(f(314))}null!==o&&o.delete(n),s6(r,i)}function s7(r,n,i,o){this.tag=r,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function le(r,n,i,o){return new s7(r,n,i,o)}function lt(r){return!(!(r=r.prototype)||!r.isReactComponent)}function lr(r,n){var i=r.alternate;return null===i?((i=le(r.tag,n,r.key,r.mode)).elementType=r.elementType,i.type=r.type,i.stateNode=r.stateNode,i.alternate=r,r.alternate=i):(i.pendingProps=n,i.type=r.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&r.flags,i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,n=r.dependencies,i.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=r.sibling,i.index=r.index,i.ref=r.ref,i}function ln(r,n,i,o,a,s){var l=2;if(o=r,"function"==typeof r)lt(r)&&(l=1);else if("string"==typeof r)l=5;else e:switch(r){case A:return li(i.children,a,s,n);case z:l=8,a|=8;break;case P:return(r=le(12,i,n,2|a)).elementType=P,r.lanes=s,r;case F:return(r=le(13,i,n,a)).elementType=F,r.lanes=s,r;case B:return(r=le(19,i,n,a)).elementType=B,r.lanes=s,r;case V:return lo(i,a,s,n);default:if("object"==typeof r&&null!==r)switch(r.$$typeof){case O:l=10;break e;case D:l=9;break e;case R:l=11;break e;case N:l=14;break e;case j:l=16,o=null;break e}throw Error(f(130,null==r?r:typeof r,""))}return(n=le(l,i,n,a)).elementType=r,n.type=o,n.lanes=s,n}function li(r,n,i,o){return(r=le(7,r,o,n)).lanes=i,r}function lo(r,n,i,o){return(r=le(22,r,o,n)).elementType=V,r.lanes=i,r.stateNode={isHidden:!1},r}function la(r,n,i){return(r=le(6,r,null,n)).lanes=i,r}function ls(r,n,i){return(n=le(4,null!==r.children?r.children:[],r.key,n)).lanes=i,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function ll(r,n,i,o,a){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tw(0),this.expirationTimes=tw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tw(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function lu(r,n,i,o,a,s,l,u,c){return r=new ll(r,n,i,u,c),1===n?(n=1,!0===s&&(n|=8)):n=0,s=le(3,null,null,n),r.current=s,s.stateNode=r,s.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},i1(s),r}function lc(r){if(!r)return n5;r=r._reactInternals;e:{if(e6(r)!==r||1!==r.tag)throw Error(f(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ie(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n)throw Error(f(171))}if(1===r.tag){var i=r.type;if(ie(i))return ii(r,i,n)}return n}function lh(r,n,i,o,a,s,l,u,c){return(r=lu(i,o,!0,r,a,s,l,u,c)).context=lc(null),i=r.current,(s=i4(o=sR(),a=sF(i))).callback=null!=n?n:null,i3(i,s,a),r.current.lanes=a,tE(r,a,o),sN(r,o),r}function ld(r,n,i,o){var a=n.current,s=sR(),l=sF(a);return i=lc(i),null===n.context?n.context=i:n.pendingContext=i,(n=i4(s,l)).payload={element:r},null!==(o=void 0===o?null:o)&&(n.callback=o),null!==(r=i3(a,n,l))&&(sB(r,a,l,s),i5(r,a,l)),l}function lf(r){return(r=r.current).child?(r.child.tag,r.child.stateNode):null}function lp(r,n){if(null!==(r=r.memoizedState)&&null!==r.dehydrated){var i=r.retryLane;r.retryLane=0!==i&&i<n?i:n}}function lm(r,n){lp(r,n),(r=r.alternate)&&lp(r,n)}c=function(r,n,i){if(null!==r){if(r.memoizedProps!==n.pendingProps||n8.current)aE=!0;else{if(0==(r.lanes&i)&&0==(128&n.flags))return aE=!1,function(r,n,i){switch(n.tag){case 3:aP(n),iF();break;case 5:ov(n);break;case 1:ie(n.type)&&io(n);break;case 4:oy(n,n.stateNode.containerInfo);break;case 10:var o=n.type._context,a=n.memoizedProps.value;n3(iV,o._currentValue),o._currentValue=a;break;case 13:if(null!==(o=n.memoizedState)){if(null!==o.dehydrated)return n3(ox,1&ox.current),n.flags|=128,null;if(0!=(i&n.child.childLanes))return aF(r,n,i);return n3(ox,1&ox.current),null!==(r=a$(r,n,i))?r.sibling:null}n3(ox,1&ox.current);break;case 19:if(o=0!=(i&n.childLanes),0!=(128&r.flags)){if(o)return aU(r,n,i);n.flags|=128}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),n3(ox,ox.current),!o)return null;break;case 22:case 23:return n.lanes=0,ak(r,n,i)}return a$(r,n,i)}(r,n,i);aE=0!=(131072&r.flags)}}else aE=!1,ik&&0!=(1048576&n.flags)&&iE(n,ig,n.index);switch(n.lanes=0,n.tag){case 2:var o=n.type;aq(r,n),r=n.pendingProps;var a=n7(n,n6.current);iW(n,i),a=oF(null,n,o,r,a,i);var s=oB();return n.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ie(o)?(s=!0,io(n)):s=!1,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,i1(n),a.updater=ot,n.stateNode=a,a._reactInternals=n,oo(n,o,r,i),n=az(null,n,o,!0,s,i)):(n.tag=0,ik&&s&&iC(n),aC(null,n,a,i),n=n.child),n;case 16:o=n.elementType;e:{switch(aq(r,n),r=n.pendingProps,o=(a=o._init)(o._payload),n.type=o,a=n.tag=function(r){if("function"==typeof r)return lt(r)?1:0;if(null!=r){if((r=r.$$typeof)===R)return 11;if(r===N)return 14}return 2}(o),r=ij(o,r),a){case 0:n=aL(null,n,o,r,i);break e;case 1:n=aA(null,n,o,r,i);break e;case 11:n=aS(null,n,o,r,i);break e;case 14:n=aT(null,n,o,ij(o.type,r),i);break e}throw Error(f(306,o,""))}return n;case 0:return o=n.type,a=n.pendingProps,a=n.elementType===o?a:ij(o,a),aL(r,n,o,a,i);case 1:return o=n.type,a=n.pendingProps,a=n.elementType===o?a:ij(o,a),aA(r,n,o,a,i);case 3:e:{if(aP(n),null===r)throw Error(f(387));o=n.pendingProps,a=(s=n.memoizedState).element,i2(r,n),i8(n,o,null,i);var l=n.memoizedState;if(o=l.element,s.isDehydrated){if(s={element:o,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=s,n.memoizedState=s,256&n.flags){a=af(Error(f(423)),n),n=aO(r,n,o,i,a);break e}if(o!==a){a=af(Error(f(424)),n),n=aO(r,n,o,i,a);break e}for(iM=nV(n.stateNode.containerInfo.firstChild),iT=n,ik=!0,iI=null,i=oh(n,null,o,i),n.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(iF(),o===a){n=a$(r,n,i);break e}aC(r,n,o,i)}n=n.child}return n;case 5:return ov(n),null===r&&iP(n),o=n.type,a=n.pendingProps,s=null!==r?r.memoizedProps:null,l=a.children,nO(o,a)?l=null:null!==s&&nO(o,s)&&(n.flags|=32),aI(r,n),aC(r,n,l,i),n.child;case 6:return null===r&&iP(n),null;case 13:return aF(r,n,i);case 4:return oy(n,n.stateNode.containerInfo),o=n.pendingProps,null===r?n.child=oc(n,null,o,i):aC(r,n,o,i),n.child;case 11:return o=n.type,a=n.pendingProps,a=n.elementType===o?a:ij(o,a),aS(r,n,o,a,i);case 7:return aC(r,n,n.pendingProps,i),n.child;case 8:case 12:return aC(r,n,n.pendingProps.children,i),n.child;case 10:e:{if(o=n.type._context,a=n.pendingProps,s=n.memoizedProps,l=a.value,n3(iV,o._currentValue),o._currentValue=l,null!==s){if(rK(s.value,l)){if(s.children===a.children&&!n8.current){n=a$(r,n,i);break e}}else for(null!==(s=n.child)&&(s.return=n);null!==s;){var u=s.dependencies;if(null!==u){l=s.child;for(var c=u.firstContext;null!==c;){if(c.context===o){if(1===s.tag){(c=i4(-1,i&-i)).tag=2;var h=s.updateQueue;if(null!==h){var d=(h=h.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),h.pending=c}}s.lanes|=i,null!==(c=s.alternate)&&(c.lanes|=i),iG(s.return,i,n),u.lanes|=i;break}c=c.next}}else if(10===s.tag)l=s.type===n.type?null:s.child;else if(18===s.tag){if(null===(l=s.return))throw Error(f(341));l.lanes|=i,null!==(u=l.alternate)&&(u.lanes|=i),iG(l,i,n),l=s.sibling}else l=s.child;if(null!==l)l.return=s;else for(l=s;null!==l;){if(l===n){l=null;break}if(null!==(s=l.sibling)){s.return=l.return,l=s;break}l=l.return}s=l}}aC(r,n,a.children,i),n=n.child}return n;case 9:return a=n.type,o=n.pendingProps.children,iW(n,i),o=o(a=iX(a)),n.flags|=1,aC(r,n,o,i),n.child;case 14:return a=ij(o=n.type,n.pendingProps),a=ij(o.type,a),aT(r,n,o,a,i);case 15:return aM(r,n,n.type,n.pendingProps,i);case 17:return o=n.type,a=n.pendingProps,a=n.elementType===o?a:ij(o,a),aq(r,n),n.tag=1,ie(o)?(r=!0,io(n)):r=!1,iW(n,i),on(n,o,a),oo(n,o,a,i),az(null,n,o,!0,r,i);case 19:return aU(r,n,i);case 22:return ak(r,n,i)}throw Error(f(156,n.tag))};var lg="function"==typeof reportError?reportError:function(r){console.error(r)};function ly(r){this._internalRoot=r}function l_(r){this._internalRoot=r}function lv(r){return!(!r||1!==r.nodeType&&9!==r.nodeType&&11!==r.nodeType)}function lb(r){return!(!r||1!==r.nodeType&&9!==r.nodeType&&11!==r.nodeType&&(8!==r.nodeType||" react-mount-point-unstable "!==r.nodeValue))}function lx(){}function lw(r,n,i,o,a){var s=i._reactRootContainer;if(s){var l=s;if("function"==typeof a){var u=a;a=function(){var r=lf(l);u.call(r)}}ld(n,l,r,a)}else l=function(r,n,i,o,a){if(a){if("function"==typeof o){var s=o;o=function(){var r=lf(l);s.call(r)}}var l=lh(n,o,r,0,null,!1,!1,"",lx);return r._reactRootContainer=l,r[nZ]=l.current,nb(8===r.nodeType?r.parentNode:r),sZ(),l}for(;a=r.lastChild;)r.removeChild(a);if("function"==typeof o){var u=o;o=function(){var r=lf(c);u.call(r)}}var c=lu(r,0,!1,null,null,!1,!1,"",lx);return r._reactRootContainer=c,r[nZ]=c.current,nb(8===r.nodeType?r.parentNode:r),sZ(function(){ld(n,c,i,o)}),c}(i,n,r,a,o);return lf(l)}l_.prototype.render=ly.prototype.render=function(r){var n=this._internalRoot;if(null===n)throw Error(f(409));ld(r,n,null,null)},l_.prototype.unmount=ly.prototype.unmount=function(){var r=this._internalRoot;if(null!==r){this._internalRoot=null;var n=r.containerInfo;sZ(function(){ld(null,r,null,null)}),n[nZ]=null}},l_.prototype.unstable_scheduleHydration=function(r){if(r){var n=tL();r={blockedOn:null,target:r,priority:n};for(var i=0;i<tN.length&&0!==n&&n<tN[i].priority;i++);tN.splice(i,0,r),0===i&&tq(r)}},tM=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var i=t_(n.pendingLanes);0!==i&&(tC(n,1|i),sN(n,ti()),0==(6&sc)&&(sC=ti()+500,ih()))}break;case 13:sZ(function(){var n=iQ(r,1);null!==n&&sB(n,r,1,sR())}),lm(r,1)}},tk=function(r){if(13===r.tag){var n=iQ(r,134217728);null!==n&&sB(n,r,134217728,sR()),lm(r,134217728)}},tI=function(r){if(13===r.tag){var n=sF(r),i=iQ(r,n);null!==i&&sB(i,r,n,sR()),lm(r,n)}},tL=function(){return tS},tA=function(r,n){var i=tS;try{return tS=r,n()}finally{tS=i}},ej=function(r,n,i){switch(n){case"input":if(em(r,i),n=i.name,"radio"===i.type&&null!=n){for(i=r;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==r&&o.form===r.form){var a=nQ(o);if(!a)throw Error(f(90));ec(o),em(o,a)}}}break;case"textarea":ew(r,i);break;case"select":null!=(n=i.value)&&ev(r,!!i.multiple,n,!1)}},eZ=sH,eG=sZ;var lE={findFiberByHostInstance:nY,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lC={bundleType:lE.bundleType,version:lE.version,rendererPackageName:lE.rendererPackageName,rendererConfig:lE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return null===(r=e7(r))?null:r.stateNode},findFiberByHostInstance:lE.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lS.isDisabled&&lS.supportsFiber)try{th=lS.inject(lC),td=lS}catch(r){}}$={usingClientEntryPoint:!1,Events:[nK,nJ,nQ,e$,eH,sH]},H=function(r,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lv(n))throw Error(f(200));return function(r,n,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:L,key:null==o?null:""+o,children:r,containerInfo:n,implementation:null}}(r,n,null,i)},Z=function(r,n){if(!lv(r))throw Error(f(299));var i=!1,o="",a=lg;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),n=lu(r,1,!1,null,null,i,!1,o,a),r[nZ]=n.current,nb(8===r.nodeType?r.parentNode:r),new ly(n)},G=function(r){if(null==r)return null;if(1===r.nodeType)return r;var n=r._reactInternals;if(void 0===n){if("function"==typeof r.render)throw Error(f(188));throw Error(f(268,r=Object.keys(r).join(",")))}return r=null===(r=e7(n))?null:r.stateNode},W=function(r){return sZ(r)},X=function(r,n,i){if(!lb(n))throw Error(f(200));return lw(null,r,n,!0,i)},Y=function(r,n,i){if(!lv(r))throw Error(f(405));var o=null!=i&&i.hydratedSources||null,a=!1,s="",l=lg;if(null!=i&&(!0===i.unstable_strictMode&&(a=!0),void 0!==i.identifierPrefix&&(s=i.identifierPrefix),void 0!==i.onRecoverableError&&(l=i.onRecoverableError)),n=lh(n,null,r,1,null!=i?i:null,a,!1,s,l),r[nZ]=n.current,nb(r),o)for(r=0;r<o.length;r++)a=(a=(i=o[r])._getVersion)(i._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[i,a]:n.mutableSourceEagerHydrationData.push(i,a);return new l_(n)},K=function(r,n,i){if(!lb(n))throw Error(f(200));return lw(null,r,n,!1,i)},J=function(r){if(!lb(r))throw Error(f(40));return!!r._reactRootContainer&&(sZ(function(){lw(null,null,r,!1,function(){r._reactRootContainer=null,r[nZ]=null})}),!0)},Q=sH,ee=function(r,n,i,o){if(!lb(i))throw Error(f(200));if(null==r||void 0===r._reactInternals)throw Error(f(38));return lw(r,n,i,!1,o)},et="18.2.0-next-9e3b772b8-20220608"}),eT.register("ibqfJ",function(r,n){r.exports=eT("dnqd8")}),eT.register("dnqd8",function(n,i){function o(r,n){var i=r.length;for(r.push(n);0<i;){var o=i-1>>>1,a=r[o];if(0<l(a,n))r[o]=n,r[i]=a,i=o;else break}}function a(r){return 0===r.length?null:r[0]}function s(r){if(0===r.length)return null;var n=r[0],i=r.pop();if(i!==n){r[0]=i;for(var o=0,a=r.length,s=a>>>1;o<s;){var u=2*(o+1)-1,c=r[u],h=u+1,d=r[h];if(0>l(c,i))h<a&&0>l(d,c)?(r[o]=d,r[h]=i,o=h):(r[o]=c,r[u]=i,o=u);else if(h<a&&0>l(d,i))r[o]=d,r[h]=i,o=h;else break}}return n}function l(r,n){var i=r.sortIndex-n.sortIndex;return 0!==i?i:r.id-n.id}if(r(n.exports,"unstable_now",function(){return u},function(r){return u=r}),r(n.exports,"unstable_IdlePriority",function(){return c},function(r){return c=r}),r(n.exports,"unstable_ImmediatePriority",function(){return h},function(r){return h=r}),r(n.exports,"unstable_LowPriority",function(){return d},function(r){return d=r}),r(n.exports,"unstable_NormalPriority",function(){return f},function(r){return f=r}),r(n.exports,"unstable_Profiling",function(){return p},function(r){return p=r}),r(n.exports,"unstable_UserBlockingPriority",function(){return m},function(r){return m=r}),r(n.exports,"unstable_cancelCallback",function(){return g},function(r){return g=r}),r(n.exports,"unstable_continueExecution",function(){return y},function(r){return y=r}),r(n.exports,"unstable_forceFrameRate",function(){return _},function(r){return _=r}),r(n.exports,"unstable_getCurrentPriorityLevel",function(){return v},function(r){return v=r}),r(n.exports,"unstable_getFirstCallbackNode",function(){return b},function(r){return b=r}),r(n.exports,"unstable_next",function(){return x},function(r){return x=r}),r(n.exports,"unstable_pauseExecution",function(){return w},function(r){return w=r}),r(n.exports,"unstable_requestPaint",function(){return E},function(r){return E=r}),r(n.exports,"unstable_runWithPriority",function(){return C},function(r){return C=r}),r(n.exports,"unstable_scheduleCallback",function(){return S},function(r){return S=r}),r(n.exports,"unstable_shouldYield",function(){return T},function(r){return T=r}),r(n.exports,"unstable_wrapCallback",function(){return M},function(r){return M=r}),"object"==typeof performance&&"function"==typeof performance.now){var u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I=performance;u=function(){return I.now()}}else{var L=Date,A=L.now();u=function(){return L.now()-A}}var z=[],P=[],O=1,D=null,R=3,F=!1,B=!1,N=!1,j="function"==typeof setTimeout?setTimeout:null,V="function"==typeof clearTimeout?clearTimeout:null,U="undefined"!=typeof setImmediate?setImmediate:null;function q(r){for(var n=a(P);null!==n;){if(null===n.callback)s(P);else if(n.startTime<=r)s(P),n.sortIndex=n.expirationTime,o(z,n);else break;n=a(P)}}function $(r){if(N=!1,q(r),!B){if(null!==a(z))B=!0,et(H);else{var n=a(P);null!==n&&er($,n.startTime-r)}}}function H(r,n){B=!1,N&&(N=!1,V(W),W=-1),F=!0;var i=R;try{for(q(n),D=a(z);null!==D&&(!(D.expirationTime>n)||r&&!K());){var o=D.callback;if("function"==typeof o){D.callback=null,R=D.priorityLevel;var l=o(D.expirationTime<=n);n=u(),"function"==typeof l?D.callback=l:D===a(z)&&s(z),q(n)}else s(z);D=a(z)}if(null!==D)var c=!0;else{var h=a(P);null!==h&&er($,h.startTime-n),c=!1}return c}finally{D=null,R=i,F=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var Z=!1,G=null,W=-1,X=5,Y=-1;function K(){return!(u()-Y<X)}function J(){if(null!==G){var r=u();Y=r;var n=!0;try{n=G(!0,r)}finally{n?k():(Z=!1,G=null)}}else Z=!1}if("function"==typeof U)k=function(){U(J)};else if("undefined"!=typeof MessageChannel){var Q=new MessageChannel,ee=Q.port2;Q.port1.onmessage=J,k=function(){ee.postMessage(null)}}else k=function(){j(J,0)};function et(r){G=r,Z||(Z=!0,k())}function er(r,n){W=j(function(){r(u())},n)}c=5,h=1,d=4,f=3,p=null,m=2,g=function(r){r.callback=null},y=function(){B||F||(B=!0,et(H))},_=function(r){0>r||125<r?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<r?Math.floor(1e3/r):5},v=function(){return R},b=function(){return a(z)},x=function(r){switch(R){case 1:case 2:case 3:var n=3;break;default:n=R}var i=R;R=n;try{return r()}finally{R=i}},w=function(){},E=function(){},C=function(r,n){switch(r){case 1:case 2:case 3:case 4:case 5:break;default:r=3}var i=R;R=r;try{return n()}finally{R=i}},S=function(r,n,i){var s=u();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?s+i:s,r){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return l=i+l,r={id:O++,callback:n,priorityLevel:r,startTime:i,expirationTime:l,sortIndex:-1},i>s?(r.sortIndex=i,o(P,r),null===a(z)&&r===a(P)&&(N?(V(W),W=-1):N=!0,er($,i-s))):(r.sortIndex=l,o(z,r),B||F||(B=!0,et(H))),r},T=K,M=function(r){var n=R;return function(){var i=R;R=n;try{return r.apply(this,arguments)}finally{R=i}}}}),eT.register("beWdq",function(n,i){r(n.exports,"AsyncMode",function(){return o},function(r){return o=r}),r(n.exports,"ConcurrentMode",function(){return a},function(r){return a=r}),r(n.exports,"ContextConsumer",function(){return s},function(r){return s=r}),r(n.exports,"ContextProvider",function(){return l},function(r){return l=r}),r(n.exports,"Element",function(){return u},function(r){return u=r}),r(n.exports,"ForwardRef",function(){return c},function(r){return c=r}),r(n.exports,"Fragment",function(){return h},function(r){return h=r}),r(n.exports,"Lazy",function(){return d},function(r){return d=r}),r(n.exports,"Memo",function(){return f},function(r){return f=r}),r(n.exports,"Portal",function(){return p},function(r){return p=r}),r(n.exports,"Profiler",function(){return m},function(r){return m=r}),r(n.exports,"StrictMode",function(){return g},function(r){return g=r}),r(n.exports,"Suspense",function(){return y},function(r){return y=r}),r(n.exports,"isAsyncMode",function(){return _},function(r){return _=r}),r(n.exports,"isConcurrentMode",function(){return v},function(r){return v=r}),r(n.exports,"isContextConsumer",function(){return b},function(r){return b=r}),r(n.exports,"isContextProvider",function(){return x},function(r){return x=r}),r(n.exports,"isElement",function(){return w},function(r){return w=r}),r(n.exports,"isForwardRef",function(){return E},function(r){return E=r}),r(n.exports,"isFragment",function(){return C},function(r){return C=r}),r(n.exports,"isLazy",function(){return S},function(r){return S=r}),r(n.exports,"isMemo",function(){return T},function(r){return T=r}),r(n.exports,"isPortal",function(){return M},function(r){return M=r}),r(n.exports,"isProfiler",function(){return k},function(r){return k=r}),r(n.exports,"isStrictMode",function(){return I},function(r){return I=r}),r(n.exports,"isSuspense",function(){return L},function(r){return L=r}),r(n.exports,"isValidElementType",function(){return A},function(r){return A=r}),r(n.exports,"typeOf",function(){return z},function(r){return z=r});var o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I,L,A,z,P="function"==typeof Symbol&&Symbol.for,O=P?Symbol.for("react.element"):60103,D=P?Symbol.for("react.portal"):60106,R=P?Symbol.for("react.fragment"):60107,F=P?Symbol.for("react.strict_mode"):60108,B=P?Symbol.for("react.profiler"):60114,N=P?Symbol.for("react.provider"):60109,j=P?Symbol.for("react.context"):60110,V=P?Symbol.for("react.async_mode"):60111,U=P?Symbol.for("react.concurrent_mode"):60111,q=P?Symbol.for("react.forward_ref"):60112,$=P?Symbol.for("react.suspense"):60113,H=P?Symbol.for("react.suspense_list"):60120,Z=P?Symbol.for("react.memo"):60115,G=P?Symbol.for("react.lazy"):60116,W=P?Symbol.for("react.block"):60121,X=P?Symbol.for("react.fundamental"):60117,Y=P?Symbol.for("react.responder"):60118,K=P?Symbol.for("react.scope"):60119;function J(r){if("object"==typeof r&&null!==r){var n=r.$$typeof;switch(n){case O:switch(r=r.type){case V:case U:case R:case B:case F:case $:return r;default:switch(r=r&&r.$$typeof){case j:case q:case G:case Z:case N:return r;default:return n}}case D:return n}}}function Q(r){return J(r)===U}o=V,a=U,s=j,l=N,u=O,c=q,h=R,d=G,f=Z,p=D,m=B,g=F,y=$,_=function(r){return Q(r)||J(r)===V},v=Q,b=function(r){return J(r)===j},x=function(r){return J(r)===N},w=function(r){return"object"==typeof r&&null!==r&&r.$$typeof===O},E=function(r){return J(r)===q},C=function(r){return J(r)===R},S=function(r){return J(r)===G},T=function(r){return J(r)===Z},M=function(r){return J(r)===D},k=function(r){return J(r)===B},I=function(r){return J(r)===F},L=function(r){return J(r)===$},A=function(r){return"string"==typeof r||"function"==typeof r||r===R||r===U||r===B||r===F||r===$||r===H||"object"==typeof r&&null!==r&&(r.$$typeof===G||r.$$typeof===Z||r.$$typeof===N||r.$$typeof===j||r.$$typeof===q||r.$$typeof===X||r.$$typeof===Y||r.$$typeof===K||r.$$typeof===W)},z=J}),eT.register("jpdgm",function(r,n){var i=eT("L7tyD");function o(){}function a(){}a.resetWarningCache=o,r.exports=function(){function r(r,n,o,a,s,l){if(l!==i){var u=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function n(){return r}r.isRequired=r;// Important!
// Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.
var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:a,resetWarningCache:o};return s.PropTypes=s,s}}),eT.register("L7tyD",function(r,n){r.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}),eT.register("dG33B",function(r,n){var i,o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(r,n,i){return Function.prototype.apply.call(r,n,i)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var s=Number.isNaN||function(r){return r!=r};function l(){l.init.call(this)}r.exports=l,r.exports.once=function(r,n){return new Promise(function(i,o){function a(i){r.removeListener(n,s),o(i)}function s(){"function"==typeof r.removeListener&&r.removeListener("error",a),i([].slice.call(arguments))}_(r,n,s,{once:!0}),"error"!==n&&"function"==typeof r.on&&_(r,"error",a,{once:!0})})},// Backwards-compat with node 0.10.x
l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var u=10;function c(r){if("function"!=typeof r)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function h(r){return void 0===r._maxListeners?l.defaultMaxListeners:r._maxListeners}function d(r,n,i,o){if(c(i),void 0===(s=r._events)?(s=r._events=Object.create(null),r._eventsCount=0):(void 0!==s.newListener&&(r.emit("newListener",n,i.listener?i.listener:i),// Re-assign `events` because a newListener handler could have caused the
// this._events to be assigned to a new object
s=r._events),l=s[n]),void 0===l)// Optimize the case of one listener. Don't need the extra array object.
l=s[n]=i,++r._eventsCount;else if("function"==typeof l?l=s[n]=o?[i,l]:[l,i]:o?l.unshift(i):l.push(i),// Check for listener leak
(a=h(r))>0&&l.length>a&&!l.warned){l.warned=!0;// No error code for this since it is a Warning
// eslint-disable-next-line no-restricted-syntax
var a,s,l,u=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=n,u.count=l.length,console&&console.warn&&console.warn(u)}return r}function f(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(r,n,i){var o={fired:!1,wrapFn:void 0,target:r,type:n,listener:i},a=f.bind(o);return a.listener=i,o.wrapFn=a,a}function m(r,n,i){var o=r._events;if(void 0===o)return[];var a=o[n];return void 0===a?[]:"function"==typeof a?i?[a.listener||a]:[a]:i?function(r){for(var n=Array(r.length),i=0;i<n.length;++i)n[i]=r[i].listener||r[i];return n}(a):y(a,a.length)}function g(r){var n=this._events;if(void 0!==n){var i=n[r];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function y(r,n){for(var i=Array(n),o=0;o<n;++o)i[o]=r[o];return i}function _(r,n,i,o){if("function"==typeof r.on)o.once?r.once(n,i):r.on(n,i);else if("function"==typeof r.addEventListener)// EventEmitters, we do not listen for `error` events here.
r.addEventListener(n,function a(s){o.once&&r.removeEventListener(n,a),i(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(r){if("number"!=typeof r||r<0||s(r))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");u=r}}),l.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
l.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||s(r))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(r){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var o="error"===r,s=this._events;if(void 0!==s)o=o&&void 0===s.error;else if(!o)return!1;// If there is no 'error' event listener then throw.
if(o){if(n.length>0&&(l=n[0]),l instanceof Error)// up in Node's output if this results in an unhandled exception.
throw l;// Unhandled 'error' event
// At least give some kind of context to the user
var l,u=Error("Unhandled error."+(l?" ("+l.message+")":""));throw u.context=l,u;// Unhandled 'error' event
}var c=s[r];if(void 0===c)return!1;if("function"==typeof c)a(c,this,n);else for(var h=c.length,d=y(c,h),i=0;i<h;++i)a(d[i],this,n);return!0},l.prototype.addListener=function(r,n){return d(this,r,n,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(r,n){return d(this,r,n,!0)},l.prototype.once=function(r,n){return c(n),this.on(r,p(this,r,n)),this},l.prototype.prependOnceListener=function(r,n){return c(n),this.prependListener(r,p(this,r,n)),this},// Emits a 'removeListener' event if and only if the listener was removed.
l.prototype.removeListener=function(r,n){var i,o,a,s,l;if(c(n),void 0===(o=this._events)||void 0===(i=o[r]))return this;if(i===n||i.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete o[r],o.removeListener&&this.emit("removeListener",r,i.listener||n));else if("function"!=typeof i){for(a=-1,s=i.length-1;s>=0;s--)if(i[s]===n||i[s].listener===n){l=i[s].listener,a=s;break}if(a<0)return this;0===a?i.shift():function(r,n){for(;n+1<r.length;n++)r[n]=r[n+1];r.pop()}(i,a),1===i.length&&(o[r]=i[0]),void 0!==o.removeListener&&this.emit("removeListener",r,l||n)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(r){var n,i,o;if(void 0===(i=this._events))return this;// not listening for removeListener, no need to emit
if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[r]),this;// emit removeListener for all listeners on all events
if(0==arguments.length){var a,s=Object.keys(i);for(o=0;o<s.length;++o)"removeListener"!==(a=s[o])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=i[r]))this.removeListener(r,n);else if(void 0!==n)for(o=n.length-1;o>=0;o--)this.removeListener(r,n[o]);return this},l.prototype.listeners=function(r){return m(this,r,!0)},l.prototype.rawListeners=function(r){return m(this,r,!1)},l.listenerCount=function(r,n){return"function"==typeof r.listenerCount?r.listenerCount(n):g.call(r,n)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}}),eT.register("9M38k",function(r,n){"function"==typeof Object.create?r.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),eT.register("fTX3U",function(r,n){// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var i,o,a,s,l,u=eT("6qd2L");r.exports=T,/*</replacement>*/T.ReadableState=S,eT("dG33B").EventEmitter;var c=function(r,n){return r.listeners(n).length},h=eT("igIdM"),d=eT("3aNd6").Buffer,f=(void 0!==ew?ew:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},p=eT("1wVs5");o=p&&p.debuglog?p.debuglog("stream"):function(){};var m=eT("sBkSV"),g=eT("g0P9t"),y=eT("dpXeK").getHighWaterMark,_=eT("bVf07").codes,v=_.ERR_INVALID_ARG_TYPE,b=_.ERR_STREAM_PUSH_AFTER_EOF,x=_.ERR_METHOD_NOT_IMPLEMENTED,w=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;eT("9M38k")(T,h);var E=g.errorOrDestroy,C=["error","close","destroy","pause","resume"];function S(r,n,o){i=i||eT("9ODku"),r=r||{},"boolean"!=typeof o&&(o=n instanceof i),// object stream flag. Used to make read(n) ignore n and to
// make all the buffer merging and length checks go away
this.objectMode=!!r.objectMode,o&&(this.objectMode=this.objectMode||!!r.readableObjectMode),// the point at which it stops calling _read() to fill the buffer
// Note: 0 is a valid value, means "don't call _read preemptively ever"
this.highWaterMark=y(this,r,"readableHighWaterMark",o),// A linked list is used to store data chunks instead of an array because the
// linked list can remove elements from the beginning faster than
// array.shift()
this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,// a flag to be able to tell if the event 'readable'/'data' is emitted
// immediately, or on a later tick.  We set this to true at first, because
// any actions that shouldn't happen until "later" should generally also
// not happen before the first read call.
this.sync=!0,// whenever we return null, then we set a flag to say
// that we're awaiting a 'readable' event emission.
this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,// Should close be emitted on destroy. Defaults to true.
this.emitClose=!1!==r.emitClose,// Should .destroy() be called after 'end' (and potentially 'finish')
this.autoDestroy=!!r.autoDestroy,// has it been destroyed
this.destroyed=!1,// Crypto is kind of old and crusty.  Historically, its default string
// encoding is 'binary' so we have to make this configurable.
// Everything else in the universe uses 'utf8', though.
this.defaultEncoding=r.defaultEncoding||"utf8",// the number of writers that are awaiting a drain event in .pipe()s
this.awaitDrain=0,// if true, a maybeReadMore has been scheduled
this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(a||(a=eT("g6ehz").StringDecoder),this.decoder=new a(r.encoding),this.encoding=r.encoding)}function T(r){if(i=i||eT("9ODku"),!(this instanceof T))return new T(r);// Checking for a Stream.Duplex instance is faster here instead of inside
// the ReadableState constructor, at least with V8 6.5
var n=this instanceof i;this._readableState=new S(r,this,n),// legacy
this.readable=!0,r&&("function"==typeof r.read&&(this._read=r.read),"function"==typeof r.destroy&&(this._destroy=r.destroy)),h.call(this)}function M(r,n,i,a,s){o("readableAddChunk",n);var l,u,c,h,p,m=r._readableState;if(null===n)m.reading=!1,function(r,n){if(o("onEofChunk"),!n.ended){if(n.decoder){var i=n.decoder.end();i&&i.length&&(n.buffer.push(i),n.length+=n.objectMode?1:i.length)}n.ended=!0,n.sync?// Otherwise we risk emitting data in the flow()
// the readable code triggers during a read() call
L(r):(// emit 'readable' now to make sure it gets picked up.
n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,A(r)))}}(r,m);else{if(s||(l=m,u=n,d.isBuffer(u)||u instanceof f||"string"==typeof u||void 0===u||l.objectMode||(c=new v("chunk",["string","Buffer","Uint8Array"],u)),p=c),p)E(r,p);else if(m.objectMode||n&&n.length>0){if("string"==typeof n||m.objectMode||Object.getPrototypeOf(n)===d.prototype||(h=n,n=d.from(h)),a)m.endEmitted?E(r,new w):k(r,m,n,!0);else if(m.ended)E(r,new b);else{if(m.destroyed)return!1;m.reading=!1,m.decoder&&!i?(n=m.decoder.write(n),m.objectMode||0!==n.length?k(r,m,n,!1):z(r,m)):k(r,m,n,!1)}}else a||(m.reading=!1,z(r,m))}// We can push more data if we are below the highWaterMark.
// Also, if we have no data yet, we can stand some more bytes.
// This is to work around cases where hwm=0, such as the repl.
return!m.ended&&(m.length<m.highWaterMark||0===m.length)}function k(r,n,i,o){n.flowing&&0===n.length&&!n.sync?(n.awaitDrain=0,r.emit("data",i)):(// update the buffer info.
n.length+=n.objectMode?1:i.length,o?n.buffer.unshift(i):n.buffer.push(i),n.needReadable&&L(r)),z(r,n)}// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function I(r,n){if(r<=0||0===n.length&&n.ended)return 0;if(n.objectMode)return 1;if(r!=r)return(// Only flow one buffer at a time
n.flowing&&n.length?n.buffer.head.data.length:n.length);// If we're asking for more than the current hwm, then raise the hwm.
if(r>n.highWaterMark){var i;n.highWaterMark=((i=r)>=1073741824?i=1073741824:(// Get the next highest power of 2 to prevent increasing hwm excessively in
// tiny amounts
i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)}return r<=n.length?r:n.ended?n.length:(n.needReadable=!0,0)}// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function L(r){var n=r._readableState;o("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(o("emitReadable",n.flowing),n.emittedReadable=!0,u.nextTick(A,r))}function A(r){var n=r._readableState;o("emitReadable_",n.destroyed,n.length,n.ended),!n.destroyed&&(n.length||n.ended)&&(r.emit("readable"),n.emittedReadable=!1),// The stream needs another readable event if
// 1. It is not flowing, as the flow mechanism will take
//    care of it.
// 2. It is not ended.
// 3. It is below the highWaterMark, so we can schedule
//    another readable later.
n.needReadable=!n.flowing&&!n.ended&&n.length<=n.highWaterMark,F(r)}// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function z(r,n){n.readingMore||(n.readingMore=!0,u.nextTick(P,r,n))}function P(r,n){// Attempt to read more data if we should.
//
// The conditions for reading more data are (one of):
// - Not enough data buffered (state.length < state.highWaterMark). The loop
//   is responsible for filling the buffer with enough data if such data
//   is available. If highWaterMark is 0 and we are not in the flowing mode
//   we should _not_ attempt to buffer any extra data. We'll get more data
//   when the stream consumer calls read() instead.
// - No data in the buffer, and the stream is in flowing mode. In this mode
//   the loop below is responsible for ensuring read() is called. Failing to
//   call read here would abort the flow and there's no other mechanism for
//   continuing the flow if the stream consumer has just subscribed to the
//   'data' event.
//
// In addition to the above conditions to keep reading data, the following
// conditions prevent the data from being read:
// - The stream has ended (state.ended).
// - There is already a pending 'read' operation (state.reading). This is a
//   case where the the stream has called the implementation defined _read()
//   method, but they are processing the call asynchronously and have _not_
//   called push() with new data. In this case we skip performing more
//   read()s. The execution ends in this method again after the _read() ends
//   up calling push() with more data.
for(;!n.reading&&!n.ended&&(n.length<n.highWaterMark||n.flowing&&0===n.length);){var i=n.length;if(o("maybeReadMore read 0"),r.read(0),i===n.length)break}n.readingMore=!1}function O(r){var n=r._readableState;n.readableListening=r.listenerCount("readable")>0,n.resumeScheduled&&!n.paused?// the upcoming resume will not flow.
n.flowing=!0:r.listenerCount("data")>0&&r.resume()}function D(r){o("readable nexttick read 0"),r.read(0)}function R(r,n){o("resume",n.reading),n.reading||r.read(0),n.resumeScheduled=!1,r.emit("resume"),F(r),n.flowing&&!n.reading&&r.read(0)}function F(r){var n=r._readableState;for(o("flow",n.flowing);n.flowing&&null!==r.read(););}// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function B(r,n){var i;return(// nothing buffered
0===n.length?null:(n.objectMode?i=n.buffer.shift():!r||r>=n.length?(i=n.decoder?n.buffer.join(""):1===n.buffer.length?n.buffer.first():n.buffer.concat(n.length),n.buffer.clear()):i=n.buffer.consume(r,n.decoder),i))}function N(r){var n=r._readableState;o("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,u.nextTick(j,n,r))}function j(r,n){// Check that we didn't get one last unshift.
if(o("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&0===r.length&&(r.endEmitted=!0,n.readable=!1,n.emit("end"),r.autoDestroy)){// In case of duplex streams we need a way to detect
// if the writable side is ready for autoDestroy as well
var i=n._writableState;(!i||i.autoDestroy&&i.finished)&&n.destroy()}}function V(r,n){for(var i=0,o=r.length;i<o;i++)if(r[i]===n)return i;return -1}Object.defineProperty(T.prototype,"destroyed",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(r){this._readableState&&// backward compatibility, the user is explicitly
// managing destroyed
(this._readableState.destroyed=r)}}),T.prototype.destroy=g.destroy,T.prototype._undestroy=g.undestroy,T.prototype._destroy=function(r,n){n(r)},// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
T.prototype.push=function(r,n){var i,o=this._readableState;return o.objectMode?i=!0:"string"==typeof r&&((n=n||o.defaultEncoding)!==o.encoding&&(r=d.from(r,n),n=""),i=!0),M(this,r,n,!1,i)},// Unshift should *always* be something directly out of read()
T.prototype.unshift=function(r){return M(this,r,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},// backwards compatibility.
T.prototype.setEncoding=function(r){a||(a=eT("g6ehz").StringDecoder);var n=new a(r);this._readableState.decoder=n,// If setEncoding(null), decoder.encoding equals utf8
this._readableState.encoding=this._readableState.decoder.encoding;for(// Iterate over current buffer to convert already stored Buffers:
var i=this._readableState.buffer.head,o="";null!==i;)o+=n.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this},// you can override either this method, or the async _read(n) below.
T.prototype.read=function(r){o("read",r),r=parseInt(r,10);var n,i=this._readableState,a=r;// if we're doing read(0) to trigger a readable event, but we
// already have a bunch of data in the buffer, then just trigger
// the 'readable' event and move on.
if(0!==r&&(i.emittedReadable=!1),0===r&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:i.length>0)||i.ended))return o("read: emitReadable",i.length,i.ended),0===i.length&&i.ended?N(this):L(this),null;// if we've ended, and we're now clear, then finish it up.
if(0===(r=I(r,i))&&i.ended)return 0===i.length&&N(this),null;// All the actual chunk generation logic needs to be
// *below* the call to _read.  The reason is that in certain
// synthetic stream cases, such as passthrough streams, _read
// may be a completely synchronous operation which may change
// the state of the read buffer, providing enough data when
// before there was *not* enough.
//
// So, the steps are:
// 1. Figure out what the state of things will be after we do
// a read from the buffer.
//
// 2. If that resulting state will trigger a _read, then call _read.
// Note that this may be asynchronous, or synchronous.  Yes, it is
// deeply ugly to write APIs this way, but that still doesn't mean
// that the Readable class should behave improperly, as streams are
// designed to be sync/async agnostic.
// Take note if the _read call is sync or async (ie, if the read call
// has returned yet), so that we know whether or not it's safe to emit
// 'readable' etc.
//
// 3. Actually pull the requested chunks out of the buffer and return.
// if we need a readable event, then we need to do some reading.
var s=i.needReadable;return o("need readable",s),(0===i.length||i.length-r<i.highWaterMark)&&o("length less than watermark",s=!0),i.ended||i.reading?o("reading or ended",s=!1):s&&(o("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),// call internal read method
this._read(i.highWaterMark),i.sync=!1,i.reading||(r=I(a,i))),null===(n=r>0?B(r,i):null)?(i.needReadable=i.length<=i.highWaterMark,r=0):(i.length-=r,i.awaitDrain=0),0===i.length&&(i.ended||(i.needReadable=!0),a!==r&&i.ended&&N(this)),null!==n&&this.emit("data",n),n},// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
T.prototype._read=function(r){E(this,new x("_read()"))},T.prototype.pipe=function(r,n){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=r;break;case 1:a.pipes=[a.pipes,r];break;default:a.pipes.push(r)}a.pipesCount+=1,o("pipe count=%d opts=%j",a.pipesCount,n);var s=n&&!1===n.end||r===u.stdout||r===u.stderr?y:l;function l(){o("onend"),r.end()}a.endEmitted?u.nextTick(s):i.once("end",s),r.on("unpipe",function n(s,u){o("onunpipe"),s===i&&u&&!1===u.hasUnpiped&&(u.hasUnpiped=!0,o("cleanup"),// cleanup event handlers once the pipe is broken
r.removeListener("close",m),r.removeListener("finish",g),r.removeListener("drain",h),r.removeListener("error",p),r.removeListener("unpipe",n),i.removeListener("end",l),i.removeListener("end",y),i.removeListener("data",f),d=!0,a.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&h())});// when the dest drains, it reduces the awaitDrain counter
// on the source.  This would be more elegant with a .once()
// handler in flow(), but adding and removing repeatedly is
// too slow.
var h=function(){var r=i._readableState;o("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&c(i,"data")&&(r.flowing=!0,F(i))};r.on("drain",h);var d=!1;function f(n){o("ondata");var s=r.write(n);o("dest.write",s),!1===s&&((1===a.pipesCount&&a.pipes===r||a.pipesCount>1&&-1!==V(a.pipes,r))&&!d&&(o("false write response, pause",a.awaitDrain),a.awaitDrain++),i.pause())}// if the dest has an error, then stop piping into it.
// however, don't suppress the throwing behavior for this.
function p(n){o("onerror",n),y(),r.removeListener("error",p),0===c(r,"error")&&E(r,n)}// Both close and finish should trigger unpipe, but only once.
function m(){r.removeListener("finish",g),y()}function g(){o("onfinish"),r.removeListener("close",m),y()}function y(){o("unpipe"),i.unpipe(r)}return i.on("data",f),// Make sure our error handler is attached before userland ones.
function(r,n,i){// Sadly this is not cacheable as some libraries bundle their own
// event emitter implementation with them.
if("function"==typeof r.prependListener)return r.prependListener(n,i);r._events&&r._events[n]?Array.isArray(r._events[n])?r._events[n].unshift(i):r._events[n]=[i,r._events[n]]:r.on(n,i)}(r,"error",p),r.once("close",m),r.once("finish",g),// tell the dest that it's being piped to
r.emit("pipe",i),a.flowing||(o("pipe resume"),i.resume()),r},T.prototype.unpipe=function(r){var n=this._readableState,i={hasUnpiped:!1};// if we're not piping anywhere, then do nothing.
if(0===n.pipesCount)return this;// just one destination.  most common case.
if(1===n.pipesCount)return r&&r!==n.pipes||(r||(r=n.pipes),// got a match.
n.pipes=null,n.pipesCount=0,n.flowing=!1,r&&r.emit("unpipe",this,i)),this;// slow case. multiple pipe destinations.
if(!r){// remove all.
var o=n.pipes,a=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var s=0;s<a;s++)o[s].emit("unpipe",this,{hasUnpiped:!1});return this}// try to find the right one.
var l=V(n.pipes,r);return -1===l||(n.pipes.splice(l,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),r.emit("unpipe",this,i)),this},// set up data events if they are asked for
// Ensure readable listeners eventually get something
T.prototype.on=function(r,n){var i=h.prototype.on.call(this,r,n),a=this._readableState;return"data"===r?(// update readableListening so that resume() may be a no-op
// a few lines down. This is needed to support once('readable').
a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"!==r||a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,o("on readable",a.length,a.reading),a.length?L(this):a.reading||u.nextTick(D,this)),i},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(r,n){var i=h.prototype.removeListener.call(this,r,n);return"readable"===r&&// readable and reset the state. However this needs to happen
// after readable has been emitted but before I/O (nextTick) to
// support once('readable', fn) cycles. This means that calling
// resume within the same tick will have no
// effect.
u.nextTick(O,this),i},T.prototype.removeAllListeners=function(r){var n=h.prototype.removeAllListeners.apply(this,arguments);return("readable"===r||void 0===r)&&// readable and reset the state. However this needs to happen
// after readable has been emitted but before I/O (nextTick) to
// support once('readable', fn) cycles. This means that calling
// resume within the same tick will have no
// effect.
u.nextTick(O,this),n},// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
T.prototype.resume=function(){var r=this._readableState;return r.flowing||(o("resume"),// we flow only if there is no one listening
// for readable, but we still have to call
// resume()
r.flowing=!r.readableListening,r.resumeScheduled||(r.resumeScheduled=!0,u.nextTick(R,this,r))),r.paused=!1,this},T.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
T.prototype.wrap=function(r){var n=this,i=this._readableState,a=!1;// proxy all the other methods.
// important when wrapping filters and duplexes.
for(var s in r.on("end",function(){if(o("wrapped end"),i.decoder&&!i.ended){var r=i.decoder.end();r&&r.length&&n.push(r)}n.push(null)}),r.on("data",function(s){o("wrapped data"),i.decoder&&(s=i.decoder.write(s)),(!i.objectMode||null!=s)&&(i.objectMode||s&&s.length)&&(n.push(s)||(a=!0,r.pause()))}),r)void 0===this[s]&&"function"==typeof r[s]&&(this[s]=function(n){return function(){return r[n].apply(r,arguments)}}(s));// proxy certain important events.
for(var l=0;l<C.length;l++)r.on(C[l],this.emit.bind(this,C[l]));return(// when we try to consume some more bytes, simply unpause the
// underlying stream.
this._read=function(n){o("wrapped _read",n),a&&(a=!1,r.resume())},this)},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=eT("jw1Sa")),s(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._readableState.flowing},set:function(r){this._readableState&&(this._readableState.flowing=r)}}),// exposed for testing purposes only.
T._fromList=B,Object.defineProperty(T.prototype,"readableLength",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(r,n){return void 0===l&&(l=eT("HH1jY")),l(T,r,n)})}),eT.register("6qd2L",function(r,n){// shim for using process in browser
var i,o,a,s=r.exports={};function l(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function c(r){if(i===setTimeout)return setTimeout(r,0);// if setTimeout wasn't available but was latter defined
if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(r,0);try{// when when somebody has screwed with setTimeout but no I.E. maddness
return i(r,0)}catch(n){try{// When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
return i.call(null,r,0)}catch(n){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
return i.call(this,r,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:l}catch(r){i=l}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(r){o=u}}();var h=[],d=!1,f=-1;function p(){d&&a&&(d=!1,a.length?h=a.concat(h):f=-1,h.length&&m())}function m(){if(!d){var r=c(p);d=!0;for(var n=h.length;n;){for(a=h,h=[];++f<n;)a&&a[f].run();f=-1,n=h.length}a=null,d=!1,function(r){if(o===clearTimeout)return clearTimeout(r);// if clearTimeout wasn't available but was latter defined
if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(r);try{o(r)}catch(n){try{// When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
return o.call(null,r)}catch(n){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
// Some versions of I.E. have different rules for clearTimeout vs setTimeout
return o.call(this,r)}}}(r)}}// v8 likes predictible objects
function g(r,n){this.fun=r,this.array=n}function y(){}s.nextTick=function(r){var n=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];h.push(new g(r,n)),1!==h.length||d||c(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(r){return[]},s.binding=function(r){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(r){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}),eT.register("igIdM",function(r,n){r.exports=eT("dG33B").EventEmitter}),eT.register("3aNd6",function(n,i){r(n.exports,"Buffer",function(){return o},function(r){return o=r}),r(n.exports,"SlowBuffer",function(){return a},function(r){return a=r}),r(n.exports,"INSPECT_MAX_BYTES",function(){return s},function(r){return s=r}),r(n.exports,"kMaxLength",function(){return l},function(r){return l=r});var o,a,s,l,u=eT("5d11t"),c=eT("7rddL");let h="function"==typeof Symbol&&"function"// eslint-disable-line dot-notation
==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom")// eslint-disable-line dot-notation
:null;function d(r){if(r>2147483647)throw RangeError('The value "'+r+'" is invalid for option "size"');// Return an augmented `Uint8Array` instance
let n=new Uint8Array(r);return Object.setPrototypeOf(n,f.prototype),n}/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */function f(r,n,i){// Common case.
if("number"==typeof r){if("string"==typeof n)throw TypeError('The "string" argument must be of type string. Received type number');return g(r)}return p(r,n,i)}function p(r,n,i){if("string"==typeof r)return function(r,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!f.isEncoding(n))throw TypeError("Unknown encoding: "+n);let i=0|b(r,n),o=d(i),a=o.write(r,n);return a!==i&&// cause everything after the first invalid character to be ignored. (e.g.
// 'abxxcd' will be treated as 'ab')
(o=o.slice(0,a)),o}(r,n);if(ArrayBuffer.isView(r))return function(r){if(q(r,Uint8Array)){let n=new Uint8Array(r);return _(n.buffer,n.byteOffset,n.byteLength)}return y(r)}(r);if(null==r)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(q(r,ArrayBuffer)||r&&q(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(q(r,SharedArrayBuffer)||r&&q(r.buffer,SharedArrayBuffer)))return _(r,n,i);if("number"==typeof r)throw TypeError('The "value" argument must not be of type number. Received type number');let o=r.valueOf&&r.valueOf();if(null!=o&&o!==r)return f.from(o,n,i);let a=function(r){var n;if(f.isBuffer(r)){let n=0|v(r.length),i=d(n);return 0===i.length||r.copy(i,0,0,n),i}return void 0!==r.length?"number"!=typeof r.length||(n=r.length)!=n// eslint-disable-line no-self-compare
?d(0):y(r):"Buffer"===r.type&&Array.isArray(r.data)?y(r.data):void 0}(r);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return f.from(r[Symbol.toPrimitive]("string"),n,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function m(r){if("number"!=typeof r)throw TypeError('"size" argument must be of type number');if(r<0)throw RangeError('The value "'+r+'" is invalid for option "size"')}function g(r){return m(r),d(r<0?0:0|v(r))}function y(r){let n=r.length<0?0:0|v(r.length),i=d(n);for(let o=0;o<n;o+=1)i[o]=255&r[o];return i}function _(r,n,i){let o;if(n<0||r.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(i||0))throw RangeError('"length" is outside of buffer bounds');return(// Return an augmented `Uint8Array` instance
Object.setPrototypeOf(o=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),f.prototype),o)}function v(r){// Note: cannot use `length < K_MAX_LENGTH` here because that fails when
// length is NaN (which is otherwise coerced to zero.)
if(r>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function b(r,n){if(f.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||q(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let i=r.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===i)return 0;// Use a for loop to avoid recursion
let a=!1;for(;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return j(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return V(r).length;default:if(a)return o?-1:j(r).length// assume utf8
;n=(""+n).toLowerCase(),a=!0}}function x(r,n,i){let o=!1;// Return early if start > this.length. Done here to prevent potential uint32
// coercion fail below.
if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||// Force coercion to uint32. This will also coerce falsey/NaN values to 0.
(i>>>=0)<=(n>>>=0)))return"";for(r||(r="utf8");;)switch(r){case"hex":return function(r,n,i){let o=r.length;(!n||n<0)&&(n=0),(!i||i<0||i>o)&&(i=o);let a="";for(let o=n;o<i;++o)a+=$[r[o]];return a}(this,n,i);case"utf8":case"utf-8":return S(this,n,i);case"ascii":return function(r,n,i){let o="";i=Math.min(r.length,i);for(let a=n;a<i;++a)o+=String.fromCharCode(127&r[a]);return o}(this,n,i);case"latin1":case"binary":return function(r,n,i){let o="";i=Math.min(r.length,i);for(let a=n;a<i;++a)o+=String.fromCharCode(r[a]);return o}(this,n,i);case"base64":var a,s;return a=n,s=i,0===a&&s===this.length?u.fromByteArray(this):u.fromByteArray(this.slice(a,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(r,n,i){let o=r.slice(n,i),a="";// If bytes.length is odd, the last 8 bits must be ignored (same as node.js)
for(let r=0;r<o.length-1;r+=2)a+=String.fromCharCode(o[r]+256*o[r+1]);return a}(this,n,i);default:if(o)throw TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),o=!0}}function w(r,n,i){let o=r[n];r[n]=r[i],r[i]=o}// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function E(r,n,i,o,a){var s;// Empty buffer means no match
if(0===r.length)return -1;if("string"==typeof i?(o=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i// Coerce to Number.
)!=s&&(i=a?0:r.length-1),i<0&&(i=r.length+i),i>=r.length){if(a)return -1;i=r.length-1}else if(i<0){if(!a)return -1;i=0}// Finally, search either indexOf (if dir is true) or lastIndexOf
if("string"==typeof n&&(n=f.from(n,o)),f.isBuffer(n))return(// Special case: looking for empty string/buffer always fails
0===n.length?-1:C(r,n,i,o,a));if("number"==typeof n)return(n&=255// Search for a byte value [0-255]
,"function"==typeof Uint8Array.prototype.indexOf)?a?Uint8Array.prototype.indexOf.call(r,n,i):Uint8Array.prototype.lastIndexOf.call(r,n,i):C(r,[n],i,o,a);throw TypeError("val must be string, number or Buffer")}function C(r,n,i,o,a){let s,l=1,u=r.length,c=n.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(r.length<2||n.length<2)return -1;l=2,u/=2,c/=2,i/=2}function h(r,n){return 1===l?r[n]:r.readUInt16BE(n*l)}if(a){let o=-1;for(s=i;s<u;s++)if(h(r,s)===h(n,-1===o?0:s-o)){if(-1===o&&(o=s),s-o+1===c)return o*l}else -1!==o&&(s-=s-o),o=-1}else for(i+c>u&&(i=u-c),s=i;s>=0;s--){let i=!0;for(let o=0;o<c;o++)if(h(r,s+o)!==h(n,o)){i=!1;break}if(i)return s}return -1}function S(r,n,i){i=Math.min(r.length,i);let o=[],a=n;for(;a<i;){let n=r[a],s=null,l=n>239?4:n>223?3:n>191?2:1;if(a+l<=i){let i,o,u,c;switch(l){case 1:n<128&&(s=n);break;case 2:(192&(i=r[a+1]))==128&&(c=(31&n)<<6|63&i)>127&&(s=c);break;case 3:i=r[a+1],o=r[a+2],(192&i)==128&&(192&o)==128&&(c=(15&n)<<12|(63&i)<<6|63&o)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:i=r[a+1],o=r[a+2],u=r[a+3],(192&i)==128&&(192&o)==128&&(192&u)==128&&(c=(15&n)<<18|(63&i)<<12|(63&o)<<6|63&u)>65535&&c<1114112&&(s=c)}}null===s?(// we did not generate a valid codePoint so insert a
// replacement char (U+FFFD) and advance only 1 byte
s=65533,l=1):s>65535&&(// encode to utf16 (surrogate pair dance)
s-=65536,o.push(s>>>10&1023|55296),s=56320|1023&s),o.push(s),a+=l}return function(r){let n=r.length;if(n<=4096)return String.fromCharCode.apply(String,r)// avoid extra slice()
;// Decode in chunks to avoid "call stack size exceeded".
let i="",o=0;for(;o<n;)i+=String.fromCharCode.apply(String,r.slice(o,o+=4096));return i}(o)}/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */function T(r,n,i){if(r%1!=0||r<0)throw RangeError("offset is not uint");if(r+n>i)throw RangeError("Trying to access beyond buffer length")}function M(r,n,i,o,a,s){if(!f.isBuffer(r))throw TypeError('"buffer" argument must be a Buffer instance');if(n>a||n<s)throw RangeError('"value" argument is out of bounds');if(i+o>r.length)throw RangeError("Index out of range")}function k(r,n,i,o,a){R(n,o,a,r,i,7);let s=Number(n&BigInt(4294967295));r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s;let l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,i}function I(r,n,i,o,a){R(n,o,a,r,i,7);let s=Number(n&BigInt(4294967295));r[i+7]=s,s>>=8,r[i+6]=s,s>>=8,r[i+5]=s,s>>=8,r[i+4]=s;let l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i+3]=l,l>>=8,r[i+2]=l,l>>=8,r[i+1]=l,l>>=8,r[i]=l,i+8}function L(r,n,i,o,a,s){if(i+o>r.length||i<0)throw RangeError("Index out of range")}function A(r,n,i,o,a){return n=+n,i>>>=0,a||L(r,n,i,4,34028234663852886e22,-34028234663852886e22),c.write(r,n,i,o,23,4),i+4}function z(r,n,i,o,a){return n=+n,i>>>=0,a||L(r,n,i,8,17976931348623157e292,-17976931348623157e292),c.write(r,n,i,o,52,8),i+8}o=f,a=function(r){return+r!=r&&(r=0),f.alloc(+r)},s=50,l=2147483647,/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Print warning and recommend using `buffer` v4.x which has an Object
 *               implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * We report that the browser does not support typed arrays if the are not subclassable
 * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`
 * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support
 * for __proto__ and has a buggy typed array implementation.
 */f.TYPED_ARRAY_SUPPORT=function(){// Can typed array instances can be augmented?
try{let r=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(r,n),42===r.foo()}catch(r){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192// not used by this implementation
,/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/f.from=function(r,n,i){return p(r,n,i)},// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:
// https://github.com/feross/buffer/pull/148
Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/f.alloc=function(r,n,i){return(m(r),r<=0)?d(r):void 0!==n?"string"==typeof i?d(r).fill(n,i):d(r).fill(n):d(r)},/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */f.allocUnsafe=function(r){return g(r)},/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */f.allocUnsafeSlow=function(r){return g(r)},f.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==f.prototype// so Buffer.isBuffer(Buffer.prototype) will be false
},f.compare=function(r,n){if(q(r,Uint8Array)&&(r=f.from(r,r.offset,r.byteLength)),q(n,Uint8Array)&&(n=f.from(n,n.offset,n.byteLength)),!f.isBuffer(r)||!f.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;let i=r.length,o=n.length;for(let a=0,s=Math.min(i,o);a<s;++a)if(r[a]!==n[a]){i=r[a],o=n[a];break}return i<o?-1:o<i?1:0},f.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(r,n){let i;if(!Array.isArray(r))throw TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return f.alloc(0);if(void 0===n)for(i=0,n=0;i<r.length;++i)n+=r[i].length;let o=f.allocUnsafe(n),a=0;for(i=0;i<r.length;++i){let n=r[i];if(q(n,Uint8Array))a+n.length>o.length?(f.isBuffer(n)||(n=f.from(n)),n.copy(o,a)):Uint8Array.prototype.set.call(o,n,a);else if(f.isBuffer(n))n.copy(o,a);else throw TypeError('"list" argument must be an Array of Buffers');a+=n.length}return o},f.byteLength=b,// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)
// to detect a Buffer instance. It's not possible to use `instanceof Buffer`
// reliably in a browserify context because there could be multiple different
// copies of the 'buffer' package in use. This method works even for Buffer
// instances that were created from another copy of the `buffer` package.
// See: https://github.com/feross/buffer/issues/154
f.prototype._isBuffer=!0,f.prototype.swap16=function(){let r=this.length;if(r%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<r;n+=2)w(this,n,n+1);return this},f.prototype.swap32=function(){let r=this.length;if(r%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<r;n+=4)w(this,n,n+3),w(this,n+1,n+2);return this},f.prototype.swap64=function(){let r=this.length;if(r%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<r;n+=8)w(this,n,n+7),w(this,n+1,n+6),w(this,n+2,n+5),w(this,n+3,n+4);return this},f.prototype.toString=function(){let r=this.length;return 0===r?"":0==arguments.length?S(this,0,r):x.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(r){if(!f.isBuffer(r))throw TypeError("Argument must be a Buffer");return this===r||0===f.compare(this,r)},f.prototype.inspect=function(){let r="",n=s;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},h&&(f.prototype[h]=f.prototype.inspect),f.prototype.compare=function(r,n,i,o,a){if(q(r,Uint8Array)&&(r=f.from(r,r.offset,r.byteLength)),!f.isBuffer(r))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(void 0===n&&(n=0),void 0===i&&(i=r?r.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),n<0||i>r.length||o<0||a>this.length)throw RangeError("out of range index");if(o>=a&&n>=i)return 0;if(o>=a)return -1;if(n>=i)return 1;if(n>>>=0,i>>>=0,o>>>=0,a>>>=0,this===r)return 0;let s=a-o,l=i-n,u=Math.min(s,l),c=this.slice(o,a),h=r.slice(n,i);for(let r=0;r<u;++r)if(c[r]!==h[r]){s=c[r],l=h[r];break}return s<l?-1:l<s?1:0},f.prototype.includes=function(r,n,i){return -1!==this.indexOf(r,n,i)},f.prototype.indexOf=function(r,n,i){return E(this,r,n,i,!0)},f.prototype.lastIndexOf=function(r,n,i){return E(this,r,n,i,!1)},f.prototype.write=function(r,n,i,o){var a,s,l,u,c,h,d,f;// Buffer#write(string)
if(void 0===n)o="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)o=n,i=this.length,n=0;else if(isFinite(n))n>>>=0,isFinite(i)?(i>>>=0,void 0===o&&(o="utf8")):(o=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let p=this.length-n;if((void 0===i||i>p)&&(i=p),r.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let m=!1;for(;;)switch(o){case"hex":return function(r,n,i,o){let a;i=Number(i)||0;let s=r.length-i;o?(o=Number(o))>s&&(o=s):o=s;let l=n.length;for(o>l/2&&(o=l/2),a=0;a<o;++a){let o=parseInt(n.substr(2*a,2),16);if(o!=o)break;r[i+a]=o}return a}(this,r,n,i);case"utf8":case"utf-8":return a=n,s=i,U(j(r,this.length-a),this,a,s);case"ascii":case"latin1":case"binary":return l=n,u=i,U(function(r){let n=[];for(let i=0;i<r.length;++i)n.push(255&r.charCodeAt(i));return n}(r),this,l,u);case"base64":// Warning: maxLength not taken into account in base64Write
return c=n,h=i,U(V(r),this,c,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=n,f=i,U(function(r,n){let i,o;let a=[];for(let s=0;s<r.length&&!((n-=2)<0);++s)o=(i=r.charCodeAt(s))>>8,a.push(i%256),a.push(o);return a}(r,this.length-d),this,d,f);default:if(m)throw TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),m=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(r,n){let i=this.length;r=~~r,n=void 0===n?i:~~n,r<0?(r+=i)<0&&(r=0):r>i&&(r=i),n<0?(n+=i)<0&&(n=0):n>i&&(n=i),n<r&&(n=r);let o=this.subarray(r,n);return(// Return an augmented `Uint8Array` instance
Object.setPrototypeOf(o,f.prototype),o)},f.prototype.readUintLE=f.prototype.readUIntLE=function(r,n,i){r>>>=0,n>>>=0,i||T(r,n,this.length);let o=this[r],a=1,s=0;for(;++s<n&&(a*=256);)o+=this[r+s]*a;return o},f.prototype.readUintBE=f.prototype.readUIntBE=function(r,n,i){r>>>=0,n>>>=0,i||T(r,n,this.length);let o=this[r+--n],a=1;for(;n>0&&(a*=256);)o+=this[r+--n]*a;return o},f.prototype.readUint8=f.prototype.readUInt8=function(r,n){return r>>>=0,n||T(r,1,this.length),this[r]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(r,n){return r>>>=0,n||T(r,2,this.length),this[r]|this[r+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(r,n){return r>>>=0,n||T(r,2,this.length),this[r]<<8|this[r+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(r,n){return r>>>=0,n||T(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(r,n){return r>>>=0,n||T(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},f.prototype.readBigUInt64LE=H(function(r){F(r>>>=0,"offset");let n=this[r],i=this[r+7];(void 0===n||void 0===i)&&B(r,this.length-8);let o=n+256*this[++r]+65536*this[++r]+16777216*this[++r],a=this[++r]+256*this[++r]+65536*this[++r]+16777216*i;return BigInt(o)+(BigInt(a)<<BigInt(32))}),f.prototype.readBigUInt64BE=H(function(r){F(r>>>=0,"offset");let n=this[r],i=this[r+7];(void 0===n||void 0===i)&&B(r,this.length-8);let o=16777216*n+65536*this[++r]+256*this[++r]+this[++r],a=16777216*this[++r]+65536*this[++r]+256*this[++r]+i;return(BigInt(o)<<BigInt(32))+BigInt(a)}),f.prototype.readIntLE=function(r,n,i){r>>>=0,n>>>=0,i||T(r,n,this.length);let o=this[r],a=1,s=0;for(;++s<n&&(a*=256);)o+=this[r+s]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*n)),o},f.prototype.readIntBE=function(r,n,i){r>>>=0,n>>>=0,i||T(r,n,this.length);let o=n,a=1,s=this[r+--o];for(;o>0&&(a*=256);)s+=this[r+--o]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*n)),s},f.prototype.readInt8=function(r,n){return(r>>>=0,n||T(r,1,this.length),128&this[r])?-((255-this[r]+1)*1):this[r]},f.prototype.readInt16LE=function(r,n){r>>>=0,n||T(r,2,this.length);let i=this[r]|this[r+1]<<8;return 32768&i?4294901760|i:i},f.prototype.readInt16BE=function(r,n){r>>>=0,n||T(r,2,this.length);let i=this[r+1]|this[r]<<8;return 32768&i?4294901760|i:i},f.prototype.readInt32LE=function(r,n){return r>>>=0,n||T(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},f.prototype.readInt32BE=function(r,n){return r>>>=0,n||T(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},f.prototype.readBigInt64LE=H(function(r){F(r>>>=0,"offset");let n=this[r],i=this[r+7];(void 0===n||void 0===i)&&B(r,this.length-8);let o=this[r+4]+256*this[r+5]+65536*this[r+6]+(i<<24// Overflow
);return(BigInt(o)<<BigInt(32))+BigInt(n+256*this[++r]+65536*this[++r]+16777216*this[++r])}),f.prototype.readBigInt64BE=H(function(r){F(r>>>=0,"offset");let n=this[r],i=this[r+7];(void 0===n||void 0===i)&&B(r,this.length-8);let o=(n<<24)+// Overflow
65536*this[++r]+256*this[++r]+this[++r];return(BigInt(o)<<BigInt(32))+BigInt(16777216*this[++r]+65536*this[++r]+256*this[++r]+i)}),f.prototype.readFloatLE=function(r,n){return r>>>=0,n||T(r,4,this.length),c.read(this,r,!0,23,4)},f.prototype.readFloatBE=function(r,n){return r>>>=0,n||T(r,4,this.length),c.read(this,r,!1,23,4)},f.prototype.readDoubleLE=function(r,n){return r>>>=0,n||T(r,8,this.length),c.read(this,r,!0,52,8)},f.prototype.readDoubleBE=function(r,n){return r>>>=0,n||T(r,8,this.length),c.read(this,r,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(r,n,i,o){if(r=+r,n>>>=0,i>>>=0,!o){let o=Math.pow(2,8*i)-1;M(this,r,n,i,o,0)}let a=1,s=0;for(this[n]=255&r;++s<i&&(a*=256);)this[n+s]=r/a&255;return n+i},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(r,n,i,o){if(r=+r,n>>>=0,i>>>=0,!o){let o=Math.pow(2,8*i)-1;M(this,r,n,i,o,0)}let a=i-1,s=1;for(this[n+a]=255&r;--a>=0&&(s*=256);)this[n+a]=r/s&255;return n+i},f.prototype.writeUint8=f.prototype.writeUInt8=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,1,255,0),this[n]=255&r,n+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,2,65535,0),this[n]=255&r,this[n+1]=r>>>8,n+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=255&r,n+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=255&r,n+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},f.prototype.writeBigUInt64LE=H(function(r,n=0){return k(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=H(function(r,n=0){return I(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(r,n,i,o){if(r=+r,n>>>=0,!o){let o=Math.pow(2,8*i-1);M(this,r,n,i,o-1,-o)}let a=0,s=1,l=0;for(this[n]=255&r;++a<i&&(s*=256);)r<0&&0===l&&0!==this[n+a-1]&&(l=1),this[n+a]=(r/s>>0)-l&255;return n+i},f.prototype.writeIntBE=function(r,n,i,o){if(r=+r,n>>>=0,!o){let o=Math.pow(2,8*i-1);M(this,r,n,i,o-1,-o)}let a=i-1,s=1,l=0;for(this[n+a]=255&r;--a>=0&&(s*=256);)r<0&&0===l&&0!==this[n+a+1]&&(l=1),this[n+a]=(r/s>>0)-l&255;return n+i},f.prototype.writeInt8=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=255&r,n+1},f.prototype.writeInt16LE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,2,32767,-32768),this[n]=255&r,this[n+1]=r>>>8,n+2},f.prototype.writeInt16BE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=255&r,n+2},f.prototype.writeInt32LE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,4,2147483647,-2147483648),this[n]=255&r,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},f.prototype.writeInt32BE=function(r,n,i){return r=+r,n>>>=0,i||M(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},f.prototype.writeBigInt64LE=H(function(r,n=0){return k(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=H(function(r,n=0){return I(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(r,n,i){return A(this,r,n,!0,i)},f.prototype.writeFloatBE=function(r,n,i){return A(this,r,n,!1,i)},f.prototype.writeDoubleLE=function(r,n,i){return z(this,r,n,!0,i)},f.prototype.writeDoubleBE=function(r,n,i){return z(this,r,n,!1,i)},// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
f.prototype.copy=function(r,n,i,o){if(!f.isBuffer(r))throw TypeError("argument should be a Buffer");// Copy 0 bytes; we're done
if(i||(i=0),o||0===o||(o=this.length),n>=r.length&&(n=r.length),n||(n=0),o>0&&o<i&&(o=i),o===i||0===r.length||0===this.length)return 0;// Fatal error conditions
if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(o<0)throw RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),r.length-n<o-i&&(o=r.length-n+i);let a=o-i;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(n,i,o):Uint8Array.prototype.set.call(r,this.subarray(i,o),n),a},// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
f.prototype.fill=function(r,n,i,o){let a;// Handle string cases:
if("string"==typeof r){if("string"==typeof n?(o=n,n=0,i=this.length):"string"==typeof i&&(o=i,i=this.length),void 0!==o&&"string"!=typeof o)throw TypeError("encoding must be a string");if("string"==typeof o&&!f.isEncoding(o))throw TypeError("Unknown encoding: "+o);if(1===r.length){let n=r.charCodeAt(0);("utf8"===o&&n<128||"latin1"===o)&&(r=n)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));// Invalid ranges are not set to a default, so can range check early.
if(n<0||this.length<n||this.length<i)throw RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,r||(r=0),"number"==typeof r)for(a=n;a<i;++a)this[a]=r;else{let s=f.isBuffer(r)?r:f.from(r,o),l=s.length;if(0===l)throw TypeError('The value "'+r+'" is invalid for argument "value"');for(a=0;a<i-n;++a)this[a+n]=s[a%l]}return this};// CUSTOM ERRORS
// =============
// Simplified versions from Node, changed for Buffer-only usage
let P={};function O(r,n,i){P[r]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:n.apply(this,arguments),writable:!0,configurable:!0}),// Add the error code to the name to include it in the stack trace.
this.name=`${this.name} [${r}]`,// Access the stack to generate the error message including the error code
// from the name.
this.stack// eslint-disable-line no-unused-expressions
,// Reset the name to the actual name.
delete this.name}get code(){return r}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}function D(r){let n="",i=r.length,o="-"===r[0]?1:0;for(;i>=o+4;i-=3)n=`_${r.slice(i-3,i)}${n}`;return`${r.slice(0,i)}${n}`}function R(r,n,i,o,a,s){if(r>i||r<n){let o;let a="bigint"==typeof n?"n":"";throw o=s>3?0===n||n===BigInt(0)?`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:`>= ${n}${a} and <= ${i}${a}`,new P.ERR_OUT_OF_RANGE("value",o,r)}F(a,"offset"),(void 0===o[a]||void 0===o[a+s])&&B(a,o.length-(s+1))}function F(r,n){if("number"!=typeof r)throw new P.ERR_INVALID_ARG_TYPE(n,"number",r)}function B(r,n,i){if(Math.floor(r)!==r)throw F(r,i),new P.ERR_OUT_OF_RANGE(i||"offset","an integer",r);if(n<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${n}`,r)}O("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(r,n){return`The "${r}" argument must be of type number. Received type ${typeof n}`},TypeError),O("ERR_OUT_OF_RANGE",function(r,n,i){let o=`The value of "${r}" is out of range.`,a=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?a=D(String(i)):"bigint"==typeof i&&(a=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(a=D(a)),a+="n"),o+=` It must be ${n}. Received ${a}`},RangeError);// HELPER FUNCTIONS
// ================
let N=/[^+/0-9A-Za-z-_]/g;function j(r,n){let i;n=n||1/0;let o=r.length,a=null,s=[];for(let l=0;l<o;++l){// is surrogate component
if((i=r.charCodeAt(l))>55295&&i<57344){// last char was a lead
if(!a){// no lead yet
if(i>56319||l+1===o){(n-=3)>-1&&s.push(239,191,189);continue}// valid lead
a=i;continue}// 2 leads in a row
if(i<56320){(n-=3)>-1&&s.push(239,191,189),a=i;continue}// valid surrogate pair
i=(a-55296<<10|i-56320)+65536}else a&&(n-=3)>-1&&s.push(239,191,189);// encode utf8
if(a=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function V(r){return u.toByteArray(function(r){// Node converts strings with length < 2 to ''
if(// Node strips out invalid characters like \n and \t from the string, base64-js does not
(r=// Node takes equal signs as end of the Base64 encoding
(r=r.split("=")[0]).trim().replace(N,"")).length<2)return"";// Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
for(;r.length%4!=0;)r+="=";return r}(r))}function U(r,n,i,o){let a;for(a=0;a<o&&!(a+i>=n.length)&&!(a>=r.length);++a)n[a+i]=r[a];return a}// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass
// the `instanceof` check but they should be treated as of that type.
// See: https://github.com/feross/buffer/issues/166
function q(r,n){return r instanceof n||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===n.name}// Create lookup table for `toString('hex')`
// See: https://github.com/feross/buffer/issues/219
let $=function(){let r="0123456789abcdef",n=Array(256);for(let i=0;i<16;++i){let o=16*i;for(let a=0;a<16;++a)n[o+a]=r[i]+r[a]}return n}();// Return not function with Error if BigInt not supported
function H(r){return"undefined"==typeof BigInt?Z:r}function Z(){throw Error("BigInt not supported")}}),eT.register("5d11t",function(n,i){r(n.exports,"toByteArray",function(){return o},function(r){return o=r}),r(n.exports,"fromByteArray",function(){return a},function(r){return a=r}),o=function(r){var n,i,o=function(r){var n=r.length;if(n%4>0)throw Error("Invalid string. Length must be a multiple of 4");// Trim off extra bytes after placeholder bytes are found
// See: https://github.com/beatgammit/base64-js/issues/42
var i=r.indexOf("=");-1===i&&(i=n);var o=i===n?0:4-i%4;return[i,o]}(r),a=o[0],s=o[1],c=new u((a+s)*3/4-s),h=0,d=s>0?a-4:a;for(i=0;i<d;i+=4)n=l[r.charCodeAt(i)]<<18|l[r.charCodeAt(i+1)]<<12|l[r.charCodeAt(i+2)]<<6|l[r.charCodeAt(i+3)],c[h++]=n>>16&255,c[h++]=n>>8&255,c[h++]=255&n;return 2===s&&(n=l[r.charCodeAt(i)]<<2|l[r.charCodeAt(i+1)]>>4,c[h++]=255&n),1===s&&(n=l[r.charCodeAt(i)]<<10|l[r.charCodeAt(i+1)]<<4|l[r.charCodeAt(i+2)]>>2,c[h++]=n>>8&255,c[h++]=255&n),c},a=function(r){// go through the array every three bytes, we'll deal with trailing stuff later
for(var n,i=r.length,o=i%3// if we have 1 byte left, pad 2 bytes
,a=[],l=0,u=i-o;l<u;l+=16383// must be multiple of 3
)a.push(function(r,n,i){for(var o,a=[],l=n;l<i;l+=3)a.push(s[(o=(r[l]<<16&16711680)+(r[l+1]<<8&65280)+(255&r[l+2]))>>18&63]+s[o>>12&63]+s[o>>6&63]+s[63&o]);return a.join("")}(r,l,l+16383>u?u:l+16383));return 1===o?a.push(s[(n=r[i-1])>>2]+s[n<<4&63]+"=="):2===o&&a.push(s[(n=(r[i-2]<<8)+r[i-1])>>10]+s[n>>4&63]+s[n<<2&63]+"="),a.join("")};for(var o,a,s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,d=c.length;h<d;++h)s[h]=c[h],l[c.charCodeAt(h)]=h;// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63}),eT.register("7rddL",function(n,i){var o,a;r(n.exports,"read",function(){return o},function(r){return o=r}),r(n.exports,"write",function(){return a},function(r){return a=r}),o=function(r,n,i,o,a){var s,l,u=8*a-o-1,c=(1<<u)-1,h=c>>1,d=-7,f=i?a-1:0,p=i?-1:1,m=r[n+f];for(f+=p,s=m&(1<<-d)-1,m>>=-d,d+=u;d>0;s=256*s+r[n+f],f+=p,d-=8);for(l=s&(1<<-d)-1,s>>=-d,d+=o;d>0;l=256*l+r[n+f],f+=p,d-=8);if(0===s)s=1-h;else{if(s===c)return l?NaN:(m?-1:1)*(1/0);l+=Math.pow(2,o),s-=h}return(m?-1:1)*l*Math.pow(2,s-o)},a=function(r,n,i,o,a,s){var l,u,c,h=8*s-a-1,d=(1<<h)-1,f=d>>1,p=23===a?5960464477539062e-23:0,m=o?0:s-1,g=o?1:-1,y=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(u=isNaN(n)?1:0,l=d):(l=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-l))<1&&(l--,c*=2),l+f>=1?n+=p/c:n+=p*Math.pow(2,1-f),n*c>=2&&(l++,c/=2),l+f>=d?(u=0,l=d):l+f>=1?(u=(n*c-1)*Math.pow(2,a),l+=f):(u=n*Math.pow(2,f-1)*Math.pow(2,a),l=0));a>=8;r[i+m]=255&u,m+=g,u/=256,a-=8);for(l=l<<a|u,h+=a;h>0;r[i+m]=255&l,m+=g,l/=256,h-=8);r[i+m-g]|=128*y}}),eT.register("1wVs5",function(r,n){}),eT.register("sBkSV",function(r,n){function i(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}function o(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?i(Object(o),!0).forEach(function(n){var i,a;i=n,a=o[n],(i=s(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(o,n))})}return r}function a(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,s(o.key),o)}}function s(r){var n=function(r,n){if("object"!=typeof r||null===r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var o=i.call(r,n||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(r)}(r,"string");return"symbol"==typeof n?n:String(n)}var l=eT("3aNd6").Buffer,u=eT("1wVs5").inspect,c=u&&u.custom||"inspect";r.exports=/*#__PURE__*/function(){var r,n;function i(){(function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")})(this,i),this.head=null,this.tail=null,this.length=0}return r=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var r=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(0===this.length)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(0===this.length)return l.alloc(0);for(var n,i,o=l.allocUnsafe(r>>>0),a=this.head,s=0;a;)n=a.data,i=s,l.prototype.copy.call(n,o,i),s+=a.data.length,a=a.next;return o}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(// `slice` is the same for buffers and strings.
i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):i=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var a=n.data,s=r>a.length?a.length:r;if(s===a.length?o+=a:o+=a.slice(0,r),0==(r-=s)){s===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(s));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=l.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var a=i.data,s=r>a.length?a.length:r;if(a.copy(n,n.length-r,0,s),0==(r-=s)){s===a.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=a.slice(s));break}++o}return this.length-=o,n}},{key:c,value:function(r,n){return u(this,o(o({},n),{},{// Only inspect one level.
depth:0,// It should not recurse.
customInspect:!1}))}}],a(i.prototype,r),n&&a(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}()}),eT.register("g0P9t",function(r,n){var i=eT("6qd2L");function o(r,n){s(r,n),a(r)}function a(r){(!r._writableState||r._writableState.emitClose)&&(!r._readableState||r._readableState.emitClose)&&r.emit("close")}function s(r,n){r.emit("error",n)}r.exports={destroy:// undocumented cb() API, needed for core, not for public API
function(r,n){var l=this,u=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return u||c?n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(s,this,r)):i.nextTick(s,this,r)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(r){!n&&r?l._writableState?l._writableState.errorEmitted?i.nextTick(a,l):(l._writableState.errorEmitted=!0,i.nextTick(o,l,r)):i.nextTick(o,l,r):n?(i.nextTick(a,l),n(r)):i.nextTick(a,l)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,n){// We have tests that rely on errors being emitted
// in the same tick, so changing this is semver major.
// For now when you opt-in to autoDestroy we allow
// the error to be emitted nextTick. In a future
// semver major update we should change the default to this.
var i=r._readableState,o=r._writableState;i&&i.autoDestroy||o&&o.autoDestroy?r.destroy(n):r.emit("error",n)}}}),eT.register("dpXeK",function(r,n){var i=eT("bVf07").codes.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(r,n,o,a){var s=null!=n.highWaterMark?n.highWaterMark:a?n[o]:null;if(null!=s){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var l=a?o:"highWaterMark";throw new i(l,s)}return Math.floor(s)}// Default value
return r.objectMode?16:16384}}}),eT.register("bVf07",function(n,i){r(n.exports,"codes",function(){return o},function(r){return o=r});var o,a={};function s(r,n,i){i||(i=Error);var o=/*#__PURE__*/function(r){function i(i,o,a){return r.call(this,"string"==typeof n?n:n(i,o,a))||this}return i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,i}(i);o.prototype.name=i.name,o.prototype.code=r,a[r]=o}// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js
function l(r,n){if(!Array.isArray(r))return"of ".concat(n," ").concat(String(r));var i=r.length;return(r=r.map(function(r){return String(r)}),i>2)?"one of ".concat(n," ").concat(r.slice(0,i-1).join(", "),", or ")+r[i-1]:2===i?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith
s("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(r,n,i){if("string"==typeof n&&(o="not ",n.substr(!a||a<0?0:+a,o.length)===o)?(h="must not be",n=n.replace(/^not /,"")):h="must be",s=" argument",(void 0===u||u>r.length)&&(u=r.length),r.substring(u-s.length,u)===s)d="The ".concat(r," ").concat(h," ").concat(l(n,"type"));else{var o,a,s,u,c,h,d,f=("number"!=typeof c&&(c=0),c+1>r.length||-1===r.indexOf(".",c))?"argument":"property";d='The "'.concat(r,'" ').concat(f," ").concat(h," ").concat(l(n,"type"))}return d+". Received type ".concat(typeof i)},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o=a}),eT.register("9ODku",function(r,n){// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.
var i=eT("6qd2L"),o=Object.keys||function(r){var n=[];for(var i in r)n.push(i);return n};/*</replacement>*/r.exports=h;var a=eT("fTX3U"),s=eT("kYljA");eT("9M38k")(h,a);for(var l=o(s.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(r){if(!(this instanceof h))return new h(r);a.call(this,r),s.call(this,r),this.allowHalfOpen=!0,r&&(!1===r.readable&&(this.readable=!1),!1===r.writable&&(this.writable=!1),!1===r.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}// the no-half-open enforcer
function d(){this._writableState.ended||// no more data can be written.
// But allow more writes to happen in this tick.
i.nextTick(f,this)}function f(r){r.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){void 0!==this._readableState&&void 0!==this._writableState&&(// backward compatibility, the user is explicitly
// managing destroyed
this._readableState.destroyed=r,this._writableState.destroyed=r)}})}),eT.register("kYljA",function(r,n){// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.
var i,o,a=eT("6qd2L");// It seems a linked list but it is not
// there will be only 2 of these for each stream
function s(r){var n=this;this.next=null,this.entry=null,this.finish=function(){(function(r,n,i){var o=r.entry;for(r.entry=null;o;){var a=o.callback;n.pendingcb--,a(void 0),o=o.next}// reuse the free corkReq.
n.corkedRequestsFree.next=r})(n,r)}}r.exports=T,/*</replacement>*/T.WritableState=S;/*<replacement>*/var l={deprecate:eT("3ZPxO")},u=eT("igIdM"),c=eT("3aNd6").Buffer,h=(void 0!==ew?ew:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=eT("g0P9t"),f=eT("dpXeK").getHighWaterMark,p=eT("bVf07").codes,m=p.ERR_INVALID_ARG_TYPE,g=p.ERR_METHOD_NOT_IMPLEMENTED,y=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,x=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,E=d.errorOrDestroy;function C(){}function S(r,n,o){i=i||eT("9ODku"),r=r||{},"boolean"!=typeof o&&(o=n instanceof i),// object stream flag to indicate whether or not this stream
// contains buffers or objects.
this.objectMode=!!r.objectMode,o&&(this.objectMode=this.objectMode||!!r.writableObjectMode),// the point at which write() starts returning false
// Note: 0 is a valid value, means that we always return false if
// the entire buffer is not flushed immediately on write()
this.highWaterMark=f(this,r,"writableHighWaterMark",o),// if _final has been called
this.finalCalled=!1,// drain event flag.
this.needDrain=!1,// at the start of calling end()
this.ending=!1,// when end() has been called, and returned
this.ended=!1,// when 'finish' is emitted
this.finished=!1,// has it been destroyed
this.destroyed=!1;// should we decode strings into buffers before passing to _write?
// this is here so that some node-core streams can optimize string
// handling at a lower level.
var l=!1===r.decodeStrings;this.decodeStrings=!l,// Crypto is kind of old and crusty.  Historically, its default string
// encoding is 'binary' so we have to make this configurable.
// Everything else in the universe uses 'utf8', though.
this.defaultEncoding=r.defaultEncoding||"utf8",// not an actual buffer we keep track of, but a measurement
// of how much we're waiting to get pushed to some underlying
// socket or file.
this.length=0,// a flag to see when we're in the middle of a write.
this.writing=!1,// when true all writes will be buffered until .uncork() call
this.corked=0,// a flag to be able to tell if the onwrite cb is called immediately,
// or on a later tick.  We set this to true at first, because any
// actions that shouldn't happen until "later" should generally also
// not happen before the first write call.
this.sync=!0,// a flag to know if we're processing previously buffered items, which
// may call the _write() callback in the same tick, so that we don't
// end up in an overlapped onwrite situation.
this.bufferProcessing=!1,// the callback that's passed to _write(chunk,cb)
this.onwrite=function(r){(function(r,n){var i=r._writableState,o=i.sync,s=i.writecb;if("function"!=typeof s)throw new y;if(i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,n)--i.pendingcb,o?(// defer the callback if we are being called synchronously
// to avoid piling up things on the stack
a.nextTick(s,n),// this can emit finish, and it will always happen
// after error
a.nextTick(z,r,i),r._writableState.errorEmitted=!0,E(r,n)):(// the caller expect this to happen before if
// it is async
s(n),r._writableState.errorEmitted=!0,E(r,n),// this can emit finish, but finish must
// always follow error
z(r,i));else{// Check if we're actually ready to finish, but don't emit yet
var l=L(i)||r.destroyed;l||i.corked||i.bufferProcessing||!i.bufferedRequest||I(r,i),o?a.nextTick(k,r,i,l,s):k(r,i,l,s)}})(n,r)},// the callback that the user supplies to write(chunk,encoding,cb)
this.writecb=null,// the amount that is being written when _write is called.
this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,// number of pending user-supplied write callbacks
// this must be 0 before 'finish' can be emitted
this.pendingcb=0,// emit prefinish if the only thing we're waiting for is _write cbs
// This is relevant for synchronous Transform streams
this.prefinished=!1,// True if the error was already emitted and should not be thrown again
this.errorEmitted=!1,// Should close be emitted on destroy. Defaults to true.
this.emitClose=!1!==r.emitClose,// Should .destroy() be called after 'finish' (and potentially 'end')
this.autoDestroy=!!r.autoDestroy,// count buffered requests
this.bufferedRequestCount=0,// allocate the first CorkedRequest, there is always
// one allocated and free to use, and we maintain at most two
this.corkedRequestsFree=new s(this)}function T(r){// Writable ctor is applied to Duplexes, too.
// `realHasInstance` is necessary because using plain `instanceof`
// would return false, as no `_writableState` property is attached.
// Trying to use the custom `instanceof` for Writable here will also break the
// Node.js LazyTransform implementation, which has a non-trivial getter for
// `_writableState` that would lead to infinite recursion.
// Checking for a Stream.Duplex instance is faster here instead of inside
// the WritableState constructor, at least with V8 6.5
var n=this instanceof(i=i||eT("9ODku"));if(!n&&!o.call(T,this))return new T(r);this._writableState=new S(r,this,n),// legacy.
this.writable=!0,r&&("function"==typeof r.write&&(this._write=r.write),"function"==typeof r.writev&&(this._writev=r.writev),"function"==typeof r.destroy&&(this._destroy=r.destroy),"function"==typeof r.final&&(this._final=r.final)),u.call(this)}function M(r,n,i,o,a,s,l){n.writelen=o,n.writecb=l,n.writing=!0,n.sync=!0,n.destroyed?n.onwrite(new v("write")):i?r._writev(a,n.onwrite):r._write(a,s,n.onwrite),n.sync=!1}function k(r,n,i,o){i||0===n.length&&n.needDrain&&(n.needDrain=!1,r.emit("drain")),n.pendingcb--,o(),z(r,n)}// if there's something in the buffer waiting, then process it
function I(r,n){n.bufferProcessing=!0;var i=n.bufferedRequest;if(r._writev&&i&&i.next){var o=Array(n.bufferedRequestCount),a=n.corkedRequestsFree;a.entry=i;for(var l=0,u=!0;i;)o[l]=i,i.isBuf||(u=!1),i=i.next,l+=1;o.allBuffers=u,M(r,n,!0,n.length,o,"",a.finish),// doWrite is almost always async, defer these to save a bit of time
// as the hot path ends with doWrite
n.pendingcb++,n.lastBufferedRequest=null,a.next?(n.corkedRequestsFree=a.next,a.next=null):n.corkedRequestsFree=new s(n),n.bufferedRequestCount=0}else{// Slow case, write chunks one-by-one
for(;i;){var c=i.chunk,h=i.encoding,d=i.callback,f=n.objectMode?1:c.length;// if we didn't call the onwrite immediately, then
// it means that we need to wait until it does.
// also, that means that the chunk and cb are currently
// being processed, so move the buffer counter past them.
if(M(r,n,!1,f,c,h,d),i=i.next,n.bufferedRequestCount--,n.writing)break}null===i&&(n.lastBufferedRequest=null)}n.bufferedRequest=i,n.bufferProcessing=!1}function L(r){return r.ending&&0===r.length&&null===r.bufferedRequest&&!r.finished&&!r.writing}function A(r,n){r._final(function(i){n.pendingcb--,i&&E(r,i),n.prefinished=!0,r.emit("prefinish"),z(r,n)})}function z(r,n){var i=L(n);if(i&&(n.prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,a.nextTick(A,r,n))),0===n.pendingcb&&(n.finished=!0,r.emit("finish"),n.autoDestroy))){// In case of duplex streams we need a way to detect
// if the readable side is ready for autoDestroy as well
var o=r._readableState;(!o||o.autoDestroy&&o.endEmitted)&&r.destroy()}return i}eT("9M38k")(T,u),S.prototype.getBuffer=function(){for(var r=this.bufferedRequest,n=[];r;)n.push(r),r=r.next;return n},function(){try{Object.defineProperty(S.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(r){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(r){return!!o.call(this,r)||this===T&&r&&r._writableState instanceof S}})):o=function(r){return r instanceof this},// Otherwise people can pipe Writable streams, which is just wrong.
T.prototype.pipe=function(){E(this,new _)},T.prototype.write=function(r,n,i){var o,s,l,u,d,f,p,g=this._writableState,y=!1,_=!g.objectMode&&(o=r,c.isBuffer(o)||o instanceof h);return _&&!c.isBuffer(r)&&(s=r,r=c.from(s)),("function"==typeof n&&(i=n,n=null),_?n="buffer":n||(n=g.defaultEncoding),"function"!=typeof i&&(i=C),g.ending)?(l=i,// TODO: defer error events consistently everywhere, not just the cb
E(this,u=new x),a.nextTick(l,u)):(_||(d=r,f=i,null===d?p=new b:"string"==typeof d||g.objectMode||(p=new m("chunk",["string","Buffer"],d)),!p||(E(this,p),a.nextTick(f,p),0)))&&(g.pendingcb++,y=// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function(r,n,i,o,a,s){if(!i){var l,u,h=(l=o,u=a,n.objectMode||!1===n.decodeStrings||"string"!=typeof l||(l=c.from(l,u)),l);o!==h&&(i=!0,a="buffer",o=h)}var d=n.objectMode?1:o.length;n.length+=d;var f=n.length<n.highWaterMark;if(f||(n.needDrain=!0),n.writing||n.corked){var p=n.lastBufferedRequest;n.lastBufferedRequest={chunk:o,encoding:a,isBuf:i,callback:s,next:null},p?p.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else M(r,n,!1,d,o,a,s);return f}(this,g,_,r,n,i)),y},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var r=this._writableState;!r.corked||(r.corked--,r.writing||r.corked||r.bufferProcessing||!r.bufferedRequest||I(this,r))},T.prototype.setDefaultEncoding=function(r){if("string"==typeof r&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new w(r);return this._writableState.defaultEncoding=r,this},Object.defineProperty(T.prototype,"writableBuffer",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(r,n,i){i(new g("_write()"))},T.prototype._writev=null,T.prototype.end=function(r,n,i){var o,s=this._writableState;return"function"==typeof r?(i=r,r=null,n=null):"function"==typeof n&&(i=n,n=null),null!=r&&this.write(r,n),s.corked&&(s.corked=1,this.uncork()),s.ending||(o=i,s.ending=!0,z(this,s),o&&(s.finished?a.nextTick(o):this.once("finish",o)),s.ended=!0,this.writable=!1),this},Object.defineProperty(T.prototype,"writableLength",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{// making it explicit this property is not enumerable
// because otherwise some prototype manipulation in
// userland will fail
enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(r){this._writableState&&// backward compatibility, the user is explicitly
// managing destroyed
(this._writableState.destroyed=r)}}),T.prototype.destroy=d.destroy,T.prototype._undestroy=d.undestroy,T.prototype._destroy=function(r,n){n(r)}}),eT.register("3ZPxO",function(r,n){/**
 * Module exports.
 */r.exports=/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */function(r,n){if(i("noDeprecation"))return r;var o=!1;return function(){if(!o){if(i("throwDeprecation"))throw Error(n);i("traceDeprecation")?console.trace(n):console.warn(n),o=!0}return r.apply(this,arguments)}};/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */function i(r){// accessing global.localStorage can trigger a DOMException in sandboxed iframes
try{if(!ew.localStorage)return!1}catch(r){return!1}var n=ew.localStorage[r];return null!=n&&"true"===String(n).toLowerCase()}}),eT.register("g6ehz",function(n,i){r(n.exports,"StringDecoder",function(){return o},function(r){return o=r});var o,a=eT("2iVwY").Buffer,s=a.isEncoding||function(r){switch((r=""+r)&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(r){var n;switch(this.encoding=// Do not cache `Buffer.isEncoding` when checking encoding names as some
// modules monkey-patch it to support additional encodings
function(r){var n=function(r){var n;if(!r)return"utf8";for(;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(n)return;// undefined
r=(""+r).toLowerCase(),n=!0}}(r);if("string"!=typeof n&&(a.isEncoding===s||!s(r)))throw Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=h,this.end=d,n=4;break;case"utf8":this.fillLast=c,n=4;break;case"base64":this.text=f,this.end=p,n=3;break;default:this.write=m,this.end=g;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(n)}// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a
// continuation byte. If an invalid byte is detected, -2 is returned.
function u(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.
function c(r){var n=this.lastTotal-this.lastNeed,i=// Validates as many continuation bytes for a multi-byte UTF-8 character as
// needed or are available. If we see a non-continuation byte where we expect
// one, we "replace" the validated continuation bytes we've seen so far with
// a single UTF-8 replacement character ('\ufffd'), to match v8's UTF-8 decoding
// behavior. The continuation byte check is included three times in the case
// where all of the continuation bytes for a character exist in the same buffer.
// It is also done this way as a slight performance increase instead of using a
// loop.
function(r,n,i){if((192&n[0])!=128)return r.lastNeed=0,"";if(r.lastNeed>1&&n.length>1){if((192&n[1])!=128)return r.lastNeed=1,"";if(r.lastNeed>2&&n.length>2&&(192&n[2])!=128)return r.lastNeed=2,""}}(this,r,0);return void 0!==i?i:this.lastNeed<=r.length?(r.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(r.copy(this.lastChar,n,0,r.length),this.lastNeed-=r.length)}// UTF-16LE typically needs two bytes per character, but even if we have an even
// number of bytes available, we need to check if we end on a leading/high
// surrogate. In that case, we need to wait for the next two bytes in order to
// decode the last character properly.
function h(r,n){if((r.length-n)%2==0){var i=r.toString("utf16le",n);if(i){var o=i.charCodeAt(i.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",n,r.length-1)}// For UTF-16LE we do not explicitly append special replacement characters if we
// end on a partial character, we simply let v8 handle that.
function d(r){var n=r&&r.length?this.write(r):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,i)}return n}function f(r,n){var i=(r.length-n)%3;return 0===i?r.toString("base64",n):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",n,r.length-i))}function p(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)
function m(r){return r.toString(this.encoding)}function g(r){return r&&r.length?this.write(r):""}o=l,l.prototype.write=function(r){var n,i;if(0===r.length)return"";if(this.lastNeed){if(void 0===(n=this.fillLast(r)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<r.length?n?n+this.text(r,i):this.text(r,i):n||""},l.prototype.end=// For UTF-8, a replacement character is added when ending on a partial
// character.
function(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+"":n},// Returns only complete characters in a Buffer
l.prototype.text=// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a
// partial character, the character's bytes are buffered until the required
// number of bytes are available.
function(r,n){var i=// Checks at most 3 bytes at the end of a Buffer in order to detect an
// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)
// needed to complete the UTF-8 character (if applicable) are returned.
function(r,n,i){var o=n.length-1;if(o<i)return 0;var a=u(n[o]);return a>=0?(a>0&&(r.lastNeed=a-1),a):--o<i||-2===a?0:(a=u(n[o]))>=0?(a>0&&(r.lastNeed=a-2),a):--o<i||-2===a?0:(a=u(n[o]))>=0?(a>0&&(2===a?a=0:r.lastNeed=a-3),a):0}(this,r,n);if(!this.lastNeed)return r.toString("utf8",n);this.lastTotal=i;var o=r.length-(i-this.lastNeed);return r.copy(this.lastChar,0,o),r.toString("utf8",n,o)},// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer
l.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length}}),eT.register("2iVwY",function(r,n){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//* eslint-disable node/no-deprecated-api */var i=eT("3aNd6"),o=i.Buffer;// alternative to using Object.keys for old browsers
function a(r,n){for(var i in r)n[i]=r[i]}function s(r,n,i){return o(r,n,i)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=i:(// Copy properties from require('buffer')
a(i,r.exports),r.exports.Buffer=s),s.prototype=Object.create(o.prototype),// Copy static methods from Buffer
a(o,s),s.from=function(r,n,i){if("number"==typeof r)throw TypeError("Argument must not be a number");return o(r,n,i)},s.alloc=function(r,n,i){if("number"!=typeof r)throw TypeError("Argument must be a number");var a=o(r);return void 0!==n?"string"==typeof i?a.fill(n,i):a.fill(n):a.fill(0),a},s.allocUnsafe=function(r){if("number"!=typeof r)throw TypeError("Argument must be a number");return o(r)},s.allocUnsafeSlow=function(r){if("number"!=typeof r)throw TypeError("Argument must be a number");return i.SlowBuffer(r)}}),eT.register("jw1Sa",function(r,n){var i,o=eT("6qd2L");function a(r,n,i){var o;return(n="symbol"==typeof(o=function(r,n){if("object"!=typeof r||null===r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var o=i.call(r,n||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(r)}(n,"string"))?o:String(o))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}var s=eT("jR9FH"),l=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),h=Symbol("ended"),d=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function m(r,n){return{value:r,done:n}}function g(r){var n=r[l];if(null!==n){var i=r[p].read();null!==i&&(r[d]=null,r[l]=null,r[u]=null,n(m(i,!1)))}}function y(r){// we wait for the next tick, because it might
// emit an error with process.nextTick
o.nextTick(g,r)}var _=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((a(i={get stream(){return this[p]},next:function(){var r,n,i=this,a=this[c];if(null!==a)return Promise.reject(a);if(this[h])return Promise.resolve(m(void 0,!0));if(this[p].destroyed)// called, the error will be emitted via nextTick, and
// we cannot guarantee that there is no error lingering around
// waiting to be emitted.
return new Promise(function(r,n){o.nextTick(function(){i[c]?n(i[c]):r(m(void 0,!0))})});// if we have multiple next() calls
// we will wait for the previous Promise to finish
// this logic is optimized to support for await loops,
// where next() is only called once at a time
var s=this[d];if(s)n=new Promise((r=this,function(n,i){s.then(function(){if(r[h]){n(m(void 0,!0));return}r[f](n,i)},i)}));else{// fast path needed to support multiple this.push()
// without triggering the next() queue
var l=this[p].read();if(null!==l)return Promise.resolve(m(l,!1));n=new Promise(this[f])}return this[d]=n,n}},Symbol.asyncIterator,function(){return this}),a(i,"return",function(){var r=this;// destroy(err, cb) is a private API
// we can guarantee we have that here, because we control the
// Readable class this is attached to
return new Promise(function(n,i){r[p].destroy(null,function(r){if(r){i(r);return}n(m(void 0,!0))})})}),i),_);r.exports=function(r){var n,i=Object.create(v,(a(n={},p,{value:r,writable:!0}),a(n,l,{value:null,writable:!0}),a(n,u,{value:null,writable:!0}),a(n,c,{value:null,writable:!0}),a(n,h,{value:r._readableState.endEmitted,writable:!0}),a(n,f,{value:function(r,n){var o=i[p].read();o?(i[d]=null,i[l]=null,i[u]=null,r(m(o,!1))):(i[l]=r,i[u]=n)},writable:!0}),n));return i[d]=null,s(r,function(r){if(r&&"ERR_STREAM_PREMATURE_CLOSE"!==r.code){var n=i[u];null!==n&&(i[d]=null,i[l]=null,i[u]=null,n(r)),i[c]=r;return}var o=i[l];null!==o&&(i[d]=null,i[l]=null,i[u]=null,o(m(void 0,!0))),i[h]=!0}),r.on("readable",y.bind(null,i)),i}}),eT.register("jR9FH",function(r,n){var i=eT("bVf07").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}r.exports=function r(n,a,s){if("function"==typeof a)return r(n,null,a);a||(a={}),l=s||o,u=!1,s=function(){if(!u){u=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];l.apply(this,n)}};var l,u,c=a.readable||!1!==a.readable&&n.readable,h=a.writable||!1!==a.writable&&n.writable,d=function(){n.writable||p()},f=n._writableState&&n._writableState.finished,p=function(){h=!1,f=!0,c||s.call(n)},m=n._readableState&&n._readableState.endEmitted,g=function(){c=!1,m=!0,h||s.call(n)},y=function(r){s.call(n,r)},_=function(){var r;return c&&!m?(n._readableState&&n._readableState.ended||(r=new i),s.call(n,r)):h&&!f?(n._writableState&&n._writableState.ended||(r=new i),s.call(n,r)):void 0},v=function(){n.req.on("finish",p)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",p),n.on("abort",_),n.req?v():n.on("request",v)):h&&!n._writableState&&(// legacy streams
n.on("end",d),n.on("close",d)),n.on("end",g),n.on("finish",p),!1!==a.error&&n.on("error",y),n.on("close",_),function(){n.removeListener("complete",p),n.removeListener("abort",_),n.removeListener("request",v),n.req&&n.req.removeListener("finish",p),n.removeListener("end",d),n.removeListener("close",d),n.removeListener("finish",p),n.removeListener("end",g),n.removeListener("error",y),n.removeListener("close",_)}}}),eT.register("HH1jY",function(r,n){r.exports=function(){throw Error("Readable.from is not available in the browser")}}),eT.register("aurW9",function(r,n){r.exports=h;var i=eT("bVf07").codes,o=i.ERR_METHOD_NOT_IMPLEMENTED,a=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=i.ERR_TRANSFORM_WITH_LENGTH_0,u=eT("9ODku");function c(r,n){var i=this._transformState;i.transforming=!1;var o=i.writecb;if(null===o)return this.emit("error",new a);i.writechunk=null,i.writecb=null,null!=n&&this.push(n),o(r);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function h(r){if(!(this instanceof h))return new h(r);u.call(this,r),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},// start out asking for a readable event once data is transformed.
this._readableState.needReadable=!0,// we have implemented the _read method, and done the other things
// that Readable wants before the first _read call, so unset the
// sync guard flag.
this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),// When the writable side finishes, then flush out anything remaining.
this.on("prefinish",d)}function d(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(n,i){f(r,n,i)})}function f(r,n,i){if(n)return r.emit("error",n);// TODO(BridgeAR): Write a test for these two error cases
// if there's nothing in the write buffer, then that means
// that nothing more will ever be provided
if(null!=i&&r.push(i),r._writableState.length)throw new l;if(r._transformState.transforming)throw new s;return r.push(null)}eT("9M38k")(h,u),h.prototype.push=function(r,n){return this._transformState.needTransform=!1,u.prototype.push.call(this,r,n)},// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
h.prototype._transform=function(r,n,i){i(new o("_transform()"))},h.prototype._write=function(r,n,i){var o=this._transformState;if(o.writecb=i,o.writechunk=r,o.writeencoding=n,!o.transforming){var a=this._readableState;(o.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
h.prototype._read=function(r){var n=this._transformState;null===n.writechunk||n.transforming?// will get processed, now that we've asked for it.
n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))},h.prototype._destroy=function(r,n){u.prototype._destroy.call(this,r,function(r){n(r)})}}),eT.register("aGOT9",function(r,n){r.exports=o;var i=eT("aurW9");function o(r){if(!(this instanceof o))return new o(r);i.call(this,r)}eT("9M38k")(o,i),o.prototype._transform=function(r,n,i){i(null,r)}}),eT.register("6tlF8",function(r,n){var i,o=eT("bVf07").codes,a=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function l(r){// Rethrow the error if it exists to avoid swallowing it
if(r)throw r}function u(r){r()}function c(r,n){return r.pipe(n)}r.exports=function(){for(var r,n,o=arguments.length,h=Array(o),d=0;d<o;d++)h[d]=arguments[d];var f=(r=h).length&&"function"==typeof r[r.length-1]?r.pop():l;if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new a("streams");var p=h.map(function(r,o){var a,l,c,d,m,g=o<h.length-1;return l=a=function(r){n||(n=r),r&&p.forEach(u),g||(p.forEach(u),f(n))},c=!1,a=function(){c||(c=!0,l.apply(void 0,arguments))},d=!1,r.on("close",function(){d=!0}),void 0===i&&(i=eT("jR9FH")),i(r,{readable:g,writable:o>0},function(r){if(r)return a(r);d=!0,a()}),m=!1,function(n){if(!d&&!m){// request.destroy just do .end - .abort is what we want
if(m=!0,r.setHeader&&"function"==typeof r.abort)return r.abort();if("function"==typeof r.destroy)return r.destroy();a(n||new s("pipe"))}}});return h.reduce(c)}});var eM={};eM=eT("6ObR8");var ek={};!// DCE check should happen before ReactDOM bundle executes so that
// DevTools can report bad minification during injection.
function r(){/* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{// Verify that the code above has been dead code eliminated (DCE'd).
__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(r){// DevTools shouldn't crash React, no matter what.
// We should still report in case we break this code.
console.error(r)}}(),c=(ek=eT("h8vP0")).createRoot,ek.hydrateRoot;var eI=eT("exYeM"),eL={},eA={};r(eA,"atom",function(){return h},function(r){return h=r}),r(eA,"createStore",function(){return d},function(r){return d=r}),r(eA,"getDefaultStore",function(){return f},function(r){return f=r});var ez=0,eP=function(r){return"init"in r},eO=function(r){return!!r.write},eD=new WeakMap,eR=function(r,n){eD.set(r,n),r.catch(function(){}).finally(function(){return eD.delete(r)})},eF=function(r,n){var i=eD.get(r);i&&(eD.delete(r),i(n))},eB=function(r,n){r.status="fulfilled",r.value=n},eN=function(r,n){r.status="rejected",r.reason=n},ej=function(r,n){return"v"in r&&"v"in n&&Object.is(r.v,n.v)},eV=function(r,n){return"e"in r&&"e"in n&&Object.is(r.e,n.e)},eU=function(r){return"v"in r&&r.v instanceof Promise},eq=function(r){if("e"in r)throw r.e;return r.v},e$=function(){var r=new WeakMap,n=new WeakMap,i=new Map,o=function(n){return r.get(n)},a=function(n,o){var a=r.get(n);if(r.set(n,o),i.has(n)||i.set(n,a),a&&eU(a)){var s="v"in o?o.v instanceof Promise?o.v:Promise.resolve(o.v):Promise.reject(o.e);eF(a.v,s)}},s=function(r,n,i){var o=new Map,a=!1;i.forEach(function(i,s){i||s!==r||(i=n),i&&(o.set(s,i),n.d.get(s)!==i&&(a=!0))}),(a||n.d.size!==o.size)&&(n.d=o)},l=function(r,n,i){var l=o(r),u={d:(null==l?void 0:l.d)||new Map,v:n};if(i&&s(r,u,i),l&&ej(l,u)&&l.d===u.d)return l;if(l&&eU(l)&&eU(u)&&"v"in l&&"v"in u&&l.v.orig&&l.v.orig===u.v.orig){if(l.d===u.d)return l;u.v=l.v}return a(r,u),u},u=function(r,i,a,s){if("function"==typeof(null==i?void 0:i.then)){var u,c=new Promise(function(s,h){var d=!1;i.then(function(i){if(!d){d=!0;var u=o(r),h=l(r,c,a);eB(c,i),s(i),n.has(r)&&(null==u?void 0:u.d)!==h.d&&b(r,h,null==u?void 0:u.d)}},function(i){if(!d){d=!0;var s=o(r),u=l(r,c,a);eN(c,i),h(i),n.has(r)&&(null==s?void 0:s.d)!==u.d&&b(r,u,null==s?void 0:s.d)}}),u=function(r){d||(d=!0,r.then(function(r){return eB(c,r)},function(r){return eN(c,r)}),s(r))}});return c.orig=i,c.status="pending",eR(c,function(r){r&&u(r),null==s||s()}),l(r,c,a)}return l(r,i,a)},c=function(r,n,i){var l=o(r),u={d:(null==l?void 0:l.d)||new Map,e:n};return(i&&s(r,u,i),l&&eV(l,u)&&l.d===u.d)?l:(a(r,u),u)},h=function r(i,a){var s,l,h=o(i);if(!a&&h&&(n.has(i)||Array.from(h.d).every(function(n){var o=n[0],a=n[1];return o===i||r(o)===a})))return h;var d=new Map,f=!0;try{var p=i.read(function(n){if(n===i){var a=o(n);if(a)return d.set(n,a),eq(a);if(eP(n))return d.set(n,void 0),n.init;throw Error("no atom init")}var s=r(n);return d.set(n,s),eq(s)},{get signal(){return s||(s=new AbortController),s.signal},get setSelf(){return!l&&eO(i)&&(l=function(){if(!f){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return y.apply(void 0,[i].concat(n))}}),l}});return u(i,p,d,function(){var r;return null==(r=s)?void 0:r.abort()})}catch(r){return c(i,r,d)}finally{f=!1}},d=function(r){var i=n.get(r);return i||(i=_(r)),i},f=function(r,n){return!n.l.size&&(!n.t.size||1===n.t.size&&n.t.has(r))},p=function(r){var i=n.get(r);i&&f(r,i)&&v(r)},m=function(r){var a=new Map,s=new WeakMap,l=function(r){var a,s=new Set(null==(a=n.get(r))?void 0:a.t);return i.forEach(function(n,i){var a;null!=(a=o(i))&&a.d.has(r)&&s.add(i)}),s};!function r(n){l(n).forEach(function(i){i!==n&&(a.set(i,(a.get(i)||new Set).add(n)),s.set(i,(s.get(i)||0)+1),r(i))})}(r),function r(n){l(n).forEach(function(i){if(i!==n){var l=s.get(i);if(l&&s.set(i,--l),!l){var u,c=!!(null!=(u=a.get(i))&&u.size);if(c){var d=o(i),f=h(i,!0);c=!d||!ej(d,f)}c||a.forEach(function(r){return r.delete(i)})}r(i)}})}(r)},g=function r(n){for(var i=!0,a=arguments.length,s=Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];var c=n.write.apply(n,[function(r){return eq(h(r))},function(a){for(var s,l=arguments.length,c=Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];if(a===n){if(!eP(a))throw Error("atom not writable");var d=o(a),f=u(a,c[0]);d&&ej(d,f)||m(a)}else s=r.apply(void 0,[a].concat(c));return i||x(),s}].concat(s));return i=!1,c},y=function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=g.apply(void 0,[r].concat(i));return x(),a},_=function r(i,a,s){var l,u=s||[];null==(l=o(i))||l.d.forEach(function(o,a){var s=n.get(a);s?s.t.add(i):a!==i&&r(a,i,u)}),h(i);var c={t:new Set(a&&[a]),l:new Set};if(n.set(i,c),eO(i)&&i.onMount){var d=i.onMount;u.push(function(){var r=d(function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return y.apply(void 0,[i].concat(n))});r&&(c.u=r)})}return s||u.forEach(function(r){return r()}),c},v=function r(i){var a,s=null==(a=n.get(i))?void 0:a.u;s&&s(),n.delete(i);var l=o(i);l&&(eU(l)&&eF(l.v),l.d.forEach(function(o,a){if(a!==i){var s=n.get(a);s&&(s.t.delete(i),f(a,s)&&r(a))}}))},b=function(r,i,o){var a=new Set(i.d.keys());null==o||o.forEach(function(i,o){if(a.has(o)){a.delete(o);return}var s=n.get(o);s&&(s.t.delete(r),f(o,s)&&v(o))}),a.forEach(function(i){var o=n.get(i);o?o.t.add(r):n.has(r)&&_(i,r)})},x=function(){for(;i.size;){var r=Array.from(i);i.clear(),r.forEach(function(r){var i=r[0],a=r[1],s=o(i);if(s){var l=n.get(i);l&&s.d!==(null==a?void 0:a.d)&&b(i,s,null==a?void 0:a.d),l&&!(a&&!eU(a)&&(ej(a,s)||eV(a,s)))&&l.l.forEach(function(r){return r()})}})}};return{get:function(r){return eq(h(r))},set:y,sub:function(r,n){var i=d(r);x();var o=i.l;return o.add(n),function(){o.delete(n),p(r)}}}};h=function(r,n){var i="atom"+ ++ez,o={toString:function(){return i}};return"function"==typeof r?o.read=r:(o.init=r,o.read=function(r){return r(o)},o.write=function(r,n,i){return n(o,"function"==typeof i?i(r(o)):i)}),n&&(o.write=n),o},d=e$,f=function(){return p||(p=e$()),p};var eH={};r(eH,"Provider",function(){return m},function(r){return m=r}),r(eH,"useAtom",function(){return g},function(r){return g=r}),r(eH,"useAtomValue",function(){return y},function(r){return y=r}),r(eH,"useSetAtom",function(){return _},function(r){return _=r}),r(eH,"useStore",function(){return v},function(r){return v=r});var eI=eT("exYeM"),eZ=eI.createContext(void 0),eG=function(r){var n=eI.useContext(eZ);return(null==r?void 0:r.store)||n||f()},eW=eI.use||function(r){if("pending"===r.status)throw r;if("fulfilled"===r.status)return r.value;if("rejected"===r.status)throw r.reason;throw r.status="pending",r.then(function(n){r.status="fulfilled",r.value=n},function(n){r.status="rejected",r.reason=n}),r};function eX(r,n){var i,o=eG(n),a=eI.useReducer(function(n){var i=o.get(r);return Object.is(n[0],i)&&n[1]===o&&n[2]===r?n:[i,o,r]},void 0,function(){return[o.get(r),o,r]}),s=a[0],l=s[0],u=s[1],c=s[2],h=a[1],d=l;(u!==o||c!==r)&&(h(),d=o.get(r));var f=null==n?void 0:n.delay;return eI.useEffect(function(){var n=o.sub(r,function(){if("number"==typeof f){setTimeout(h,f);return}h()});return h(),n},[o,r,f]),eI.useDebugValue(d),"function"==typeof(null==(i=d)?void 0:i.then)?eW(d):d}function eY(r,n){var i=eG(n);return eI.useCallback(function(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return i.set.apply(i,[r].concat(o))},[i,r])}m=function(r){var n=r.children,i=r.store,o=eI.useRef();return i||o.current||(o.current=d()),eI.createElement(eZ.Provider,{value:i||o.current},n)},g=function(r,n){return[eX(r,n),eY(r,n)]},y=eX,_=eY,v=eG,Object.keys(eA).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(eL,r)||Object.defineProperty(eL,r,{enumerable:!0,get:function(){return eA[r]}})}),Object.keys(eH).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(eL,r)||Object.defineProperty(eL,r,{enumerable:!0,get:function(){return eH[r]}})});var eK={};eK=eT("beWdq");var eI=eT("exYeM"),eJ={};//
eJ=function(r,n,i,o){var a=i?i.call(o,r,n):void 0;if(void 0!==a)return!!a;if(r===n)return!0;if("object"!=typeof r||!r||"object"!=typeof n||!n)return!1;var s=Object.keys(r),l=Object.keys(n);if(s.length!==l.length)return!1;// Test for A's keys different from B.
for(var u=Object.prototype.hasOwnProperty.bind(n),c=0;c<s.length;c++){var h=s[c];if(!u(h))return!1;var d=r[h],f=n[h];if(!1===(a=i?i.call(o,d,f,h):void 0)||void 0===a&&d!==f)return!1}return!0};var eQ=function(r){function n(r,n,o){var a=n.trim().split(g);n=a;var s=a.length,l=r.length;switch(l){case 0:case 1:var u=0;for(r=0===l?"":r[0]+" ";u<s;++u)n[u]=i(r,n[u],o).trim();break;default:var c=u=0;for(n=[];u<s;++u)for(var h=0;h<l;++h)n[c++]=i(r[h]+" ",a[u],o).trim()}return n}function i(r,n,i){var o=n.charCodeAt(0);switch(33>o&&(o=(n=n.trim()).charCodeAt(0)),o){case 38:return n.replace(y,"$1"+r.trim());case 58:return r.trim()+n.replace(y,"$1"+r.trim());default:if(0<1*i&&0<n.indexOf("\f"))return n.replace(y,(58===r.charCodeAt(0)?"":"$1")+r.trim())}return r+n}function o(r,n,i,s){var l=r+";",u=2*n+3*i+4*s;if(944===u){r=l.indexOf(":",9)+1;var c=l.substring(r,l.length-1).trim();return c=l.substring(0,r).trim()+c+";",1===A||2===A&&a(c,1)?"-webkit-"+c+c:c}if(0===A||2===A&&!a(l,1))return l;switch(u){case 1015:return 97===l.charCodeAt(10)?"-webkit-"+l+l:l;case 951:return 116===l.charCodeAt(3)?"-webkit-"+l+l:l;case 963:return 110===l.charCodeAt(5)?"-webkit-"+l+l:l;case 1009:if(100!==l.charCodeAt(4))break;case 969:case 942:return"-webkit-"+l+l;case 978:return"-webkit-"+l+"-moz-"+l+l;case 1019:case 983:return"-webkit-"+l+"-moz-"+l+"-ms-"+l+l;case 883:if(45===l.charCodeAt(8))return"-webkit-"+l+l;if(0<l.indexOf("image-set(",11))return l.replace(M,"$1-webkit-$2")+l;break;case 932:if(45===l.charCodeAt(4))switch(l.charCodeAt(5)){case 103:return"-webkit-box-"+l.replace("-grow","")+"-webkit-"+l+"-ms-"+l.replace("grow","positive")+l;case 115:return"-webkit-"+l+"-ms-"+l.replace("shrink","negative")+l;case 98:return"-webkit-"+l+"-ms-"+l.replace("basis","preferred-size")+l}return"-webkit-"+l+"-ms-"+l+l;case 964:return"-webkit-"+l+"-ms-flex-"+l+l;case 1023:if(99!==l.charCodeAt(8))break;return"-webkit-box-pack"+(c=l.substring(l.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+l+"-ms-flex-pack"+c+l;case 1005:return p.test(l)?l.replace(f,":-webkit-")+l.replace(f,":-moz-")+l:l;case 1e3:switch(n=(c=l.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(n)){case 226:c=l.replace(x,"tb");break;case 232:c=l.replace(x,"tb-rl");break;case 220:c=l.replace(x,"lr");break;default:return l}return"-webkit-"+l+"-ms-"+c+l;case 1017:if(-1===l.indexOf("sticky",9))break;case 975:switch(n=(l=r).length-10,u=(c=(33===l.charCodeAt(n)?l.substring(0,n):l).substring(r.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:l=l.replace(c,"-webkit-"+c)+";"+l;break;case 207:case 102:l=l.replace(c,"-webkit-"+(102<u?"inline-":"")+"box")+";"+l.replace(c,"-webkit-"+c)+";"+l.replace(c,"-ms-"+c+"box")+";"+l}return l+";";case 938:if(45===l.charCodeAt(5))switch(l.charCodeAt(6)){case 105:return c=l.replace("-items",""),"-webkit-"+l+"-webkit-box-"+c+"-ms-flex-"+c+l;case 115:return"-webkit-"+l+"-ms-flex-item-"+l.replace(C,"")+l;default:return"-webkit-"+l+"-ms-flex-line-pack"+l.replace("align-content","").replace(C,"")+l}break;case 973:case 989:if(45!==l.charCodeAt(3)||122===l.charCodeAt(4))break;case 931:case 953:if(!0===T.test(r))return 115===(c=r.substring(r.indexOf(":")+1)).charCodeAt(0)?o(r.replace("stretch","fill-available"),n,i,s).replace(":fill-available",":stretch"):l.replace(c,"-webkit-"+c)+l.replace(c,"-moz-"+c.replace("fill-",""))+l;break;case 962:if(l="-webkit-"+l+(102===l.charCodeAt(5)?"-ms-"+l:"")+l,211===i+s&&105===l.charCodeAt(13)&&0<l.indexOf("transform",10))return l.substring(0,l.indexOf(";",27)+1).replace(m,"$1-webkit-$2")+l}return l}function a(r,n){var i=r.indexOf(1===n?":":"{"),o=r.substring(0,3!==n?i:10);return i=r.substring(i+1,r.length-1),D(2!==n?o:o.replace(S,"$1"),i,n)}function s(r,n){var i=o(n,n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2));return i!==n+";"?i.replace(E," or ($1)").substring(4):"("+n+")"}function l(r,n,i,o,a,s,l,u,h,d){for(var f,p=0,m=n;p<O;++p)switch(f=P[p].call(c,r,m,i,o,a,s,l,u,h,d)){case void 0:case!1:case!0:case null:break;default:m=f}if(m!==n)return m}function u(r){return void 0!==(r=r.prefix)&&(D=null,r?"function"!=typeof r?A=1:(A=2,D=r):A=0),u}function c(r,i){var u=r;if(33>u.charCodeAt(0)&&(u=u.trim()),u=[u],0<O){var c=l(-1,i,u,u,I,k,0,0,0,0);void 0!==c&&"string"==typeof c&&(i=c)}var f=function r(i,u,c,f,p){for(var m,g,y,x,E,C=0,S=0,T=0,M=0,P=0,D=0,F=y=m=0,B=0,N=0,j=0,V=0,U=c.length,q=U-1,$="",H="",Z="",G="";B<U;){if(g=c.charCodeAt(B),B===q&&0!==S+M+T+C&&(0!==S&&(g=47===S?10:47),M=T=C=0,U++,q++),0===S+M+T+C){if(B===q&&(0<N&&($=$.replace(d,"")),0<$.trim().length)){switch(g){case 32:case 9:case 59:case 13:case 10:break;default:$+=c.charAt(B)}g=59}switch(g){case 123:for(m=($=$.trim()).charCodeAt(0),y=1,V=++B;B<U;){switch(g=c.charCodeAt(B)){case 123:y++;break;case 125:y--;break;case 47:switch(g=c.charCodeAt(B+1)){case 42:case 47:e:{for(F=B+1;F<q;++F)switch(c.charCodeAt(F)){case 47:if(42===g&&42===c.charCodeAt(F-1)&&B+2!==F){B=F+1;break e}break;case 10:if(47===g){B=F+1;break e}}B=F}}break;case 91:g++;case 40:g++;case 34:case 39:for(;B++<q&&c.charCodeAt(B)!==g;);}if(0===y)break;B++}if(y=c.substring(V,B),0===m&&(m=($=$.replace(h,"").trim()).charCodeAt(0)),64===m){switch(0<N&&($=$.replace(d,"")),g=$.charCodeAt(1)){case 100:case 109:case 115:case 45:N=u;break;default:N=z}if(V=(y=r(u,N,y,g,p+1)).length,0<O&&(E=l(3,y,N=n(z,$,j),u,I,k,V,g,p,f),$=N.join(""),void 0!==E&&0===(V=(y=E.trim()).length)&&(g=0,y="")),0<V)switch(g){case 115:$=$.replace(w,s);case 100:case 109:case 45:y=$+"{"+y+"}";break;case 107:y=($=$.replace(_,"$1 $2"))+"{"+y+"}",y=1===A||2===A&&a("@"+y,3)?"@-webkit-"+y+"@"+y:"@"+y;break;default:y=$+y,112===f&&(H+=y,y="")}else y=""}else y=r(u,n(u,$,j),y,f,p+1);Z+=y,y=j=N=F=m=0,$="",g=c.charCodeAt(++B);break;case 125:case 59:if(1<(V=($=(0<N?$.replace(d,""):$).trim()).length))switch(0===F&&(45===(m=$.charCodeAt(0))||96<m&&123>m)&&(V=($=$.replace(" ",":")).length),0<O&&void 0!==(E=l(1,$,u,i,I,k,H.length,f,p,f))&&0===(V=($=E.trim()).length)&&($="\x00\x00"),m=$.charCodeAt(0),g=$.charCodeAt(1),m){case 0:break;case 64:if(105===g||99===g){G+=$+c.charAt(B);break}default:58!==$.charCodeAt(V-1)&&(H+=o($,m,g,$.charCodeAt(2)))}j=N=F=m=0,$="",g=c.charCodeAt(++B)}}switch(g){case 13:case 10:47===S?S=0:0===1+m&&107!==f&&0<$.length&&(N=1,$+="\x00"),0<O*R&&l(0,$,u,i,I,k,H.length,f,p,f),k=1,I++;break;case 59:case 125:if(0===S+M+T+C){k++;break}default:switch(k++,x=c.charAt(B),g){case 9:case 32:if(0===M+C+S)switch(P){case 44:case 58:case 9:case 32:x="";break;default:32!==g&&(x=" ")}break;case 0:x="\\0";break;case 12:x="\\f";break;case 11:x="\\v";break;case 38:0===M+S+C&&(N=j=1,x="\f"+x);break;case 108:if(0===M+S+C+L&&0<F)switch(B-F){case 2:112===P&&58===c.charCodeAt(B-3)&&(L=P);case 8:111===D&&(L=D)}break;case 58:0===M+S+C&&(F=B);break;case 44:0===S+T+M+C&&(N=1,x+="\r");break;case 34:case 39:0===S&&(M=M===g?0:0===M?g:M);break;case 91:0===M+S+T&&C++;break;case 93:0===M+S+T&&C--;break;case 41:0===M+S+C&&T--;break;case 40:0===M+S+C&&(0===m&&(2*P+3*D==533||(m=1)),T++);break;case 64:0===S+T+M+C+F+y&&(y=1);break;case 42:case 47:if(!(0<M+C+T))switch(S){case 0:switch(2*g+3*c.charCodeAt(B+1)){case 235:S=47;break;case 220:V=B,S=42}break;case 42:47===g&&42===P&&V+2!==B&&(33===c.charCodeAt(V+2)&&(H+=c.substring(V,B+1)),x="",S=0)}}0===S&&($+=x)}D=P,P=g,B++}if(0<(V=H.length)){if(N=u,0<O&&void 0!==(E=l(2,H,N,i,I,k,V,f,p,f))&&0===(H=E).length)return G+H+Z;if(H=N.join(",")+"{"+H+"}",0!=A*L){switch(2!==A||a(H,2)||(L=0),L){case 111:H=H.replace(b,":-moz-$1")+H;break;case 112:H=H.replace(v,"::-webkit-input-$1")+H.replace(v,"::-moz-$1")+H.replace(v,":-ms-input-$1")+H}L=0}}return G+H+Z}(z,u,i,0,0);return 0<O&&void 0!==(c=l(-2,f,u,u,I,k,f.length,0,0,0))&&(f=c),L=0,k=I=1,f}var h=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,m=/([,: ])(transform)/g,g=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,_=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,E=/([\s\S]*?);/g,C=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,M=/([^-])(image-set\()/,k=1,I=1,L=0,A=1,z=[],P=[],O=0,D=null,R=0;return c.use=function r(n){switch(n){case void 0:case null:O=P.length=0;break;default:if("function"==typeof n)P[O++]=n;else if("object"==typeof n)for(var i=0,o=n.length;i<o;++i)r(n[i]);else R=0|!!n}return r},c.set=u,void 0!==r&&u(r),c},e0={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,// SVG-related properties
fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function e1(r){var n=Object.create(null);return function(i){return void 0===n[i]&&(n[i]=r(i)),n[i]}}var e2=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,e4=e1(function(r){return e2.test(r)||111===r.charCodeAt(0)&&110===r.charCodeAt(1)&&91>r.charCodeAt(2)}),e3={},e5={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e6={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},e8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},e9={};// https://esbench.com/bench/5bfee68a4cd7e6009ef61d23
function e7(r){return(// React v16.11 and below
eK.isMemo(r)?e8:e9[r.$$typeof]||e5)}e9[eK.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},e9[eK.Memo]=e8;var te=Object.defineProperty,tt=Object.getOwnPropertyNames,tr=Object.getOwnPropertySymbols,tn=Object.getOwnPropertyDescriptor,ti=Object.getPrototypeOf,to=Object.prototype;e3=function r(n,i,o){if("string"!=typeof i){// don't hoist over string (html) components
if(to){var a=ti(i);a&&a!==to&&r(n,a,o)}var s=tt(i);tr&&(s=s.concat(tr(i)));for(var l=e7(n),u=e7(i),c=0;c<s.length;++c){var h=s[c];if(!e6[h]&&!(o&&o[h])&&!(u&&u[h])&&!(l&&l[h])){var d=tn(i,h);try{// Avoid failures from read-only properties
te(n,h,d)}catch(r){}}}}return n};var ta=eT("6qd2L");function ts(){return(ts=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}var tl=function(r,n){for(var i=[r[0]],o=0,a=n.length;o<a;o+=1)i.push(n[o],r[o+1]);return i},tu=function(r){return null!==r&&"object"==typeof r&&"[object Object]"===(r.toString?r.toString():Object.prototype.toString.call(r))&&!(0,eK.typeOf)(r)},tc=Object.freeze([]),th=Object.freeze({});function td(r){return"function"==typeof r}function tf(r){return r.displayName||r.name||"Component"}function tp(r){return r&&"string"==typeof r.styledComponentId}var tm=(void 0!==ta&&ta.env,"data-styled"),tg="undefined"!=typeof window&&"HTMLElement"in window,ty=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:void 0!==ta&&void 0!==ta.env&&!1),t_={};function tv(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];throw Error("An error occurred. See https://git.io/JUIaE#"+r+" for more information."+(i.length>0?" Args: "+i.join(", "):""))}var tb=function(){function r(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}var n=r.prototype;return n.indexOfGroup=function(r){for(var n=0,i=0;i<r;i++)n+=this.groupSizes[i];return n},n.insertRules=function(r,n){if(r>=this.groupSizes.length){for(var i=this.groupSizes,o=i.length,a=o;r>=a;)(a<<=1)<0&&tv(16,""+r);this.groupSizes=new Uint32Array(a),this.groupSizes.set(i),this.length=a;for(var s=o;s<a;s++)this.groupSizes[s]=0}for(var l=this.indexOfGroup(r+1),u=0,c=n.length;u<c;u++)this.tag.insertRule(l,n[u])&&(this.groupSizes[r]++,l++)},n.clearGroup=function(r){if(r<this.length){var n=this.groupSizes[r],i=this.indexOfGroup(r),o=i+n;this.groupSizes[r]=0;for(var a=i;a<o;a++)this.tag.deleteRule(i)}},n.getGroup=function(r){var n="";if(r>=this.length||0===this.groupSizes[r])return n;for(var i=this.groupSizes[r],o=this.indexOfGroup(r),a=o+i,s=o;s<a;s++)n+=this.tag.getRule(s)+"/*!sc*/\n";return n},r}(),tx=new Map,tw=new Map,tE=1,tC=function(r){if(tx.has(r))return tx.get(r);for(;tw.has(tE);)tE++;var n=tE++;return tx.set(r,n),tw.set(n,r),n},tS=function(r,n){n>=tE&&(tE=n+1),tx.set(r,n),tw.set(n,r)},tT="style["+tm+'][data-styled-version="5.3.11"]',tM=RegExp("^"+tm+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),tk=function(r,n,i){for(var o,a=i.split(","),s=0,l=a.length;s<l;s++)(o=a[s])&&r.registerName(n,o)},tI=function(r,n){for(var i=(n.textContent||"").split("/*!sc*/\n"),o=[],a=0,s=i.length;a<s;a++){var l=i[a].trim();if(l){var u=l.match(tM);if(u){var c=0|parseInt(u[1],10),h=u[2];0!==c&&(tS(h,c),tk(r,h,u[3]),r.getTag().insertRules(c,o)),o.length=0}else o.push(l)}}},tL=function(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null},tA=function(r){var n=document.head,i=r||n,o=document.createElement("style"),a=function(r){for(var n=r.childNodes,i=n.length;i>=0;i--){var o=n[i];if(o&&1===o.nodeType&&o.hasAttribute(tm))return o}}(i),s=void 0!==a?a.nextSibling:null;o.setAttribute(tm,"active"),o.setAttribute("data-styled-version","5.3.11");var l=tL();return l&&o.setAttribute("nonce",l),i.insertBefore(o,s),o},tz=function(){function r(r){var n=this.element=tA(r);n.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var n=document.styleSheets,i=0,o=n.length;i<o;i++){var a=n[i];if(a.ownerNode===r)return a}tv(17)}(n),this.length=0}var n=r.prototype;return n.insertRule=function(r,n){try{return this.sheet.insertRule(n,r),this.length++,!0}catch(r){return!1}},n.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},n.getRule=function(r){var n=this.sheet.cssRules[r];return void 0!==n&&"string"==typeof n.cssText?n.cssText:""},r}(),tP=function(){function r(r){var n=this.element=tA(r);this.nodes=n.childNodes,this.length=0}var n=r.prototype;return n.insertRule=function(r,n){if(r<=this.length&&r>=0){var i=document.createTextNode(n),o=this.nodes[r];return this.element.insertBefore(i,o||null),this.length++,!0}return!1},n.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},n.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},r}(),tO=function(){function r(r){this.rules=[],this.length=0}var n=r.prototype;return n.insertRule=function(r,n){return r<=this.length&&(this.rules.splice(r,0,n),this.length++,!0)},n.deleteRule=function(r){this.rules.splice(r,1),this.length--},n.getRule=function(r){return r<this.length?this.rules[r]:""},r}(),tD=tg,tR={isServer:!tg,useCSSOMInjection:!ty},tF=function(){function r(r,n,i){void 0===r&&(r=th),void 0===n&&(n={}),this.options=ts({},tR,{},r),this.gs=n,this.names=new Map(i),this.server=!!r.isServer,!this.server&&tg&&tD&&(tD=!1,function(r){for(var n=document.querySelectorAll(tT),i=0,o=n.length;i<o;i++){var a=n[i];a&&"active"!==a.getAttribute(tm)&&(tI(r,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}r.registerId=function(r){return tC(r)};var n=r.prototype;return n.reconstructWithOptions=function(n,i){return void 0===i&&(i=!0),new r(ts({},this.options,{},n),this.gs,i&&this.names||void 0)},n.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},n.getTag=function(){var r,n,i,o,a;return this.tag||(this.tag=(i=(n=this.options).isServer,o=n.useCSSOMInjection,a=n.target,r=i?new tO(a):o?new tz(a):new tP(a),new tb(r)))},n.hasNameForId=function(r,n){return this.names.has(r)&&this.names.get(r).has(n)},n.registerName=function(r,n){if(tC(r),this.names.has(r))this.names.get(r).add(n);else{var i=new Set;i.add(n),this.names.set(r,i)}},n.insertRules=function(r,n,i){this.registerName(r,n),this.getTag().insertRules(tC(r),i)},n.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},n.clearRules=function(r){this.getTag().clearGroup(tC(r)),this.clearNames(r)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(r){for(var n=r.getTag(),i=n.length,o="",a=0;a<i;a++){var s,l=(s=a,tw.get(s));if(void 0!==l){var u=r.names.get(l),c=n.getGroup(a);if(u&&c&&u.size){var h=tm+".g"+a+'[id="'+l+'"]',d="";void 0!==u&&u.forEach(function(r){r.length>0&&(d+=r+",")}),o+=""+c+h+'{content:"'+d+'"}/*!sc*/\n'}}}return o}(this)},r}(),tB=/(a)(d)/gi,tN=function(r){return String.fromCharCode(r+(r>25?39:97))};function tj(r){var n,i="";for(n=Math.abs(r);n>52;n=n/52|0)i=tN(n%52)+i;return(tN(n%52)+i).replace(tB,"$1-$2")}var tV=function(r,n){for(var i=n.length;i;)r=33*r^n.charCodeAt(--i);return r},tU=function(r){return tV(5381,r)};function tq(r){for(var n=0;n<r.length;n+=1){var i=r[n];if(td(i)&&!tp(i))return!1}return!0}var t$=tU("5.3.11"),tH=function(){function r(r,n,i){this.rules=r,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&tq(r),this.componentId=n,this.baseHash=tV(t$,n),this.baseStyle=i,tF.registerId(n)}return r.prototype.generateAndInjectStyles=function(r,n,i){var o=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(r,n,i)),this.isStatic&&!i.hash){if(this.staticRulesId&&n.hasNameForId(o,this.staticRulesId))a.push(this.staticRulesId);else{var s=t7(this.rules,r,n,i).join(""),l=tj(tV(this.baseHash,s)>>>0);if(!n.hasNameForId(o,l)){var u=i(s,"."+l,void 0,o);n.insertRules(o,l,u)}a.push(l),this.staticRulesId=l}}else{for(var c=this.rules.length,h=tV(this.baseHash,i.hash),d="",f=0;f<c;f++){var p=this.rules[f];if("string"==typeof p)d+=p;else if(p){var m=t7(p,r,n,i),g=Array.isArray(m)?m.join(""):m;h=tV(h,g+f),d+=g}}if(d){var y=tj(h>>>0);if(!n.hasNameForId(o,y)){var _=i(d,"."+y,void 0,o);n.insertRules(o,y,_)}a.push(y)}}return a.join(" ")},r}(),tZ=/^\s*\/\/.*$/gm,tG=[":","[",".","#"];function tW(r){var n,i,o,a,s=void 0===r?th:r,l=s.options,u=void 0===l?th:l,c=s.plugins,h=void 0===c?tc:c,d=new eQ(u),f=[],p=function(r){function n(n){if(n)try{r(n+"}")}catch(r){}}return function(i,o,a,s,l,u,c,h,d,f){switch(i){case 1:if(0===d&&64===o.charCodeAt(0))return r(o+";"),"";break;case 2:if(0===h)return o+"/*|*/";break;case 3:switch(h){case 102:case 112:return r(a[0]+o),"";default:return o+(0===f?"/*|*/":"")}case -2:o.split("/*|*/}").forEach(n)}}}(function(r){f.push(r)}),m=function(r,o,s){return 0===o&&-1!==tG.indexOf(s[i.length])||s.match(a)?r:"."+n};function g(r,s,l,u){void 0===u&&(u="&");var c=r.replace(tZ,""),h=s&&l?l+" "+s+" { "+c+" }":c;return n=u,o=RegExp("\\"+(i=s)+"\\b","g"),a=RegExp("(\\"+i+"\\b){2,}"),d(l||!s?"":s,h)}return d.use([].concat(h,[function(r,n,a){2===r&&a.length&&a[0].lastIndexOf(i)>0&&(a[0]=a[0].replace(o,m))},p,function(r){if(-2===r){var n=f;return f=[],n}}])),g.hash=h.length?h.reduce(function(r,n){return n.name||tv(15),tV(r,n.name)},5381).toString():"",g}var tX=/*@__PURE__*/eE(eI).createContext(),tY=(tX.Consumer,/*@__PURE__*/eE(eI).createContext()),tK=(tY.Consumer,new tF),tJ=tW();function tQ(){return(0,eI.useContext)(tX)||tK}function t0(){return(0,eI.useContext)(tY)||tJ}function t1(r){var n=(0,eI.useState)(r.stylisPlugins),i=n[0],o=n[1],a=tQ(),s=(0,eI.useMemo)(function(){var n=a;return r.sheet?n=r.sheet:r.target&&(n=n.reconstructWithOptions({target:r.target},!1)),r.disableCSSOMInjection&&(n=n.reconstructWithOptions({useCSSOMInjection:!1})),n},[r.disableCSSOMInjection,r.sheet,r.target]),l=(0,eI.useMemo)(function(){return tW({options:{prefix:!r.disableVendorPrefixes},plugins:i})},[r.disableVendorPrefixes,i]);return(0,eI.useEffect)(function(){/*@__PURE__*/eE(eJ)(i,r.stylisPlugins)||o(r.stylisPlugins)},[r.stylisPlugins]),/*@__PURE__*/eE(eI).createElement(tX.Provider,{value:s},/*@__PURE__*/eE(eI).createElement(tY.Provider,{value:l},r.children))}var t2=function(){function r(r,n){var i=this;this.inject=function(r,n){void 0===n&&(n=tJ);var o=i.name+n.hash;r.hasNameForId(i.id,o)||r.insertRules(i.id,o,n(i.rules,o,"@keyframes"))},this.toString=function(){return tv(12,String(i.name))},this.name=r,this.id="sc-keyframes-"+r,this.rules=n}return r.prototype.getName=function(r){return void 0===r&&(r=tJ),this.name+r.hash},r}(),t4=/([A-Z])/,t3=/([A-Z])/g,t5=/^ms-/,t6=function(r){return"-"+r.toLowerCase()};function t8(r){return t4.test(r)?r.replace(t3,t6).replace(t5,"-ms-"):r}var t9=function(r){return null==r||!1===r||""===r};function t7(r,n,i,o){if(Array.isArray(r)){for(var a,s=[],l=0,u=r.length;l<u;l+=1)""!==(a=t7(r[l],n,i,o))&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));return s}return t9(r)?"":tp(r)?"."+r.styledComponentId:td(r)?"function"!=typeof r||r.prototype&&r.prototype.isReactComponent||!n?r:t7(r(n),n,i,o):r instanceof t2?i?(r.inject(i,o),r.getName(o)):r:tu(r)?function r(n,i){var o,a=[];for(var s in n)n.hasOwnProperty(s)&&!t9(n[s])&&(Array.isArray(n[s])&&n[s].isCss||td(n[s])?a.push(t8(s)+":",n[s],";"):tu(n[s])?a.push.apply(a,r(n[s],s)):a.push(t8(s)+": "+(null==(o=n[s])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||s in e0||s.startsWith("--")?String(o).trim():o+"px")+";"));return i?[i+" {"].concat(a,["}"]):a}(r):r.toString()}var re=function(r){return Array.isArray(r)&&(r.isCss=!0),r};function rt(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return td(r)||tu(r)?re(t7(tl(tc,[r].concat(i)))):0===i.length&&1===r.length&&"string"==typeof r[0]?r:re(t7(tl(r,i)))}var rr=function(r,n,i){return void 0===i&&(i=th),r.theme!==i.theme&&r.theme||n||i.theme},rn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ri=/(^-|-$)/g;function ro(r){return r.replace(rn,"-").replace(ri,"")}var ra=function(r){return tj(tU(r)>>>0)};function rs(r){return"string"==typeof r}var rl=function(r){return"function"==typeof r||"object"==typeof r&&null!==r&&!Array.isArray(r)},ru=/*@__PURE__*/eE(eI).createContext();function rc(r){var n=(0,eI.useContext)(ru),i=(0,eI.useMemo)(function(){var i;return(i=r.theme)?td(i)?i(n):Array.isArray(i)||"object"!=typeof i?tv(8):n?ts({},n,{},i):i:tv(14)},[r.theme,n]);return r.children?/*@__PURE__*/eE(eI).createElement(ru.Provider,{value:i},r.children):null}ru.Consumer;var rh={},rd=function(r){return function r(n,i,o){if(void 0===o&&(o=th),!(0,eK.isValidElementType)(i))return tv(1,String(i));var a=function(){return n(i,o,rt.apply(void 0,arguments))};return a.withConfig=function(a){return r(n,i,ts({},o,{},a))},a.attrs=function(a){return r(n,i,ts({},o,{attrs:Array.prototype.concat(o.attrs,a).filter(Boolean)}))},a}(function r(n,i,o){var a=tp(n),s=!rs(n),l=i.attrs,u=void 0===l?tc:l,c=i.componentId,h=void 0===c?(y=i.displayName,_=i.parentComponentId,rh[v="string"!=typeof y?"sc":ro(y)]=(rh[v]||0)+1,b=v+"-"+ra("5.3.11"+v+rh[v]),_?_+"-"+b:b):c,d=i.displayName,f=void 0===d?rs(n)?"styled."+n:"Styled("+tf(n)+")":d,p=i.displayName&&i.componentId?ro(i.displayName)+"-"+i.componentId:i.componentId||h,m=a&&n.attrs?Array.prototype.concat(n.attrs,u).filter(Boolean):u,g=i.shouldForwardProp;a&&n.shouldForwardProp&&(g=i.shouldForwardProp?function(r,o,a){return n.shouldForwardProp(r,o,a)&&i.shouldForwardProp(r,o,a)}:n.shouldForwardProp);var y,_,v,b,x,w=new tH(o,p,a?n.componentStyle:void 0),E=w.isStatic&&0===u.length,C=function(r,n){return function(r,n,i,o){var a,s,l,u,c,h=r.attrs,d=r.componentStyle,f=r.defaultProps,p=r.foldedComponentIds,m=r.shouldForwardProp,g=r.styledComponentId,y=r.target,_=(void 0===(a=rr(n,(0,eI.useContext)(ru),f)||th)&&(a=th),s=ts({},n,{theme:a}),l={},h.forEach(function(r){var n,i,o,a=r;for(n in td(a)&&(a=a(s)),a)s[n]=l[n]="className"===n?(i=l[n],o=a[n],i&&o?i+" "+o:i||o):a[n]}),[s,l]),v=_[0],b=_[1],x=(u=tQ(),c=t0(),o?d.generateAndInjectStyles(th,u,c):d.generateAndInjectStyles(v,u,c)),w=b.$as||n.$as||b.as||n.as||y,E=rs(w),C=b!==n?ts({},n,{},b):n,S={};for(var T in C)"$"!==T[0]&&"as"!==T&&("forwardedAs"===T?S.as=C[T]:(m?m(T,e4,w):!E||e4(T))&&(S[T]=C[T]));return n.style&&b.style!==n.style&&(S.style=ts({},n.style,{},b.style)),S.className=Array.prototype.concat(p,g,x!==g?x:null,n.className,b.className).filter(Boolean).join(" "),S.ref=i,(0,eI.createElement)(w,S)}(x,r,n,E)};return C.displayName=f,(x=/*@__PURE__*/eE(eI).forwardRef(C)).attrs=m,x.componentStyle=w,x.displayName=f,x.shouldForwardProp=g,x.foldedComponentIds=a?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):tc,x.styledComponentId=p,x.target=a?n.target:n,x.withComponent=function(n){var a=i.componentId,s=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)n.indexOf(i=s[o])>=0||(a[i]=r[i]);return a}(i,["componentId"]),l=a&&a+"-"+(rs(n)?n:ro(tf(n)));return r(n,ts({},s,{attrs:m,componentId:l}),o)},Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(r){this._foldedDefaultProps=a?function r(n){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(var s=0;s<o.length;s++){var l=o[s];if(rl(l))for(var u in l)"__proto__"!==u&&"constructor"!==u&&"prototype"!==u&&function(n,i,o){var a=n[o];rl(i)&&rl(a)?r(a,i):n[o]=i}(n,l[u],u)}return n}({},n.defaultProps,r):r}}),Object.defineProperty(x,"toString",{value:function(){return"."+x.styledComponentId}}),s&&/*@__PURE__*/eE(e3)(x,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),x},r)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(r){rd[r]=rd(r)});var rf=function(){function r(r,n){this.rules=r,this.componentId=n,this.isStatic=tq(r),tF.registerId(this.componentId+1)}var n=r.prototype;return n.createStyles=function(r,n,i,o){var a=o(t7(this.rules,n,i,o).join(""),""),s=this.componentId+r;i.insertRules(s,s,a)},n.removeStyles=function(r,n){n.clearRules(this.componentId+r)},n.renderStyles=function(r,n,i,o){r>2&&tF.registerId(this.componentId+r),this.removeStyles(r,i),this.createStyles(r,n,i,o)},r}();(i=(function(){var r=this;this._emitSheetCSS=function(){var n=r.instance.toString();if(!n)return"";var i=tL();return"<style "+[i&&'nonce="'+i+'"',tm+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+n+"</style>"},this.getStyleTags=function(){return r.sealed?tv(2):r._emitSheetCSS()},this.getStyleElement=function(){if(r.sealed)return tv(2);var n,i=((n={})[tm]="",n["data-styled-version"]="5.3.11",n.dangerouslySetInnerHTML={__html:r.instance.toString()},n),o=tL();return o&&(i.nonce=o),[/*@__PURE__*/eE(eI).createElement("style",ts({},i,{key:"sc-0-0"}))]},this.seal=function(){r.sealed=!0},this.instance=new tF({isServer:!0}),this.sealed=!1}).prototype).collectStyles=function(r){return this.sealed?tv(2):/*@__PURE__*/eE(eI).createElement(t1,{sheet:this.instance},r)},i.interleaveWithNodeStream=function(r){return tv(3)};var rp={};function rm(){return(rm=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}function rg(r){return(rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function ry(r){var n=function(r,n){if("object"!==rg(r)||null===r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var o=i.call(r,n||"default");if("object"!==rg(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(r)}(r,"string");return"symbol"===rg(n)?n:String(n)}function r_(r,n,i){return(n=ry(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}function rv(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}function rb(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?rv(Object(i),!0).forEach(function(n){r_(r,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):rv(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}function rx(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,ry(o.key),o)}}function rw(r,n){return(rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r})(r,n)}function rE(r){return(rE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function rC(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,o=Array(n);i<n;i++)o[i]=r[i];return o}function rS(r,n){if(r){if("string"==typeof r)return rC(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if("Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i)return Array.from(r);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rC(r,n)}}function rT(r){return function(r){if(Array.isArray(r))return rC(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||rS(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}rp=function(){var r,n,i;// define gets called three times: one for each chunk. we rely on the order
// they're imported to know which is which
function o(o,a){if(r){if(n){var s="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",l={};r(l),i=a(l),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else n=a}else r=a}return o(["exports"],function(r){let n,i,o,a,s,l,u,c,h;var d,f="undefined"!=typeof self?self:{},p="2.15.0";let m={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==n){let r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{n=r}catch(i){n=r}}return n},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!m.API_URL)return null;try{let r=new URL(m.API_URL);return"api.mapbox.cn"===r.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===r.hostname?"https://events.mapbox.com/events/v2":null}catch(r){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},g={supported:!1,testSupport:function(r){!v&&_&&(b?x(r):y=r)}},y,_,v=!1,b=!1;function x(r){let n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,_),r.isContextLost())return;g.supported=!0}catch(r){}r.deleteTexture(n),v=!0}function w(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function E(r,n,i,o){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(o-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=n,this.p2x=i,this.p2y=o}f.document&&((_=f.document.createElement("img")).onload=function(){y&&x(y),y=null,b=!0},_.onerror=function(){v=!0,y=null},_.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),E.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,n){if(void 0===n&&(n=1e-6),r<0)return 0;if(r>1)return 1;for(var i=r,o=0;o<8;o++){var a=this.sampleCurveX(i)-r;if(Math.abs(a)<n)return i;var s=this.sampleCurveDerivativeX(i);if(1e-6>Math.abs(s))break;i-=a/s}var l=0,u=1;for(i=r,o=0;o<20&&!(Math.abs((a=this.sampleCurveX(i))-r)<n);o++)r>a?l=i:u=i,i=.5*(u-l)+l;return i},solve:function(r,n){return this.sampleCurveY(this.solveCurveX(r,n))}};var C=w(E);function S(r,n){this.x=r,this.y=n}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,n){return this.clone()._rotateAround(r,n)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var n=r.x-this.x,i=r.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,n){return Math.atan2(this.x*n-this.y*r,this.x*r+this.y*n)},_matMult:function(r){var n=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=n,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var n=Math.cos(r),i=Math.sin(r),o=i*this.x+n*this.y;return this.x=n*this.x-i*this.y,this.y=o,this},_rotateAround:function(r,n){var i=Math.cos(r),o=Math.sin(r),a=n.y+o*(this.x-n.x)+i*(this.y-n.y);return this.x=n.x+i*(this.x-n.x)-o*(this.y-n.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(r){return r instanceof S?r:Array.isArray(r)?new S(r[0],r[1]):r};var T=w(S);let M=Math.PI/180,k=180/Math.PI,I=[[0,0],[1,0],[1,1],[0,1]];function L(r){if(r<=0)return 0;if(r>=1)return 1;let n=r*r,i=n*r;return 4*(r<.5?i:3*(r-n)+i-.75)}function A(r,n,i,o){let a=new C(r,n,i,o);return function(r){return a.solve(r)}}let z=A(.25,.1,.25,1);function P(r,n,i){return Math.min(i,Math.max(n,r))}function O(r,n,i){return(i=P((i-r)/(n-r),0,1))*i*(3-2*i)}function D(r,n,i){let o=i-n,a=((r-n)%o+o)%o+n;return a===n?i:a}function R(r,n,i){if(!r.length)return i(null,[]);let o=r.length,a=Array(r.length),s=null;r.forEach((r,l)=>{n(r,(r,n)=>{r&&(s=r),a[l]=n,0==--o&&i(s,a)})})}function F(r){let n=[];for(let i in r)n.push(r[i]);return n}function B(r,...n){for(let i of n)for(let n in i)r[n]=i[n];return r}let N=1;function j(){return N++}function V(){return function r(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function U(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function q(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function $(r,n){r.forEach(r=>{n[r]&&(n[r]=n[r].bind(n))})}function H(r,n){return -1!==r.indexOf(n,r.length-n.length)}function Z(r,n,i){let o={};for(let a in r)o[a]=n.call(i||this,r[a],a,r);return o}function G(r,n,i){let o={};for(let a in r)n.call(i||this,r[a],a,r)&&(o[a]=r[a]);return o}function W(r){return Array.isArray(r)?r.map(W):"object"==typeof r&&r?Z(r,W):r}let X={};function Y(r){X[r]||("undefined"!=typeof console&&console.warn(r),X[r]=!0)}function K(r,n,i){return(i.y-r.y)*(n.x-r.x)>(n.y-r.y)*(i.x-r.x)}function J(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Q(r){let n={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,i,o,a)=>{let s=o||a;return n[i]=!s||s.toLowerCase(),""}),n["max-age"]){let r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}let ee=null;function et(r){if(null==ee){let n=r.navigator?r.navigator.userAgent:null;ee=!!r.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ee}function er(r){try{let n=f[r];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(r){return!1}}function en(r,n){return[r[4*n],r[4*n+1],r[4*n+2],r[4*n+3]]}let ei="mapbox-tiles",eo=500,ea=50;function es(){try{return f.caches}catch(r){}}function el(){es()&&!i&&(i=f.caches.open(ei))}function eu(r){let n=r.indexOf("?");if(n<0)return r;let i=function(r){let n=r.indexOf("?");return n>0?r.slice(n+1).split("&"):[]}(r),o=i.filter(r=>{let n=r.split("=");return"language"===n[0]||"worldview"===n[0]});return o.length?`${r.slice(0,n)}?${o.join("&")}`:r.slice(0,n)}let ec=1/0,eh={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(eh);class ed extends Error{constructor(r,n,i){401===n&&eb(i)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=n,this.url=i}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}let ef=J()?()=>self.worker&&self.worker.referrer:()=>("blob:"===f.location.protocol?f.parent:f).location.href,ep=function(r,n){var a;if(!(/^file:/.test(a=r.url)||/^file:/.test(ef())&&!/^\w+:/.test(a))){if(f.fetch&&f.Request&&f.AbortController&&f.Request.prototype.hasOwnProperty("signal"))return function(r,n){var a;let s=new f.AbortController,l=new f.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:ef(),referrerPolicy:r.referrerPolicy,signal:s.signal}),u=!1,c=!1,h=(a=l.url).indexOf("sku=")>0&&eb(a);"json"===r.type&&l.headers.set("Accept","application/json");let d=(i,o,a)=>{if(c)return;if(i&&"SecurityError"!==i.message&&Y(i.toString()),o&&a)return p(o);let s=Date.now();f.fetch(l).then(i=>{if(i.ok){let r=h?i.clone():null;return p(i,r,s)}return n(new ed(i.statusText,i.status,r.url))}).catch(i=>{"AbortError"!==i.name&&n(Error(`${i.message} ${r.url}`))})},p=(a,s,h)=>{("arrayBuffer"===r.type?a.arrayBuffer():"json"===r.type?a.json():a.text()).then(r=>{c||(s&&h&&function(r,n,a){if(el(),!i)return;let s={status:n.status,statusText:n.statusText,headers:new f.Headers};n.headers.forEach((r,n)=>s.headers.set(n,r));let l=Q(n.headers.get("Cache-Control")||"");if(l["no-store"])return;l["max-age"]&&s.headers.set("Expires",new Date(a+1e3*l["max-age"]).toUTCString());let u=s.headers.get("Expires");u&&(new Date(u).getTime()-a<42e4||function(r,n){if(void 0===o)try{new Response(new ReadableStream),o=!0}catch(r){o=!1}o?n(r.body):r.blob().then(n)}(n,n=>{let o=new f.Response(n,s);el(),i&&i.then(n=>n.put(eu(r.url),o)).catch(r=>Y(r.message))}))}(l,s,h),u=!0,n(null,r,a.headers.get("Cache-Control"),a.headers.get("Expires")))}).catch(r=>{c||n(Error(r.message))})};return h?function(r,n){if(el(),!i)return n(null);let o=eu(r.url);i.then(r=>{r.match(o).then(i=>{let a=function(r){if(!r)return!1;let n=new Date(r.headers.get("Expires")||0),i=Q(r.headers.get("Cache-Control")||"");return n>Date.now()&&!i["no-cache"]}(i);r.delete(o),a&&r.put(o,i.clone()),n(null,i,a)}).catch(n)}).catch(n)}(l,d):d(null,null),{cancel:()=>{c=!0,u||s.abort()}}}(r,n);if(J()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,n,void 0,!0)}return function(r,n){let i=new f.XMLHttpRequest;for(let n in i.open(r.method||"GET",r.url,!0),"arrayBuffer"===r.type&&(i.responseType="arraybuffer"),r.headers)i.setRequestHeader(n,r.headers[n]);return"json"===r.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===r.credentials,i.onerror=()=>{n(Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let o=i.response;if("json"===r.type)try{o=JSON.parse(i.response)}catch(r){return n(r)}n(null,o,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else n(new ed(i.statusText,i.status,r.url))},i.send(r.body),{cancel:()=>i.abort()}}(r,n)},em=function(r,n){return ep(B(r,{type:"arrayBuffer"}),n)},eg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";a=[],s=0;let ey=function(r,n){if(g.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),s>=m.MAX_PARALLEL_IMAGE_REQUESTS){let i={requestParameters:r,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return a.push(i),i}s++;let i=!1,o=()=>{if(!i)for(i=!0,s--;a.length&&s<m.MAX_PARALLEL_IMAGE_REQUESTS;){let r=a.shift(),{requestParameters:n,callback:i,cancelled:o}=r;o||(r.cancel=ey(n,i).cancel)}},l=em(r,(r,i,a,s)=>{o(),r?n(r):i&&(f.createImageBitmap?function(r,n){let i=new f.Blob([new Uint8Array(r)],{type:"image/png"});f.createImageBitmap(i).then(r=>{n(null,r)}).catch(r=>{n(Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(i,(r,i)=>n(r,i,a,s)):function(r,n){let i=new f.Image,o=f.URL;i.onload=()=>{n(null,i),o.revokeObjectURL(i.src),i.onload=null,f.requestAnimationFrame(()=>{i.src=eg})},i.onerror=()=>n(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let a=new f.Blob([new Uint8Array(r)],{type:"image/png"});i.src=r.byteLength?o.createObjectURL(a):eg}(i,(r,i)=>n(r,i,a,s)))});return{cancel:()=>{l.cancel(),o()}}},e_="NO_ACCESS_TOKEN";function ev(r){return 0===r.indexOf("mapbox:")}function eb(r){return m.API_URL_REGEX.test(r)}function ex(r){return m.API_CDN_URL_REGEX.test(r)}function ew(r){return m.API_STYLE_REGEX.test(r)&&!eE(r)}function eE(r){return m.API_SPRITE_REGEX.test(r)}let eC=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function eS(r){let n=r.match(eC);if(!n)throw Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function eT(r){let n=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${n}`}let eM="mapbox.eventData";function ek(r){if(!r)return null;let n=r.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(f.atob(n[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(r){return null}}class eI{constructor(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(r){let n=ek(m.ACCESS_TOKEN),i="";return i=n&&n.u?f.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(r,n)=>String.fromCharCode(Number("0x"+n)))):m.ACCESS_TOKEN||"",r?`${eM}.${r}:${i}`:`${eM}:${i}`}fetchEventData(){let r=er("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(r)try{let r=f.localStorage.getItem(n);r&&(this.eventData=JSON.parse(r));let o=f.localStorage.getItem(i);o&&(this.anonId=o)}catch(r){Y("Unable to read from LocalStorage")}}saveEventData(){let r=er("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(r)try{f.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&f.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(r){Y("Unable to write to LocalStorage")}}processRequests(r){}postEvent(r,n,i,o){if(!m.EVENTS_URL)return;let a=eS(m.EVENTS_URL);a.params.push(`access_token=${o||m.ACCESS_TOKEN||""}`);let s={event:this.type,created:new Date(r).toISOString()},l=n?B(s,n):s,u={url:eT(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([l])};this.pendingRequest=ep(B(u,{method:"POST"}),r=>{this.pendingRequest=null,i(r),this.saveEventData(),this.processRequests(o)})}queueRequest(r,n){this.queue.push(r),this.processRequests(n)}}let eL=new class extends eI{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,n){m.EVENTS_URL&&m.ACCESS_TOKEN&&Array.isArray(r)&&r.some(r=>ev(r)||eb(r))&&this.queueRequest(Date.now(),n)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();let n=ek(m.ACCESS_TOKEN),i=n?n.u:m.ACCESS_TOKEN,o=i!==this.eventData.tokenU;q(this.anonId)||(this.anonId=V(),o=!0);let a=this.queue.shift();if(this.eventData.lastSuccess){let r=new Date(this.eventData.lastSuccess),n=new Date(a),i=(a-this.eventData.lastSuccess)/864e5;o=o||i>=1||i<-1||r.getDate()!==n.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:"01","enabled.telemetry":!1,userId:this.anonId},r=>{r||(this.eventData.lastSuccess=a,this.eventData.tokenU=i)},r):this.processRequests()}},eA=eL.postTurnstileEvent.bind(eL),ez=new class extends eI{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,n,i,o){this.skuToken=n,this.errorCb=o,m.EVENTS_URL&&(i||m.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(Error(e_)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;let{id:n,timestamp:i}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),q(this.anonId)||(this.anonId=V()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:"01",skuToken:this.skuToken,userId:this.anonId},r=>{r?this.errorCb(r):n&&(this.success[n]=!0)},r))}},eP=ez.postMapLoadEvent.bind(ez),eO=new class extends eI{constructor(){super("gljs.performance")}postPerformanceEvent(r,n){m.EVENTS_URL&&(r||m.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},r)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;let{timestamp:n,performanceData:i}=this.queue.shift(),o=function(r){let n=f.performance.getEntriesByType("resource"),i=f.performance.getEntriesByType("mark"),o=function(r){let n={};if(r){for(let i in r)if("other"!==i)for(let o of r[i]){let r=`${i}ResolveRangeMin`,a=`${i}ResolveRangeMax`,s=`${i}RequestCount`,l=`${i}RequestCachedCount`;n[r]=Math.min(n[r]||1/0,o.startTime),n[a]=Math.max(n[a]||-1/0,o.responseEnd);let u=r=>{void 0===n[r]&&(n[r]=0),++n[r]};void 0!==o.transferSize&&0===o.transferSize&&u(l),u(s)}}return n}(function(r,n){let i={};if(r)for(let o of r){let r=n(o);void 0===i[r]&&(i[r]=[]),i[r].push(o)}return i}(n,ej)),a=f.devicePixelRatio,s=f.navigator.connection||f.navigator.mozConnection||f.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},u=(r,n,i)=>{null!=i&&r.push({name:n,value:i.toString()})};for(let r in o)u(l.counters,r,o[r]);if(r.interactionRange[0]!==1/0&&r.interactionRange[1]!==-1/0&&(u(l.counters,"interactionRangeMin",r.interactionRange[0]),u(l.counters,"interactionRangeMax",r.interactionRange[1])),i)for(let r of Object.keys(eN)){let n=eN[r],o=i.find(r=>r.name===n);o&&u(l.counters,n,o.startTime)}return u(l.counters,"visibilityHidden",r.visibilityHidden),u(l.attributes,"style",function(r){if(r)for(let n of r){let r=n.name.split("?")[0];if(ew(r)){let n=r.split("/").slice(-2);if(2===n.length)return`mapbox://styles/${n[0]}/${n[1]}`}}}(n)),u(l.attributes,"terrainEnabled",r.terrainEnabled?"true":"false"),u(l.attributes,"fogEnabled",r.fogEnabled?"true":"false"),u(l.attributes,"projection",r.projection),u(l.attributes,"zoom",r.zoom),u(l.metadata,"devicePixelRatio",a),u(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),u(l.metadata,"navigatorUserAgent",f.navigator.userAgent),u(l.metadata,"screenWidth",f.screen.width),u(l.metadata,"screenHeight",f.screen.height),u(l.metadata,"windowWidth",f.innerWidth),u(l.metadata,"windowHeight",f.innerHeight),u(l.metadata,"mapWidth",r.width/a),u(l.metadata,"mapHeight",r.height/a),u(l.metadata,"webglRenderer",r.renderer),u(l.metadata,"webglVendor",r.vendor),u(l.metadata,"sdkVersion",p),u(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(let r of o.metadata);for(let r of o.counters);for(let r of o.attributes);this.postEvent(n,o,()=>{},r)}},eD=eO.postPerformanceEvent.bind(eO),eR=new class extends eI{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,n,i,o){if(!m.API_URL||!m.SESSION_PATH)return;let a=eS(m.API_URL+m.SESSION_PATH);a.params.push(`sku=${n||""}`),a.params.push(`access_token=${o||m.ACCESS_TOKEN||""}`);let s={url:eT(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=ep(B(s,{method:"GET"}),r=>{this.pendingRequest=null,i(r),this.saveEventData(),this.processRequests(o)})}getSessionAPI(r,n,i,o){this.skuToken=n,this.errorCb=o,m.SESSION_PATH&&m.API_URL&&(i||m.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(Error(e_)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;let{id:n,timestamp:i}=this.queue.shift();n&&this.success[n]||this.getSession(i,this.skuToken,r=>{r?this.errorCb(r):n&&(this.success[n]=!0)},r)}},eF=eR.getSessionAPI.bind(eR),eB=new Set,eN={create:"create",load:"load",fullLoad:"fullLoad"};function ej(r){let n=r.name.split("?")[0];return ex(n)&&n.includes("mapbox-gl.js")?"javascript":ex(n)&&n.includes("mapbox-gl.css")?"css":m.API_FONTS_REGEX.test(n)?"fontRange":eE(n)?"sprite":ew(n)?"style":m.API_TILEJSON_REGEX.test(n)?"tilejson":"other"}let eV=f.performance;function eU(r){let n=r?r.url.toString():void 0;return eV.getEntriesByName(n)}let eq={now:()=>void 0!==c?c:f.performance.now(),setNow(r){c=r},restoreNow(){c=void 0},frame(r){let n=f.requestAnimationFrame(r);return{cancel:()=>f.cancelAnimationFrame(n)}},getImageData(r,n=0){let{width:i,height:o}=r;h||(h=f.document.createElement("canvas"));let a=h.getContext("2d",{willReadFrequently:!0});if(!a)throw Error("failed to create canvas 2d context");return(i>h.width||o>h.height)&&(h.width=i,h.height=o),a.clearRect(-n,-n,i+2*n,o+2*n),a.drawImage(r,0,0,i,o),a.getImageData(-n,-n,i+2*n,o+2*n)},resolveURL:r=>(l||(l=f.document.createElement("a")),l.href=r,l.href),get devicePixelRatio(){return f.devicePixelRatio},get prefersReducedMotion(){return!!f.matchMedia&&(null==u&&(u=f.matchMedia("(prefers-reduced-motion: reduce)")),u.matches)}};function e$(r,n,i){i[r]&&-1!==i[r].indexOf(n)||(i[r]=i[r]||[],i[r].push(n))}function eH(r,n,i){if(i&&i[r]){let o=i[r].indexOf(n);-1!==o&&i[r].splice(o,1)}}class eZ{constructor(r,n={}){B(this,n),this.type=r}}class eG extends eZ{constructor(r,n={}){super("error",B({error:r},n))}}class eW{on(r,n){return this._listeners=this._listeners||{},e$(r,n,this._listeners),this}off(r,n){return eH(r,n,this._listeners),eH(r,n,this._oneTimeListeners),this}once(r,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},e$(r,n,this._oneTimeListeners),this):new Promise(n=>this.once(r,n))}fire(r,n){"string"==typeof r&&(r=new eZ(r,n||{}));let i=r.type;if(this.listens(i)){r.target=this;let n=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(let i of n)i.call(this,r);let o=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(let n of o)eH(i,n,this._oneTimeListeners),n.call(this,r);let a=this._eventedParent;a&&(B(r,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),a.fire(r))}else r instanceof eG&&console.error(r.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,n){return this._eventedParent=r,this._eventedParentData=n,this}}var eX=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function eY(r,...n){for(let i of n)for(let n in i)r[n]=i[n];return r}function eK(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function eJ(r){if(Array.isArray(r))return r.map(eJ);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){let n={};for(let i in r)n[i]=eJ(r[i]);return n}return eK(r)}var eQ=class extends Error{constructor(r,n){super(n),this.message=n,this.key=r}};class e0{constructor(r,n=[]){for(let[i,o]of(this.parent=r,this.bindings={},n))this.bindings[i]=o}concat(r){return new e0(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}let e1={kind:"null"},e2={kind:"number"},e4={kind:"string"},e3={kind:"boolean"},e5={kind:"color"},e6={kind:"object"},e8={kind:"value"},e9={kind:"collator"},e7={kind:"formatted"},te={kind:"resolvedImage"};function tt(r,n){return{kind:"array",itemType:r,N:n}}function tr(r){if("array"===r.kind){let n=tr(r.itemType);return"number"==typeof r.N?`array<${n}, ${r.N}>`:"value"===r.itemType.kind?"array":`array<${n}>`}return r.kind}let tn=[e1,e2,e4,e3,e5,e7,e6,tt(e8),te];function ti(r,n){if("error"===n.kind)return null;if("array"===r.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!ti(r.itemType,n.itemType))&&("number"!=typeof r.N||r.N===n.N))return null}else{if(r.kind===n.kind)return null;if("value"===r.kind){for(let r of tn)if(!ti(r,n))return null}}return`Expected ${tr(r)} but found ${tr(n)} instead.`}function to(r,n){return n.some(n=>n.kind===r.kind)}function ta(r,n){return n.some(n=>"null"===n?null===r:"array"===n?Array.isArray(r):"object"===n?r&&!Array.isArray(r)&&"object"==typeof r:n===typeof r)}var ts,tl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function tu(r){return(r=Math.round(r))<0?0:r>255?255:r}function tc(r){return tu("%"===r[r.length-1]?parseFloat(r)/100*255:parseInt(r))}function th(r){var n;return(n="%"===r[r.length-1]?parseFloat(r)/100:parseFloat(r))<0?0:n>1?1:n}function td(r,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?r+(n-r)*i*6:2*i<1?n:3*i<2?r+(n-r)*(2/3-i)*6:r}try{ts=({}).parseCSSColor=function(r){var n,i=r.replace(/ /g,"").toLowerCase();if(i in tl)return tl[i].slice();if("#"===i[0])return 4===i.length?(n=parseInt(i.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===i.length&&(n=parseInt(i.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var o=i.indexOf("("),a=i.indexOf(")");if(-1!==o&&a+1===i.length){var s=i.substr(0,o),l=i.substr(o+1,a-(o+1)).split(","),u=1;switch(s){case"rgba":if(4!==l.length)break;u=th(l.pop());case"rgb":return 3!==l.length?null:[tc(l[0]),tc(l[1]),tc(l[2]),u];case"hsla":if(4!==l.length)break;u=th(l.pop());case"hsl":if(3!==l.length)break;var c=(parseFloat(l[0])%360+360)%360/360,h=th(l[1]),d=th(l[2]),f=d<=.5?d*(h+1):d+h-d*h,p=2*d-f;return[tu(255*td(p,f,c+1/3)),tu(255*td(p,f,c)),tu(255*td(p,f,c-1/3)),u]}}return null}}catch(r){}class tf{constructor(r,n,i,o=1){this.r=r,this.g=n,this.b=i,this.a=o}static parse(r){if(!r)return;if(r instanceof tf)return r;if("string"!=typeof r)return;let n=ts(r);return n?new tf(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){let[r,n,i,o]=this.toArray();return`rgba(${Math.round(r)},${Math.round(n)},${Math.round(i)},${o})`}toArray(){let{r:r,g:n,b:i,a:o}=this;return 0===o?[0,0,0,0]:[255*r/o,255*n/o,255*i/o,o]}toArray01(){let{r:r,g:n,b:i,a:o}=this;return 0===o?[0,0,0,0]:[r/o,n/o,i/o,o]}toArray01PremultipliedAlpha(){let{r:r,g:n,b:i,a:o}=this;return[r,n,i,o]}}tf.black=new tf(0,0,0,1),tf.white=new tf(1,1,1,1),tf.transparent=new tf(0,0,0,0),tf.red=new tf(1,0,0,1),tf.blue=new tf(0,0,1,1);class tp{constructor(r,n,i){this.sensitivity=r?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,n){return this.collator.compare(r,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tm{constructor(r,n,i,o,a){this.text=r.normalize?r.normalize():r,this.image=n,this.scale=i,this.fontStack=o,this.textColor=a}}class tg{constructor(r){this.sections=r}static fromString(r){return new tg([new tm(r,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(r=>0!==r.text.length||r.image&&0!==r.image.name.length)}static factory(r){return r instanceof tg?r:tg.fromString(r)}toString(){return 0===this.sections.length?"":this.sections.map(r=>r.text).join("")}serialize(){let r=["format"];for(let n of this.sections){if(n.image){r.push(["image",n.image.name]);continue}r.push(n.text);let i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),r.push(i)}return r}}class ty{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new ty({name:r,available:!1}):null}serialize(){return["image",this.name]}}function t_(r,n,i,o){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===o||"number"==typeof o&&o>=0&&o<=1?null:`Invalid rgba value [${[r,n,i,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof o?[r,n,i,o]:[r,n,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tv(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof tf||r instanceof tp||r instanceof tg||r instanceof ty)return!0;if(Array.isArray(r)){for(let n of r)if(!tv(n))return!1;return!0}if("object"==typeof r){for(let n in r)if(!tv(r[n]))return!1;return!0}return!1}function tb(r){if(null===r)return e1;if("string"==typeof r)return e4;if("boolean"==typeof r)return e3;if("number"==typeof r)return e2;if(r instanceof tf)return e5;if(r instanceof tp)return e9;if(r instanceof tg)return e7;if(r instanceof ty)return te;if(Array.isArray(r)){let n;let i=r.length;for(let i of r){let r=tb(i);if(n){if(n===r)continue;n=e8;break}n=r}return tt(n||e8,i)}return e6}function tx(r){let n=typeof r;return null===r?"":"string"===n||"number"===n||"boolean"===n?String(r):r instanceof tf||r instanceof tg||r instanceof ty?r.toString():JSON.stringify(r)}class tw{constructor(r,n){this.type=r,this.value=n}static parse(r,n){if(2!==r.length)return n.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!tv(r[1]))return n.error("invalid value");let i=r[1],o=tb(i),a=n.expectedType;return"array"===o.kind&&0===o.N&&a&&"array"===a.kind&&("number"!=typeof a.N||0===a.N)&&(o=a),new tw(o,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof tf?["rgba"].concat(this.value.toArray()):this.value instanceof tg?this.value.serialize():this.value}}var tE=class{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}};let tC={string:e4,number:e2,boolean:e3,object:e6};class tS{constructor(r,n){this.type=r,this.args=n}static parse(r,n){if(r.length<2)return n.error("Expected at least one argument.");let i,o=1,a=r[0];if("array"===a){let a,s;if(r.length>2){let i=r[1];if("string"!=typeof i||!(i in tC)||"object"===i)return n.error('The item type argument of "array" must be one of string, number, boolean',1);a=tC[i],o++}else a=e8;if(r.length>3){if(null!==r[2]&&("number"!=typeof r[2]||r[2]<0||r[2]!==Math.floor(r[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=r[2],o++}i=tt(a,s)}else i=tC[a];let s=[];for(;o<r.length;o++){let i=n.parse(r[o],o,e8);if(!i)return null;s.push(i)}return new tS(i,s)}evaluate(r){for(let n=0;n<this.args.length;n++){let i=this.args[n].evaluate(r);if(!ti(this.type,tb(i)))return i;if(n===this.args.length-1)throw new tE(`Expected value to be of type ${tr(this.type)}, but found ${tr(tb(i))} instead.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){let r=this.type,n=[r.kind];if("array"===r.kind){let i=r.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){n.push(i.kind);let o=r.N;("number"==typeof o||this.args.length>1)&&n.push(o)}}return n.concat(this.args.map(r=>r.serialize()))}}class tT{constructor(r){this.type=e7,this.sections=r}static parse(r,n){if(r.length<2)return n.error("Expected at least one argument.");let i=r[1];if(!Array.isArray(i)&&"object"==typeof i)return n.error("First argument must be an image or text section.");let o=[],a=!1;for(let i=1;i<=r.length-1;++i){let s=r[i];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;let r=null;if(s["font-scale"]&&!(r=n.parse(s["font-scale"],1,e2)))return null;let i=null;if(s["text-font"]&&!(i=n.parse(s["text-font"],1,tt(e4))))return null;let l=null;if(s["text-color"]&&!(l=n.parse(s["text-color"],1,e5)))return null;let u=o[o.length-1];u.scale=r,u.font=i,u.textColor=l}else{let s=n.parse(r[i],1,e8);if(!s)return null;let l=s.type.kind;if("string"!==l&&"value"!==l&&"null"!==l&&"resolvedImage"!==l)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,o.push({content:s,scale:null,font:null,textColor:null})}}return new tT(o)}evaluate(r){return new tg(this.sections.map(n=>{let i=n.content.evaluate(r);return tb(i)===te?new tm("",i,null,null,null):new tm(tx(i),null,n.scale?n.scale.evaluate(r):null,n.font?n.font.evaluate(r).join(","):null,n.textColor?n.textColor.evaluate(r):null)}))}eachChild(r){for(let n of this.sections)r(n.content),n.scale&&r(n.scale),n.font&&r(n.font),n.textColor&&r(n.textColor)}outputDefined(){return!1}serialize(){let r=["format"];for(let n of this.sections){r.push(n.content.serialize());let i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),r.push(i)}return r}}class tM{constructor(r){this.type=te,this.input=r}static parse(r,n){if(2!==r.length)return n.error("Expected two arguments.");let i=n.parse(r[1],1,e4);return i?new tM(i):n.error("No image name provided.")}evaluate(r){let n=this.input.evaluate(r),i=ty.fromString(n);return i&&r.availableImages&&(i.available=r.availableImages.indexOf(n)>-1),i}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}let tk={"to-boolean":e3,"to-color":e5,"to-number":e2,"to-string":e4};class tI{constructor(r,n){this.type=r,this.args=n}static parse(r,n){if(r.length<2)return n.error("Expected at least one argument.");let i=r[0];if(("to-boolean"===i||"to-string"===i)&&2!==r.length)return n.error("Expected one argument.");let o=tk[i],a=[];for(let i=1;i<r.length;i++){let o=n.parse(r[i],i,e8);if(!o)return null;a.push(o)}return new tI(o,a)}evaluate(r){if("boolean"===this.type.kind)return!!this.args[0].evaluate(r);if("color"===this.type.kind){let n,i;for(let o of this.args){if(n=o.evaluate(r),i=null,n instanceof tf)return n;if("string"==typeof n){let i=r.parseColor(n);if(i)return i}else if(Array.isArray(n)&&!(i=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:t_(n[0],n[1],n[2],n[3])))return new tf(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new tE(i||`Could not parse color from value '${"string"==typeof n?n:String(JSON.stringify(n))}'`)}if("number"===this.type.kind){let n=null;for(let i of this.args){if(null===(n=i.evaluate(r)))return 0;let o=Number(n);if(!isNaN(o))return o}throw new tE(`Could not convert ${JSON.stringify(n)} to number.`)}return"formatted"===this.type.kind?tg.fromString(tx(this.args[0].evaluate(r))):"resolvedImage"===this.type.kind?ty.fromString(tx(this.args[0].evaluate(r))):tx(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if("formatted"===this.type.kind)return new tT([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new tM(this.args[0]).serialize();let r=[`to-${this.type.kind}`];return this.eachChild(n=>{r.push(n.serialize())}),r}}let tL=["Unknown","Point","LineString","Polygon"];var tA=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?tL[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){let r=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:i,y:o}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*n-r[0])+this.featureDistanceData.bearing[1]*(o*n-r[1])}return 0}parseColor(r){let n=this._parseColorCache[r];return n||(n=this._parseColorCache[r]=tf.parse(r)),n}};class tz{constructor(r,n,i,o){this.name=r,this.type=n,this._evaluate=i,this.args=o}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,n){let i=r[0],o=tz.definitions[i];if(!o)return n.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);let a=Array.isArray(o)?o[0]:o.type,s=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,l=s.filter(([n])=>!Array.isArray(n)||n.length===r.length-1),u=null;for(let[o,s]of l){u=new tY(n.registry,n.path,null,n.scope);let l=[],c=!1;for(let n=1;n<r.length;n++){let i=r[n],a=Array.isArray(o)?o[n-1]:o.type,s=u.parse(i,1+l.length,a);if(!s){c=!0;break}l.push(s)}if(!c){if(Array.isArray(o)&&o.length!==l.length)u.error(`Expected ${o.length} arguments, but found ${l.length} instead.`);else{for(let r=0;r<l.length;r++){let n=Array.isArray(o)?o[r]:o.type,i=l[r];u.concat(r+1).checkSubtype(n,i.type)}if(0===u.errors.length)return new tz(i,a,s,l)}}}if(1===l.length)n.errors.push(...u.errors);else{let i=(l.length?l:s).map(([r])=>Array.isArray(r)?`(${r.map(tr).join(", ")})`:`(${tr(r.type)}...)`).join(" | "),o=[];for(let i=1;i<r.length;i++){let a=n.parse(r[i],1+o.length);if(!a)return null;o.push(tr(a.type))}n.error(`Expected arguments of type ${i}, but found (${o.join(", ")}) instead.`)}return null}static register(r,n){for(let i in tz.definitions=n,n)r[i]=tz}}class tP{constructor(r,n,i){this.type=e9,this.locale=i,this.caseSensitive=r,this.diacriticSensitive=n}static parse(r,n){if(2!==r.length)return n.error("Expected one argument.");let i=r[1];if("object"!=typeof i||Array.isArray(i))return n.error("Collator options argument must be an object.");let o=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,e3);if(!o)return null;let a=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,e3);if(!a)return null;let s=null;return!i.locale||(s=n.parse(i.locale,1,e4))?new tP(o,a,s):null}evaluate(r){return new tp(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){let r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}function tO(r,n){r[0]=Math.min(r[0],n[0]),r[1]=Math.min(r[1],n[1]),r[2]=Math.max(r[2],n[0]),r[3]=Math.max(r[3],n[1])}function tD(r,n){return!(r[0]<=n[0]||r[2]>=n[2]||r[1]<=n[1]||r[3]>=n[3])}function tR(r,n){var i,o;let a=!1;for(let s=0,l=n.length;s<l;s++){let l=n[s];for(let n=0,s=l.length;n<s-1;n++){if(function(r,n,i){let o=r[0]-n[0],a=r[1]-n[1],s=r[0]-i[0],l=r[1]-i[1];return o*l-s*a==0&&o*s<=0&&a*l<=0}(r,l[n],l[n+1]))return!1;(i=l[n])[1]>r[1]!=(o=l[n+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(a=!a)}}return a}function tF(r,n,i,o){let a=o[0]-i[0],s=o[1]-i[1],l=(r[0]-i[0])*s-a*(r[1]-i[1]),u=(n[0]-i[0])*s-a*(n[1]-i[1]);return l>0&&u<0||l<0&&u>0}function tB(r,n){for(let i=0;i<r.length;++i)if(!tR(r[i],n))return!1;for(let i=0;i<r.length-1;++i)if(function(r,n,i){var o,a,s,l;for(let u of i)for(let i=0;i<u.length-1;++i)if(0!=(s=[(a=u[i+1])[0]-(o=u[i])[0],a[1]-o[1]])[0]*(l=[n[0]-r[0],n[1]-r[1]])[1]-s[1]*l[0]&&tF(r,n,o,a)&&tF(o,a,r,n))return!0;return!1}(r[i],r[i+1],n))return!1;return!0}function tN(r,n,i){let o=[];for(let a=0;a<r.length;a++){let s=[];for(let o=0;o<r[a].length;o++){let l=function(r,n){let i=(180+r[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,a=Math.pow(2,n.z);return[Math.round(i*a*8192),Math.round(o*a*8192)]}(r[a][o],i);tO(n,l),s.push(l)}o.push(s)}return o}function tj(r,n,i){let o=[];for(let a=0;a<r.length;a++){let s=tN(r[a],n,i);o.push(s)}return o}function tV(r,n,i,o){if(r[0]<i[0]||r[0]>i[2]){let n=.5*o,a=r[0]-i[0]>n?-o:i[0]-r[0]>n?o:0;0===a&&(a=r[0]-i[2]>n?-o:i[2]-r[0]>n?o:0),r[0]+=a}tO(n,r)}function tU(r,n,i,o){let a=8192*Math.pow(2,o.z),s=[8192*o.x,8192*o.y],l=[];if(!r)return l;for(let o of r)for(let r of o){let o=[r.x+s[0],r.y+s[1]];tV(o,n,i,a),l.push(o)}return l}function tq(r,n,i,o){let a=8192*Math.pow(2,o.z),s=[8192*o.x,8192*o.y],l=[];if(!r)return l;for(let i of r){let r=[];for(let o of i){let i=[o.x+s[0],o.y+s[1]];tO(n,i),r.push(i)}l.push(r)}if(n[2]-n[0]<=a/2)for(let r of(n[0]=n[1]=1/0,n[2]=n[3]=-1/0,l))for(let o of r)tV(o,n,i,a);return l}class t${constructor(r,n){this.type=e3,this.geojson=r,this.geometries=n}static parse(r,n){if(2!==r.length)return n.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(tv(r[1])){let n=r[1];if("FeatureCollection"===n.type)for(let r=0;r<n.features.length;++r){let i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new t$(n,n.features[r].geometry)}else if("Feature"===n.type){let r=n.geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new t$(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new t$(n,n)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(null!=r.geometry()&&null!=r.canonicalID()){if("Point"===r.geometryType())return function(r,n){let i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=r.canonicalID();if(!a)return!1;if("Polygon"===n.type){let s=tN(n.coordinates,o,a),l=tU(r.geometry(),i,o,a);if(!tD(i,o))return!1;for(let r of l)if(!tR(r,s))return!1}if("MultiPolygon"===n.type){let s=tj(n.coordinates,o,a),l=tU(r.geometry(),i,o,a);if(!tD(i,o))return!1;for(let r of l)if(!function(r,n){for(let i=0;i<n.length;i++)if(tR(r,n[i]))return!0;return!1}(r,s))return!1}return!0}(r,this.geometries);if("LineString"===r.geometryType())return function(r,n){let i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=r.canonicalID();if(!a)return!1;if("Polygon"===n.type){let s=tN(n.coordinates,o,a),l=tq(r.geometry(),i,o,a);if(!tD(i,o))return!1;for(let r of l)if(!tB(r,s))return!1}if("MultiPolygon"===n.type){let s=tj(n.coordinates,o,a),l=tq(r.geometry(),i,o,a);if(!tD(i,o))return!1;for(let r of l)if(!function(r,n){for(let i=0;i<n.length;i++)if(tB(r,n[i]))return!0;return!1}(r,s))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function tH(r){if(r instanceof tz&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof t$)return!1;let n=!0;return r.eachChild(r=>{n&&!tH(r)&&(n=!1)}),n}function tZ(r){if(r instanceof tz&&"feature-state"===r.name)return!1;let n=!0;return r.eachChild(r=>{n&&!tZ(r)&&(n=!1)}),n}function tG(r,n){if(r instanceof tz&&n.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild(r=>{i&&!tG(r,n)&&(i=!1)}),i}class tW{constructor(r,n){this.type=n.type,this.name=r,this.boundExpression=n}static parse(r,n){if(2!==r.length||"string"!=typeof r[1])return n.error("'var' expression requires exactly one string literal argument.");let i=r[1];return n.scope.has(i)?new tW(i,n.scope.get(i)):n.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class tX{constructor(r,n=[],i,o=new e0,a=[]){this.registry=r,this.path=n,this.key=n.map(r=>`[${r}]`).join(""),this.scope=o,this.errors=a,this.expectedType=i}parse(r,n,i,o,a={}){return n?this.concat(n,i,o)._parse(r,a):this._parse(r,a)}_parse(r,n){function i(r,n,i){return"assert"===i?new tS(n,[r]):"coerce"===i?new tI(n,[r]):r}if(null!==r&&"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r||(r=["literal",r]),Array.isArray(r)){if(0===r.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let o=r[0];if("string"!=typeof o)return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let a=this.registry[o];if(a){let o=a.parse(r,this);if(!o)return null;if(this.expectedType){let r=this.expectedType,a=o.type;if("string"!==r.kind&&"number"!==r.kind&&"boolean"!==r.kind&&"object"!==r.kind&&"array"!==r.kind||"value"!==a.kind){if("color"!==r.kind&&"formatted"!==r.kind&&"resolvedImage"!==r.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(r,a))return null}else o=i(o,r,n.typeAnnotation||"coerce")}else o=i(o,r,n.typeAnnotation||"assert")}if(!(o instanceof tw)&&"resolvedImage"!==o.type.kind&&function r(n){if(n instanceof tW)return r(n.boundExpression);if(n instanceof tz&&"error"===n.name||n instanceof tP||n instanceof t$)return!1;let i=n instanceof tI||n instanceof tS,o=!0;return n.eachChild(n=>{o=i?o&&r(n):o&&n instanceof tw}),!!o&&tH(n)&&tG(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}(o)){let r=new tA;try{o=new tw(o.type,o.evaluate(r))}catch(r){return this.error(r.message),null}}return o}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===r?"'undefined' value invalid. Use null instead.":"object"==typeof r?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,n,i){let o="number"==typeof r?this.path.concat(r):this.path,a=i?this.scope.concat(i):this.scope;return new tX(this.registry,o,n||null,a,this.errors)}error(r,...n){let i=`${this.key}${n.map(r=>`[${r}]`).join("")}`;this.errors.push(new eQ(i,r))}checkSubtype(r,n){let i=ti(r,n);return i&&this.error(i),i}}var tY=tX;function tK(r,n){let i=r.length-1,o,a,s=0,l=i,u=0;for(;s<=l;)if(o=r[u=Math.floor((s+l)/2)],a=r[u+1],o<=n){if(u===i||n<a)return u;s=u+1}else{if(!(o>n))throw new tE("Input is not a number.");l=u-1}return 0}class tJ{constructor(r,n,i){for(let[o,a]of(this.type=r,this.input=n,this.labels=[],this.outputs=[],i))this.labels.push(o),this.outputs.push(a)}static parse(r,n){if(r.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return n.error("Expected an even number of arguments.");let i=n.parse(r[1],1,e2);if(!i)return null;let o=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(let i=1;i<r.length;i+=2){let s=1===i?-1/0:r[i],l=r[i+1],u=i,c=i+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(o.length&&o[o.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);let h=n.parse(l,c,a);if(!h)return null;a=a||h.type,o.push([s,h])}return new tJ(a,i,o)}evaluate(r){let n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(r);let o=this.input.evaluate(r);if(o<=n[0])return i[0].evaluate(r);let a=n.length;return o>=n[a-1]?i[a-1].evaluate(r):i[tK(n,o)].evaluate(r)}eachChild(r){for(let n of(r(this.input),this.outputs))r(n)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&r.push(this.labels[n]),r.push(this.outputs[n].serialize());return r}}function tQ(r,n,i){return r*(1-i)+n*i}var t0=Object.freeze({__proto__:null,array:function(r,n,i){return r.map((r,o)=>tQ(r,n[o],i))},color:function(r,n,i){return new tf(tQ(r.r,n.r,i),tQ(r.g,n.g,i),tQ(r.b,n.b,i),tQ(r.a,n.a,i))},number:tQ});let t1=4/29,t2=6/29,t4=3*t2*t2,t3=t2*t2*t2,t5=Math.PI/180,t6=180/Math.PI;function t8(r){return r>t3?Math.pow(r,1/3):r/t4+t1}function t9(r){return r>t2?r*r*r:t4*(r-t1)}function t7(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function re(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function rt(r){let n=re(r.r),i=re(r.g),o=re(r.b),a=t8((.4124564*n+.3575761*i+.1804375*o)/.95047),s=t8((.2126729*n+.7151522*i+.072175*o)/1);return{l:116*s-16,a:500*(a-s),b:200*(s-t8((.0193339*n+.119192*i+.9503041*o)/1.08883)),alpha:r.a}}function rr(r){let n=(r.l+16)/116,i=isNaN(r.a)?n:n+r.a/500,o=isNaN(r.b)?n:n-r.b/200;return n=1*t9(n),i=.95047*t9(i),o=1.08883*t9(o),new tf(t7(3.2404542*i-1.5371385*n-.4985314*o),t7(-.969266*i+1.8760108*n+.041556*o),t7(.0556434*i-.2040259*n+1.0572252*o),r.alpha)}let rn={forward:rt,reverse:rr,interpolate:function(r,n,i){return{l:tQ(r.l,n.l,i),a:tQ(r.a,n.a,i),b:tQ(r.b,n.b,i),alpha:tQ(r.alpha,n.alpha,i)}}},ri={forward:function(r){let{l:n,a:i,b:o}=rt(r),a=Math.atan2(o,i)*t6;return{h:a<0?a+360:a,c:Math.sqrt(i*i+o*o),l:n,alpha:r.a}},reverse:function(r){let n=r.h*t5,i=r.c;return rr({l:r.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:r.alpha})},interpolate:function(r,n,i){return{h:function(r,n,i){let o=n-r;return r+i*(o>180||o<-180?o-360*Math.round(o/360):o)}(r.h,n.h,i),c:tQ(r.c,n.c,i),l:tQ(r.l,n.l,i),alpha:tQ(r.alpha,n.alpha,i)}}};var ro=Object.freeze({__proto__:null,hcl:ri,lab:rn});class ra{constructor(r,n,i,o,a){for(let[s,l]of(this.type=r,this.operator=n,this.interpolation=i,this.input=o,this.labels=[],this.outputs=[],a))this.labels.push(s),this.outputs.push(l)}static interpolationFactor(r,n,i,o){let a=0;if("exponential"===r.name)a=rs(n,r.base,i,o);else if("linear"===r.name)a=rs(n,1,i,o);else if("cubic-bezier"===r.name){let s=r.controlPoints;a=new C(s[0],s[1],s[2],s[3]).solve(rs(n,1,i,o))}return a}static parse(r,n){let[i,o,a,...s]=r;if(!Array.isArray(o)||0===o.length)return n.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){let r=o[1];if("number"!=typeof r)return n.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:r}}else{if("cubic-bezier"!==o[0])return n.error(`Unknown interpolation type ${String(o[0])}`,1,0);{let r=o.slice(1);if(4!==r.length||r.some(r=>"number"!=typeof r||r<0||r>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:r}}}if(r.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(a=n.parse(a,2,e2)))return null;let l=[],u=null;"interpolate-hcl"===i||"interpolate-lab"===i?u=e5:n.expectedType&&"value"!==n.expectedType.kind&&(u=n.expectedType);for(let r=0;r<s.length;r+=2){let i=s[r],o=s[r+1],a=r+3,c=r+4;if("number"!=typeof i)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(l.length&&l[l.length-1][0]>=i)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);let h=n.parse(o,c,u);if(!h)return null;u=u||h.type,l.push([i,h])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new ra(u,i,o,a,l):n.error(`Type ${tr(u)} is not interpolatable.`)}evaluate(r){let n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(r);let o=this.input.evaluate(r);if(o<=n[0])return i[0].evaluate(r);let a=n.length;if(o>=n[a-1])return i[a-1].evaluate(r);let s=tK(n,o),l=ra.interpolationFactor(this.interpolation,o,n[s],n[s+1]),u=i[s].evaluate(r),c=i[s+1].evaluate(r);return"interpolate"===this.operator?t0[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?ri.reverse(ri.interpolate(ri.forward(u),ri.forward(c),l)):rn.reverse(rn.interpolate(rn.forward(u),rn.forward(c),l))}eachChild(r){for(let n of(r(this.input),this.outputs))r(n)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);let n=[this.operator,r,this.input.serialize()];for(let r=0;r<this.labels.length;r++)n.push(this.labels[r],this.outputs[r].serialize());return n}}function rs(r,n,i,o){let a=o-i,s=r-i;return 0===a?0:1===n?s/a:(Math.pow(n,s)-1)/(Math.pow(n,a)-1)}class rl{constructor(r,n){this.type=r,this.args=n}static parse(r,n){if(r.length<2)return n.error("Expectected at least one argument.");let i=null,o=n.expectedType;o&&"value"!==o.kind&&(i=o);let a=[];for(let o of r.slice(1)){let r=n.parse(o,1+a.length,i,void 0,{typeAnnotation:"omit"});if(!r)return null;i=i||r.type,a.push(r)}let s=o&&a.some(r=>ti(o,r.type));return new rl(s?e8:i,a)}evaluate(r){let n,i=null,o=0;for(let a of this.args){if(o++,(i=a.evaluate(r))&&i instanceof ty&&!i.available&&(n||(n=i),i=null,o===this.args.length))return n;if(null!==i)break}return i}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){let r=["coalesce"];return this.eachChild(n=>{r.push(n.serialize())}),r}}class ru{constructor(r,n){this.type=n.type,this.bindings=[].concat(r),this.result=n}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(let n of this.bindings)r(n[1]);r(this.result)}static parse(r,n){if(r.length<4)return n.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);let i=[];for(let o=1;o<r.length-1;o+=2){let a=r[o];if("string"!=typeof a)return n.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",o);let s=n.parse(r[o+1],o+1);if(!s)return null;i.push([a,s])}let o=n.parse(r[r.length-1],r.length-1,n.expectedType,i);return o?new ru(i,o):null}outputDefined(){return this.result.outputDefined()}serialize(){let r=["let"];for(let[n,i]of this.bindings)r.push(n,i.serialize());return r.push(this.result.serialize()),r}}class rc{constructor(r,n,i){this.type=r,this.index=n,this.input=i}static parse(r,n){if(3!==r.length)return n.error(`Expected 2 arguments, but found ${r.length-1} instead.`);let i=n.parse(r[1],1,e2),o=n.parse(r[2],2,tt(n.expectedType||e8));return i&&o?new rc(o.type.itemType,i,o):null}evaluate(r){let n=this.index.evaluate(r),i=this.input.evaluate(r);if(n<0)throw new tE(`Array index out of bounds: ${n} < 0.`);if(n>=i.length)throw new tE(`Array index out of bounds: ${n} > ${i.length-1}.`);if(n!==Math.floor(n))throw new tE(`Array index must be an integer, but found ${n} instead.`);return i[n]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class rh{constructor(r,n){this.type=e3,this.needle=r,this.haystack=n}static parse(r,n){if(3!==r.length)return n.error(`Expected 2 arguments, but found ${r.length-1} instead.`);let i=n.parse(r[1],1,e8),o=n.parse(r[2],2,e8);return i&&o?to(i.type,[e3,e4,e2,e1,e8])?new rh(i,o):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${tr(i.type)} instead`):null}evaluate(r){let n=this.needle.evaluate(r),i=this.haystack.evaluate(r);if(null==i)return!1;if(!ta(n,["boolean","string","number","null"]))throw new tE(`Expected first argument to be of type boolean, string, number or null, but found ${tr(tb(n))} instead.`);if(!ta(i,["string","array"]))throw new tE(`Expected second argument to be of type array or string, but found ${tr(tb(i))} instead.`);return i.indexOf(n)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class rd{constructor(r,n,i){this.type=e2,this.needle=r,this.haystack=n,this.fromIndex=i}static parse(r,n){if(r.length<=2||r.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);let i=n.parse(r[1],1,e8),o=n.parse(r[2],2,e8);if(!i||!o)return null;if(!to(i.type,[e3,e4,e2,e1,e8]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${tr(i.type)} instead`);if(4===r.length){let a=n.parse(r[3],3,e2);return a?new rd(i,o,a):null}return new rd(i,o)}evaluate(r){let n=this.needle.evaluate(r),i=this.haystack.evaluate(r);if(!ta(n,["boolean","string","number","null"]))throw new tE(`Expected first argument to be of type boolean, string, number or null, but found ${tr(tb(n))} instead.`);if(!ta(i,["string","array"]))throw new tE(`Expected second argument to be of type array or string, but found ${tr(tb(i))} instead.`);if(this.fromIndex){let o=this.fromIndex.evaluate(r);return i.indexOf(n,o)}return i.indexOf(n)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){let r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class rf{constructor(r,n,i,o,a,s){this.inputType=r,this.type=n,this.input=i,this.cases=o,this.outputs=a,this.otherwise=s}static parse(r,n){let i,o;if(r.length<5)return n.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return n.error("Expected an even number of arguments.");n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);let a={},s=[];for(let l=2;l<r.length-1;l+=2){let u=r[l],c=r[l+1];Array.isArray(u)||(u=[u]);let h=n.concat(l);if(0===u.length)return h.error("Expected at least one branch label.");for(let r of u){if("number"!=typeof r&&"string"!=typeof r)return h.error("Branch labels must be numbers or strings.");if("number"==typeof r&&Math.abs(r)>Number.MAX_SAFE_INTEGER)return h.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof r&&Math.floor(r)!==r)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,tb(r)))return null}else i=tb(r);if(void 0!==a[String(r)])return h.error("Branch labels must be unique.");a[String(r)]=s.length}let d=n.parse(c,l,o);if(!d)return null;o=o||d.type,s.push(d)}let l=n.parse(r[1],1,e8);if(!l)return null;let u=n.parse(r[r.length-1],r.length-1,o);return u?"value"!==l.type.kind&&n.concat(1).checkSubtype(i,l.type)?null:new rf(i,o,l,a,s,u):null}evaluate(r){let n=this.input.evaluate(r);return(tb(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){let r=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),i=[],o={};for(let r of n){let n=o[this.cases[r]];void 0===n?(o[this.cases[r]]=i.length,i.push([this.cases[r],[r]])):i[n][1].push(r)}let a=r=>"number"===this.inputType.kind?Number(r):r;for(let[n,o]of i)r.push(1===o.length?a(o[0]):o.map(a)),r.push(this.outputs[n].serialize());return r.push(this.otherwise.serialize()),r}}class rp{constructor(r,n,i){this.type=r,this.branches=n,this.otherwise=i}static parse(r,n){let i;if(r.length<4)return n.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return n.error("Expected an odd number of arguments.");n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);let o=[];for(let a=1;a<r.length-1;a+=2){let s=n.parse(r[a],a,e3);if(!s)return null;let l=n.parse(r[a+1],a+1,i);if(!l)return null;o.push([s,l]),i=i||l.type}let a=n.parse(r[r.length-1],r.length-1,i);return a?new rp(i,o,a):null}evaluate(r){for(let[n,i]of this.branches)if(n.evaluate(r))return i.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(let[n,i]of this.branches)r(n),r(i);r(this.otherwise)}outputDefined(){return this.branches.every(([r,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){let r=["case"];return this.eachChild(n=>{r.push(n.serialize())}),r}}class rm{constructor(r,n,i,o){this.type=r,this.input=n,this.beginIndex=i,this.endIndex=o}static parse(r,n){if(r.length<=2||r.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);let i=n.parse(r[1],1,e8),o=n.parse(r[2],2,e2);if(!i||!o)return null;if(!to(i.type,[tt(e8),e4,e8]))return n.error(`Expected first argument to be of type array or string, but found ${tr(i.type)} instead`);if(4===r.length){let a=n.parse(r[3],3,e2);return a?new rm(i.type,i,o,a):null}return new rm(i.type,i,o)}evaluate(r){let n=this.input.evaluate(r),i=this.beginIndex.evaluate(r);if(!ta(n,["string","array"]))throw new tE(`Expected first argument to be of type array or string, but found ${tr(tb(n))} instead.`);if(this.endIndex){let o=this.endIndex.evaluate(r);return n.slice(i,o)}return n.slice(i)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){let r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function rg(r,n){return"=="===r||"!="===r?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function ry(r,n,i,o){return 0===o.compare(n,i)}function r_(r,n,i){let o="=="!==r&&"!="!==r;return class a{constructor(r,n,i){this.type=e3,this.lhs=r,this.rhs=n,this.collator=i,this.hasUntypedArgument="value"===r.type.kind||"value"===n.type.kind}static parse(r,n){if(3!==r.length&&4!==r.length)return n.error("Expected two or three arguments.");let i=r[0],s=n.parse(r[1],1,e8);if(!s)return null;if(!rg(i,s.type))return n.concat(1).error(`"${i}" comparisons are not supported for type '${tr(s.type)}'.`);let l=n.parse(r[2],2,e8);if(!l)return null;if(!rg(i,l.type))return n.concat(2).error(`"${i}" comparisons are not supported for type '${tr(l.type)}'.`);if(s.type.kind!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return n.error(`Cannot compare types '${tr(s.type)}' and '${tr(l.type)}'.`);o&&("value"===s.type.kind&&"value"!==l.type.kind?s=new tS(l.type,[s]):"value"!==s.type.kind&&"value"===l.type.kind&&(l=new tS(s.type,[l])));let u=null;if(4===r.length){if("string"!==s.type.kind&&"string"!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return n.error("Cannot use collator to compare non-string types.");if(!(u=n.parse(r[3],3,e9)))return null}return new a(s,l,u)}evaluate(a){let s=this.lhs.evaluate(a),l=this.rhs.evaluate(a);if(o&&this.hasUntypedArgument){let n=tb(s),i=tb(l);if(n.kind!==i.kind||"string"!==n.kind&&"number"!==n.kind)throw new tE(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${n.kind}, ${i.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){let r=tb(s),i=tb(l);if("string"!==r.kind||"string"!==i.kind)return n(a,s,l)}return this.collator?i(a,s,l,this.collator.evaluate(a)):n(a,s,l)}eachChild(r){r(this.lhs),r(this.rhs),this.collator&&r(this.collator)}outputDefined(){return!0}serialize(){let n=[r];return this.eachChild(r=>{n.push(r.serialize())}),n}}}let rv=r_("==",function(r,n,i){return n===i},ry),rb=r_("!=",function(r,n,i){return n!==i},function(r,n,i,o){return!ry(0,n,i,o)}),rx=r_("<",function(r,n,i){return n<i},function(r,n,i,o){return 0>o.compare(n,i)}),rw=r_(">",function(r,n,i){return n>i},function(r,n,i,o){return o.compare(n,i)>0}),rE=r_("<=",function(r,n,i){return n<=i},function(r,n,i,o){return 0>=o.compare(n,i)}),rC=r_(">=",function(r,n,i){return n>=i},function(r,n,i,o){return o.compare(n,i)>=0});class rS{constructor(r,n,i,o,a,s){this.type=e4,this.number=r,this.locale=n,this.currency=i,this.unit=o,this.minFractionDigits=a,this.maxFractionDigits=s}static parse(r,n){if(3!==r.length)return n.error("Expected two arguments.");let i=n.parse(r[1],1,e2);if(!i)return null;let o=r[2];if("object"!=typeof o||Array.isArray(o))return n.error("NumberFormat options argument must be an object.");let a=null;if(o.locale&&!(a=n.parse(o.locale,1,e4)))return null;let s=null;if(o.currency&&!(s=n.parse(o.currency,1,e4)))return null;let l=null;if(o.unit&&!(l=n.parse(o.unit,1,e4)))return null;let u=null;if(o["min-fraction-digits"]&&!(u=n.parse(o["min-fraction-digits"],1,e2)))return null;let c=null;return!o["max-fraction-digits"]||(c=n.parse(o["max-fraction-digits"],1,e2))?new rS(i,a,s,l,u,c):null}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){let r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class rT{constructor(r){this.type=e2,this.input=r}static parse(r,n){if(2!==r.length)return n.error(`Expected 1 argument, but found ${r.length-1} instead.`);let i=n.parse(r[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error(`Expected argument of type string or array, but found ${tr(i.type)} instead.`):new rT(i):null}evaluate(r){let n=this.input.evaluate(r);if("string"==typeof n||Array.isArray(n))return n.length;throw new tE(`Expected value to be of type string or array, but found ${tr(tb(n))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){let r=["length"];return this.eachChild(n=>{r.push(n.serialize())}),r}}let rM={"==":rv,"!=":rb,">":rw,"<":rx,">=":rC,"<=":rE,array:tS,at:rc,boolean:tS,case:rp,coalesce:rl,collator:tP,format:tT,image:tM,in:rh,"index-of":rd,interpolate:ra,"interpolate-hcl":ra,"interpolate-lab":ra,length:rT,let:ru,literal:tw,match:rf,number:tS,"number-format":rS,object:tS,slice:rm,step:tJ,string:tS,"to-boolean":tI,"to-color":tI,"to-number":tI,"to-string":tI,var:tW,within:t$};function rk(r,[n,i,o,a]){n=n.evaluate(r),i=i.evaluate(r),o=o.evaluate(r);let s=a?a.evaluate(r):1,l=t_(n,i,o,s);if(l)throw new tE(l);return new tf(n/255*s,i/255*s,o/255*s,s)}function rI(r,n){let i=n[r];return void 0===i?null:i}function rL(r){return{type:r}}function rA(r){return{result:"success",value:r}}function rz(r){return{result:"error",value:r}}function rP(r){return"data-driven"===r["property-type"]}function rO(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function rD(r){return!!r.expression&&r.expression.interpolated}function rR(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function rF(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function rB(r){return r}function rN(r,n,i){return void 0!==r?r:void 0!==n?n:void 0!==i?i:void 0}function rj(r,n,i,o,a){return rN(typeof i===a?o[i]:void 0,r.default,n.default)}function rV(r,n,i){if("number"!==rR(i))return rN(r.default,n.default);let o=r.stops.length;if(1===o||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[o-1][0])return r.stops[o-1][1];let a=tK(r.stops.map(r=>r[0]),i);return r.stops[a][1]}function rU(r,n,i){let o=void 0!==r.base?r.base:1;if("number"!==rR(i))return rN(r.default,n.default);let a=r.stops.length;if(1===a||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[a-1][0])return r.stops[a-1][1];let s=tK(r.stops.map(r=>r[0]),i),l=function(r,n,i,o){let a=o-i,s=r-i;return 0===a?0:1===n?s/a:(Math.pow(n,s)-1)/(Math.pow(n,a)-1)}(i,o,r.stops[s][0],r.stops[s+1][0]),u=r.stops[s][1],c=r.stops[s+1][1],h=t0[n.type]||rB;if(r.colorSpace&&"rgb"!==r.colorSpace){let n=ro[r.colorSpace];h=(r,i)=>n.reverse(n.interpolate(n.forward(r),n.forward(i),l))}return"function"==typeof u.evaluate?{evaluate(...r){let n=u.evaluate.apply(void 0,r),i=c.evaluate.apply(void 0,r);if(void 0!==n&&void 0!==i)return h(n,i,l)}}:h(u,c,l)}function rq(r,n,i){return"color"===n.type?i=tf.parse(i):"formatted"===n.type?i=tg.fromString(i.toString()):"resolvedImage"===n.type?i=ty.fromString(i.toString()):rR(i)===n.type||"enum"===n.type&&n.values[i]||(i=void 0),rN(i,r.default,n.default)}tz.register(rM,{error:[{kind:"error"},[e4],(r,[n])=>{throw new tE(n.evaluate(r))}],typeof:[e4,[e8],(r,[n])=>tr(tb(n.evaluate(r)))],"to-rgba":[tt(e2,4),[e5],(r,[n])=>n.evaluate(r).toArray()],rgb:[e5,[e2,e2,e2],rk],rgba:[e5,[e2,e2,e2,e2],rk],has:{type:e3,overloads:[[[e4],(r,[n])=>n.evaluate(r) in r.properties()],[[e4,e6],(r,[n,i])=>n.evaluate(r) in i.evaluate(r)]]},get:{type:e8,overloads:[[[e4],(r,[n])=>rI(n.evaluate(r),r.properties())],[[e4,e6],(r,[n,i])=>rI(n.evaluate(r),i.evaluate(r))]]},"feature-state":[e8,[e4],(r,[n])=>rI(n.evaluate(r),r.featureState||{})],properties:[e6,[],r=>r.properties()],"geometry-type":[e4,[],r=>r.geometryType()],id:[e8,[],r=>r.id()],zoom:[e2,[],r=>r.globals.zoom],pitch:[e2,[],r=>r.globals.pitch||0],"distance-from-center":[e2,[],r=>r.distanceFromCenter()],"heatmap-density":[e2,[],r=>r.globals.heatmapDensity||0],"line-progress":[e2,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[e2,[],r=>r.globals.skyRadialProgress||0],accumulated:[e8,[],r=>void 0===r.globals.accumulated?null:r.globals.accumulated],"+":[e2,rL(e2),(r,n)=>{let i=0;for(let o of n)i+=o.evaluate(r);return i}],"*":[e2,rL(e2),(r,n)=>{let i=1;for(let o of n)i*=o.evaluate(r);return i}],"-":{type:e2,overloads:[[[e2,e2],(r,[n,i])=>n.evaluate(r)-i.evaluate(r)],[[e2],(r,[n])=>-n.evaluate(r)]]},"/":[e2,[e2,e2],(r,[n,i])=>n.evaluate(r)/i.evaluate(r)],"%":[e2,[e2,e2],(r,[n,i])=>n.evaluate(r)%i.evaluate(r)],ln2:[e2,[],()=>Math.LN2],pi:[e2,[],()=>Math.PI],e:[e2,[],()=>Math.E],"^":[e2,[e2,e2],(r,[n,i])=>Math.pow(n.evaluate(r),i.evaluate(r))],sqrt:[e2,[e2],(r,[n])=>Math.sqrt(n.evaluate(r))],log10:[e2,[e2],(r,[n])=>Math.log(n.evaluate(r))/Math.LN10],ln:[e2,[e2],(r,[n])=>Math.log(n.evaluate(r))],log2:[e2,[e2],(r,[n])=>Math.log(n.evaluate(r))/Math.LN2],sin:[e2,[e2],(r,[n])=>Math.sin(n.evaluate(r))],cos:[e2,[e2],(r,[n])=>Math.cos(n.evaluate(r))],tan:[e2,[e2],(r,[n])=>Math.tan(n.evaluate(r))],asin:[e2,[e2],(r,[n])=>Math.asin(n.evaluate(r))],acos:[e2,[e2],(r,[n])=>Math.acos(n.evaluate(r))],atan:[e2,[e2],(r,[n])=>Math.atan(n.evaluate(r))],min:[e2,rL(e2),(r,n)=>Math.min(...n.map(n=>n.evaluate(r)))],max:[e2,rL(e2),(r,n)=>Math.max(...n.map(n=>n.evaluate(r)))],abs:[e2,[e2],(r,[n])=>Math.abs(n.evaluate(r))],round:[e2,[e2],(r,[n])=>{let i=n.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[e2,[e2],(r,[n])=>Math.floor(n.evaluate(r))],ceil:[e2,[e2],(r,[n])=>Math.ceil(n.evaluate(r))],"filter-==":[e3,[e4,e8],(r,[n,i])=>r.properties()[n.value]===i.value],"filter-id-==":[e3,[e8],(r,[n])=>r.id()===n.value],"filter-type-==":[e3,[e4],(r,[n])=>r.geometryType()===n.value],"filter-<":[e3,[e4,e8],(r,[n,i])=>{let o=r.properties()[n.value],a=i.value;return typeof o==typeof a&&o<a}],"filter-id-<":[e3,[e8],(r,[n])=>{let i=r.id(),o=n.value;return typeof i==typeof o&&i<o}],"filter->":[e3,[e4,e8],(r,[n,i])=>{let o=r.properties()[n.value],a=i.value;return typeof o==typeof a&&o>a}],"filter-id->":[e3,[e8],(r,[n])=>{let i=r.id(),o=n.value;return typeof i==typeof o&&i>o}],"filter-<=":[e3,[e4,e8],(r,[n,i])=>{let o=r.properties()[n.value],a=i.value;return typeof o==typeof a&&o<=a}],"filter-id-<=":[e3,[e8],(r,[n])=>{let i=r.id(),o=n.value;return typeof i==typeof o&&i<=o}],"filter->=":[e3,[e4,e8],(r,[n,i])=>{let o=r.properties()[n.value],a=i.value;return typeof o==typeof a&&o>=a}],"filter-id->=":[e3,[e8],(r,[n])=>{let i=r.id(),o=n.value;return typeof i==typeof o&&i>=o}],"filter-has":[e3,[e8],(r,[n])=>n.value in r.properties()],"filter-has-id":[e3,[],r=>null!==r.id()&&void 0!==r.id()],"filter-type-in":[e3,[tt(e4)],(r,[n])=>n.value.indexOf(r.geometryType())>=0],"filter-id-in":[e3,[tt(e8)],(r,[n])=>n.value.indexOf(r.id())>=0],"filter-in-small":[e3,[e4,tt(e8)],(r,[n,i])=>i.value.indexOf(r.properties()[n.value])>=0],"filter-in-large":[e3,[e4,tt(e8)],(r,[n,i])=>(function(r,n,i,o){for(;i<=o;){let a=i+o>>1;if(n[a]===r)return!0;n[a]>r?o=a-1:i=a+1}return!1})(r.properties()[n.value],i.value,0,i.value.length-1)],all:{type:e3,overloads:[[[e3,e3],(r,[n,i])=>n.evaluate(r)&&i.evaluate(r)],[rL(e3),(r,n)=>{for(let i of n)if(!i.evaluate(r))return!1;return!0}]]},any:{type:e3,overloads:[[[e3,e3],(r,[n,i])=>n.evaluate(r)||i.evaluate(r)],[rL(e3),(r,n)=>{for(let i of n)if(i.evaluate(r))return!0;return!1}]]},"!":[e3,[e3],(r,[n])=>!n.evaluate(r)],"is-supported-script":[e3,[e4],(r,[n])=>{let i=r.globals&&r.globals.isSupportedScript;return!i||i(n.evaluate(r))}],upcase:[e4,[e4],(r,[n])=>n.evaluate(r).toUpperCase()],downcase:[e4,[e4],(r,[n])=>n.evaluate(r).toLowerCase()],concat:[e4,rL(e8),(r,n)=>n.map(n=>tx(n.evaluate(r))).join("")],"resolved-locale":[e4,[e9],(r,[n])=>n.evaluate(r).resolvedLocale()]});class r${constructor(r,n){this.expression=r,this._warningHistory={},this._evaluator=new tA,this._defaultValue=n?"color"===n.type&&(rF(n.default)||Array.isArray(n.default))?new tf(0,0,0,0):"color"===n.type?tf.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=n&&"enum"===n.type?n.values:null}evaluateWithoutErrorHandling(r,n,i,o,a,s,l,u){return this._evaluator.globals=r,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=o||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=l||null,this._evaluator.featureDistanceData=u||null,this.expression.evaluate(this._evaluator)}evaluate(r,n,i,o,a,s,l,u){this._evaluator.globals=r,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=o||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=l||null,this._evaluator.featureDistanceData=u||null;try{let r=this.expression.evaluate(this._evaluator);if(null==r||"number"==typeof r&&r!=r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new tE(`Expected value to be one of ${Object.keys(this._enumValues).map(r=>JSON.stringify(r)).join(", ")}, but found ${JSON.stringify(r)} instead.`);return r}catch(r){return this._warningHistory[r.message]||(this._warningHistory[r.message]=!0,"undefined"!=typeof console&&console.warn(r.message)),this._defaultValue}}}function rH(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in rM}function rZ(r,n){let i=new tY(rM,[],n?function(r){let n={color:e5,string:e4,number:e2,enum:e4,boolean:e3,formatted:e7,resolvedImage:te};return"array"===r.type?tt(n[r.value]||e8,r.length):n[r.type]}(n):void 0),o=i.parse(r,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return o?rA(new r$(o,n)):rz(i.errors)}class rG{constructor(r,n){this.kind=r,this._styleExpression=n,this.isStateDependent="constant"!==r&&!tZ(n.expression)}evaluateWithoutErrorHandling(r,n,i,o,a,s){return this._styleExpression.evaluateWithoutErrorHandling(r,n,i,o,a,s)}evaluate(r,n,i,o,a,s){return this._styleExpression.evaluate(r,n,i,o,a,s)}}class rW{constructor(r,n,i,o){this.kind=r,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==r&&!tZ(n.expression),this.interpolationType=o}evaluateWithoutErrorHandling(r,n,i,o,a,s){return this._styleExpression.evaluateWithoutErrorHandling(r,n,i,o,a,s)}evaluate(r,n,i,o,a,s){return this._styleExpression.evaluate(r,n,i,o,a,s)}interpolationFactor(r,n,i){return this.interpolationType?ra.interpolationFactor(this.interpolationType,r,n,i):0}}function rX(r,n){if("error"===(r=rZ(r,n)).result)return r;let i=r.value.expression,o=tH(i);if(!o&&!rP(n))return rz([new eQ("","data expressions not supported")]);let a=tG(i,["zoom","pitch","distance-from-center"]);if(!a&&!rO(n))return rz([new eQ("","zoom expressions not supported")]);let s=function r(n){let i=null;if(n instanceof ru)i=r(n.result);else if(n instanceof rl){for(let o of n.args)if(i=r(o))break}else(n instanceof tJ||n instanceof ra)&&n.input instanceof tz&&"zoom"===n.input.name&&(i=n);return i instanceof eQ||n.eachChild(n=>{let o=r(n);o instanceof eQ?i=o:!i&&o?i=new eQ("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&o&&i!==o&&(i=new eQ("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}(i);return s||a?s instanceof eQ?rz([s]):s instanceof ra&&!rD(n)?rz([new eQ("",'"interpolate" expressions cannot be used with this property')]):rA(s?new rW(o?"camera":"composite",r.value,s.labels,s instanceof ra?s.interpolation:void 0):new rG(o?"constant":"source",r.value)):rz([new eQ("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rY{constructor(r,n){this._parameters=r,this._specification=n,eY(this,function r(n,i){let o,a,s;let l="color"===i.type,u=n.stops&&"object"==typeof n.stops[0][0],c=u||!(u||void 0!==n.property),h=n.type||(rD(i)?"exponential":"interval");if(l&&((n=eY({},n)).stops&&(n.stops=n.stops.map(r=>[r[0],tf.parse(r[1])])),n.default=tf.parse(n.default?n.default:i.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!ro[n.colorSpace])throw Error(`Unknown color space: ${n.colorSpace}`);if("exponential"===h)o=rU;else if("interval"===h)o=rV;else if("categorical"===h){for(let r of(o=rj,a=Object.create(null),n.stops))a[r[0]]=r[1];s=typeof n.stops[0][0]}else{if("identity"!==h)throw Error(`Unknown function type "${h}"`);o=rq}if(u){let o={},a=[];for(let r=0;r<n.stops.length;r++){let i=n.stops[r],s=i[0].zoom;void 0===o[s]&&(o[s]={zoom:s,type:n.type,property:n.property,default:n.default,stops:[]},a.push(s)),o[s].stops.push([i[0].value,i[1]])}let s=[];for(let n of a)s.push([o[n].zoom,r(o[n],i)]);let l={name:"linear"};return{kind:"composite",interpolationType:l,interpolationFactor:ra.interpolationFactor.bind(void 0,l),zoomStops:s.map(r=>r[0]),evaluate:({zoom:r},o)=>rU({stops:s,base:n.base},i,r).evaluate(r,o)}}if(c){let r="exponential"===h?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:ra.interpolationFactor.bind(void 0,r),zoomStops:n.stops.map(r=>r[0]),evaluate:({zoom:r})=>o(n,i,r,a,s)}}return{kind:"source",evaluate(r,l){let u=l&&l.properties?l.properties[n.property]:void 0;return void 0===u?rN(n.default,i.default):o(n,i,u,a,s)}}}(this._parameters,this._specification))}static deserialize(r){return new rY(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}class rK{constructor(r,n,i,o){this.message=(r?`${r}: `:"")+i,o&&(this.identifier=o),null!=n&&n.__line__&&(this.line=n.__line__)}}function rJ(r){let n=r.key,i=r.value,o=r.valueSpec||{},a=r.objectElementValidators||{},s=r.style,l=r.styleSpec,u=[],c=rR(i);if("object"!==c)return[new rK(n,i,`object expected, ${c} found`)];for(let r in i){let c;let h=r.split(".")[0];a[h]?c=a[h]:o[h]?c=nm:a["*"]?c=a["*"]:o["*"]&&(c=nm),c?u=u.concat(c({key:(n?`${n}.`:n)+r,value:i[r],valueSpec:o[h]||o["*"],style:s,styleSpec:l,object:i,objectKey:r},i)):u.push(new rK(n,i[r],`unknown property "${r}"`))}for(let r in o)a[r]||o[r].required&&void 0===o[r].default&&void 0===i[r]&&u.push(new rK(n,i,`missing required property "${r}"`));return u}function rQ(r){let n=r.value,i=r.valueSpec,o=r.style,a=r.styleSpec,s=r.key,l=r.arrayElementValidator||nm;if("array"!==rR(n))return[new rK(s,n,`array expected, ${rR(n)} found`)];if(i.length&&n.length!==i.length)return[new rK(s,n,`array length ${i.length} expected, length ${n.length} found`)];if(i["min-length"]&&n.length<i["min-length"])return[new rK(s,n,`array length at least ${i["min-length"]} expected, length ${n.length} found`)];let u={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum,function:void 0};a.$version<7&&(u.function=i.function),"object"===rR(i.value)&&(u=i.value);let c=[];for(let r=0;r<n.length;r++)c=c.concat(l({array:n,arrayIndex:r,value:n[r],valueSpec:u,style:o,styleSpec:a,key:`${s}[${r}]`}));return c}function r0(r){let n=r.key,i=r.value,o=r.valueSpec,a=rR(i);if("number"===a&&i!=i&&(a="NaN"),"number"!==a)return[new rK(n,i,`number expected, ${a} found`)];if("minimum"in o){let a=o.minimum;if("array"===rR(o.minimum)&&(a=o.minimum[r.arrayIndex]),i<a)return[new rK(n,i,`${i} is less than the minimum value ${a}`)]}if("maximum"in o){let a=o.maximum;if("array"===rR(o.maximum)&&(a=o.maximum[r.arrayIndex]),i>a)return[new rK(n,i,`${i} is greater than the maximum value ${a}`)]}return[]}function r1(r){let n=r.valueSpec,i=eK(r.value.type),o,a,s,l={},u="categorical"!==i&&void 0===r.value.property,c="array"===rR(r.value.stops)&&"array"===rR(r.value.stops[0])&&"object"===rR(r.value.stops[0][0]),h=rJ({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(r){if("identity"===i)return[new rK(r.key,r.value,'identity function may not have a "stops" property')];let n=[],o=r.value;return n=n.concat(rQ({key:r.key,value:o,valueSpec:r.valueSpec,style:r.style,styleSpec:r.styleSpec,arrayElementValidator:d})),"array"===rR(o)&&0===o.length&&n.push(new rK(r.key,o,"array must have at least one stop")),n},default:function(r){return nm({key:r.key,value:r.value,valueSpec:n,style:r.style,styleSpec:r.styleSpec})}}});return"identity"===i&&u&&h.push(new rK(r.key,r.value,'missing required property "property"')),"identity"===i||r.value.stops||h.push(new rK(r.key,r.value,'missing required property "stops"')),"exponential"===i&&r.valueSpec.expression&&!rD(r.valueSpec)&&h.push(new rK(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(u||rP(r.valueSpec)?u&&!rO(r.valueSpec)&&h.push(new rK(r.key,r.value,"zoom functions not supported")):h.push(new rK(r.key,r.value,"property functions not supported"))),("categorical"===i||c)&&void 0===r.value.property&&h.push(new rK(r.key,r.value,'"property" property is required')),h;function d(r){let i=[],o=r.value,u=r.key;if("array"!==rR(o))return[new rK(u,o,`array expected, ${rR(o)} found`)];if(2!==o.length)return[new rK(u,o,`array length 2 expected, length ${o.length} found`)];if(c){if("object"!==rR(o[0]))return[new rK(u,o,`object expected, ${rR(o[0])} found`)];if(void 0===o[0].zoom)return[new rK(u,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new rK(u,o,"object stop key must have value")];let n=eK(o[0].zoom);if("number"!=typeof n)return[new rK(u,o[0].zoom,"stop zoom values must be numbers")];if(s&&s>n)return[new rK(u,o[0].zoom,"stop zoom values must appear in ascending order")];n!==s&&(s=n,a=void 0,l={}),i=i.concat(rJ({key:`${u}[0]`,value:o[0],valueSpec:{zoom:{}},style:r.style,styleSpec:r.styleSpec,objectElementValidators:{zoom:r0,value:f}}))}else i=i.concat(f({key:`${u}[0]`,value:o[0],valueSpec:{},style:r.style,styleSpec:r.styleSpec},o));return rH(eJ(o[1]))?i.concat([new rK(`${u}[1]`,o[1],"expressions are not allowed in function stops.")]):i.concat(nm({key:`${u}[1]`,value:o[1],valueSpec:n,style:r.style,styleSpec:r.styleSpec}))}function f(r,s){let u=rR(r.value),c=eK(r.value),h=null!==r.value?r.value:s;if(o){if(u!==o)return[new rK(r.key,h,`${u} stop domain type must match previous stop domain type ${o}`)]}else o=u;if("number"!==u&&"string"!==u&&"boolean"!==u&&"number"!=typeof c&&"string"!=typeof c&&"boolean"!=typeof c)return[new rK(r.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==u&&"categorical"!==i){let o=`number expected, ${u} found`;return rP(n)&&void 0===i&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rK(r.key,h,o)]}return"categorical"!==i||"number"!==u||"number"==typeof c&&isFinite(c)&&Math.floor(c)===c?"categorical"!==i&&"number"===u&&"number"==typeof c&&"number"==typeof a&&void 0!==a&&c<a?[new rK(r.key,h,"stop domain values must appear in ascending order")]:(a=c,"categorical"===i&&c in l?[new rK(r.key,h,"stop domain values must be unique")]:(l[c]=!0,[])):[new rK(r.key,h,`integer expected, found ${String(c)}`)]}}function r2(r){let n=("property"===r.expressionContext?rX:rZ)(eJ(r.value),r.valueSpec);if("error"===n.result)return n.value.map(n=>new rK(`${r.key}${n.key}`,r.value,n.message));let i=n.value.expression||n.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!i.outputDefined())return[new rK(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===r.expressionContext&&"layout"===r.propertyType&&!tZ(i))return[new rK(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext)return function r(n,i){let o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(let r of i.valueSpec.expression.parameters)o.delete(r);if(0===o.size)return[];let a=[];return n instanceof tz&&o.has(n.name)?[new rK(i.key,i.value,`["${n.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(n.eachChild(n=>{a.push(...r(n,i))}),a)}(i,r);if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!tG(i,["zoom","feature-state"]))return[new rK(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!tH(i))return[new rK(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function r4(r){let n=r.key,i=r.value,o=r.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(eK(i))&&a.push(new rK(n,i,`expected one of [${o.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(o.values).indexOf(eK(i))&&a.push(new rK(n,i,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(i)} found`)),a}function r3(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(let n of r.slice(1))if(!r3(n)&&"boolean"!=typeof n)return!1;return!0;default:return!0}}function r5(r,n="fill"){if(null==r)return{filter:()=>!0,needGeometry:!1,needFeature:!1};r3(r)||(r=function r(n){if(!n)return!0;let i=n[0];return n.length<=1?"any"!==i:"=="===i?r7(n[1],n[2],"=="):"!="===i?nr(r7(n[1],n[2],"==")):"<"===i||">"===i||"<="===i||">="===i?r7(n[1],n[2],i):"any"===i?["any"].concat(n.slice(1).map(r)):"all"===i?["all"].concat(n.slice(1).map(r)):"none"===i?["all"].concat(n.slice(1).map(r).map(nr)):"in"===i?ne(n[1],n.slice(2)):"!in"===i?nr(ne(n[1],n.slice(2))):"has"===i?nt(n[1]):"!has"===i?nr(nt(n[1])):"within"!==i||n}(r));let i=r,o=!0;try{o=function(r){if(!r6(r))return r;let n=eJ(r);return function r(n){let i=!1,o=[];if("case"===n[0]){for(let r=1;r<n.length-1;r+=2)i=i||r6(n[r]),o.push(n[r+1]);o.push(n[n.length-1])}else if("match"===n[0]){i=i||r6(n[1]);for(let r=2;r<n.length-1;r+=2)o.push(n[r+1]);o.push(n[n.length-1])}else if("step"===n[0]){i=i||r6(n[1]);for(let r=1;r<n.length-1;r+=2)o.push(n[r+1])}i&&(n.length=0,n.push("any",...o));for(let i=1;i<n.length;i++)r(n[i])}(n),n=function r(n){if(!Array.isArray(n))return n;let i=function(r){if(r8.has(r[0])){for(let n=1;n<r.length;n++)if(r6(r[n]))return!0}return r}(n);return!0===i?i:i.map(n=>r(n))}(n)}(i)}catch(r){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(i,null,2)}
        `)}let a=eX[`filter_${n}`],s=rZ(o,a),l=null;if("error"===s.result)throw Error(s.value.map(r=>`${r.key}: ${r.message}`).join(", "));l=(r,n,i)=>s.value.evaluate(r,n,{},i);let u=null,c=null;if(o!==i){let r=rZ(i,a);if("error"===r.result)throw Error(r.value.map(r=>`${r.key}: ${r.message}`).join(", "));u=(n,i,o,a,s)=>r.value.evaluate(n,i,{},o,void 0,void 0,a,s),c=!tH(r.value.expression)}return{filter:l,dynamicFilter:u||void 0,needGeometry:function r(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(let i=1;i<n.length;i++)if(r(n[i]))return!0;return!1}(o),needFeature:!!c}}function r6(r){var n;if(!Array.isArray(r))return!1;if("pitch"===(n=r[0])||"distance-from-center"===n)return!0;for(let n=1;n<r.length;n++)if(r6(r[n]))return!0;return!1}let r8=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function r9(r,n){return r<n?-1:r>n?1:0}function r7(r,n,i){switch(r){case"$type":return[`filter-type-${i}`,n];case"$id":return[`filter-id-${i}`,n];default:return[`filter-${i}`,r,n]}}function ne(r,n){if(0===n.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(r=>typeof r!=typeof n[0])?["filter-in-large",r,["literal",n.sort(r9)]]:["filter-in-small",r,["literal",n]]}}function nt(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function nr(r){return["!",r]}function nn(r){return r3(eJ(r.value))?r2(eY({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):function r(n){let i=n.value,o=n.key;if("array"!==rR(i))return[new rK(o,i,`array expected, ${rR(i)} found`)];let a=n.styleSpec,s,l=[];if(i.length<1)return[new rK(o,i,"filter array must have at least 1 element")];switch(l=l.concat(r4({key:`${o}[0]`,value:i[0],valueSpec:a.filter_operator,style:n.style,styleSpec:n.styleSpec})),eK(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===eK(i[1])&&l.push(new rK(o,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":3!==i.length&&l.push(new rK(o,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&"string"!==(s=rR(i[1]))&&l.push(new rK(`${o}[1]`,i[1],`string expected, ${s} found`));for(let r=2;r<i.length;r++)s=rR(i[r]),"$type"===eK(i[1])?l=l.concat(r4({key:`${o}[${r}]`,value:i[r],valueSpec:a.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==s&&"number"!==s&&"boolean"!==s&&l.push(new rK(`${o}[${r}]`,i[r],`string, number, or boolean expected, ${s} found`));break;case"any":case"all":case"none":for(let a=1;a<i.length;a++)l=l.concat(r({key:`${o}[${a}]`,value:i[a],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":s=rR(i[1]),2!==i.length?l.push(new rK(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):"string"!==s&&l.push(new rK(`${o}[1]`,i[1],`string expected, ${s} found`));break;case"within":s=rR(i[1]),2!==i.length?l.push(new rK(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):"object"!==s&&l.push(new rK(`${o}[1]`,i[1],`object expected, ${s} found`))}return l}(r)}function ni(r,n){let i;let o=r.key,a=r.style,s=r.styleSpec,l=r.value,u=r.objectKey,c=s[`${n}_${r.layerType}`];if(!c)return[];let h=u.match(/^(.*)-transition$/);if("paint"===n&&h&&c[h[1]]&&c[h[1]].transition)return nm({key:o,value:l,valueSpec:s.transition,style:a,styleSpec:s});let d=r.valueSpec||c[u];if(!d)return[new rK(o,l,`unknown property "${u}"`)];if("string"===rR(l)&&rP(d)&&!d.tokens&&(i=/^{([^}]+)}$/.exec(l))){let r=`\`{ "type": "identity", "property": ${i?JSON.stringify(i[1]):'"_"'} }\``;return[new rK(o,l,`"${u}" does not support interpolation syntax
Use an identity property function instead: ${r}.`)]}let f=[];return"symbol"===r.layerType&&("text-field"===u&&a&&!a.glyphs&&f.push(new rK(o,l,'use of "text-field" requires a style "glyphs" property')),"text-font"===u&&rF(eJ(l))&&"identity"===eK(l.type)&&f.push(new rK(o,l,'"text-font" does not support identity functions'))),f.concat(nm({key:r.key,value:l,valueSpec:d,style:a,styleSpec:s,expressionContext:"property",propertyType:n,propertyKey:u}))}function no(r){return ni(r,"paint")}function na(r){return ni(r,"layout")}function ns(r){let n=[],i=r.value,o=r.key,a=r.style,s=r.styleSpec;i.type||i.ref||n.push(new rK(o,i,'either "type" or "ref" is required'));let l=eK(i.type),u=eK(i.ref);if(i.id){let s=eK(i.id);for(let l=0;l<r.arrayIndex;l++){let r=a.layers[l];eK(r.id)===s&&n.push(new rK(o,i.id,`duplicate layer id "${i.id}", previously used at line ${r.id.__line__}`))}}if("ref"in i){let r;["type","source","source-layer","filter","layout"].forEach(r=>{r in i&&n.push(new rK(o,i[r],`"${r}" is prohibited for ref layers`))}),a.layers.forEach(n=>{eK(n.id)===u&&(r=n)}),r?r.ref?n.push(new rK(o,i.ref,"ref cannot reference another ref layer")):l=eK(r.type):"string"==typeof u&&n.push(new rK(o,i.ref,`ref layer "${u}" not found`))}else if("background"!==l&&"sky"!==l){if(i.source){let r=a.sources&&a.sources[i.source],s=r&&eK(r.type);r?"vector"===s&&"raster"===l?n.push(new rK(o,i.source,`layer "${i.id}" requires a raster source`)):"raster"===s&&"raster"!==l?n.push(new rK(o,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==s||i["source-layer"]?"raster-dem"===s&&"hillshade"!==l?n.push(new rK(o,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===l&&i.paint&&(i.paint["line-gradient"]||i.paint["line-trim-offset"])&&("geojson"!==s||!r.lineMetrics)&&n.push(new rK(o,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new rK(o,i,`layer "${i.id}" must specify a "source-layer"`)):n.push(new rK(o,i.source,`source "${i.source}" not found`))}else n.push(new rK(o,i,'missing required property "source"'))}return n=n.concat(rJ({key:o,value:i,valueSpec:s.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>nm({key:`${o}.type`,value:i.type,valueSpec:s.layer.type,style:r.style,styleSpec:r.styleSpec,object:i,objectKey:"type"}),filter:r=>nn(eY({layerType:l},r)),layout:r=>rJ({layer:i,key:r.key,value:r.value,valueSpec:{},style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":r=>na(eY({layerType:l},r))}}),paint:r=>rJ({layer:i,key:r.key,value:r.value,valueSpec:{},style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":r=>no(eY({layerType:l},r))}})}}))}function nl(r){let n=r.value,i=r.key,o=rR(n);return"string"!==o?[new rK(i,n,`string expected, ${o} found`)]:[]}let nu={promoteId:function({key:r,value:n}){if("string"===rR(n))return nl({key:r,value:n});{let i=[];for(let o in n)i.push(...nl({key:`${r}.${o}`,value:n[o]}));return i}}};function nc(r){let n;let i=r.value,o=r.key,a=r.styleSpec,s=r.style;if(!i.type)return[new rK(o,i,'"type" is required')];let l=eK(i.type);switch(l){case"vector":case"raster":case"raster-dem":return rJ({key:o,value:i,valueSpec:a[`source_${l.replace("-","_")}`],style:r.style,styleSpec:a,objectElementValidators:nu});case"geojson":if(n=rJ({key:o,value:i,valueSpec:a.source_geojson,style:s,styleSpec:a,objectElementValidators:nu}),i.cluster)for(let r in i.clusterProperties){let[a,s]=i.clusterProperties[r],l="string"==typeof a?[a,["accumulated"],["get",r]]:a;n.push(...r2({key:`${o}.${r}.map`,value:s,expressionContext:"cluster-map"})),n.push(...r2({key:`${o}.${r}.reduce`,value:l,expressionContext:"cluster-reduce"}))}return n;case"video":return rJ({key:o,value:i,valueSpec:a.source_video,style:s,styleSpec:a});case"image":return rJ({key:o,value:i,valueSpec:a.source_image,style:s,styleSpec:a});case"canvas":return[new rK(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return r4({key:`${o}.type`,value:i.type,valueSpec:{values:a.source.reduce((r,n)=>{let i=a[n];return"enum"===i.type.type&&(r=r.concat(Object.keys(i.type.values))),r},[])},style:s,styleSpec:a})}}function nh(r){let n=r.value,i=r.styleSpec,o=i.light,a=r.style,s=[],l=rR(n);if(void 0===n)return s;if("object"!==l)return s.concat([new rK("light",n,`object expected, ${l} found`)]);for(let r in n){let l=r.match(/^(.*)-transition$/);s=s.concat(l&&o[l[1]]&&o[l[1]].transition?nm({key:r,value:n[r],valueSpec:i.transition,style:a,styleSpec:i}):o[r]?nm({key:r,value:n[r],valueSpec:o[r],style:a,styleSpec:i}):[new rK(r,n[r],`unknown property "${r}"`)])}return s}function nd(r){let n=r.value,i=r.key,o=r.style,a=r.styleSpec,s=a.terrain,l=[],u=rR(n);if(void 0===n)return l;if("object"!==u)return l.concat([new rK("terrain",n,`object expected, ${u} found`)]);for(let r in n){let i=r.match(/^(.*)-transition$/);l=l.concat(i&&s[i[1]]&&s[i[1]].transition?nm({key:r,value:n[r],valueSpec:a.transition,style:o,styleSpec:a}):s[r]?nm({key:r,value:n[r],valueSpec:s[r],style:o,styleSpec:a}):[new rK(r,n[r],`unknown property "${r}"`)])}if(n.source){let r=o.sources&&o.sources[n.source],a=r&&eK(r.type);r?"raster-dem"!==a&&l.push(new rK(i,n.source,`terrain cannot be used with a source of type ${String(a)}, it only be used with a "raster-dem" source type`)):l.push(new rK(i,n.source,`source "${n.source}" not found`))}else l.push(new rK(i,n,'terrain is missing required property "source"'));return l}function nf(r){let n=r.value,i=r.style,o=r.styleSpec,a=o.fog,s=[],l=rR(n);if(void 0===n)return s;if("object"!==l)return s.concat([new rK("fog",n,`object expected, ${l} found`)]);for(let r in n){let l=r.match(/^(.*)-transition$/);s=s.concat(l&&a[l[1]]&&a[l[1]].transition?nm({key:r,value:n[r],valueSpec:o.transition,style:i,styleSpec:o}):a[r]?nm({key:r,value:n[r],valueSpec:a[r],style:i,styleSpec:o}):[new rK(r,n[r],`unknown property "${r}"`)])}return s}let np={"*":()=>[],array:rQ,boolean:function(r){let n=r.value,i=r.key,o=rR(n);return"boolean"!==o?[new rK(i,n,`boolean expected, ${o} found`)]:[]},number:r0,color:function(r){let n=r.key,i=r.value,o=rR(i);return"string"!==o?[new rK(n,i,`color expected, ${o} found`)]:null===ts(i)?[new rK(n,i,`color expected, "${i}" found`)]:[]},enum:r4,filter:nn,function:r1,layer:ns,object:rJ,source:nc,light:nh,terrain:nd,fog:nf,string:nl,formatted:function(r){return 0===nl(r).length?[]:r2(r)},resolvedImage:function(r){return 0===nl(r).length?[]:r2(r)},projection:function(r){let n=r.value,i=r.styleSpec,o=i.projection,a=r.style,s=[],l=rR(n);if("object"===l)for(let r in n)s=s.concat(nm({key:r,value:n[r],valueSpec:o[r],style:a,styleSpec:i}));else"string"!==l&&(s=s.concat([new rK("projection",n,`object or string expected, ${l} found`)]));return s}};function nm(r){let n=r.value,i=r.valueSpec,o=r.styleSpec;return i.expression&&rF(eK(n))?r1(r):i.expression&&rH(eJ(n))?r2(r):i.type&&np[i.type]?np[i.type](r):rJ(eY({},r,{valueSpec:i.type?o[i.type]:i}))}function ng(r){let n=r.value,i=r.key,o=nl(r);return o.length||(-1===n.indexOf("{fontstack}")&&o.push(new rK(i,n,'"glyphs" url must include a "{fontstack}" token')),-1===n.indexOf("{range}")&&o.push(new rK(i,n,'"glyphs" url must include a "{range}" token'))),o}function ny(r,n=eX){return nb(nm({key:"",value:r,valueSpec:n.$root,styleSpec:n,style:r,objectElementValidators:{glyphs:ng,"*":()=>[]}}))}let n_=r=>nb(no(r)),nv=r=>nb(na(r));function nb(r){return r.slice().sort((r,n)=>r.line&&n.line?r.line-n.line:0)}function nx(r,n){let i=!1;if(n&&n.length)for(let o of n)r.fire(new eG(Error(o.message))),i=!0;return i}function nw(r,n,i){var o=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var a=new Int32Array(this.arrayBuffer);r=a[0],this.d=(n=a[1])+2*(i=a[2]);for(var s=0;s<this.d*this.d;s++){var l=a[3+s],u=a[3+s+1];o.push(l===u?null:a.subarray(l,u))}var c=a[3+o.length+1];this.keys=a.subarray(a[3+o.length],c),this.bboxes=a.subarray(c),this.insert=this._insertReadonly}else{this.d=n+2*i;for(var h=0;h<this.d*this.d;h++)o.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=r,this.padding=i,this.scale=n/r,this.uid=0;var d=i/n*r;this.min=-d,this.max=r+d}nw.prototype.insert=function(r,n,i,o,a){this._forEachCell(n,i,o,a,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(a)},nw.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nw.prototype._insertCell=function(r,n,i,o,a,s){this.cells[a].push(s)},nw.prototype.query=function(r,n,i,o,a){var s=this.min,l=this.max;if(r<=s&&n<=s&&l<=i&&l<=o&&!a)return Array.prototype.slice.call(this.keys);var u=[];return this._forEachCell(r,n,i,o,this._queryCell,u,{},a),u},nw.prototype._queryCell=function(r,n,i,o,a,s,l,u){var c=this.cells[a];if(null!==c)for(var h=this.keys,d=this.bboxes,f=0;f<c.length;f++){var p=c[f];if(void 0===l[p]){var m=4*p;(u?u(d[m+0],d[m+1],d[m+2],d[m+3]):r<=d[m+2]&&n<=d[m+3]&&i>=d[m+0]&&o>=d[m+1])?(l[p]=!0,s.push(h[p])):l[p]=!1}}},nw.prototype._forEachCell=function(r,n,i,o,a,s,l,u){for(var c=this._convertToCellCoord(r),h=this._convertToCellCoord(n),d=this._convertToCellCoord(i),f=this._convertToCellCoord(o),p=c;p<=d;p++)for(var m=h;m<=f;m++){var g=this.d*m+p;if((!u||u(this._convertFromCellCoord(p),this._convertFromCellCoord(m),this._convertFromCellCoord(p+1),this._convertFromCellCoord(m+1)))&&a.call(this,r,n,i,o,g,s,l,u))return}},nw.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},nw.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},nw.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,n=3+this.cells.length+1+1,i=0,o=0;o<this.cells.length;o++)i+=this.cells[o].length;var a=new Int32Array(n+i+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var s=n,l=0;l<r.length;l++){var u=r[l];a[3+l]=s,a.set(u,s),s+=u.length}return a[3+r.length]=s,a.set(this.keys,s),a[3+r.length+1]=s+=this.keys.length,a.set(this.bboxes,s),s+=this.bboxes.length,a.buffer};var nE=w(nw);let nC={};function nS(r,n,i={}){Object.defineProperty(r,"_classRegistryKey",{value:n,writeable:!1}),nC[n]={klass:r,omit:i.omit||[]}}for(let r in nS(Object,"Object"),nE.serialize=function(r,n){let i=r.toArrayBuffer();return n&&n.push(i),{buffer:i}},nE.deserialize=function(r){return new nE(r.buffer)},Object.defineProperty(nE,"name",{value:"Grid"}),nS(nE,"Grid"),nS(tf,"Color"),nS(Error,"Error"),nS(ed,"AJAXError"),nS(ty,"ResolvedImage"),nS(rY,"StylePropertyFunction"),nS(r$,"StyleExpression",{omit:["_evaluator"]}),nS(rW,"ZoomDependentExpression"),nS(rG,"ZoomConstantExpression"),nS(tz,"CompoundExpression",{omit:["_evaluate"]}),rM)nC[rM[r]._classRegistryKey]||nS(rM[r],`Expression${r}`);function nT(r){return r&&"undefined"!=typeof ArrayBuffer&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function nM(r){return f.ImageBitmap&&r instanceof f.ImageBitmap}function nk(r,n){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(nT(r)||nM(r))return n&&n.push(r),r;if(ArrayBuffer.isView(r))return n&&n.push(r.buffer),r;if(r instanceof f.ImageData)return n&&n.push(r.data.buffer),r;if(Array.isArray(r)){let i=[];for(let o of r)i.push(nk(o,n));return i}if("object"==typeof r){let i=r.constructor,o=i._classRegistryKey;if(!o)throw Error(`can't serialize object of unregistered class ${o}`);let a=i.serialize?i.serialize(r,n):{};if(!i.serialize){for(let i in r)r.hasOwnProperty(i)&&(nC[o].omit.indexOf(i)>=0||(a[i]=nk(r[i],n)));r instanceof Error&&(a.message=r.message)}if(a.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==o&&(a.$name=o),a}throw Error("can't serialize object of type "+typeof r)}function nI(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||nT(r)||nM(r)||ArrayBuffer.isView(r)||r instanceof f.ImageData)return r;if(Array.isArray(r))return r.map(nI);if("object"==typeof r){let n=r.$name||"Object",{klass:i}=nC[n];if(!i)throw Error(`can't deserialize unregistered class ${n}`);if(i.deserialize)return i.deserialize(r);let o=Object.create(i.prototype);for(let n of Object.keys(r))"$name"!==n&&(o[n]=nI(r[n]));return o}throw Error("can't deserialize object of type "+typeof r)}let nL={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function nA(r){for(let n of r)if(nz(n.charCodeAt(0)))return!0;return!1}function nz(r){return!(746!==r&&747!==r&&(r<4352||!(nL["Bopomofo Extended"](r)||nL.Bopomofo(r)||nL["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||nL["CJK Compatibility Ideographs"](r)||nL["CJK Compatibility"](r)||nL["CJK Radicals Supplement"](r)||nL["CJK Strokes"](r)||!(!nL["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||nL["CJK Unified Ideographs Extension A"](r)||nL["CJK Unified Ideographs"](r)||nL["Enclosed CJK Letters and Months"](r)||nL["Hangul Compatibility Jamo"](r)||nL["Hangul Jamo Extended-A"](r)||nL["Hangul Jamo Extended-B"](r)||nL["Hangul Jamo"](r)||nL["Hangul Syllables"](r)||nL.Hiragana(r)||nL["Ideographic Description Characters"](r)||nL.Kanbun(r)||nL["Kangxi Radicals"](r)||nL["Katakana Phonetic Extensions"](r)||nL.Katakana(r)&&12540!==r||!(!nL["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!nL["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||nL["Unified Canadian Aboriginal Syllabics"](r)||nL["Unified Canadian Aboriginal Syllabics Extended"](r)||nL["Vertical Forms"](r)||nL["Yijing Hexagram Symbols"](r)||nL["Yi Syllables"](r)||nL["Yi Radicals"](r))))}function nP(r){return!(nz(r)||nL["Latin-1 Supplement"](r)&&(167===r||169===r||174===r||177===r||188===r||189===r||190===r||215===r||247===r)||nL["General Punctuation"](r)&&(8214===r||8224===r||8225===r||8240===r||8241===r||8251===r||8252===r||8258===r||8263===r||8264===r||8265===r||8273===r)||nL["Letterlike Symbols"](r)||nL["Number Forms"](r)||nL["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||9003===r||r>=9085&&r<=9114||r>=9150&&r<=9165||9167===r||r>=9169&&r<=9179||r>=9186&&r<=9215)||nL["Control Pictures"](r)&&9251!==r||nL["Optical Character Recognition"](r)||nL["Enclosed Alphanumerics"](r)||nL["Geometric Shapes"](r)||nL["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||nL["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||nL["CJK Symbols and Punctuation"](r)||nL.Katakana(r)||nL["Private Use Area"](r)||nL["CJK Compatibility Forms"](r)||nL["Small Form Variants"](r)||nL["Halfwidth and Fullwidth Forms"](r)||8734===r||8756===r||8757===r||r>=9984&&r<=10087||r>=10102&&r<=10131||65532===r||65533===r)}function nO(r){return r>=1424&&r<=2303||nL["Arabic Presentation Forms-A"](r)||nL["Arabic Presentation Forms-B"](r)}let nD="deferred",nR="loading",nF="loaded",nB=null,nN="unavailable",nj=null,nV=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(nN="error"),nB&&nB(r)};function nU(){nq.fire(new eZ("pluginStateChange",{pluginStatus:nN,pluginURL:nj}))}let nq=new eW,n$=function(){return nN},nH=function(){if(nN!==nD||!nj)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nN=nR,nU(),nj&&em({url:nj},r=>{r?nV(r):(nN=nF,nU())})},nZ={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>nN===nF||null!=nZ.applyArabicShaping,isLoading:()=>nN===nR,setState(r){nN=r.pluginStatus,nj=r.pluginURL},isParsed:()=>null!=nZ.applyArabicShaping&&null!=nZ.processBidirectionalText&&null!=nZ.processStyledBidirectionalText,getPluginURL:()=>nj};class nG{constructor(r,n){this.zoom=r,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(r){return function(r,n){for(let o of r){var i;if(i=o.charCodeAt(0),!n&&nO(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||nL.Khmer(i))return!1}return!0}(r,nZ.isLoaded())}}class nW{constructor(r,n){this.property=r,this.value=n,this.expression=function(r,n){if(rF(r))return new rY(r,n);if(rH(r)){let i=rX(r,n);if("error"===i.result)throw Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}{let i=r;return"string"==typeof r&&"color"===n.type&&(i=tf.parse(r)),{kind:"constant",evaluate:()=>i}}}(void 0===n?r.specification.default:n,r.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(r,n,i){return this.property.possiblyEvaluate(this,r,n,i)}}class nX{constructor(r){this.property=r,this.value=new nW(r,void 0)}transitioned(r,n){return new nK(this.property,this.value,n,B({},r.transition,this.transition),r.now)}untransitioned(){return new nK(this.property,this.value,null,{},0)}}class nY{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return W(this._values[r].value.value)}setValue(r,n){this._values.hasOwnProperty(r)||(this._values[r]=new nX(this._values[r].property)),this._values[r].value=new nW(this._values[r].property,null===n?void 0:W(n))}getTransition(r){return W(this._values[r].transition)}setTransition(r,n){this._values.hasOwnProperty(r)||(this._values[r]=new nX(this._values[r].property)),this._values[r].transition=W(n)||void 0}serialize(){let r={};for(let n of Object.keys(this._values)){let i=this.getValue(n);void 0!==i&&(r[n]=i);let o=this.getTransition(n);void 0!==o&&(r[`${n}-transition`]=o)}return r}transitioned(r,n){let i=new nJ(this._properties);for(let o of Object.keys(this._values))i._values[o]=this._values[o].transitioned(r,n._values[o]);return i}untransitioned(){let r=new nJ(this._properties);for(let n of Object.keys(this._values))r._values[n]=this._values[n].untransitioned();return r}}class nK{constructor(r,n,i,o,a){let s=o.delay||0,l=o.duration||0;a=a||0,this.property=r,this.value=n,this.begin=a+s,this.end=this.begin+l,r.specification.transition&&(o.delay||o.duration)&&(this.prior=i)}possiblyEvaluate(r,n,i){let o=r.now||0,a=this.value.possiblyEvaluate(r,n,i),s=this.prior;if(s){if(o>this.end||this.value.isDataDriven())return this.prior=null,a;if(o<this.begin)return s.possiblyEvaluate(r,n,i);{let l=(o-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(r,n,i),a,L(l))}}return a}}class nJ{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,n,i){let o=new n1(this._properties);for(let a of Object.keys(this._values))o._values[a]=this._values[a].possiblyEvaluate(r,n,i);return o}hasTransition(){for(let r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class nQ{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return W(this._values[r].value)}setValue(r,n){this._values[r]=new nW(this._values[r].property,null===n?void 0:W(n))}serialize(){let r={};for(let n of Object.keys(this._values)){let i=this.getValue(n);void 0!==i&&(r[n]=i)}return r}possiblyEvaluate(r,n,i){let o=new n1(this._properties);for(let a of Object.keys(this._values))o._values[a]=this._values[a].possiblyEvaluate(r,n,i);return o}}class n0{constructor(r,n,i){this.property=r,this.value=n,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(r){return"constant"===this.value.kind?this.value.value:r}evaluate(r,n,i,o){return this.property.evaluate(this.value,this.parameters,r,n,i,o)}}class n1{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class n2{constructor(r){this.specification=r}possiblyEvaluate(r,n){return r.expression.evaluate(n)}interpolate(r,n,i){let o=t0[this.specification.type];return o?o(r,n,i):r}}class n4{constructor(r,n){this.specification=r,this.overrides=n}possiblyEvaluate(r,n,i,o){return new n0(this,"constant"===r.expression.kind||"camera"===r.expression.kind?{kind:"constant",value:r.expression.evaluate(n,null,{},i,o)}:r.expression,n)}interpolate(r,n,i){if("constant"!==r.value.kind||"constant"!==n.value.kind)return r;if(void 0===r.value.value||void 0===n.value.value)return new n0(this,{kind:"constant",value:void 0},r.parameters);let o=t0[this.specification.type];return o?new n0(this,{kind:"constant",value:o(r.value.value,n.value.value,i)},r.parameters):r}evaluate(r,n,i,o,a,s){return"constant"===r.kind?r.value:r.evaluate(n,i,o,a,s)}}class n3{constructor(r){this.specification=r}possiblyEvaluate(r,n,i,o){return!!r.expression.evaluate(n,null,{},i,o)}interpolate(){return!1}}class n5{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];let n=new nG(0,{});for(let i in r){let o=r[i];o.specification.overridable&&this.overridableProperties.push(i);let a=this.defaultPropertyValues[i]=new nW(o,void 0),s=this.defaultTransitionablePropertyValues[i]=new nX(o);this.defaultTransitioningPropertyValues[i]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=a.possiblyEvaluate(n)}}}function n6(r,n){return 256*(r=P(Math.floor(r),0,255))+P(Math.floor(n),0,255)}nS(n4,"DataDrivenProperty"),nS(n2,"DataConstantProperty"),nS(n3,"ColorRampProperty");let n8={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class n9{constructor(r,n){this._structArray=r,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class n7{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,n){return r._trim(),n&&(r.isTransferred=!0,n.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){let n=Object.create(this.prototype);return n.arrayBuffer=r.arrayBuffer,n.length=r.length,n.capacity=r.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ie(r,n=1){let i=0,o=0;return{members:r.map(r=>{let a=n8[r.type].BYTES_PER_ELEMENT,s=i=it(i,Math.max(n,a)),l=r.components||1;return o=Math.max(o,a),i+=a*l,{name:r.name,type:r.type,components:l,offset:s}}),size:it(i,Math.max(o,n)),alignment:n}}function it(r,n){return Math.ceil(r/n)*n}class ir extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,n){let i=this.length;return this.resize(i+1),this.emplace(i,r,n)}emplace(r,n,i){let o=2*r;return this.int16[o+0]=n,this.int16[o+1]=i,r}}ir.prototype.bytesPerElement=4,nS(ir,"StructArrayLayout2i4");class ii extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,n,i){let o=this.length;return this.resize(o+1),this.emplace(o,r,n,i)}emplace(r,n,i,o){let a=3*r;return this.int16[a+0]=n,this.int16[a+1]=i,this.int16[a+2]=o,r}}ii.prototype.bytesPerElement=6,nS(ii,"StructArrayLayout3i6");class io extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,n,i,o){let a=this.length;return this.resize(a+1),this.emplace(a,r,n,i,o)}emplace(r,n,i,o,a){let s=4*r;return this.int16[s+0]=n,this.int16[s+1]=i,this.int16[s+2]=o,this.int16[s+3]=a,r}}io.prototype.bytesPerElement=8,nS(io,"StructArrayLayout4i8");class ia extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s,l){let u=this.length;return this.resize(u+1),this.emplace(u,r,n,i,o,a,s,l)}emplace(r,n,i,o,a,s,l,u){let c=6*r,h=12*r;return this.int16[c+0]=n,this.int16[c+1]=i,this.uint8[h+4]=o,this.uint8[h+5]=a,this.uint8[h+6]=s,this.uint8[h+7]=l,this.float32[3*r+2]=u,r}}ia.prototype.bytesPerElement=12,nS(ia,"StructArrayLayout2i4ub1f12");class is extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n,i,o){let a=this.length;return this.resize(a+1),this.emplace(a,r,n,i,o)}emplace(r,n,i,o,a){let s=4*r;return this.float32[s+0]=n,this.float32[s+1]=i,this.float32[s+2]=o,this.float32[s+3]=a,r}}is.prototype.bytesPerElement=16,nS(is,"StructArrayLayout4f16");class il extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,r,n,i,o,a)}emplace(r,n,i,o,a,s){let l=6*r;return this.uint16[l+0]=n,this.uint16[l+1]=i,this.uint16[l+2]=o,this.uint16[l+3]=a,this.float32[3*r+2]=s,r}}il.prototype.bytesPerElement=12,nS(il,"StructArrayLayout4ui1f12");class iu extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,n,i,o){let a=this.length;return this.resize(a+1),this.emplace(a,r,n,i,o)}emplace(r,n,i,o,a){let s=4*r;return this.uint16[s+0]=n,this.uint16[s+1]=i,this.uint16[s+2]=o,this.uint16[s+3]=a,r}}iu.prototype.bytesPerElement=8,nS(iu,"StructArrayLayout4ui8");class ic extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s){let l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,o,a,s)}emplace(r,n,i,o,a,s,l){let u=6*r;return this.int16[u+0]=n,this.int16[u+1]=i,this.int16[u+2]=o,this.int16[u+3]=a,this.int16[u+4]=s,this.int16[u+5]=l,r}}ic.prototype.bytesPerElement=12,nS(ic,"StructArrayLayout6i12");class ih extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s,l,u,c,h,d,f){let p=this.length;return this.resize(p+1),this.emplace(p,r,n,i,o,a,s,l,u,c,h,d,f)}emplace(r,n,i,o,a,s,l,u,c,h,d,f,p){let m=12*r;return this.int16[m+0]=n,this.int16[m+1]=i,this.int16[m+2]=o,this.int16[m+3]=a,this.uint16[m+4]=s,this.uint16[m+5]=l,this.uint16[m+6]=u,this.uint16[m+7]=c,this.int16[m+8]=h,this.int16[m+9]=d,this.int16[m+10]=f,this.int16[m+11]=p,r}}ih.prototype.bytesPerElement=24,nS(ih,"StructArrayLayout4i4ui4i24");class id extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s){let l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,o,a,s)}emplace(r,n,i,o,a,s,l){let u=10*r,c=5*r;return this.int16[u+0]=n,this.int16[u+1]=i,this.int16[u+2]=o,this.float32[c+2]=a,this.float32[c+3]=s,this.float32[c+4]=l,r}}id.prototype.bytesPerElement=20,nS(id,"StructArrayLayout3i3f20");class ip extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){let n=this.length;return this.resize(n+1),this.emplace(n,r)}emplace(r,n){return this.uint32[1*r+0]=n,r}}ip.prototype.bytesPerElement=4,nS(ip,"StructArrayLayout1ul4");class im extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s,l,u,c,h,d,f,p){let m=this.length;return this.resize(m+1),this.emplace(m,r,n,i,o,a,s,l,u,c,h,d,f,p)}emplace(r,n,i,o,a,s,l,u,c,h,d,f,p,m){let g=20*r,y=10*r;return this.int16[g+0]=n,this.int16[g+1]=i,this.int16[g+2]=o,this.int16[g+3]=a,this.int16[g+4]=s,this.float32[y+3]=l,this.float32[y+4]=u,this.float32[y+5]=c,this.float32[y+6]=h,this.int16[g+14]=d,this.uint32[y+8]=f,this.uint16[g+18]=p,this.uint16[g+19]=m,r}}im.prototype.bytesPerElement=40,nS(im,"StructArrayLayout5i4f1i1ul2ui40");class ig extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s,l){let u=this.length;return this.resize(u+1),this.emplace(u,r,n,i,o,a,s,l)}emplace(r,n,i,o,a,s,l,u){let c=8*r;return this.int16[c+0]=n,this.int16[c+1]=i,this.int16[c+2]=o,this.int16[c+4]=a,this.int16[c+5]=s,this.int16[c+6]=l,this.int16[c+7]=u,r}}ig.prototype.bytesPerElement=16,nS(ig,"StructArrayLayout3i2i2i16");class iy extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,r,n,i,o,a)}emplace(r,n,i,o,a,s){let l=4*r,u=8*r;return this.float32[l+0]=n,this.float32[l+1]=i,this.float32[l+2]=o,this.int16[u+6]=a,this.int16[u+7]=s,r}}iy.prototype.bytesPerElement=16,nS(iy,"StructArrayLayout2f1f2i16");class i_ extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n,i,o){let a=this.length;return this.resize(a+1),this.emplace(a,r,n,i,o)}emplace(r,n,i,o,a){let s=12*r,l=3*r;return this.uint8[s+0]=n,this.uint8[s+1]=i,this.float32[l+1]=o,this.float32[l+2]=a,r}}i_.prototype.bytesPerElement=12,nS(i_,"StructArrayLayout2ub2f12");class iv extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n,i){let o=this.length;return this.resize(o+1),this.emplace(o,r,n,i)}emplace(r,n,i,o){let a=3*r;return this.float32[a+0]=n,this.float32[a+1]=i,this.float32[a+2]=o,r}}iv.prototype.bytesPerElement=12,nS(iv,"StructArrayLayout3f12");class ib extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,n,i){let o=this.length;return this.resize(o+1),this.emplace(o,r,n,i)}emplace(r,n,i,o){let a=3*r;return this.uint16[a+0]=n,this.uint16[a+1]=i,this.uint16[a+2]=o,r}}ib.prototype.bytesPerElement=6,nS(ib,"StructArrayLayout3ui6");class ix extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w){let E=this.length;return this.resize(E+1),this.emplace(E,r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w)}emplace(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E){let C=30*r,S=15*r,T=60*r;return this.int16[C+0]=n,this.int16[C+1]=i,this.int16[C+2]=o,this.float32[S+2]=a,this.float32[S+3]=s,this.uint16[C+8]=l,this.uint16[C+9]=u,this.uint32[S+5]=c,this.uint32[S+6]=h,this.uint32[S+7]=d,this.uint16[C+16]=f,this.uint16[C+17]=p,this.uint16[C+18]=m,this.float32[S+10]=g,this.float32[S+11]=y,this.uint8[T+48]=_,this.uint8[T+49]=v,this.uint8[T+50]=b,this.uint32[S+13]=x,this.int16[C+28]=w,this.uint8[T+58]=E,r}}ix.prototype.bytesPerElement=60,nS(ix,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class iw extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I,L,A){let z=this.length;return this.resize(z+1),this.emplace(z,r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I,L,A)}emplace(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I,L,A,z){let P=38*r,O=19*r;return this.int16[P+0]=n,this.int16[P+1]=i,this.int16[P+2]=o,this.float32[O+2]=a,this.float32[O+3]=s,this.int16[P+8]=l,this.int16[P+9]=u,this.int16[P+10]=c,this.int16[P+11]=h,this.int16[P+12]=d,this.int16[P+13]=f,this.uint16[P+14]=p,this.uint16[P+15]=m,this.uint16[P+16]=g,this.uint16[P+17]=y,this.uint16[P+18]=_,this.uint16[P+19]=v,this.uint16[P+20]=b,this.uint16[P+21]=x,this.uint16[P+22]=w,this.uint16[P+23]=E,this.uint16[P+24]=C,this.uint16[P+25]=S,this.uint16[P+26]=T,this.uint16[P+27]=M,this.uint16[P+28]=k,this.uint32[O+15]=I,this.float32[O+16]=L,this.float32[O+17]=A,this.float32[O+18]=z,r}}iw.prototype.bytesPerElement=76,nS(iw,"StructArrayLayout3i2f6i15ui1ul3f76");class iE extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){let n=this.length;return this.resize(n+1),this.emplace(n,r)}emplace(r,n){return this.float32[1*r+0]=n,r}}iE.prototype.bytesPerElement=4,nS(iE,"StructArrayLayout1f4");class iC extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,r,n,i,o,a)}emplace(r,n,i,o,a,s){let l=5*r;return this.float32[l+0]=n,this.float32[l+1]=i,this.float32[l+2]=o,this.float32[l+3]=a,this.float32[l+4]=s,r}}iC.prototype.bytesPerElement=20,nS(iC,"StructArrayLayout5f20");class iS extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,n,i,o){let a=this.length;return this.resize(a+1),this.emplace(a,r,n,i,o)}emplace(r,n,i,o,a){let s=6*r;return this.uint32[3*r+0]=n,this.uint16[s+2]=i,this.uint16[s+3]=o,this.uint16[s+4]=a,r}}iS.prototype.bytesPerElement=12,nS(iS,"StructArrayLayout1ul3ui12");class iT extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,n){let i=this.length;return this.resize(i+1),this.emplace(i,r,n)}emplace(r,n,i){let o=2*r;return this.uint16[o+0]=n,this.uint16[o+1]=i,r}}iT.prototype.bytesPerElement=4,nS(iT,"StructArrayLayout2ui4");class iM extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){let n=this.length;return this.resize(n+1),this.emplace(n,r)}emplace(r,n){return this.uint16[1*r+0]=n,r}}iM.prototype.bytesPerElement=2,nS(iM,"StructArrayLayout1ui2");class ik extends n7{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,n){let i=this.length;return this.resize(i+1),this.emplace(i,r,n)}emplace(r,n,i){let o=2*r;return this.float32[o+0]=n,this.float32[o+1]=i,r}}ik.prototype.bytesPerElement=8,nS(ik,"StructArrayLayout2f8");class iI extends n9{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}iI.prototype.size=40;class iL extends im{get(r){return new iI(this,r)}}nS(iL,"CollisionBoxArray");class iA extends n9{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}iA.prototype.size=60;class iz extends ix{get(r){return new iA(this,r)}}nS(iz,"PlacedSymbolArray");class iP extends n9{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(r){this._structArray.uint32[this._pos4+15]=r}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}iP.prototype.size=76;class iO extends iw{get(r){return new iP(this,r)}}nS(iO,"SymbolInstanceArray");class iD extends iE{getoffsetX(r){return this.float32[1*r+0]}}nS(iD,"GlyphOffsetArray");class iR extends ir{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}nS(iR,"SymbolLineVertexArray");class iF extends n9{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}iF.prototype.size=12;class iB extends iS{get(r){return new iF(this,r)}}nS(iB,"FeatureIndexArray");class iN extends iT{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}nS(iN,"FillExtrusionCentroidArray");let ij=ie([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),iV=ie([{name:"a_dash",components:4,type:"Uint16"}]);var iU={exports:{}},iq={exports:{}};iq.exports=function(r,n){var i,o,a,s,l,u;for(o=r.length-(i=3&r.length),a=n,u=0;u<o;)l=255&r.charCodeAt(u)|(255&r.charCodeAt(++u))<<8|(255&r.charCodeAt(++u))<<16|(255&r.charCodeAt(++u))<<24,++u,a=27492+(65535&(s=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&r.charCodeAt(u+2))<<16;case 2:l^=(255&r.charCodeAt(u+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&r.charCodeAt(u)))*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295}return a^=r.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0};var i$=iq.exports,iH={exports:{}};iH.exports=function(r,n){for(var i,o=r.length,a=n^o,s=0;o>=4;)i=1540483477*(65535&(i=255&r.charCodeAt(s)|(255&r.charCodeAt(++s))<<8|(255&r.charCodeAt(++s))<<16|(255&r.charCodeAt(++s))<<24))+((1540483477*(i>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),o-=4,++s;switch(o){case 3:a^=(255&r.charCodeAt(s+2))<<16;case 2:a^=(255&r.charCodeAt(s+1))<<8;case 1:a=1540483477*(65535&(a^=255&r.charCodeAt(s)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0};var iZ=iH.exports;iU.exports=i$,iU.exports.murmur3=i$,iU.exports.murmur2=iZ;var iG=w(iU.exports);class iW{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,n,i,o){this.ids.push(iX(r)),this.positions.push(n,i,o)}getPositions(r){let n=iX(r),i=0,o=this.ids.length-1;for(;i<o;){let r=i+o>>1;this.ids[r]>=n?o=r:i=r+1}let a=[];for(;this.ids[i]===n;)a.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return a}static serialize(r,n){let i=new Float64Array(r.ids),o=new Uint32Array(r.positions);return function r(n,i,o,a){for(;o<a;){let s=n[o+a>>1],l=o-1,u=a+1;for(;;){do l++;while(n[l]<s)do u--;while(n[u]>s)if(l>=u)break;iY(n,l,u),iY(i,3*l,3*u),iY(i,3*l+1,3*u+1),iY(i,3*l+2,3*u+2)}u-o<a-u?(r(n,i,o,u),o=u+1):(r(n,i,u+1,a),a=u)}}(i,o,0,i.length-1),n&&n.push(i.buffer,o.buffer),{ids:i,positions:o}}static deserialize(r){let n=new iW;return n.ids=r.ids,n.positions=r.positions,n.indexed=!0,n}}function iX(r){let n=+r;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:iG(String(r))}function iY(r,n,i){let o=r[n];r[n]=r[i],r[i]=o}nS(iW,"FeaturePositionMap");class iK{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,n){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,n),this.initialized=!0),!!this.location}}class iJ extends iK{constructor(r){super(r),this.current=0}set(r,n,i){this.fetchUniformLocation(r,n)&&this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class iQ extends iK{constructor(r){super(r),this.current=[0,0,0,0]}set(r,n,i){this.fetchUniformLocation(r,n)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3])))}}class i0 extends iK{constructor(r){super(r),this.current=tf.transparent}set(r,n,i){this.fetchUniformLocation(r,n)&&(i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a)))}}let i1=new Float32Array(16),i2=new Float32Array(9),i4=new Float32Array(4);function i3(r){return[n6(255*r.r,255*r.g),n6(255*r.b,255*r.a)]}class i5{constructor(r,n,i){this.value=r,this.uniformNames=n.map(r=>`u_${r}`),this.type=i}setUniform(r,n,i,o,a){n.set(r,a,o.constantOr(this.value))}getBinding(r,n){return"color"===this.type?new i0(r):new iJ(r)}}class i6{constructor(r,n){this.uniformNames=n.map(r=>`u_${r}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,n,i,o,a){let s="u_pattern"===a||"u_dash"===a?this.pattern:"u_pixel_ratio"===a?this.pixelRatio:null;s&&n.set(r,a,s)}getBinding(r,n){return"u_pattern"===n||"u_dash"===n?new iQ(r):new iJ(r)}}class i8{constructor(r,n,i,o){this.expression=r,this.type=i,this.maxValue=0,this.paintVertexAttributes=n.map(r=>({name:`a_${r}`,type:"Float32",components:"color"===i?2:1,offset:0})),this.paintVertexArray=new o}populatePaintArray(r,n,i,o,a,s){let l=this.paintVertexArray.length,u=this.expression.evaluate(new nG(0),n,{},a,o,s);this.paintVertexArray.resize(r),this._setPaintValue(l,r,u)}updatePaintArray(r,n,i,o,a){let s=this.expression.evaluate({zoom:0},i,o,void 0,a);this._setPaintValue(r,n,s)}_setPaintValue(r,n,i){if("color"===this.type){let o=i3(i);for(let i=r;i<n;i++)this.paintVertexArray.emplace(i,o[0],o[1])}else{for(let o=r;o<n;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class i9{constructor(r,n,i,o,a,s){this.expression=r,this.uniformNames=n.map(r=>`u_${r}_t`),this.type=i,this.useIntegerZoom=o,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map(r=>({name:`a_${r}`,type:"Float32",components:"color"===i?4:2,offset:0})),this.paintVertexArray=new s}populatePaintArray(r,n,i,o,a,s){let l=this.expression.evaluate(new nG(this.zoom),n,{},a,o,s),u=this.expression.evaluate(new nG(this.zoom+1),n,{},a,o,s),c=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(c,r,l,u)}updatePaintArray(r,n,i,o,a){let s=this.expression.evaluate({zoom:this.zoom},i,o,void 0,a),l=this.expression.evaluate({zoom:this.zoom+1},i,o,void 0,a);this._setPaintValue(r,n,s,l)}_setPaintValue(r,n,i,o){if("color"===this.type){let a=i3(i),s=i3(o);for(let i=r;i<n;i++)this.paintVertexArray.emplace(i,a[0],a[1],s[0],s[1])}else{for(let a=r;a<n;a++)this.paintVertexArray.emplace(a,i,o);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(o))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,n,i,o,a){let s=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,l=P(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);n.set(r,a,l)}getBinding(r,n){return new iJ(r)}}class i7{constructor(r,n,i,o,a){this.expression=r,this.layerId=a,this.paintVertexAttributes=("array"===i?iV:ij).members;for(let r=0;r<n.length;++r);this.paintVertexArray=new o}populatePaintArray(r,n,i){let o=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(o,r,n.patterns&&n.patterns[this.layerId],i)}updatePaintArray(r,n,i,o,a,s){this._setPaintValues(r,n,i.patterns&&i.patterns[this.layerId],s)}_setPaintValues(r,n,i,o){if(!o||!i)return;let a=o[i];if(!a)return;let{tl:s,br:l,pixelRatio:u}=a;for(let i=r;i<n;i++)this.paintVertexArray.emplace(i,s[0],s[1],l[0],l[1],u)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oe{constructor(r,n,i=()=>!0){this.binders={},this._buffers=[];let o=[];for(let s in r.paint._values){var a;if(!i(s))continue;let l=r.paint.get(s);if(!(l instanceof n0&&rP(l.property.specification)))continue;let u=(a=r.type,or[s]||[s.replace(`${a}-`,"").replace(/-/g,"_")]),c=l.value,h=l.property.specification.type,d=!!l.property.useIntegerZoom,f="line-dasharray"===s||s.endsWith("pattern"),p="line-dasharray"===s&&"constant"!==r.layout.get("line-cap").value.kind;if("constant"!==c.kind||p){if("source"===c.kind||p||f){let n=oo(s,h,"source");this.binders[s]=f?new i7(c,u,h,n,r.id):new i8(c,u,h,n),o.push(`/a_${s}`)}else{let r=oo(s,h,"composite");this.binders[s]=new i9(c,u,h,d,n,r),o.push(`/z_${s}`)}}else this.binders[s]=f?new i6(c.value,u):new i5(c.value,u,h),o.push(`/u_${s}`)}this.cacheKey=o.sort().join("")}getMaxValue(r){let n=this.binders[r];return n instanceof i8||n instanceof i9?n.maxValue:0}populatePaintArrays(r,n,i,o,a,s){for(let l in this.binders){let u=this.binders[l];(u instanceof i8||u instanceof i9||u instanceof i7)&&u.populatePaintArray(r,n,i,o,a,s)}}setConstantPatternPositions(r){for(let n in this.binders){let i=this.binders[n];i instanceof i6&&i.setConstantPatternPositions(r)}}updatePaintArrays(r,n,i,o,a,s){let l=!1;for(let u in r){let c=n.getPositions(u);for(let n of c){let c=i.feature(n.index);for(let i in this.binders){let h=this.binders[i];if((h instanceof i8||h instanceof i9||h instanceof i7)&&!0===h.expression.isStateDependent){let d=o.paint.get(i);h.expression=d.value,h.updatePaintArray(n.start,n.end,c,r[u],a,s),l=!0}}}}return l}defines(){let r=[];for(let n in this.binders){let i=this.binders[n];(i instanceof i5||i instanceof i6)&&r.push(...i.uniformNames.map(r=>`#define HAS_UNIFORM_${r}`))}return r}getBinderAttributes(){let r=[];for(let n in this.binders){let i=this.binders[n];if(i instanceof i8||i instanceof i9||i instanceof i7)for(let n=0;n<i.paintVertexAttributes.length;n++)r.push(i.paintVertexAttributes[n].name)}return r}getBinderUniforms(){let r=[];for(let n in this.binders){let i=this.binders[n];if(i instanceof i5||i instanceof i6||i instanceof i9)for(let n of i.uniformNames)r.push(n)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){let n=[];for(let i in this.binders){let o=this.binders[i];if(o instanceof i5||o instanceof i6||o instanceof i9)for(let a of o.uniformNames)n.push({name:a,property:i,binding:o.getBinding(r,a)})}return n}setUniforms(r,n,i,o,a){for(let{name:n,property:s,binding:l}of i)this.binders[s].setUniform(r,l,a,o.get(s),n)}updatePaintBuffers(){for(let r in this._buffers=[],this.binders){let n=this.binders[r];(n instanceof i8||n instanceof i9||n instanceof i7)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(r){for(let n in this.binders){let i=this.binders[n];(i instanceof i8||i instanceof i9||i instanceof i7)&&i.upload(r)}this.updatePaintBuffers()}destroy(){for(let r in this.binders){let n=this.binders[r];(n instanceof i8||n instanceof i9||n instanceof i7)&&n.destroy()}}}class ot{constructor(r,n,i=()=>!0){for(let o of(this.programConfigurations={},r))this.programConfigurations[o.id]=new oe(o,n,i);this.needsUpload=!1,this._featureMap=new iW,this._bufferOffset=0}populatePaintArrays(r,n,i,o,a,s,l){for(let i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(r,n,o,a,s,l);void 0!==n.id&&this._featureMap.add(n.id,i,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,n,i,o,a){for(let s of i)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(r,this._featureMap,n,s,o,a)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(let n in this.programConfigurations)this.programConfigurations[n].upload(r);this.needsUpload=!1}}destroy(){for(let r in this.programConfigurations)this.programConfigurations[r].destroy()}}let or={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]},on={"line-pattern":{source:il,composite:il},"fill-pattern":{source:il,composite:il},"fill-extrusion-pattern":{source:il,composite:il},"line-dasharray":{source:iu,composite:iu}},oi={color:{source:ik,composite:is},number:{source:iE,composite:ik}};function oo(r,n,i){let o=on[r];return o&&o[i]||oi[n][i]}nS(i5,"ConstantBinder"),nS(i6,"PatternConstantBinder"),nS(i8,"SourceExpressionBinder"),nS(i7,"PatternCompositeBinder"),nS(i9,"CompositeExpressionBinder"),nS(oe,"ProgramConfiguration",{omit:["_buffers"]}),nS(ot,"ProgramConfigurationSet");let oa="-transition";class os extends eW{constructor(r,n){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==r.type&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,"background"!==r.type&&"sky"!==r.type&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),n.layout&&(this._unevaluatedLayout=new nQ(n.layout)),n.paint)){for(let i in this._transitionablePaint=new nY(n.paint),r.paint)this.setPaintProperty(i,r.paint[i],{validate:!1});for(let n in r.layout)this.setLayoutProperty(n,r.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new n1(n.paint)}}getLayoutProperty(r){return"visibility"===r?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,n,i={}){null!=n&&this._validate(nv,`layers.${this.id}.layout.${r}`,r,n,i)||("visibility"!==r?this._unevaluatedLayout.setValue(r,n):this.visibility=n)}getPaintProperty(r){return H(r,oa)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,n,i={}){if(null!=n&&this._validate(n_,`layers.${this.id}.paint.${r}`,r,n,i))return!1;if(H(r,oa))return this._transitionablePaint.setTransition(r.slice(0,-11),n||void 0),!1;{let i=this._transitionablePaint._values[r],o=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(r,n),this._handleSpecialPaintPropertyUpdate(r);let s=this._transitionablePaint._values[r].value,l=s.isDataDriven(),u=H(r,"pattern")||"line-dasharray"===r;return l||o||u||this._handleOverridablePaintPropertyUpdate(r,a,s)}}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getProgramConfiguration(r){return null}_handleOverridablePaintPropertyUpdate(r,n,i){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||"none"===this.visibility}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,n){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,n)}serialize(){let r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),G(r,(r,n)=>!(void 0===r||"layout"===n&&!Object.keys(r).length||"paint"===n&&!Object.keys(r).length))}_validate(r,n,i,o,a={}){return(!a||!1!==a.validate)&&nx(this,r.call(ny,{key:n,layerType:this.type,objectKey:i,value:o,styleSpec:eX,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let r in this.paint._values){let n=this.paint.get(r);if(n instanceof n0&&rP(n.property.specification)&&("source"===n.value.kind||"composite"===n.value.kind)&&n.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=r5(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}let ol=ie([{name:"a_pos",components:2,type:"Int16"}],4),ou=ie([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class oc{constructor(r=[]){this.segments=r}prepareSegment(r,n,i,o){let a=this.segments[this.segments.length-1];return r>oc.MAX_VERTEX_ARRAY_LENGTH&&Y(`Max vertices per segment is ${oc.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!a||a.vertexLength+r>oc.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==o)&&(a={vertexOffset:n.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==o&&(a.sortKey=o),this.segments.push(a)),a}get(){return this.segments}destroy(){for(let r of this.segments)for(let n in r.vaos)r.vaos[n].destroy()}static simpleSegment(r,n,i,o){return new oc([{vertexOffset:r,primitiveOffset:n,vertexLength:i,primitiveLength:o,vaos:{},sortKey:0}])}}oc.MAX_VERTEX_ARRAY_LENGTH=65535,nS(oc,"SegmentVector");class oh{constructor(r,n){r&&(n?this.setSouthWest(r).setNorthEast(n):4===r.length?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof aw?new aw(r.lng,r.lat):aw.convert(r),this}setSouthWest(r){return this._sw=r instanceof aw?new aw(r.lng,r.lat):aw.convert(r),this}extend(r){let n,i;let o=this._sw,a=this._ne;if(r instanceof aw)n=r,i=r;else{if(!(r instanceof oh))return Array.isArray(r)?4===r.length||r.every(Array.isArray)?this.extend(oh.convert(r)):this.extend(aw.convert(r)):"object"==typeof r&&null!==r&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(aw.convert(r)):this;if(n=r._sw,i=r._ne,!n||!i)return this}return o||a?(o.lng=Math.min(n.lng,o.lng),o.lat=Math.min(n.lat,o.lat),a.lng=Math.max(i.lng,a.lng),a.lat=Math.max(i.lat,a.lat)):(this._sw=new aw(n.lng,n.lat),this._ne=new aw(i.lng,i.lat)),this}getCenter(){return new aw((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new aw(this.getWest(),this.getNorth())}getSouthEast(){return new aw(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:n,lat:i}=aw.convert(r),o=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&o}static convert(r){return!r||r instanceof oh?r:new oh(r)}}var od="undefined"!=typeof Float32Array?Float32Array:Array;function of(){var r=new od(9);return od!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function op(r,n,i){var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5],h=n[6],d=n[7],f=n[8],p=i[0],m=i[1],g=i[2],y=i[3],_=i[4],v=i[5],b=i[6],x=i[7],w=i[8];return r[0]=p*o+m*l+g*h,r[1]=p*a+m*u+g*d,r[2]=p*s+m*c+g*f,r[3]=y*o+_*l+v*h,r[4]=y*a+_*u+v*d,r[5]=y*s+_*c+v*f,r[6]=b*o+x*l+w*h,r[7]=b*a+x*u+w*d,r[8]=b*s+x*c+w*f,r}function om(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function og(r,n){var i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],f=n[9],p=n[10],m=n[11],g=n[12],y=n[13],_=n[14],v=n[15],b=i*u-o*l,x=i*c-a*l,w=i*h-s*l,E=o*c-a*u,C=o*h-s*u,S=a*h-s*c,T=d*y-f*g,M=d*_-p*g,k=d*v-m*g,I=f*_-p*y,L=f*v-m*y,A=p*v-m*_,z=b*A-x*L+w*I+E*k-C*M+S*T;return z?(r[0]=(u*A-c*L+h*I)*(z=1/z),r[1]=(a*L-o*A-s*I)*z,r[2]=(y*S-_*C+v*E)*z,r[3]=(p*C-f*S-m*E)*z,r[4]=(c*k-l*A-h*M)*z,r[5]=(i*A-a*k+s*M)*z,r[6]=(_*w-g*S-v*x)*z,r[7]=(d*S-p*w+m*x)*z,r[8]=(l*L-u*k+h*T)*z,r[9]=(o*k-i*L-s*T)*z,r[10]=(g*C-y*w+v*b)*z,r[11]=(f*w-d*C-m*b)*z,r[12]=(u*M-l*I-c*T)*z,r[13]=(i*I-o*M+a*T)*z,r[14]=(y*x-g*E-_*b)*z,r[15]=(d*E-f*x+p*b)*z,r):null}function oy(r,n,i){var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5],h=n[6],d=n[7],f=n[8],p=n[9],m=n[10],g=n[11],y=n[12],_=n[13],v=n[14],b=n[15],x=i[0],w=i[1],E=i[2],C=i[3];return r[0]=x*o+w*u+E*f+C*y,r[1]=x*a+w*c+E*p+C*_,r[2]=x*s+w*h+E*m+C*v,r[3]=x*l+w*d+E*g+C*b,r[4]=(x=i[4])*o+(w=i[5])*u+(E=i[6])*f+(C=i[7])*y,r[5]=x*a+w*c+E*p+C*_,r[6]=x*s+w*h+E*m+C*v,r[7]=x*l+w*d+E*g+C*b,r[8]=(x=i[8])*o+(w=i[9])*u+(E=i[10])*f+(C=i[11])*y,r[9]=x*a+w*c+E*p+C*_,r[10]=x*s+w*h+E*m+C*v,r[11]=x*l+w*d+E*g+C*b,r[12]=(x=i[12])*o+(w=i[13])*u+(E=i[14])*f+(C=i[15])*y,r[13]=x*a+w*c+E*p+C*_,r[14]=x*s+w*h+E*m+C*v,r[15]=x*l+w*d+E*g+C*b,r}function o_(r,n,i){var o,a,s,l,u,c,h,d,f,p,m,g,y=i[0],_=i[1],v=i[2];return n===r?(r[12]=n[0]*y+n[4]*_+n[8]*v+n[12],r[13]=n[1]*y+n[5]*_+n[9]*v+n[13],r[14]=n[2]*y+n[6]*_+n[10]*v+n[14],r[15]=n[3]*y+n[7]*_+n[11]*v+n[15]):(a=n[1],s=n[2],l=n[3],u=n[4],c=n[5],h=n[6],d=n[7],f=n[8],p=n[9],m=n[10],g=n[11],r[0]=o=n[0],r[1]=a,r[2]=s,r[3]=l,r[4]=u,r[5]=c,r[6]=h,r[7]=d,r[8]=f,r[9]=p,r[10]=m,r[11]=g,r[12]=o*y+u*_+f*v+n[12],r[13]=a*y+c*_+p*v+n[13],r[14]=s*y+h*_+m*v+n[14],r[15]=l*y+d*_+g*v+n[15]),r}function ov(r,n,i){var o=i[0],a=i[1],s=i[2];return r[0]=n[0]*o,r[1]=n[1]*o,r[2]=n[2]*o,r[3]=n[3]*o,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[7]=n[7]*a,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function ob(r,n,i){var o=Math.sin(i),a=Math.cos(i),s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*a+h*o,r[5]=l*a+d*o,r[6]=u*a+f*o,r[7]=c*a+p*o,r[8]=h*a-s*o,r[9]=d*a-l*o,r[10]=f*a-u*o,r[11]=p*a-c*o,r}function ox(r,n,i){var o=Math.sin(i),a=Math.cos(i),s=n[0],l=n[1],u=n[2],c=n[3],h=n[8],d=n[9],f=n[10],p=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*a-h*o,r[1]=l*a-d*o,r[2]=u*a-f*o,r[3]=c*a-p*o,r[8]=s*o+h*a,r[9]=l*o+d*a,r[10]=u*o+f*a,r[11]=c*o+p*a,r}function ow(r,n){return r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function oE(r,n,i){var o,a,s,l=i[0],u=i[1],c=i[2],h=Math.hypot(l,u,c);return h<1e-6?null:(l*=h=1/h,u*=h,c*=h,o=Math.sin(n),a=Math.cos(n),r[0]=l*l*(s=1-a)+a,r[1]=u*l*s+c*o,r[2]=c*l*s-u*o,r[3]=0,r[4]=l*u*s-c*o,r[5]=u*u*s+a,r[6]=c*u*s+l*o,r[7]=0,r[8]=l*c*s+u*o,r[9]=u*c*s-l*o,r[10]=c*c*s+a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function oC(){var r=new od(3);return od!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function oS(r){var n=new od(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n}function oT(r){return Math.hypot(r[0],r[1],r[2])}function oM(r,n,i){var o=new od(3);return o[0]=r,o[1]=n,o[2]=i,o}function ok(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r}function oI(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r}function oL(r,n,i){return r[0]=n[0]*i[0],r[1]=n[1]*i[1],r[2]=n[2]*i[2],r}function oA(r,n,i){return r[0]=Math.min(n[0],i[0]),r[1]=Math.min(n[1],i[1]),r[2]=Math.min(n[2],i[2]),r}function oz(r,n,i){return r[0]=Math.max(n[0],i[0]),r[1]=Math.max(n[1],i[1]),r[2]=Math.max(n[2],i[2]),r}function oP(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r}function oO(r,n,i,o){return r[0]=n[0]+i[0]*o,r[1]=n[1]+i[1]*o,r[2]=n[2]+i[2]*o,r}function oD(r,n){var i=n[0],o=n[1],a=n[2],s=i*i+o*o+a*a;return s>0&&(s=1/Math.sqrt(s)),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s,r}function oR(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function oF(r,n,i){var o=n[0],a=n[1],s=n[2],l=i[0],u=i[1],c=i[2];return r[0]=a*c-s*u,r[1]=s*l-o*c,r[2]=o*u-a*l,r}function oB(r,n,i){var o=n[0],a=n[1],s=n[2],l=i[3]*o+i[7]*a+i[11]*s+i[15];return r[0]=(i[0]*o+i[4]*a+i[8]*s+i[12])/(l=l||1),r[1]=(i[1]*o+i[5]*a+i[9]*s+i[13])/l,r[2]=(i[2]*o+i[6]*a+i[10]*s+i[14])/l,r}function oN(r,n,i){var o=i[0],a=i[1],s=i[2],l=n[0],u=n[1],c=n[2],h=a*c-s*u,d=s*l-o*c,f=o*u-a*l,p=a*f-s*d,m=s*h-o*f,g=o*d-a*h,y=2*i[3];return d*=y,f*=y,m*=2,g*=2,r[0]=l+(h*=y)+(p*=2),r[1]=u+d+m,r[2]=c+f+g,r}function oj(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=n[3]*i,r}function oV(r,n){var i=n[0],o=n[1],a=n[2],s=n[3],l=i*i+o*o+a*a+s*s;return l>0&&(l=1/Math.sqrt(l)),r[0]=i*l,r[1]=o*l,r[2]=a*l,r[3]=s*l,r}function oU(r,n,i){var o=n[0],a=n[1],s=n[2],l=n[3];return r[0]=i[0]*o+i[4]*a+i[8]*s+i[12]*l,r[1]=i[1]*o+i[5]*a+i[9]*s+i[13]*l,r[2]=i[2]*o+i[6]*a+i[10]*s+i[14]*l,r[3]=i[3]*o+i[7]*a+i[11]*s+i[15]*l,r}function oq(){var r=new od(4);return od!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function o$(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function oH(r,n,i){i*=.5;var o=n[0],a=n[1],s=n[2],l=n[3],u=Math.sin(i),c=Math.cos(i);return r[0]=o*c+l*u,r[1]=a*c+s*u,r[2]=s*c-a*u,r[3]=l*c-o*u,r}function oZ(r,n,i){i*=.5;var o=n[0],a=n[1],s=n[2],l=n[3],u=Math.sin(i),c=Math.cos(i);return r[0]=o*c-s*u,r[1]=a*c+l*u,r[2]=s*c+o*u,r[3]=l*c-a*u,r}Math.hypot||(Math.hypot=function(){for(var r=0,n=arguments.length;n--;)r+=arguments[n]*arguments[n];return Math.sqrt(r)}),oC(),d=new od(4),od!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),oC(),oM(1,0,0),oM(0,1,0),oq(),oq(),of();let oG=ie([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:oW}=oG,oX=ie([{name:"a_pos_3",components:3,type:"Int16"}]);var oY=ie([{name:"a_pos",type:"Int16",components:2}]);class oK{constructor(r,n){this.pos=r,this.dir=n}intersectsPlane(r,n,i){let o=oR(n,this.dir);if(1e-6>Math.abs(o))return!1;let a=((r[0]-this.pos[0])*n[0]+(r[1]-this.pos[1])*n[1]+(r[2]-this.pos[2])*n[2])/o;return i[0]=this.pos[0]+this.dir[0]*a,i[1]=this.pos[1]+this.dir[1]*a,i[2]=this.pos[2]+this.dir[2]*a,!0}closestPointOnSphere(r,n,i){var o,a,s,l,u,c,h;if(a=(o=this.pos)[0],s=o[1],l=o[2],u=r[0],c=r[1],h=r[2],Math.abs(a-u)<=1e-6*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-c)<=1e-6*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(l-h)<=1e-6*Math.max(1,Math.abs(l),Math.abs(h))||0===n)return i[0]=i[1]=i[2]=0,!1;let[d,f,p]=this.dir,m=this.pos[0]-r[0],g=this.pos[1]-r[1],y=this.pos[2]-r[2],_=d*d+f*f+p*p,v=2*(m*d+g*f+y*p),b=v*v-4*_*(m*m+g*g+y*y-n*n);if(b<0){let r=Math.max(-v/2,0),o=m+d*r,a=g+f*r,s=y+p*r,l=Math.hypot(o,a,s);return i[0]=o*n/l,i[1]=a*n/l,i[2]=s*n/l,!1}{let r=(-v-Math.sqrt(b))/(2*_);if(r<0){let r=Math.hypot(m,g,y);return i[0]=m*n/r,i[1]=g*n/r,i[2]=y*n/r,!1}return i[0]=m+d*r,i[1]=g+f*r,i[2]=y+p*r,!0}}}class oJ{constructor(r,n,i,o,a){this.TL=r,this.TR=n,this.BR=i,this.BL=o,this.horizon=a}static fromInvProjectionMatrix(r,n,i){let o=[-1,1,1],a=[1,1,1],s=[1,-1,1],l=[-1,-1,1],u=oB(o,o,r),c=oB(a,a,r),h=oB(s,s,r),d=oB(l,l,r);return new oJ(u,c,h,d,n/i)}}class oQ{constructor(r,n){this.points=r,this.planes=n}static fromInvProjectionMatrix(r,n,i,o){let a=Math.pow(2,i),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(i=>{var s;let l=oU([],i,r),u=1/l[3]/n*a;return s=[u,u,o?1/l[3]:u,u],l[0]=l[0]*s[0],l[1]=l[1]*s[1],l[2]=l[2]*s[2],l[3]=l[3]*s[3],l}),l=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(r=>{let n=oD([],oF([],oI([],s[r[0]],s[r[1]]),oI([],s[r[2]],s[r[1]]))),i=-oR(n,s[r[1]]);return n.concat(i)});return new oQ(s,l)}}class o0{static fromPoints(r){let n=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0];for(let o of r)oA(n,n,o),oz(i,i,o);return new o0(n,i)}static applyTransform(r,n){let i=r.getCorners();for(let r=0;r<i.length;++r)oB(i[r],i[r],n);return o0.fromPoints(i)}constructor(r,n){this.min=r,this.max=n,this.center=oP([],ok([],this.min,this.max),.5)}quadrant(r){let n=[r%2==0,r<2],i=oS(this.min),o=oS(this.max);for(let r=0;r<n.length;r++)i[r]=n[r]?this.min[r]:this.center[r],o[r]=n[r]?this.center[r]:this.max[r];return o[2]=this.max[2],new o0(i,o)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){let r=this.min,n=this.max;return[[r[0],r[1],r[2]],[n[0],r[1],r[2]],[n[0],n[1],r[2]],[r[0],n[1],r[2]],[r[0],r[1],n[2]],[n[0],r[1],n[2]],[n[0],n[1],n[2]],[r[0],n[1],n[2]]]}intersects(r){let n=this.getCorners(),i=!0;for(let o=0;o<r.planes.length;o++){let a=r.planes[o],s=0;for(let r=0;r<n.length;r++)s+=oR(a,n[r])+a[3]>=0;if(0===s)return 0;s!==n.length&&(i=!1)}if(i)return 2;for(let n=0;n<3;n++){let i=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let a=0;a<r.points.length;a++){let s=r.points[a][n]-this.min[n];i=Math.min(i,s),o=Math.max(o,s)}if(o<0||i>this.max[n]-this.min[n])return 0}return 1}}let o1=8192/Math.PI/2,o2=[64,32,16],o4=-o1,o3=[new o0([o4,o4,o4],[o1,o1,o1]),new o0([o4,o4,o4],[0,0,o1]),new o0([0,o4,o4],[o1,0,o1]),new o0([o4,0,o4],[0,o1,o1]),new o0([0,0,o4],[o1,o1,o1])];function o5(r){return r*o1/av}function o6(r,n,i,o=!0){let a=oP([],r._camera.position,r.worldSize),s=[n,i,1,1];oU(s,s,r.pixelMatrixInverse),oj(s,s,1/s[3]);let l=oD([],oI([],s,a)),u=r.globeMatrix,c=[u[12],u[13],u[14]],h=oI([],c,a),d=oT(h),f=oD([],h),p=r.worldSize/(2*Math.PI),m=oR(f,l),g=Math.asin(p/d);if(g<Math.acos(m)){if(!o)return null;let r=[],n=[];oP(r,l,d/m),oD(n,oI(n,r,h)),oD(l,ok(l,h,oP(l,n,Math.tan(g)*d)))}let y=[];new oK(a,l).closestPointOnSphere(c,p,y);let _=oD([],en(u,0)),v=oD([],en(u,1)),b=oD([],en(u,2)),x=oR(_,y),w=oR(v,y),E=oR(b,y),C=Math.asin(-w/p)*k,S=Math.atan2(x,E)*k;S=r.center.lng+function(r,n){let i=(n-r+180)%360-180;return i<-180?i+360:i}(r.center.lng,S);let T=aC(S),M=P(aS(C),0,1);return new aI(T,M)}class o8{constructor(r,n,i){this.a=oI([],r,i),this.b=oI([],n,i),this.center=i;let o=oD([],this.a),a=oD([],this.b);this.angle=Math.acos(oR(o,a))}}function o9(r,n){let i;return 0===r.angle?null:(i=0===r.a[n]?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[n]/r.a[n]/Math.sin(r.angle)-1/Math.tan(r.angle)))<0||i>1?null:function(r,n,i,o){let a=Math.sin(i);return r*(Math.sin((1-o)*i)/a)+n*(Math.sin(o*i)/a)}(r.a[n],r.b[n],r.angle,P(i,0,1))+r.center[n]}function o7(r){if(r.z<=1)return o3[r.z+2*r.y+r.x];let n=ai(an(r));return o0.fromPoints(n)}function ae(r,n,i){return oP(r,r,1-i),oO(r,r,n,i)}function at(r,n){let i=af(n.zoom);if(0===i)return o7(r);let o=an(r),a=ai(o),s=aC(o.getWest())*n.worldSize,l=aC(o.getEast())*n.worldSize,u=aS(o.getNorth())*n.worldSize,c=aS(o.getSouth())*n.worldSize,h=[s,u,0],d=[l,u,0],f=[s,c,0],p=[l,c,0],m=og([],n.globeMatrix);return oB(h,h,m),oB(d,d,m),oB(f,f,m),oB(p,p,m),a[0]=ae(a[0],f,i),a[1]=ae(a[1],p,i),a[2]=ae(a[2],d,i),a[3]=ae(a[3],h,i),o0.fromPoints(a)}function ar(r,n,i){for(let o of r)oB(o,o,n),oP(o,o,i)}function an({x:r,y:n,z:i}){let o=1/(1<<i),a=new aw(aT(r*o),aM((n+1)*o)),s=new aw(aT((r+1)*o),aM(n*o));return new oh(a,s)}function ai(r){let n=r.getNorth()*M,i=r.getSouth()*M,o=Math.cos(n),a=Math.cos(i),s=Math.sin(n),l=Math.sin(i),u=r.getWest(),c=r.getEast();return[ao(a,l,u),ao(a,l,c),ao(o,s,c),ao(o,s,u)]}function ao(r,n,i,o=o1){return[r*Math.sin(i*=M)*o,-n*o,r*Math.cos(i)*o]}function aa(r,n,i){return ao(Math.cos(r*M),Math.sin(r*M),n,i)}function as(r,n,i,o){let a=1<<i.z,s=(r/8192+i.x)/a;return aa(aM((n/8192+i.y)/a),aT(s),o)}function al({min:r,max:n}){return 16383/Math.max(n[0]-r[0],n[1]-r[1],n[2]-r[2])}let au=new Float64Array(16);function ac(r){var n,i;let o=al(r),a=ow(au,[o,o,o]);return o_(a,a,((n=[])[0]=-(i=r.min)[0],n[1]=-i[1],n[2]=-i[2],n))}function ah(r){var n;let i=(n=r.min,au[0]=1,au[1]=0,au[2]=0,au[3]=0,au[4]=0,au[5]=1,au[6]=0,au[7]=0,au[8]=0,au[9]=0,au[10]=1,au[11]=0,au[12]=n[0],au[13]=n[1],au[14]=n[2],au[15]=1,au),o=1/al(r);return ov(i,i,[o,o,o])}function ad(r,n,i,o,a){let s=function(r){let n=8192/(2*Math.PI);return r/(2*Math.PI)/n}(i),l=[r,n,-i/(2*Math.PI)],u=om(new Float64Array(16));return o_(u,u,l),ov(u,u,[s,s,s]),ob(u,u,-a*M),ox(u,u,-o*M),u}function af(r){return O(5,6,r)}function ap(r,n){var i,o,a,s,l,u,c,h;let d=aa(n.lat,n.lng),f=function(r){let n=aa(r._center.lat,r._center.lng),i=oF([],oM(0,1,0),n),o=oE([],-r.angle,n);i=oB(i,i,o),oE(o,-r._pitch,i);let a=oD([],n);return oP(a,a,o5(r.cameraToCenterDistance/r.pixelsPerMeter)),oB(a,a,o),ok([],n,a)}(r);return o=(i=oI([],f,d))[0],a=i[1],s=i[2],Math.acos(Math.min(Math.max((h=Math.sqrt(o*o+a*a+s*s)*Math.sqrt((l=d[0])*l+(u=d[1])*u+(c=d[2])*c))&&oR(i,d)/h,-1),1))}function am(r,n){return ap(r,n)>Math.PI/2*1.01}let ag=85*M,ay=Math.cos(ag),a_=Math.sin(ag),av=6371008.8,ab=2*Math.PI*av;class ax{constructor(r,n){if(isNaN(r)||isNaN(n))throw Error(`Invalid LngLat object: (${r}, ${n})`);if(this.lng=+r,this.lat=+n,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ax(D(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){let n=Math.PI/180,i=this.lat*n,o=r.lat*n,a=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((r.lng-this.lng)*n);return av*Math.acos(Math.min(a,1))}toBounds(r=0){let n=360*r/40075017,i=n/Math.cos(Math.PI/180*this.lat);return new oh(new ax(this.lng-i,this.lat-n),new ax(this.lng+i,this.lat+n))}toEcef(r){let n=o5(r);return aa(this.lat,this.lng,o1+n)}static convert(r){if(r instanceof ax)return r;if(Array.isArray(r)&&(2===r.length||3===r.length))return new ax(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&"object"==typeof r&&null!==r)return new ax(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var aw=ax;function aE(r){return ab*Math.cos(r*Math.PI/180)}function aC(r){return(180+r)/360}function aS(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function aT(r){return 360*r-180}function aM(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function ak(r){return 1/Math.cos(r*Math.PI/180)}class aI{constructor(r,n,i=0){this.x=+r,this.y=+n,this.z=+i}static fromLngLat(r,n=0){let i=aw.convert(r);return new aI(aC(i.lng),aS(i.lat),n/aE(i.lat))}toLngLat(){return new aw(aT(this.x),aM(this.y))}toAltitude(){return this.z*aE(aM(this.y))}meterInMercatorCoordinateUnits(){return 1/ab*ak(aM(this.y))}}function aL(r,n,i){let o=r[0],a=o.x,s=o.y;n(o);let l=[o];for(let u=1;u<r.length;u++){let c=r[u],{x:h,y:d}=c;n(c),function r(n,i,o,a,s,l,u,c,h){let d=(i+a)/2,f=(o+s)/2,p=new T(d,f);c(p),function(r,n,i,o,a,s){let l=i-a,u=o-s;return Math.abs((o-n)*l-(i-r)*u)/Math.hypot(l,u)}(p.x,p.y,l.x,l.y,u.x,u.y)>=h?(r(n,i,o,d,f,l,p,c,h),r(n,d,f,a,s,p,u,c,h)):n.push(u)}(l,a,s,h,d,o,c,n,i),a=h,s=d,o=c}return l}let aA=-16383-1;function az(r,n,i){let o=r.loadGeometry(),a=r.extent,s=8192/a;if(n&&i&&i.projection.isReprojectedInTileSpace){let s=1<<n.z,{scale:l,x:u,y:c,projection:h}=i,d=r=>{let i=aT((n.x+r.x/a)/s),o=aM((n.y+r.y/a)/s),d=h.project(i,o);r.x=(d.x*l-u)*a,r.y=(d.y*l-c)*a};for(let n=0;n<o.length;n++)if(1!==r.type)o[n]=aL(o[n],d,1);else{let r=[];for(let i of o[n])i.x<0||i.x>=a||i.y<0||i.y>=a||(d(i),r.push(i));o[n]=r}}for(let r of o)for(let n of r)!function(r,n){let i=Math.round(r.x*n),o=Math.round(r.y*n);r.x=P(i,aA,16383),r.y=P(o,aA,16383),(i<r.x||i>r.x+1||o<r.y||o>r.y+1)&&Y("Geometry exceeds allowed extent, reduce your vector tile buffer size")}(n,s);return o}function aP(r,n){return{type:r.type,id:r.id,properties:r.properties,geometry:n?az(r):[]}}function aO(r,n,i,o,a){r.emplaceBack(2*n+(o+1)/2,2*i+(a+1)/2)}function aD(r,n,i){r.emplaceBack(n.x,n.y,n.z,16384*i[0],16384*i[1],16384*i[2])}class aR{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(r=>r.id),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new ir,this.indexArray=new ib,this.segments=new oc,this.programConfigurations=new ot(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(r,n,i,o){let a=this.layers[0],s=[],l=null;for(let{feature:n,id:u,index:c,sourceLayerIndex:h}of("circle"===a.type&&(l=a.layout.get("circle-sort-key")),r)){let r=this.layers[0]._featureFilter.needGeometry,a=aP(n,r);if(!this.layers[0]._featureFilter.filter(new nG(this.zoom),a,i))continue;let d=l?l.evaluate(a,{},i):void 0,f={id:u,properties:n.properties,type:n.type,sourceLayerIndex:h,index:c,geometry:r?a.geometry:az(n,i,o),patterns:{},sortKey:d};s.push(f)}l&&s.sort((r,n)=>r.sortKey-n.sortKey);let u=null;for(let a of("globe"===o.projection.name&&(this.globeExtVertexArray=new ic,u=o.projection),s)){let{geometry:o,index:s,sourceLayerIndex:l}=a,c=r[s].feature;this.addFeature(a,o,s,n.availableImages,i,u),n.featureIndex.insert(c,o,s,l,this.index)}}update(r,n,i,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ol.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,ou.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,n,i,o,a,s){for(let i of n)for(let n of i){let i=n.x,o=n.y;if(i<0||i>=8192||o<0||o>=8192)continue;if(s){let r=s.projectTilePoint(i,o,a),n=s.upVector(a,i,o),l=this.globeExtVertexArray;aD(l,r,n),aD(l,r,n),aD(l,r,n),aD(l,r,n)}let l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),u=l.vertexLength;aO(this.layoutVertexArray,i,o,-1,-1),aO(this.layoutVertexArray,i,o,1,-1),aO(this.layoutVertexArray,i,o,1,1),aO(this.layoutVertexArray,i,o,-1,1),this.indexArray.emplaceBack(u,u+1,u+2),this.indexArray.emplaceBack(u,u+2,u+3),l.vertexLength+=4,l.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,{},o,a)}}function aF(r,n){for(let i=0;i<r.length;i++)if(aq(n,r[i]))return!0;for(let i=0;i<n.length;i++)if(aq(r,n[i]))return!0;return!!aN(r,n)}function aB(r,n){if(1===r.length)return aU(n,r[0]);for(let i=0;i<n.length;i++){let o=n[i];for(let n=0;n<o.length;n++)if(aq(r,o[n]))return!0}for(let i=0;i<r.length;i++)if(aU(n,r[i]))return!0;for(let i=0;i<n.length;i++)if(aN(r,n[i]))return!0;return!1}function aN(r,n){if(0===r.length||0===n.length)return!1;for(let a=0;a<r.length-1;a++){let s=r[a],l=r[a+1];for(let r=0;r<n.length-1;r++){var i,o;if(K(s,i=n[r],o=n[r+1])!==K(l,i,o)&&K(s,l,i)!==K(s,l,o))return!0}}return!1}function aj(r,n,i){let o=i*i;if(1===n.length)return r.distSqr(n[0])<o;for(let i=1;i<n.length;i++)if(aV(r,n[i-1],n[i])<o)return!0;return!1}function aV(r,n,i){let o=n.distSqr(i);if(0===o)return r.distSqr(n);let a=((r.x-n.x)*(i.x-n.x)+(r.y-n.y)*(i.y-n.y))/o;return r.distSqr(a<0?n:a>1?i:i.sub(n)._mult(a)._add(n))}function aU(r,n){let i,o,a,s=!1;for(let l=0;l<r.length;l++){i=r[l];for(let r=0,l=i.length-1;r<i.length;l=r++)o=i[r],a=i[l],o.y>n.y!=a.y>n.y&&n.x<(a.x-o.x)*(n.y-o.y)/(a.y-o.y)+o.x&&(s=!s)}return s}function aq(r,n){let i=!1;for(let o=0,a=r.length-1;o<r.length;a=o++){let s=r[o],l=r[a];s.y>n.y!=l.y>n.y&&n.x<(l.x-s.x)*(n.y-s.y)/(l.y-s.y)+s.x&&(i=!i)}return i}function a$(r,n,i,o,a){for(let s of r)if(n<=s.x&&i<=s.y&&o>=s.x&&a>=s.y)return!0;let s=[new T(n,i),new T(n,a),new T(o,a),new T(o,i)];if(r.length>2){for(let n of s)if(aq(r,n))return!0}for(let n=0;n<r.length-1;n++)if(function(r,n,i){let o=i[0],a=i[2];if(r.x<o.x&&n.x<o.x||r.x>a.x&&n.x>a.x||r.y<o.y&&n.y<o.y||r.y>a.y&&n.y>a.y)return!1;let s=K(r,n,i[0]);return s!==K(r,n,i[1])||s!==K(r,n,i[2])||s!==K(r,n,i[3])}(r[n],r[n+1],s))return!0;return!1}function aH(r,n,i){let o=n.paint.get(r).value;return"constant"===o.kind?o.value:i.programConfigurations.get(n.id).getMaxValue(r)}function aZ(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function aG(r,n,i,o,a){if(!n[0]&&!n[1])return r;let s=T.convert(n)._mult(a);"viewport"===i&&s._rotate(-o);let l=[];for(let n=0;n<r.length;n++)l.push(r[n].sub(s));return l}function aW(r,n,i,o){let a=T.convert(r)._mult(o);return"viewport"===n&&a._rotate(-i),a}nS(aR,"CircleBucket",{omit:["layers"]});let aX=new n5({"circle-sort-key":new n4(eX.layout_circle["circle-sort-key"])});var aY={paint:new n5({"circle-radius":new n4(eX.paint_circle["circle-radius"]),"circle-color":new n4(eX.paint_circle["circle-color"]),"circle-blur":new n4(eX.paint_circle["circle-blur"]),"circle-opacity":new n4(eX.paint_circle["circle-opacity"]),"circle-translate":new n2(eX.paint_circle["circle-translate"]),"circle-translate-anchor":new n2(eX.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new n2(eX.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new n2(eX.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new n4(eX.paint_circle["circle-stroke-width"]),"circle-stroke-color":new n4(eX.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new n4(eX.paint_circle["circle-stroke-opacity"])}),layout:aX};function aK(r,n,i,o,a,s,l,u,c){if(s&&r.queryGeometry.isAboveHorizon)return!1;s&&(c*=r.pixelToTileUnitsFactor);let h=r.tileID.canonical,d=i.projection.upVectorScale(h,i.center.lat,i.worldSize).metersToTile;for(let p of n)for(let n of p){var f;let p=n.add(u),m=a&&i.elevation?i.elevation.exaggeration()*a.getElevationAt(p.x,p.y,!0):0,g=i.projection.projectTilePoint(p.x,p.y,h);if(m>0){let r=i.projection.upVector(h,p.x,p.y);g.x+=r[0]*d*m,g.y+=r[1]*d*m,g.z+=r[2]*d*m}let y=s?p:function(r,n,i,o){let a=oU([],[r,n,i,1],o);return new T(a[0]/a[3],a[1]/a[3])}(g.x,g.y,g.z,o),_=s?r.tilespaceRays.map(r=>(function(r,n){let i=oC();return aJ[2]=n,r.intersectsPlane(aJ,aQ,i),new T(i[0],i[1])})(r,m)):r.queryGeometry.screenGeometry,v=oU([],[g.x,g.y,g.z,1],o);if(!l&&s?c*=v[3]/i.cameraToCenterDistance:l&&!s&&(c*=i.cameraToCenterDistance/v[3]),s){let r=aM((n.y/8192+h.y)/(1<<h.z));c/=i.projection.pixelsPerMeter(r,1)/(1/aE(r))}if(f=c,aq(_,y)||aj(y,_,f))return!0}return!1}let aJ=oM(0,0,0),aQ=oM(0,0,1);class a0 extends aR{}function a1(r,{width:n,height:i},o,a){if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==n*i*o)throw RangeError("mismatched image size")}else a=new Uint8Array(n*i*o);return r.width=n,r.height=i,r.data=a,r}function a2(r,n,i){let{width:o,height:a}=n;o===r.width&&a===r.height||(a4(r,n,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,o),height:Math.min(r.height,a)},i),r.width=o,r.height=a,r.data=n.data)}function a4(r,n,i,o,a,s){if(0===a.width||0===a.height)return n;if(a.width>r.width||a.height>r.height||i.x>r.width-a.width||i.y>r.height-a.height)throw RangeError("out of range source coordinates for image copy");if(a.width>n.width||a.height>n.height||o.x>n.width-a.width||o.y>n.height-a.height)throw RangeError("out of range destination coordinates for image copy");let l=r.data,u=n.data;for(let c=0;c<a.height;c++){let h=((i.y+c)*r.width+i.x)*s,d=((o.y+c)*n.width+o.x)*s;for(let r=0;r<a.width*s;r++)u[d+r]=l[h+r]}return n}nS(a0,"HeatmapBucket",{omit:["layers"]});class a3{constructor(r,n){a1(this,r,1,n)}resize(r){a2(this,new a3(r),1)}clone(){return new a3({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,n,i,o,a){a4(r,n,i,o,a,1)}}class a5{constructor(r,n){a1(this,r,4,n)}resize(r){a2(this,new a5(r),4)}replace(r,n){n?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new a5({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,n,i,o,a){a4(r,n,i,o,a,4)}}nS(a3,"AlphaImage"),nS(a5,"RGBAImage");var a6={paint:new n5({"heatmap-radius":new n4(eX.paint_heatmap["heatmap-radius"]),"heatmap-weight":new n4(eX.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new n2(eX.paint_heatmap["heatmap-intensity"]),"heatmap-color":new n3(eX.paint_heatmap["heatmap-color"]),"heatmap-opacity":new n2(eX.paint_heatmap["heatmap-opacity"])})};function a8(r){let n={},i=r.resolution||256,o=r.clips?r.clips.length:1,a=r.image||new a5({width:i,height:o}),s=(i,o,s)=>{n[r.evaluationKey]=s;let l=r.expression.evaluate(n);a.data[i+o+0]=Math.floor(255*l.r/l.a),a.data[i+o+1]=Math.floor(255*l.g/l.a),a.data[i+o+2]=Math.floor(255*l.b/l.a),a.data[i+o+3]=Math.floor(255*l.a)};if(r.clips)for(let n=0,a=0;n<o;++n,a+=4*i)for(let o=0,l=0;o<i;o++,l+=4){let u=o/(i-1),{start:c,end:h}=r.clips[n];s(a,l,c*(1-u)+h*u)}else for(let r=0,n=0;r<i;r++,n+=4)s(0,n,r/(i-1));return a}var a9={paint:new n5({"hillshade-illumination-direction":new n2(eX.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new n2(eX.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new n2(eX.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new n2(eX.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new n2(eX.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new n2(eX.paint_hillshade["hillshade-accent-color"])})};let a7=ie([{name:"a_pos",components:2,type:"Int16"}],4),{members:se}=a7;var st={exports:{}};function sr(r,n,i){i=i||2;var o,a,s,l,u,c,h,d=n&&n.length,f=d?n[0]*i:r.length,p=sn(r,0,f,i,!0),m=[];if(!p||p.next===p.prev)return m;if(d&&(p=function(r,n,i,o){var a,s,l,u=[];for(a=0,s=n.length;a<s;a++)(l=sn(r,n[a]*o,a<s-1?n[a+1]*o:r.length,o,!1))===l.next&&(l.steiner=!0),u.push(function(r){var n=r,i=r;do(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next;while(n!==r)return i}(l));for(u.sort(so),a=0;a<u.length;a++)i=function(r,n){var i=function(r,n){var i,o,a,s=n,l=r.x,u=r.y,c=-1/0;do{if(u<=s.y&&u>=s.next.y&&s.next.y!==s.y){var h=s.x+(u-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(h<=l&&h>c&&(c=h,a=s.x<s.next.x?s:s.next,h===l))return a}s=s.next}while(s!==n)if(!a)return null;var d,f=a,p=a.x,m=a.y,g=1/0;s=a;do l>=s.x&&s.x>=p&&l!==s.x&&ss(u<m?l:c,u,p,m,u<m?c:l,u,s.x,s.y)&&(d=Math.abs(u-s.y)/(l-s.x),sf(s,r)&&(d<g||d===g&&(s.x>a.x||s.x===a.x&&(i=a,o=s,0>sl(i.prev,i,o.prev)&&0>sl(o.next,i,i.next))))&&(a=s,g=d)),s=s.next;while(s!==f)return a}(r,n);if(!i)return n;var o=sp(i,r);return si(o,o.next),si(i,i.next)}(u[a],i);return i}(r,n,p,i)),r.length>80*i){o=s=r[0],a=l=r[1];for(var g=i;g<f;g+=i)(u=r[g])<o&&(o=u),(c=r[g+1])<a&&(a=c),u>s&&(s=u),c>l&&(l=c);h=0!==(h=Math.max(s-o,l-a))?32767/h:0}return function r(n,i,o,a,s,l,u){if(n){!u&&l&&function(r,n,i,o){var a=r;do 0===a.z&&(a.z=sa(a.x,a.y,n,i,o)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==r)a.prevZ.nextZ=null,a.prevZ=null,function(r){var n,i,o,a,s,l,u,c,h=1;do{for(i=r,r=null,s=null,l=0;i;){for(l++,o=i,u=0,n=0;n<h&&(u++,o=o.nextZ);n++);for(c=h;u>0||c>0&&o;)0!==u&&(0===c||!o||i.z<=o.z)?(a=i,i=i.nextZ,u--):(a=o,o=o.nextZ,c--),s?s.nextZ=a:r=a,a.prevZ=s,s=a;i=o}s.nextZ=null,h*=2}while(l>1)}(a)}(n,a,s,l);for(var c,h,d=n;n.prev!==n.next;)if(c=n.prev,h=n.next,l?function(r,n,i,o){var a=r.prev,s=r.next;if(sl(a,r,s)>=0)return!1;for(var l=a.x,u=r.x,c=s.x,h=a.y,d=r.y,f=s.y,p=l<u?l<c?l:c:u<c?u:c,m=h<d?h<f?h:f:d<f?d:f,g=l>u?l>c?l:c:u>c?u:c,y=h>d?h>f?h:f:d>f?d:f,_=sa(p,m,n,i,o),v=sa(g,y,n,i,o),b=r.prevZ,x=r.nextZ;b&&b.z>=_&&x&&x.z<=v;){if(b.x>=p&&b.x<=g&&b.y>=m&&b.y<=y&&b!==a&&b!==s&&ss(l,h,u,d,c,f,b.x,b.y)&&sl(b.prev,b,b.next)>=0||(b=b.prevZ,x.x>=p&&x.x<=g&&x.y>=m&&x.y<=y&&x!==a&&x!==s&&ss(l,h,u,d,c,f,x.x,x.y)&&sl(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;b&&b.z>=_;){if(b.x>=p&&b.x<=g&&b.y>=m&&b.y<=y&&b!==a&&b!==s&&ss(l,h,u,d,c,f,b.x,b.y)&&sl(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=v;){if(x.x>=p&&x.x<=g&&x.y>=m&&x.y<=y&&x!==a&&x!==s&&ss(l,h,u,d,c,f,x.x,x.y)&&sl(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}(n,a,s,l):function(r){var n=r.prev,i=r.next;if(sl(n,r,i)>=0)return!1;for(var o=n.x,a=r.x,s=i.x,l=n.y,u=r.y,c=i.y,h=o<a?o<s?o:s:a<s?a:s,d=l<u?l<c?l:c:u<c?u:c,f=o>a?o>s?o:s:a>s?a:s,p=l>u?l>c?l:c:u>c?u:c,m=i.next;m!==n;){if(m.x>=h&&m.x<=f&&m.y>=d&&m.y<=p&&ss(o,l,a,u,s,c,m.x,m.y)&&sl(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}(n))i.push(c.i/o|0),i.push(n.i/o|0),i.push(h.i/o|0),sg(n),n=h.next,d=h.next;else if((n=h)===d){u?1===u?r(n=function(r,n,i){var o=r;do{var a=o.prev,s=o.next.next;!su(a,s)&&sc(a,o,o.next,s)&&sf(a,s)&&sf(s,a)&&(n.push(a.i/i|0),n.push(o.i/i|0),n.push(s.i/i|0),sg(o),sg(o.next),o=r=s),o=o.next}while(o!==r)return si(o)}(si(n),i,o),i,o,a,s,l,2):2===u&&function(n,i,o,a,s,l){var u=n;do{for(var c,h,d=u.next.next;d!==u.prev;){if(u.i!==d.i&&(c=u,h=d,c.next.i!==h.i&&c.prev.i!==h.i&&!function(r,n){var i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==n.i&&i.next.i!==n.i&&sc(i,i.next,r,n))return!0;i=i.next}while(i!==r)return!1}(c,h)&&(sf(c,h)&&sf(h,c)&&function(r,n){var i=r,o=!1,a=(r.x+n.x)/2,s=(r.y+n.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&a<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(o=!o),i=i.next;while(i!==r)return o}(c,h)&&(sl(c.prev,c,h.prev)||sl(c,h.prev,h))||su(c,h)&&sl(c.prev,c,c.next)>0&&sl(h.prev,h,h.next)>0))){var f=sp(u,d);return u=si(u,u.next),f=si(f,f.next),r(u,i,o,a,s,l,0),void r(f,i,o,a,s,l,0)}d=d.next}u=u.next}while(u!==n)}(n,i,o,a,s,l):r(si(n),i,o,a,s,l,1);break}}}(p,m,i,o,a,h,0),m}function sn(r,n,i,o,a){var s,l;if(a===s_(r,n,i,o)>0)for(s=n;s<i;s+=o)l=sm(s,r[s],r[s+1],l);else for(s=i-o;s>=n;s-=o)l=sm(s,r[s],r[s+1],l);return l&&su(l,l.next)&&(sg(l),l=l.next),l}function si(r,n){if(!r)return r;n||(n=r);var i,o=r;do if(i=!1,o.steiner||!su(o,o.next)&&0!==sl(o.prev,o,o.next))o=o.next;else{if(sg(o),(o=n=o.prev)===o.next)break;i=!0}while(i||o!==n)return n}function so(r,n){return r.x-n.x}function sa(r,n,i,o,a){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*a|0)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-o)*a|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function ss(r,n,i,o,a,s,l,u){return(a-l)*(n-u)>=(r-l)*(s-u)&&(r-l)*(o-u)>=(i-l)*(n-u)&&(i-l)*(s-u)>=(a-l)*(o-u)}function sl(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function su(r,n){return r.x===n.x&&r.y===n.y}function sc(r,n,i,o){var a=sd(sl(r,n,i)),s=sd(sl(r,n,o)),l=sd(sl(i,o,r)),u=sd(sl(i,o,n));return a!==s&&l!==u||!(0!==a||!sh(r,i,n))||!(0!==s||!sh(r,o,n))||!(0!==l||!sh(i,r,o))||!(0!==u||!sh(i,n,o))}function sh(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function sd(r){return r>0?1:r<0?-1:0}function sf(r,n){return 0>sl(r.prev,r,r.next)?sl(r,n,r.next)>=0&&sl(r,r.prev,n)>=0:0>sl(r,n,r.prev)||0>sl(r,r.next,n)}function sp(r,n){var i=new sy(r.i,r.x,r.y),o=new sy(n.i,n.x,n.y),a=r.next,s=n.prev;return r.next=n,n.prev=r,i.next=a,a.prev=i,o.next=i,i.prev=o,s.next=o,o.prev=s,o}function sm(r,n,i,o){var a=new sy(r,n,i);return o?(a.next=o.next,a.prev=o,o.next.prev=a,o.next=a):(a.prev=a,a.next=a),a}function sg(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function sy(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function s_(r,n,i,o){for(var a=0,s=n,l=i-o;s<i;s+=o)a+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return a}st.exports=sr,st.exports.default=sr,sr.deviation=function(r,n,i,o){var a=n&&n.length,s=Math.abs(s_(r,0,a?n[0]*i:r.length,i));if(a)for(var l=0,u=n.length;l<u;l++)s-=Math.abs(s_(r,n[l]*i,l<u-1?n[l+1]*i:r.length,i));var c=0;for(l=0;l<o.length;l+=3){var h=o[l]*i,d=o[l+1]*i,f=o[l+2]*i;c+=Math.abs((r[h]-r[f])*(r[d+1]-r[h+1])-(r[h]-r[d])*(r[f+1]-r[h+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},sr.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},o=0,a=0;a<r.length;a++){for(var s=0;s<r[a].length;s++)for(var l=0;l<n;l++)i.vertices.push(r[a][s][l]);a>0&&i.holes.push(o+=r[a-1].length)}return i};var sv=w(st.exports);function sb(r,n,i){var o=r[n];r[n]=r[i],r[i]=o}function sx(r,n){return r<n?-1:r>n?1:0}function sw(r,n){let i,o;let a=r.length;if(a<=1)return[r];let s=[];for(let n=0;n<a;n++){let a=function(r){let n=0;for(let i,o,a=0,s=r.length,l=s-1;a<s;l=a++)i=r[a],n+=((o=r[l]).x-i.x)*(i.y+o.y);return n}(r[n]);0!==a&&(r[n].area=Math.abs(a),void 0===o&&(o=a<0),o===a<0?(i&&s.push(i),i=[r[n]]):i.push(r[n]))}if(i&&s.push(i),n>1)for(let r=0;r<s.length;r++){var l;s[r].length<=n||(function r(n,i,o,a,s){for(;a>o;){if(a-o>600){var l=a-o+1,u=i-o+1,c=Math.log(l),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1);r(n,i,Math.max(o,Math.floor(i-u*h/l+d)),Math.min(a,Math.floor(i+(l-u)*h/l+d)),s)}var f=n[i],p=o,m=a;for(sb(n,o,i),s(n[a],f)>0&&sb(n,o,a);p<m;){for(sb(n,p,m),p++,m--;0>s(n[p],f);)p++;for(;s(n[m],f)>0;)m--}0===s(n[o],f)?sb(n,o,m):sb(n,++m,a),m<=i&&(o=m+1),i<=m&&(a=m-1)}}(l=s[r],n,1,s[r].length-1||l.length-1,sE||sx),s[r]=s[r].slice(0,n))}return s}function sE(r,n){return n.area-r.area}function sC(r,n,i){let o=i.patternDependencies,a=!1;for(let i of n){let n=i.paint.get(`${r}-pattern`);n.isConstant()||(a=!0);let s=n.constantOr(null);s&&(a=!0,o[s]=!0)}return a}function sS(r,n,i,o,a){let s=a.patternDependencies;for(let l of n){let n=l.paint.get(`${r}-pattern`).value;if("constant"!==n.kind){let r=n.evaluate({zoom:o},i,{},a.availableImages);s[r=r&&r.name?r.name:r]=!0,i.patterns[l.id]=r}}return i}class sT{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(r=>r.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ir,this.indexArray=new ib,this.indexArray2=new iT,this.programConfigurations=new ot(r.layers,r.zoom),this.segments=new oc,this.segments2=new oc,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=r.projection}populate(r,n,i,o){this.hasPattern=sC("fill",this.layers,n);let a=this.layers[0].layout.get("fill-sort-key"),s=[];for(let{feature:l,id:u,index:c,sourceLayerIndex:h}of r){let r=this.layers[0]._featureFilter.needGeometry,d=aP(l,r);if(!this.layers[0]._featureFilter.filter(new nG(this.zoom),d,i))continue;let f=a?a.evaluate(d,{},i,n.availableImages):void 0,p={id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:r?d.geometry:az(l,i,o),patterns:{},sortKey:f};s.push(p)}for(let o of(a&&s.sort((r,n)=>r.sortKey-n.sortKey),s)){let{geometry:a,index:s,sourceLayerIndex:l}=o;if(this.hasPattern){let r=sS("fill",this.layers,o,this.zoom,n);this.patternFeatures.push(r)}else this.addFeature(o,a,s,i,{},n.availableImages);n.featureIndex.insert(r[s].feature,a,s,l,this.index)}}update(r,n,i,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i,o)}addFeatures(r,n,i,o,a){for(let r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,n,i,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,se),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,n,i,o,a,s=[]){for(let r of sw(n,500)){let n=0;for(let i of r)n+=i.length;let i=this.segments.prepareSegment(n,this.layoutVertexArray,this.indexArray),o=i.vertexLength,a=[],s=[];for(let n of r){if(0===n.length)continue;n!==r[0]&&s.push(a.length/2);let i=this.segments2.prepareSegment(n.length,this.layoutVertexArray,this.indexArray2),o=i.vertexLength;this.layoutVertexArray.emplaceBack(n[0].x,n[0].y),this.indexArray2.emplaceBack(o+n.length-1,o),a.push(n[0].x),a.push(n[0].y);for(let r=1;r<n.length;r++)this.layoutVertexArray.emplaceBack(n[r].x,n[r].y),this.indexArray2.emplaceBack(o+r-1,o+r),a.push(n[r].x),a.push(n[r].y);i.vertexLength+=n.length,i.primitiveLength+=n.length}let l=sv(a,s);for(let r=0;r<l.length;r+=3)this.indexArray.emplaceBack(o+l[r],o+l[r+1],o+l[r+2]);i.vertexLength+=n,i.primitiveLength+=l.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,a,s,o)}}nS(sT,"FillBucket",{omit:["layers","patternFeatures"]});let sM=new n5({"fill-sort-key":new n4(eX.layout_fill["fill-sort-key"])});var sk={paint:new n5({"fill-antialias":new n2(eX.paint_fill["fill-antialias"]),"fill-opacity":new n4(eX.paint_fill["fill-opacity"]),"fill-color":new n4(eX.paint_fill["fill-color"]),"fill-outline-color":new n4(eX.paint_fill["fill-outline-color"]),"fill-translate":new n2(eX.paint_fill["fill-translate"]),"fill-translate-anchor":new n2(eX.paint_fill["fill-translate-anchor"]),"fill-pattern":new n4(eX.paint_fill["fill-pattern"])}),layout:sM};let sI=ie([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),sL=ie([{name:"a_centroid_pos",components:2,type:"Uint16"}]),sA=ie([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:sz}=sI;var sP={};function sO(r,n,i,o,a){this.properties={},this.extent=i,this.type=0,this._pbf=r,this._geometry=-1,this._keys=o,this._values=a,r.readFields(sD,this,n)}function sD(r,n,i){1==r?n.id=i.readVarint():2==r?function(r,n){for(var i=r.readVarint()+r.pos;r.pos<i;){var o=n._keys[r.readVarint()],a=n._values[r.readVarint()];n.properties[o]=a}}(i,n):3==r?n.type=i.readVarint():4==r&&(n._geometry=i.pos)}function sR(r,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(sF,this,n),this.length=this._features.length}function sF(r,n,i){15===r?n.version=i.readVarint():1===r?n.name=i.readString():5===r?n.extent=i.readVarint():2===r?n._features.push(i.pos):3===r?n._keys.push(i.readString()):4===r&&n._values.push(function(r){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;){var o=r.readVarint()>>3;n=1===o?r.readString():2===o?r.readFloat():3===o?r.readDouble():4===o?r.readVarint64():5===o?r.readVarint():6===o?r.readSVarint():7===o?r.readBoolean():null}return n}(i))}function sB(r,n,i){if(3===r){var o=new sR(i,i.readVarint()+i.pos);o.length&&(n[o.name]=o)}}sO.types=["Unknown","Point","LineString","Polygon"],sO.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var n,i=r.readVarint()+r.pos,o=1,a=0,s=0,l=0,u=[];r.pos<i;){if(a<=0){var c=r.readVarint();o=7&c,a=c>>3}if(a--,1===o||2===o)s+=r.readSVarint(),l+=r.readSVarint(),1===o&&(n&&u.push(n),n=[]),n.push(new S(s,l));else{if(7!==o)throw Error("unknown command "+o);n&&n.push(n[0].clone())}}return n&&u.push(n),u},sO.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var n=r.readVarint()+r.pos,i=1,o=0,a=0,s=0,l=1/0,u=-1/0,c=1/0,h=-1/0;r.pos<n;){if(o<=0){var d=r.readVarint();i=7&d,o=d>>3}if(o--,1===i||2===i)(a+=r.readSVarint())<l&&(l=a),a>u&&(u=a),(s+=r.readSVarint())<c&&(c=s),s>h&&(h=s);else if(7!==i)throw Error("unknown command "+i)}return[l,c,u,h]},sO.prototype.toGeoJSON=function(r,n,i){var o,a,s=this.extent*Math.pow(2,i),l=this.extent*r,u=this.extent*n,c=this.loadGeometry(),h=sO.types[this.type];function d(r){for(var n=0;n<r.length;n++){var i=r[n];r[n]=[360*(i.x+l)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+u)/s)*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(o=0;o<c.length;o++)f[o]=c[o][0];d(c=f);break;case 2:for(o=0;o<c.length;o++)d(c[o]);break;case 3:for(c=function(r){var n=r.length;if(n<=1)return[r];for(var i,o,a=[],s=0;s<n;s++){var l=function(r){for(var n,i,o=0,a=0,s=r.length,l=s-1;a<s;l=a++)o+=((i=r[l]).x-(n=r[a]).x)*(n.y+i.y);return o}(r[s]);0!==l&&(void 0===o&&(o=l<0),o===l<0?(i&&a.push(i),i=[r[s]]):i.push(r[s]))}return i&&a.push(i),a}(c),o=0;o<c.length;o++)for(a=0;a<c[o].length;a++)d(c[o][a])}1===c.length?c=c[0]:h="Multi"+h;var p={type:"Feature",geometry:{type:h,coordinates:c},properties:this.properties};return"id"in this&&(p.id=this.id),p},sR.prototype.feature=function(r){if(r<0||r>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[r];var n=this._pbf.readVarint()+this._pbf.pos;return new sO(this._pbf,n,this.extent,this._keys,this._values)};var sN=sP.VectorTile=function(r,n){this.layers=r.readFields(sB,{},n)},sj=sP.VectorTileFeature=sO;function sV(r,n,i,o){let a=[],s=0===o?(r,n,i,o,a,s)=>{r.push(new T(s,i+(s-n)/(o-n)*(a-i)))}:(r,n,i,o,a,s)=>{r.push(new T(n+(s-i)/(a-i)*(o-n),s))};for(let l of r){let r=[];for(let a of l){if(a.length<=2)continue;let l=[];for(let r=0;r<a.length-1;r++){let u=a[r].x,c=a[r].y,h=a[r+1].x,d=a[r+1].y,f=0===o?u:c,p=0===o?h:d;f<n?p>n&&s(l,u,c,h,d,n):f>i?p<i&&s(l,u,c,h,d,i):l.push(a[r]),p<n&&f>=n&&s(l,u,c,h,d,n),p>i&&f<=i&&s(l,u,c,h,d,i)}let u=a[a.length-1],c=0===o?u.x:u.y;c>=n&&c<=i&&l.push(u),l.length&&(u=l[l.length-1],l[0].x===u.x&&l[0].y===u.y||l.push(l[0]),r.push(l))}r.length&&a.push(r)}return a}sP.VectorTileLayer=sR;let sU=sj.types;function sq(r,n,i,o,a,s,l,u){r.emplaceBack((n<<1)+l,(i<<1)+s,(Math.floor(8192*o)<<1)+a,Math.round(u))}function s$(r,n,i){r.emplaceBack(n.x,n.y,n.z,16384*i[0],16384*i[1],16384*i[2])}class sH{constructor(){this.acc=new T(0,0),this.polyCount=[]}startRing(r){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new T(r.x,r.y),this.max=new T(r.x,r.y))}append(r,n){this.currentPolyCount.edges++,this.acc._add(r);let i=this.min,o=this.max;r.x<i.x?i.x=r.x:r.x>o.x&&(o.x=r.x),r.y<i.y?i.y=r.y:r.y>o.y&&(o.y=r.y),((0===r.x||8192===r.x)&&r.x===n.x)!=((0===r.y||8192===r.y)&&r.y===n.y)&&this.processBorderOverlap(r,n),n.x<0!=r.x<0&&this.addBorderIntersection(0,tQ(n.y,r.y,(0-n.x)/(r.x-n.x))),n.x>8192!=r.x>8192&&this.addBorderIntersection(1,tQ(n.y,r.y,(8192-n.x)/(r.x-n.x))),n.y<0!=r.y<0&&this.addBorderIntersection(2,tQ(n.x,r.x,(0-n.y)/(r.y-n.y))),n.y>8192!=r.y>8192&&this.addBorderIntersection(3,tQ(n.x,r.x,(8192-n.y)/(r.y-n.y)))}addBorderIntersection(r,n){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);let i=this.borders[r];n<i[0]&&(i[0]=n),n>i[1]&&(i[1]=n)}processBorderOverlap(r,n){if(r.x===n.x){if(r.y===n.y)return;let i=0===r.x?0:1;this.addBorderIntersection(i,n.y),this.addBorderIntersection(i,r.y)}else{let i=0===r.y?2:3;this.addBorderIntersection(i,n.x),this.addBorderIntersection(i,r.x)}}centroid(){let r=this.polyCount.reduce((r,n)=>r+n.edges,0);return 0!==r?this.acc.div(r)._round():new T(0,0)}span(){return new T(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((r,n)=>r+ +(n[0]!==Number.MAX_VALUE),0)}}class sZ{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(r=>r.id),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.layoutVertexArray=new io,this.centroidVertexArray=new iN,this.indexArray=new ib,this.programConfigurations=new ot(r.layers,r.zoom),this.segments=new oc,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=r.enableTerrain}populate(r,n,i,o){for(let{feature:a,id:s,index:l,sourceLayerIndex:u}of(this.features=[],this.hasPattern=sC("fill-extrusion",this.layers,n),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(r){let n=Math.exp(Math.PI*(1-r.y/(1<<r.z)*2));return 80150034*n/(n*n+1)/8192/(1<<r.z)}(i),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,r)){let r=this.layers[0]._featureFilter.needGeometry,c=aP(a,r);if(!this.layers[0]._featureFilter.filter(new nG(this.zoom),c,i))continue;let h={id:s,sourceLayerIndex:u,index:l,geometry:r?c.geometry:az(a,i,o),properties:a.properties,type:a.type,patterns:{}},d=this.layoutVertexArray.length;this.hasPattern?this.features.push(sS("fill-extrusion",this.layers,h,this.zoom,n)):this.addFeature(h,h.geometry,l,i,{},n.availableImages,o),n.featureIndex.insert(a,h.geometry,l,u,this.index,d)}this.sortBorders()}addFeatures(r,n,i,o,a){for(let r of this.features){let{geometry:s}=r;this.addFeature(r,s,r.index,n,i,o,a)}this.sortBorders()}update(r,n,i,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,sz),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,sA.members,!0))),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,sL.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,n,i,o,a,s,l){var u;let c;let h=[new T(0,0),new T(8192,8192)],d=l.projection,f="globe"===d.name,p=this.enableTerrain&&!f?new sH:null,m="Polygon"===sU[r.type];f&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ic);let g=sw(n,500);for(let r=g.length-1;r>=0;r--){let n=g[r];(0===n.length||(u=n[0]).every(r=>r.x<=0)||u.every(r=>r.x>=8192)||u.every(r=>r.y<=0)||u.every(r=>r.y>=8192))&&g.splice(r,1)}if(f)c=sQ(g,h,o);else for(let r of(c=[],g))c.push({polygon:r,bounds:h});let y=m?this.edgeRadius:0;for(let{polygon:r,bounds:n}of c){let i=0,a=0;for(let n of r)m&&!n[0].equals(n[n.length-1])&&n.push(n[0]),a+=m?n.length-1:n.length;let s=this.segments.prepareSegment((m?5:4)*a,this.layoutVertexArray,this.indexArray);if(m){let n=[],a=[];for(let l of(i=s.vertexLength,r)){let i,u;l.length&&l!==r[0]&&a.push(n.length/2),i=l[1].sub(l[0])._perp()._unit();for(let r=1;r<l.length;r++){let a=l[r],c=l[r===l.length-1?1:r+1],{x:h,y:p}=a;if(y){u=c.sub(a)._perp()._unit();let r=i.add(u)._unit(),n=y*Math.min(4,1/(i.x*r.x+i.y*r.y));h+=n*r.x,p+=n*r.y,i=u}sq(this.layoutVertexArray,h,p,0,0,1,1,0),s.vertexLength++,n.push(a.x,a.y),f&&s$(this.layoutVertexExtArray,d.projectTilePoint(h,p,o),d.upVector(o,h,p))}}let l=sv(n,a);for(let r=0;r<l.length;r+=3)this.indexArray.emplaceBack(i+l[r],i+l[r+2],i+l[r+1]),s.primitiveLength++}for(let a of r){p&&a.length&&p.startRing(a[0]);let r,l,u,c=a.length>4&&sY(a[a.length-2],a[0],a[1]),h=y?function(r,n,i,o){let a=n.sub(r)._perp()._unit(),s=i.sub(n)._perp()._unit();return sW(r,n,i,sG(a,s),o)}(a[a.length-2],a[0],a[1],y):0;l=a[1].sub(a[0])._perp()._unit();let g=!0;for(let _=1,v=0;_<a.length;_++){let b=a[_-1],x=a[_],w=a[_===a.length-1?1:_+1];if(p&&m&&p.currentPolyCount.top++,sX(x,b,n)){y&&(l=w.sub(x)._perp()._unit(),g=!g);continue}p&&p.append(x,b);let E=x.sub(b)._perp(),C=E.x/(Math.abs(E.x)+Math.abs(E.y)),S=E.y>0?1:0,T=b.dist(x);if(v+T>32768&&(v=0),y){u=w.sub(x)._perp()._unit();let r=sW(b,x,w,sG(l,u),y);isNaN(r)&&(r=0);let n=x.sub(b)._unit();b=b.add(n.mult(h))._round(),x=x.add(n.mult(-r))._round(),h=r,l=u}let M=s.vertexLength,k=a.length>4&&sY(b,x,w),I=sK(v,c,g);if(sq(this.layoutVertexArray,b.x,b.y,C,S,0,0,I),sq(this.layoutVertexArray,b.x,b.y,C,S,0,1,I),v+=T,I=sK(v,k,!g),c=k,sq(this.layoutVertexArray,x.x,x.y,C,S,0,0,I),sq(this.layoutVertexArray,x.x,x.y,C,S,0,1,I),s.vertexLength+=4,this.indexArray.emplaceBack(M+0,M+1,M+2),this.indexArray.emplaceBack(M+1,M+3,M+2),s.primitiveLength+=2,y){let o=i+(1===_?a.length-2:_-2),l=1===_?i:o+1;if(this.indexArray.emplaceBack(M+1,o,M+3),this.indexArray.emplaceBack(o,l,M+3),s.primitiveLength+=2,void 0===r&&(r=M),!sX(w,a[_],n)){let n=_===a.length-1?r:s.vertexLength;this.indexArray.emplaceBack(M+2,M+3,n),this.indexArray.emplaceBack(M+3,n+1,n),this.indexArray.emplaceBack(M+3,l,n+1),s.primitiveLength+=3}g=!g}if(f){let r=this.layoutVertexExtArray,n=d.projectTilePoint(b.x,b.y,o),i=d.projectTilePoint(x.x,x.y,o),a=d.upVector(o,b.x,b.y),s=d.upVector(o,x.x,x.y);s$(r,n,a),s$(r,n,a),s$(r,i,s),s$(r,i,s)}}m&&(i+=a.length-1)}}if(p&&p.polyCount.length>0){if(p.borders){p.vertexArrayOffset=this.centroidVertexArray.length;let r=p.borders,n=this.featuresOnBorder.push(p)-1;for(let i=0;i<4;i++)r[i][0]!==Number.MAX_VALUE&&this.borders[i].push(n)}this.encodeCentroid(p.borders?void 0:p.centroid(),p)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,a,s,o)}sortBorders(){for(let r=0;r<4;r++)this.borders[r].sort((n,i)=>this.featuresOnBorder[n].borders[r][0]-this.featuresOnBorder[i].borders[r][0])}encodeCentroid(r,n,i=!0){let o,a;if(r){if(0!==r.y){let i=n.span()._mult(this.tileToMeter);o=(Math.max(r.x,1)<<3)+Math.min(7,Math.round(i.x/10)),a=(Math.max(r.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else o=Math.ceil(7*(r.x+450)),a=0}else o=0,a=+i;let s=i?this.centroidVertexArray.length:n.vertexArrayOffset;for(let r of n.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*r.edges+r.top);for(let n=0;n<r.top;n++)this.centroidVertexArray.emplace(s++,o,a);for(let n=0;n<2*r.edges;n++)this.centroidVertexArray.emplace(s++,0,a),this.centroidVertexArray.emplace(s++,o,a)}}}function sG(r,n){let i=r.add(n)._unit();return r.x*i.x+r.y*i.y}function sW(r,n,i,o,a){let s=Math.sqrt(1-o*o);return Math.min(r.dist(n)/3,n.dist(i)/3,a*s/o)}function sX(r,n,i){return r.x<i[0].x&&n.x<i[0].x||r.x>i[1].x&&n.x>i[1].x||r.y<i[0].y&&n.y<i[0].y||r.y>i[1].y&&n.y>i[1].y}function sY(r,n,i){if(r.x<0||r.x>=8192||n.x<0||n.x>=8192||i.x<0||i.x>=8192)return!1;let o=i.sub(n),a=o.perp(),s=r.sub(n);return(o.x*s.x+o.y*s.y)/Math.sqrt((o.x*o.x+o.y*o.y)*(s.x*s.x+s.y*s.y))>-.866&&a.x*s.x+a.y*s.y<0}function sK(r,n,i){let o=n?2|r:-3&r;return i?1|o:-2&o}function sJ(){let r=Math.PI/32,n=Math.tan(r);return av*Math.sqrt(1+2*n*n)-av}function sQ(r,n,i){let o=1<<i.z,a=aT(i.x/o),s=aT((i.x+1)/o),l=aM(i.y/o),u=aM((i.y+1)/o);return function(r,n,i,o,a=0,s){let l=[];if(!r.length||!i||!o)return l;let u=(r,n)=>{for(let i of r)l.push({polygon:i,bounds:n})},c=Math.ceil(Math.log2(i)),h=Math.ceil(Math.log2(o)),d=c-h,f=[];for(let r=0;r<Math.abs(d);r++)f.push(d>0?0:1);for(let r=0;r<Math.min(c,h);r++)f.push(0),f.push(1);let p=r;if(p=sV(p,n[0].y-a,n[1].y+a,1),!(p=sV(p,n[0].x-a,n[1].x+a,0)).length)return l;let m=[];for(f.length?m.push({polygons:p,bounds:n,depth:0}):u(p,n);m.length;){let r=m.pop(),n=r.depth,i=f[n],o=r.bounds[0],l=r.bounds[1],c=0===i?o.x:o.y,h=0===i?l.x:l.y,d=s?s(i,c,h):.5*(c+h),p=sV(r.polygons,c-a,d+a,i),g=sV(r.polygons,d-a,h+a,i);if(p.length){let r=[o,new T(0===i?d:l.x,1===i?d:l.y)];f.length>n+1?m.push({polygons:p,bounds:r,depth:n+1}):u(p,r)}if(g.length){let r=[new T(0===i?d:o.x,1===i?d:o.y),l];f.length>n+1?m.push({polygons:g,bounds:r,depth:n+1}):u(g,r)}}return l}(r,n,Math.ceil((s-a)/11.25),Math.ceil((l-u)/11.25),1,(r,n,a)=>{if(0===r)return .5*(n+a);{let r=aM((i.y+n/8192)/o);return(aS(.5*(aM((i.y+a/8192)/o)+r))*o-i.y)*8192}})}nS(sZ,"FillExtrusionBucket",{omit:["layers","features"]}),nS(sH,"PartMetadata");let s0=new n5({"fill-extrusion-edge-radius":new n2(eX["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var s1={paint:new n5({"fill-extrusion-opacity":new n2(eX["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new n4(eX["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new n2(eX["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new n2(eX["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new n4(eX["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new n4(eX["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new n4(eX["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new n2(eX["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new n2(eX["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new n2(eX["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new n2(eX["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:s0};function s2(r,n,i){var o=2*Math.PI*6378137/256/Math.pow(2,i);return[r*o-2*Math.PI*6378137/2,n*o-2*Math.PI*6378137/2]}class s4{constructor(r,n,i){this.z=r,this.x=n,this.y=i,this.key=s6(0,r,r,n,i)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,n){var i,o,a,s,l;let u=(i=this.x,o=this.y,s=s2(256*i,256*(o=Math.pow(2,a=this.z)-o-1),a),l=s2(256*(i+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]),c=function(r,n,i){let o,a="";for(let s=r;s>0;s--)a+=(n&(o=1<<s-1)?1:0)+(i&o?2:0);return a}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",c).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class s3{constructor(r,n){this.wrap=r,this.canonical=n,this.key=s6(r,n.z,n.z,n.x,n.y)}}class s5{constructor(r,n,i,o,a){this.overscaledZ=r,this.wrap=n,this.canonical=new s4(i,+o,+a),this.key=0===n&&r===i?this.canonical.key:s6(n,r,i,o,a)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){let n=this.canonical.z-r;return r>this.canonical.z?new s5(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new s5(r,this.wrap,r,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(r,n=!0){if(this.overscaledZ===r&&n)return this.key;if(r>this.canonical.z)return s6(this.wrap*+n,r,this.canonical.z,this.canonical.x,this.canonical.y);{let i=this.canonical.z-r;return s6(this.wrap*+n,r,r,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;let n=this.canonical.z-r.canonical.z;return 0===r.overscaledZ||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>n&&r.canonical.y===this.canonical.y>>n}children(r){if(this.overscaledZ>=r)return[new s5(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let n=this.canonical.z+1,i=2*this.canonical.x,o=2*this.canonical.y;return[new s5(n,this.wrap,n,i,o),new s5(n,this.wrap,n,i+1,o),new s5(n,this.wrap,n,i,o+1),new s5(n,this.wrap,n,i+1,o+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new s5(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new s5(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new s3(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function s6(r,n,i,o,a){let s=1<<Math.min(i,22),l=s*(a%s)+o%s;return r&&i<22&&(l+=s*s*((r<0?-2*r-1:2*r)%(1<<2*(22-i)))),16*(32*l+i)+(n-i)}nS(s4,"CanonicalTileID"),nS(s5,"OverscaledTileID",{omit:["projMatrix"]});class s8 extends T{constructor(r,n,i){super(r,n),this.z=i}}function s9(r,n){return r.x*n.x+r.y*n.y}function s7(r,n){if(1===r.length){let i,o=0,a=n[o++];for(;!i||a.equals(i);)if(!(i=n[o++]))return 1/0;for(;o<n.length;o++){let s=n[o],l=r[0],u=i.sub(a),c=s.sub(a),h=l.sub(a),d=s9(u,u),f=s9(u,c),p=s9(c,c),m=s9(h,u),g=s9(h,c),y=d*p-f*f,_=(p*m-f*g)/y,v=(d*g-f*m)/y,b=a.z*(1-_-v)+i.z*_+s.z*v;if(isFinite(b))return b}return 1/0}{let r=1/0;for(let i of n)r=Math.min(r,i.z);return r}}function le(r,n,i,o,a,s,l,u){let c=l*a.getElevationAt(r,n,!0,!0),h=0!==s[0],d=h?0===s[1]?l*(s[0]/7-450):l*function(r,n,i){var o,a;let s=Math.floor(n[0]/8),l=Math.floor(n[1]/8),u=10*(n[0]-8*s),c=10*(n[1]-8*l),h=r.getElevationAt(s,l,!0,!0),d=r.getMeterToDEM(i),f=Math.floor(.5*(u*d-1)),p=Math.floor(.5*(c*d-1)),m=r.tileCoordToPixel(s,l),g=2*f+1,y=2*p+1,_=(o=m.x-f,a=m.y-p,[r.getElevationAtPixel(o,a,!0),r.getElevationAtPixel(o+y,a,!0),r.getElevationAtPixel(o,a+y,!0),r.getElevationAtPixel(o+g,a+y,!0)]),v=Math.abs(_[0]-_[1]),b=Math.abs(_[2]-_[3]),x=Math.abs(_[0]-_[2])+Math.abs(_[1]-_[3]),w=Math.min(.25,.5*d*(v+b)/g),E=Math.min(.25,.5*d*x/y);return h+Math.max(w*u,E*c)}(a,s,u):c;return{base:c+(0===i)?-1:i,top:h?Math.max(d+o,c+i+2):c+o}}let lt=ie([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:lr}=lt,ln=ie([{name:"a_packed",components:4,type:"Float32"}]),{members:li}=ln,lo=sj.types,la=Math.cos(Math.PI/180*37.5);class ls{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(r=>r.id),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new ia,this.layoutVertexArray2=new is,this.indexArray=new ib,this.programConfigurations=new ot(r.layers,r.zoom),this.segments=new oc,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(r,n,i,o){this.hasPattern=sC("line",this.layers,n);let a=this.layers[0].layout.get("line-sort-key"),s=[];for(let{feature:n,id:l,index:u,sourceLayerIndex:c}of r){let r=this.layers[0]._featureFilter.needGeometry,h=aP(n,r);if(!this.layers[0]._featureFilter.filter(new nG(this.zoom),h,i))continue;let d=a?a.evaluate(h,{},i):void 0,f={id:l,properties:n.properties,type:n.type,sourceLayerIndex:c,index:u,geometry:r?h.geometry:az(n,i,o),patterns:{},sortKey:d};s.push(f)}a&&s.sort((r,n)=>r.sortKey-n.sortKey);let{lineAtlas:l,featureIndex:u}=n,c=this.addConstantDashes(l);for(let o of s){let{geometry:a,index:s,sourceLayerIndex:h}=o;if(c&&this.addFeatureDashes(o,l),this.hasPattern){let r=sS("line",this.layers,o,this.zoom,n);this.patternFeatures.push(r)}else this.addFeature(o,a,s,i,l.positions,n.availableImages);u.insert(r[s].feature,a,s,h,this.index)}}addConstantDashes(r){let n=!1;for(let i of this.layers){let o=i.paint.get("line-dasharray").value,a=i.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==a.kind)n=!0;else{let n=a.value,i=o.value;if(!i)continue;r.addDash(i,n)}}return n}addFeatureDashes(r,n){let i=this.zoom;for(let o of this.layers){let a,s;let l=o.paint.get("line-dasharray").value,u=o.layout.get("line-cap").value;if("constant"!==l.kind||"constant"!==u.kind){if("constant"===l.kind){if(!(a=l.value))continue}else a=l.evaluate({zoom:i},r);s="constant"===u.kind?u.value:u.evaluate({zoom:i},r),n.addDash(a,s),r.patterns[o.id]=n.getKey(a,s)}}}update(r,n,i,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i,o)}addFeatures(r,n,i,o,a){for(let r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,n,i,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,li)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,lr),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,n,i,o,a,s){let l=this.layers[0].layout,u=l.get("line-join").evaluate(r,{}),c=l.get("line-cap").evaluate(r,{}),h=l.get("line-miter-limit"),d=l.get("line-round-limit");for(let i of(this.lineClips=this.lineFeatureClips(r),n))this.addLine(i,r,u,c,h,d);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,a,s,o)}addLine(r,n,i,o,a,s){let l,u,c,h,d;if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let n=0;n<r.length-1;n++)this.totalDistance+=r[n].dist(r[n+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let f="Polygon"===lo[n.type],p=r.length;for(;p>=2&&r[p-1].equals(r[p-2]);)p--;let m=0;for(;m<p-1&&r[m].equals(r[m+1]);)m++;if(p<(f?3:2))return;"bevel"===i&&(a=1.05);let g=this.overscaling<=16?122880/(512*this.overscaling):0,y=this.segments.prepareSegment(10*p,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,f&&(l=r[p-2],d=r[m].sub(l)._unit()._perp());for(let n=m;n<p;n++){if((c=n===p-1?f?r[m+1]:void 0:r[n+1])&&r[n].equals(c))continue;d&&(h=d),l&&(u=l),l=r[n],d=c?c.sub(l)._unit()._perp():h;let _=(h=h||d).add(d);0===_.x&&0===_.y||_._unit();let v=h.x*d.x+h.y*d.y,b=_.x*d.x+_.y*d.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),E=b<la&&u&&c,C=h.x*d.y-h.y*d.x>0;if(E&&n>m){let r=l.dist(u);if(r>2*g){let n=l.sub(l.sub(u)._mult(g/r)._round());this.updateDistance(u,n),this.addCurrentVertex(n,h,0,0,y),u=n}}let S=u&&c,T=S?i:f?"butt":o;if(S&&"round"===T&&(x<s?T="miter":x<=2&&(T="fakeround")),"miter"===T&&x>a&&(T="bevel"),"bevel"===T&&(x>2&&(T="flipbevel"),x<a&&(T="miter")),u&&this.updateDistance(u,l),"miter"===T)_._mult(x),this.addCurrentVertex(l,_,0,0,y);else if("flipbevel"===T){if(x>100)_=d.mult(-1);else{let r=x*h.add(d).mag()/h.sub(d).mag();_._perp()._mult(r*(C?-1:1))}this.addCurrentVertex(l,_,0,0,y),this.addCurrentVertex(l,_.mult(-1),0,0,y)}else if("bevel"===T||"fakeround"===T){let r=-Math.sqrt(x*x-1),n=C?r:0,i=C?0:r;if(u&&this.addCurrentVertex(l,h,n,i,y),"fakeround"===T){let r=Math.round(180*w/Math.PI/20);for(let n=1;n<r;n++){let i=n/r;if(.5!==i){let r=i-.5;i+=i*r*(i-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*r*r+(.848013+v*(.215638*v-1.06021)))}let o=d.sub(h)._mult(i)._add(h)._unit()._mult(C?-1:1);this.addHalfVertex(l,o.x,o.y,!1,C,0,y)}}c&&this.addCurrentVertex(l,d,-n,-i,y)}else if("butt"===T)this.addCurrentVertex(l,_,0,0,y);else if("square"===T){let r=u?1:-1;u||this.addCurrentVertex(l,_,r,r,y),this.addCurrentVertex(l,_,0,0,y),u&&this.addCurrentVertex(l,_,r,r,y)}else"round"===T&&(u&&(this.addCurrentVertex(l,h,0,0,y),this.addCurrentVertex(l,h,1,1,y,!0)),c&&(this.addCurrentVertex(l,d,-1,-1,y,!0),this.addCurrentVertex(l,d,0,0,y)));if(E&&n<p-1){let r=l.dist(c);if(r>2*g){let n=l.add(c.sub(l)._mult(g/r)._round());this.updateDistance(l,n),this.addCurrentVertex(n,d,0,0,y),l=n}}}}addCurrentVertex(r,n,i,o,a,s=!1){let l=n.y*o-n.x,u=-n.y-n.x*o;this.addHalfVertex(r,n.x+n.y*i,n.y-n.x*i,s,!1,i,a),this.addHalfVertex(r,l,u,s,!0,-o,a)}addHalfVertex({x:r,y:n},i,o,a,s,l,u){this.layoutVertexArray.emplaceBack((r<<1)+(a?1:0),(n<<1)+(s?1:0),Math.round(63*i)+128,Math.round(63*o)+128,1+(0===l?0:l<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);let c=u.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),u.primitiveLength++),s?this.e2=c:this.e1=c}updateScaledDistance(){if(this.lineClips){let r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,n){this.distance+=r.dist(n),this.updateScaledDistance()}}nS(ls,"LineBucket",{omit:["layers","patternFeatures"]});let ll=new n5({"line-cap":new n4(eX.layout_line["line-cap"]),"line-join":new n4(eX.layout_line["line-join"]),"line-miter-limit":new n2(eX.layout_line["line-miter-limit"]),"line-round-limit":new n2(eX.layout_line["line-round-limit"]),"line-sort-key":new n4(eX.layout_line["line-sort-key"])});var lu={paint:new n5({"line-opacity":new n4(eX.paint_line["line-opacity"]),"line-color":new n4(eX.paint_line["line-color"]),"line-translate":new n2(eX.paint_line["line-translate"]),"line-translate-anchor":new n2(eX.paint_line["line-translate-anchor"]),"line-width":new n4(eX.paint_line["line-width"]),"line-gap-width":new n4(eX.paint_line["line-gap-width"]),"line-offset":new n4(eX.paint_line["line-offset"]),"line-blur":new n4(eX.paint_line["line-blur"]),"line-dasharray":new n4(eX.paint_line["line-dasharray"]),"line-pattern":new n4(eX.paint_line["line-pattern"]),"line-gradient":new n3(eX.paint_line["line-gradient"]),"line-trim-offset":new n2(eX.paint_line["line-trim-offset"])}),layout:ll};let lc=new class extends n4{possiblyEvaluate(r,n){return n=new nG(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(r,n)}evaluate(r,n,i,o){return n=B({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(r,n,i,o)}}(lu.paint.properties["line-width"].specification);lc.useIntegerZoom=!0;let lh=ie([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ld=ie([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),lf=ie([{name:"a_projected_pos",components:4,type:"Float32"}],4);ie([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let lp=ie([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),lm=ie([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ie([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let lg=ie([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ly=ie([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function l_(r,n){let{expression:i}=n;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new nG(r+1))};if("source"===i.kind)return{kind:"source"};{let{zoomStops:n,interpolationType:o}=i,a=0;for(;a<n.length&&n[a]<=r;)a++;let s=a=Math.max(0,a-1);for(;s<n.length&&n[s]<r+1;)s++;s=Math.min(n.length-1,s);let l=n[a],u=n[s];return"composite"===i.kind?{kind:"composite",minZoom:l,maxZoom:u,interpolationType:o}:{kind:"camera",minZoom:l,maxZoom:u,minSize:i.evaluate(new nG(l)),maxSize:i.evaluate(new nG(u)),interpolationType:o}}}function lv(r,{uSize:n,uSizeT:i},{lowerSize:o,upperSize:a}){return"source"===r.kind?o/128:"composite"===r.kind?tQ(o/128,a/128,i):n}function lb(r,n){let i=0,o=0;if("constant"===r.kind)o=r.layoutSize;else if("source"!==r.kind){let{interpolationType:a,minZoom:s,maxZoom:l}=r,u=a?P(ra.interpolationFactor(a,n,s,l),0,1):0;"camera"===r.kind?o=tQ(r.minSize,r.maxSize,u):i=u}return{uSizeT:i,uSize:o}}ie([{name:"triangle",components:3,type:"Uint16"}]),ie([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ie([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ie([{type:"Float32",name:"offsetX"}]),ie([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var lx=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:128,evaluateSizeForFeature:lv,evaluateSizeForZoom:lb,getSizeData:l_});let lw={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","\xa2":"","\xa3":"","\xa5":"","\xa6":"","\xac":"","\xaf":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var lE=function(r,n,i,o,a){var s,l,u=8*a-o-1,c=(1<<u)-1,h=c>>1,d=-7,f=i?a-1:0,p=i?-1:1,m=r[n+f];for(f+=p,s=m&(1<<-d)-1,m>>=-d,d+=u;d>0;s=256*s+r[n+f],f+=p,d-=8);for(l=s&(1<<-d)-1,s>>=-d,d+=o;d>0;l=256*l+r[n+f],f+=p,d-=8);if(0===s)s=1-h;else{if(s===c)return l?NaN:1/0*(m?-1:1);l+=Math.pow(2,o),s-=h}return(m?-1:1)*l*Math.pow(2,s-o)},lC=function(r,n,i,o,a,s){var l,u,c,h=8*s-a-1,d=(1<<h)-1,f=d>>1,p=23===a?5960464477539062e-23:0,m=o?0:s-1,g=o?1:-1,y=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(u=isNaN(n)?1:0,l=d):(l=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-l))<1&&(l--,c*=2),(n+=l+f>=1?p/c:p*Math.pow(2,1-f))*c>=2&&(l++,c/=2),l+f>=d?(u=0,l=d):l+f>=1?(u=(n*c-1)*Math.pow(2,a),l+=f):(u=n*Math.pow(2,f-1)*Math.pow(2,a),l=0));a>=8;r[i+m]=255&u,m+=g,u/=256,a-=8);for(l=l<<a|u,h+=a;h>0;r[i+m]=255&l,m+=g,l/=256,h-=8);r[i+m-g]|=128*y};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function lS(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}lS.Varint=0,lS.Fixed64=1,lS.Bytes=2,lS.Fixed32=5;var lT="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function lM(r){return r.type===lS.Bytes?r.readVarint()+r.pos:r.pos+1}function lk(r,n,i){var o=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(o);for(var a=i.pos-1;a>=r;a--)i.buf[a+o]=i.buf[a]}function lI(r,n){for(var i=0;i<r.length;i++)n.writeVarint(r[i])}function lL(r,n){for(var i=0;i<r.length;i++)n.writeSVarint(r[i])}function lA(r,n){for(var i=0;i<r.length;i++)n.writeFloat(r[i])}function lz(r,n){for(var i=0;i<r.length;i++)n.writeDouble(r[i])}function lP(r,n){for(var i=0;i<r.length;i++)n.writeBoolean(r[i])}function lO(r,n){for(var i=0;i<r.length;i++)n.writeFixed32(r[i])}function lD(r,n){for(var i=0;i<r.length;i++)n.writeSFixed32(r[i])}function lR(r,n){for(var i=0;i<r.length;i++)n.writeFixed64(r[i])}function lF(r,n){for(var i=0;i<r.length;i++)n.writeSFixed64(r[i])}function lB(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+16777216*r[n+3]}function lN(r,n,i){r[i]=n,r[i+1]=n>>>8,r[i+2]=n>>>16,r[i+3]=n>>>24}function lj(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+(r[n+3]<<24)}lS.prototype={destroy:function(){this.buf=null},readFields:function(r,n,i){for(i=i||this.length;this.pos<i;){var o=this.readVarint(),a=o>>3,s=this.pos;this.type=7&o,r(a,n,this),this.pos===s&&this.skip(o)}return n},readMessage:function(r,n){return this.readFields(r,n,this.readVarint()+this.pos)},readFixed32:function(){var r=lB(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=lj(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=lB(this.buf,this.pos)+4294967296*lB(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=lB(this.buf,this.pos)+4294967296*lj(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=lE(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=lE(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var n,i,o=this.buf;return n=127&(i=o[this.pos++]),i<128?n:(n|=(127&(i=o[this.pos++]))<<7,i<128?n:(n|=(127&(i=o[this.pos++]))<<14,i<128?n:(n|=(127&(i=o[this.pos++]))<<21,i<128?n:function(r,n,i){var o,a,s,l=i.buf;if(a=(112&(s=l[i.pos++]))>>4,s<128||(a|=(127&(s=l[i.pos++]))<<3,s<128)||(a|=(127&(s=l[i.pos++]))<<10,s<128)||(a|=(127&(s=l[i.pos++]))<<17,s<128)||(a|=(127&(s=l[i.pos++]))<<24,s<128)||(a|=(1&(s=l[i.pos++]))<<31,s<128))return o=a,n?4294967296*o+(r>>>0):4294967296*(o>>>0)+(r>>>0);throw Error("Expected varint not more than 10 bytes")}(n|=(15&(i=o[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?-((r+1)/2):r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r,n=this.readVarint()+this.pos,i=this.pos;return this.pos=n,n-i>=12&&lT?(r=this.buf,lT.decode(r.subarray(i,n))):function(r,n,i){for(var o="",a=n;a<i;){var s,l,u,c=r[a],h=null,d=c>239?4:c>223?3:c>191?2:1;if(a+d>i)break;1===d?c<128&&(h=c):2===d?128==(192&(s=r[a+1]))&&(h=(31&c)<<6|63&s)<=127&&(h=null):3===d?(l=r[a+2],128==(192&(s=r[a+1]))&&128==(192&l)&&((h=(15&c)<<12|(63&s)<<6|63&l)<=2047||h>=55296&&h<=57343)&&(h=null)):4===d&&(l=r[a+2],u=r[a+3],128==(192&(s=r[a+1]))&&128==(192&l)&&128==(192&u)&&((h=(15&c)<<18|(63&s)<<12|(63&l)<<6|63&u)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,d=1):h>65535&&(h-=65536,o+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),o+=String.fromCharCode(h),a+=d}return o}(this.buf,i,n)},readBytes:function(){var r=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,r);return this.pos=r,n},readPackedVarint:function(r,n){if(this.type!==lS.Bytes)return r.push(this.readVarint(n));var i=lM(this);for(r=r||[];this.pos<i;)r.push(this.readVarint(n));return r},readPackedSVarint:function(r){if(this.type!==lS.Bytes)return r.push(this.readSVarint());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==lS.Bytes)return r.push(this.readBoolean());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==lS.Bytes)return r.push(this.readFloat());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==lS.Bytes)return r.push(this.readDouble());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==lS.Bytes)return r.push(this.readFixed32());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==lS.Bytes)return r.push(this.readSFixed32());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==lS.Bytes)return r.push(this.readFixed64());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==lS.Bytes)return r.push(this.readSFixed64());var n=lM(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed64());return r},skip:function(r){var n=7&r;if(n===lS.Varint)for(;this.buf[this.pos++]>127;);else if(n===lS.Bytes)this.pos=this.readVarint()+this.pos;else if(n===lS.Fixed32)this.pos+=4;else{if(n!==lS.Fixed64)throw Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(r,n){this.writeVarint(r<<3|n)},realloc:function(r){for(var n=this.length||16;n<this.pos+r;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),lN(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),lN(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),lN(this.buf,-1&r,this.pos),lN(this.buf,Math.floor(23283064365386963e-26*r),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),lN(this.buf,-1&r,this.pos),lN(this.buf,Math.floor(23283064365386963e-26*r),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(r,n){var i,o,a,s,l;if(r>=0?(i=r%4294967296|0,o=r/4294967296|0):(o=~(-r/4294967296),4294967295^(i=~(-r%4294967296))?i=i+1|0:(i=0,o=o+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");n.realloc(10),a=i,n.buf[n.pos++]=127&a|128,a>>>=7,n.buf[n.pos++]=127&a|128,a>>>=7,n.buf[n.pos++]=127&a|128,a>>>=7,n.buf[n.pos++]=127&a|128,n.buf[n.pos]=127&(a>>>=7),l=(7&(s=o))<<4,n.buf[n.pos++]|=l|((s>>>=3)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s)))))}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?-(2*r)-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var n=this.pos;this.pos=function(r,n,i){for(var o,a,s=0;s<n.length;s++){if((o=n.charCodeAt(s))>55295&&o<57344){if(!a){o>56319||s+1===n.length?(r[i++]=239,r[i++]=191,r[i++]=189):a=o;continue}if(o<56320){r[i++]=239,r[i++]=191,r[i++]=189,a=o;continue}o=a-55296<<10|o-56320|65536,a=null}else a&&(r[i++]=239,r[i++]=191,r[i++]=189,a=null);o<128?r[i++]=o:(o<2048?r[i++]=o>>6|192:(o<65536?r[i++]=o>>12|224:(r[i++]=o>>18|240,r[i++]=o>>12&63|128),r[i++]=o>>6&63|128),r[i++]=63&o|128)}return i}(this.buf,r,this.pos);var i=this.pos-n;i>=128&&lk(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(r){this.realloc(4),lC(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),lC(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var n=r.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=r[i]},writeRawMessage:function(r,n){this.pos++;var i=this.pos;r(n,this);var o=this.pos-i;o>=128&&lk(i,o,this),this.pos=i-1,this.writeVarint(o),this.pos+=o},writeMessage:function(r,n,i){this.writeTag(r,lS.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(r,n){n.length&&this.writeMessage(r,lI,n)},writePackedSVarint:function(r,n){n.length&&this.writeMessage(r,lL,n)},writePackedBoolean:function(r,n){n.length&&this.writeMessage(r,lP,n)},writePackedFloat:function(r,n){n.length&&this.writeMessage(r,lA,n)},writePackedDouble:function(r,n){n.length&&this.writeMessage(r,lz,n)},writePackedFixed32:function(r,n){n.length&&this.writeMessage(r,lO,n)},writePackedSFixed32:function(r,n){n.length&&this.writeMessage(r,lD,n)},writePackedFixed64:function(r,n){n.length&&this.writeMessage(r,lR,n)},writePackedSFixed64:function(r,n){n.length&&this.writeMessage(r,lF,n)},writeBytesField:function(r,n){this.writeTag(r,lS.Bytes),this.writeBytes(n)},writeFixed32Field:function(r,n){this.writeTag(r,lS.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(r,n){this.writeTag(r,lS.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(r,n){this.writeTag(r,lS.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(r,n){this.writeTag(r,lS.Fixed64),this.writeSFixed64(n)},writeVarintField:function(r,n){this.writeTag(r,lS.Varint),this.writeVarint(n)},writeSVarintField:function(r,n){this.writeTag(r,lS.Varint),this.writeSVarint(n)},writeStringField:function(r,n){this.writeTag(r,lS.Bytes),this.writeString(n)},writeFloatField:function(r,n){this.writeTag(r,lS.Fixed32),this.writeFloat(n)},writeDoubleField:function(r,n){this.writeTag(r,lS.Fixed64),this.writeDouble(n)},writeBooleanField:function(r,n){this.writeVarintField(r,!!n)}};var lV=w(lS);function lU(r,n,i){n.glyphs=[],1===r&&i.readMessage(lq,n)}function lq(r,n,i){if(3===r){let{id:r,bitmap:o,width:a,height:s,left:l,top:u,advance:c}=i.readMessage(l$,{});n.glyphs.push({id:r,bitmap:new a3({width:a+6,height:s+6},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}else 4===r?n.ascender=i.readSVarint():5===r&&(n.descender=i.readSVarint())}function l$(r,n,i){1===r?n.id=i.readVarint():2===r?n.bitmap=i.readBytes():3===r?n.width=i.readVarint():4===r?n.height=i.readVarint():5===r?n.left=i.readSVarint():6===r?n.top=i.readSVarint():7===r&&(n.advance=i.readVarint())}function lH(r){let n=0,i=0;for(let o of r)n+=o.w*o.h,i=Math.max(i,o.w);r.sort((r,n)=>n.h-r.h);let o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),i),h:1/0}],a=0,s=0;for(let n of r)for(let r=o.length-1;r>=0;r--){let i=o[r];if(!(n.w>i.w||n.h>i.h)){if(n.x=i.x,n.y=i.y,s=Math.max(s,n.y+n.h),a=Math.max(a,n.x+n.w),n.w===i.w&&n.h===i.h){let n=o.pop();r<o.length&&(o[r]=n)}else n.h===i.h?(i.x+=n.w,i.w-=n.w):(n.w===i.w||o.push({x:i.x+n.w,y:i.y,w:i.w-n.w,h:n.h}),i.y+=n.h,i.h-=n.h);break}}return{w:a,h:s,fill:n/(a*s)||0}}class lZ{constructor(r,{pixelRatio:n,version:i,stretchX:o,stretchY:a,content:s}){this.paddedRect=r,this.pixelRatio=n,this.stretchX=o,this.stretchY=a,this.content=s,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class lG{constructor(r,n){let i={},o={};this.haveRenderCallbacks=[];let a=[];this.addImages(r,i,a),this.addImages(n,o,a);let{w:s,h:l}=lH(a),u=new a5({width:s||1,height:l||1});for(let n in r){let o=r[n],a=i[n].paddedRect;a5.copy(o.data,u,{x:0,y:0},{x:a.x+1,y:a.y+1},o.data)}for(let r in n){let i=n[r],a=o[r].paddedRect,s=a.x+1,l=a.y+1,c=i.data.width,h=i.data.height;a5.copy(i.data,u,{x:0,y:0},{x:s,y:l},i.data),a5.copy(i.data,u,{x:0,y:h-1},{x:s,y:l-1},{width:c,height:1}),a5.copy(i.data,u,{x:0,y:0},{x:s,y:l+h},{width:c,height:1}),a5.copy(i.data,u,{x:c-1,y:0},{x:s-1,y:l},{width:1,height:h}),a5.copy(i.data,u,{x:0,y:0},{x:s+c,y:l},{width:1,height:h})}this.image=u,this.iconPositions=i,this.patternPositions=o}addImages(r,n,i){for(let o in r){let a=r[o],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(s),n[o]=new lZ(s,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(o)}}patchUpdatedImages(r,n){for(let i in this.haveRenderCallbacks=this.haveRenderCallbacks.filter(n=>r.hasImage(n)),r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[i],r.getImage(i),n),this.patchUpdatedImage(this.patternPositions[i],r.getImage(i),n)}patchUpdatedImage(r,n,i){if(!r||!n||r.version===n.version)return;r.version=n.version;let[o,a]=r.tl;i.update(n.data,void 0,{x:o,y:a})}}nS(lZ,"ImagePosition"),nS(lG,"ImageAtlas");let lW={horizontal:1,vertical:2,horizontalOnly:3};class lX{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,n){let i=new lX;return i.scale=r||1,i.fontStack=n,i}static forImage(r){let n=new lX;return n.imageName=r,n}}class lY{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,n){let i=new lY;for(let o=0;o<r.sections.length;o++){let a=r.sections[o];a.image?i.addImageSection(a):i.addTextSection(a,n)}return i}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(r){this.text=function(r,n){let i="";for(let o=0;o<r.length;o++){let a=r.charCodeAt(o+1)||null,s=r.charCodeAt(o-1)||null;i+=!n&&(a&&nP(a)&&!lw[r[o+1]]||s&&nP(s)&&!lw[r[o-1]])||!lw[r[o]]?r[o]:lw[r[o]]}return i}(this.text,r)}trim(){let r=0;for(let n=0;n<this.text.length&&lJ[this.text.charCodeAt(n)];n++)r++;let n=this.text.length;for(let i=this.text.length-1;i>=0&&i>=r&&lJ[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(r,n),this.sectionIndex=this.sectionIndex.slice(r,n)}substring(r,n){let i=new lY;return i.text=this.text.substring(r,n),i.sectionIndex=this.sectionIndex.slice(r,n),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,n)=>Math.max(r,this.sections[n].scale),0)}addTextSection(r,n){this.text+=r.text,this.sections.push(lX.forText(r.scale,r.fontStack||n));let i=this.sections.length-1;for(let n=0;n<r.text.length;++n)this.sectionIndex.push(i)}addImageSection(r){let n=r.image?r.image.name:"";if(0===n.length)return void Y("Can't add FormattedSection with an empty image.");let i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(lX.forImage(n)),this.sectionIndex.push(this.sections.length-1)):Y("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function lK(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g){let y=lY.fromFeature(r,a);f===lW.vertical&&y.verticalizePunctuation(p);let _=[],v=function(r,n,i,o,a,s){if(!r)return[];let l=[],u=function(r,n,i,o,a,s){let l=0;for(let i=0;i<r.length();i++){let u=r.getSection(i);l+=l0(r.getCharCode(i),u,o,a,n,s)}return l/Math.max(1,Math.ceil(l/i))}(r,n,i,o,a,s),c=r.text.indexOf("")>=0,h=0;for(let i=0;i<r.length();i++){let d=r.getSection(i),f=r.getCharCode(i);if(lJ[f]||(h+=l0(f,d,o,a,n,s)),i<r.length()-1){let n=!(f<11904||!(nL["Bopomofo Extended"](f)||nL.Bopomofo(f)||nL["CJK Compatibility Forms"](f)||nL["CJK Compatibility Ideographs"](f)||nL["CJK Compatibility"](f)||nL["CJK Radicals Supplement"](f)||nL["CJK Strokes"](f)||nL["CJK Symbols and Punctuation"](f)||nL["CJK Unified Ideographs Extension A"](f)||nL["CJK Unified Ideographs"](f)||nL["Enclosed CJK Letters and Months"](f)||nL["Halfwidth and Fullwidth Forms"](f)||nL.Hiragana(f)||nL["Ideographic Description Characters"](f)||nL["Kangxi Radicals"](f)||nL["Katakana Phonetic Extensions"](f)||nL.Katakana(f)||nL["Vertical Forms"](f)||nL["Yi Radicals"](f)||nL["Yi Syllables"](f)));(lQ[f]||n||d.imageName)&&l.push(l2(i+1,h,u,l,function(r,n,i){let o=0;return 10===r&&(o-=1e4),i&&(o+=150),40!==r&&65288!==r||(o+=50),41!==n&&65289!==n||(o+=50),o}(f,r.getCharCode(i+1),n&&c),!1))}}return function r(n){return n?r(n.priorBreak).concat(n.index):[]}(l2(r.length(),h,u,l,0,!0))}(y,h,s,n,o,m),{processBidirectionalText:b,processStyledBidirectionalText:x}=nZ;if(b&&1===y.sections.length){let r=b(y.toString(),v);for(let n of r){let r=new lY;r.text=n,r.sections=y.sections;for(let i=0;i<n.length;i++)r.sectionIndex.push(0);_.push(r)}}else if(x){let r=x(y.text,y.sectionIndex,v);for(let n of r){let r=new lY;r.text=n[0],r.sectionIndex=n[1],r.sections=y.sections,_.push(r)}}else _=function(r,n){let i=[],o=r.text,a=0;for(let o of n)i.push(r.substring(a,o)),a=o;return a<o.length&&i.push(r.substring(a,o.length)),i}(y,v);let w=[],E={positionedLines:w,text:y.toString(),top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:f,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(r,n,i,o,a,s,l,u,c,h,d,f){let p=0,m=0,g=0,y="right"===u?1:"left"===u?0:.5,_=!1;for(let r of a){let i=r.getSections();for(let r of i){if(r.imageName)continue;let i=n[r.fontStack];if(i&&!(_=void 0!==i.ascender&&void 0!==i.descender))break}if(!_)break}let v=0;for(let l of a){l.trim();let a=l.getMaxScale(),u=(a-1)*24,b={positionedGlyphs:[],lineOffset:0};r.positionedLines[v]=b;let x=b.positionedGlyphs,w=0;if(!l.length()){m+=s,++v;continue}let E=0,C=0;for(let s=0;s<l.length();s++){let u=l.getSection(s),g=l.getSectionIndex(s),y=l.getCharCode(s),v=u.scale,b=null,S=null,T=null,M=24,k=0,I=!(c===lW.horizontal||!d&&!nz(y)||d&&(lJ[y]||nL.Arabic(y)||nL["Arabic Supplement"](y)||nL["Arabic Extended-A"](y)||nL["Arabic Presentation Forms-A"](y)||nL["Arabic Presentation Forms-B"](y)));if(u.imageName){let n=o[u.imageName];if(!n)continue;T=u.imageName,r.iconsInText=r.iconsInText||!0,S=n.paddedRect;let i=n.displaySize;v=24*v/f,b={width:i[0],height:i[1],left:1,top:-3,advance:I?i[1]:i[0],localGlyph:!1},k=_?-b.height*v:-17+24*a-i[1]*v,M=b.advance;let s=(I?i[0]:i[1])*v-24*a;s>0&&s>w&&(w=s)}else{let r=i[u.fontStack];if(!r)continue;r[y]&&(S=r[y]);let o=n[u.fontStack];if(!o)continue;let s=o.glyphs[y];if(!s)continue;if(b=s.metrics,M=8203!==y?24:0,_){let r=void 0!==o.ascender?Math.abs(o.ascender):0,n=void 0!==o.descender?Math.abs(o.descender):0,i=(r+n)*v;E<i&&(E=i,C=(r-n)/2*v),k=-r*v}else k=-17+(a-v)*24}I?(r.verticalizable=!0,x.push({glyph:y,imageName:T,x:p,y:m+k,vertical:I,scale:v,localGlyph:b.localGlyph,fontStack:u.fontStack,sectionIndex:g,metrics:b,rect:S}),p+=M*v+h):(x.push({glyph:y,imageName:T,x:p,y:m+k,vertical:I,scale:v,localGlyph:b.localGlyph,fontStack:u.fontStack,sectionIndex:g,metrics:b,rect:S}),p+=b.advance*v+h)}0!==x.length&&(g=Math.max(p-h,g),_?l3(x,y,w,C,s*a/2):l3(x,y,w,0,s/2)),p=0;let S=s*a+w;b.lineOffset=Math.max(w,u),m+=S,++v}let b=m,{horizontalAlign:x,verticalAlign:w}=l4(l);(function(r,n,i,o,a,s){let l=(n-i)*a,u=-s*o;for(let n of r)for(let r of n.positionedGlyphs)r.x+=l,r.y+=u})(r.positionedLines,y,x,w,g,b),r.top+=-w*b,r.bottom=r.top+b,r.left+=-x*g,r.right=r.left+g,r.hasBaseline=_}(E,n,i,o,_,l,u,c,f,h,p,g),!function(r){for(let n of r)if(0!==n.positionedGlyphs.length)return!1;return!0}(w)&&E}let lJ={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lQ={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function l0(r,n,i,o,a,s){if(n.imageName){let r=o[n.imageName];return r?r.displaySize[0]*n.scale*24/s+a:0}{let o=i[n.fontStack],s=o&&o.glyphs[r];return s?s.metrics.advance*n.scale+a:0}}function l1(r,n,i,o){let a=Math.pow(r-n,2);return o?r<n?a/2:2*a:a+Math.abs(i)*i}function l2(r,n,i,o,a,s){let l=null,u=l1(n,i,a,s);for(let r of o){let o=l1(n-r.x,i,a,s)+r.badness;o<=u&&(l=r,u=o)}return{index:r,x:n,priorBreak:l,badness:u}}function l4(r){let n=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:n,verticalAlign:i}}function l3(r,n,i,o,a){if(!(n||i||o||a))return;let s=r.length-1,l=r[s],u=(l.x+l.metrics.advance*l.scale)*n;for(let n=0;n<=s;n++)r[n].x-=u,r[n].y+=i+o+a}function l5(r,n,i,o,a,s){let l,u,c,h,d;let f=r.image;if(f.content){let r=f.content,n=f.pixelRatio||1;l=[r[0]/n,r[1]/n,f.displaySize[0]-r[2]/n,f.displaySize[1]-r[3]/n]}let p=n.left*s,m=n.right*s;"width"===i||"both"===i?(d=a[0]+p-o[3],c=a[0]+m+o[1]):c=(d=a[0]+(p+m-f.displaySize[0])/2)+f.displaySize[0];let g=n.top*s,y=n.bottom*s;return"height"===i||"both"===i?(u=a[1]+g-o[0],h=a[1]+y+o[2]):h=(u=a[1]+(g+y-f.displaySize[1])/2)+f.displaySize[1],{image:f,top:u,right:c,bottom:h,left:d,collisionPadding:l}}class l6 extends T{constructor(r,n,i,o,a){super(r,n),this.angle=o,this.z=i,void 0!==a&&(this.segment=a)}clone(){return new l6(this.x,this.y,this.z,this.angle,this.segment)}}function l8(r,n,i,o,a){if(void 0===n.segment)return!0;let s=n,l=n.segment+1,u=0;for(;u>-i/2;){if(--l<0)return!1;u-=r[l].dist(s),s=r[l]}u+=r[l].dist(r[l+1]),l++;let c=[],h=0;for(;u<i/2;){let n=r[l],i=r[l+1];if(!i)return!1;let s=r[l-1].angleTo(n)-n.angleTo(i);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),c.push({distance:u,angleDelta:s}),h+=s;u-c[0].distance>o;)h-=c.shift().angleDelta;if(h>a)return!1;l++,u+=n.dist(i)}return!0}function l9(r){let n=0;for(let i=0;i<r.length-1;i++)n+=r[i].dist(r[i+1]);return n}function l7(r,n){return Math.max(r?r.right-r.left:0,n?n.right-n.left:0)}function ue(r,n,i,o,a){let s=[];for(let l=0;l<r.length;l++){let u;let c=r[l];for(let r=0;r<c.length-1;r++){let l=c[r],h=c[r+1];l.x<n&&h.x<n||(l.x<n?l=new T(n,l.y+(n-l.x)/(h.x-l.x)*(h.y-l.y))._round():h.x<n&&(h=new T(n,l.y+(n-l.x)/(h.x-l.x)*(h.y-l.y))._round()),l.y<i&&h.y<i||(l.y<i?l=new T(l.x+(i-l.y)/(h.y-l.y)*(h.x-l.x),i)._round():h.y<i&&(h=new T(l.x+(i-l.y)/(h.y-l.y)*(h.x-l.x),i)._round()),l.x>=o&&h.x>=o||(l.x>=o?l=new T(o,l.y+(o-l.x)/(h.x-l.x)*(h.y-l.y))._round():h.x>=o&&(h=new T(o,l.y+(o-l.x)/(h.x-l.x)*(h.y-l.y))._round()),l.y>=a&&h.y>=a||(l.y>=a?l=new T(l.x+(a-l.y)/(h.y-l.y)*(h.x-l.x),a)._round():h.y>=a&&(h=new T(l.x+(a-l.y)/(h.y-l.y)*(h.x-l.x),a)._round()),u&&l.equals(u[u.length-1])||(u=[l],s.push(u)),u.push(h)))))}}return s}function ut(r,n,i,o,a,s,l,u,c){for(let h=n;h<n+o;h++)ur(r,i*s+h,s,a,l,u,c);for(let h=i;h<i+a;h++)ur(r,h*s+n,1,o,l,u,c)}function ur(r,n,i,o,a,s,l){s[0]=0,l[0]=-1e20,l[1]=1e20,a[0]=r[n];for(let u=1,c=0,h=0;u<o;u++){a[u]=r[n+u*i];let o=u*u;do{let r=s[c];h=(a[u]-a[r]+o-r*r)/(u-r)/2}while(h<=l[c]&&--c>-1)s[++c]=u,l[c]=h,l[c+1]=1e20}for(let u=0,c=0;u<o;u++){for(;l[c+1]<u;)c++;let o=s[c],h=u-o;r[n+u*i]=a[o]+h*h}}nS(l6,"Anchor");let un={none:0,ideographs:1,all:2};class ui{constructor(r,n,i){this.requestManager=r,this.localGlyphMode=n,this.localFontFamily=i,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r){this.url=r}getGlyphs(r,n){let i=[];for(let n in r)for(let o of r[n])i.push({stack:n,id:o});R(i,({stack:r,id:n},i)=>{let o=this.entries[r];o||(o=this.entries[r]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let a=o.glyphs[n];if(void 0!==a)return void i(null,{stack:r,id:n,glyph:a});if(a=this._tinySDF(o,r,n))return o.glyphs[n]=a,void i(null,{stack:r,id:n,glyph:a});let s=Math.floor(n/256);if(256*s>65535)return void i(Error("glyphs > 65535 not supported"));if(o.ranges[s])return void i(null,{stack:r,id:n,glyph:a});let l=o.requests[s];l||(l=o.requests[s]=[],ui.loadGlyphRange(r,s,this.url,this.requestManager,(r,n)=>{if(n){for(let r in o.ascender=n.ascender,o.descender=n.descender,n.glyphs)this._doesCharSupportLocalGlyph(+r)||(o.glyphs[+r]=n.glyphs[+r]);o.ranges[s]=!0}for(let i of l)i(r,n);delete o.requests[s]})),l.push((o,a)=>{o?i(o):a&&i(null,{stack:r,id:n,glyph:a.glyphs[n]||null})})},(r,i)=>{if(r)n(r);else if(i){let r={};for(let{stack:n,id:o,glyph:a}of i)void 0===r[n]&&(r[n]={}),void 0===r[n].glyphs&&(r[n].glyphs={}),r[n].glyphs[o]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics},r[n].ascender=this.entries[n].ascender,r[n].descender=this.entries[n].descender;n(null,r)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==un.none&&(this.localGlyphMode===un.all?!!this.localFontFamily:!!this.localFontFamily&&(nL["CJK Unified Ideographs"](r)||nL["Hangul Syllables"](r)||nL.Hiragana(r)||nL.Katakana(r)||nL["CJK Symbols and Punctuation"](r)))}_tinySDF(r,n,i){let o=this.localFontFamily;if(!o||!this._doesCharSupportLocalGlyph(i))return;let a=r.tinySDF;if(!a){let i="400";/bold/i.test(n)?i="900":/medium/i.test(n)?i="500":/light/i.test(n)&&(i="200"),(a=r.tinySDF=new ui.TinySDF({fontFamily:o,fontWeight:i,fontSize:48,buffer:6,radius:16})).fontWeight=i}if(this.localGlyphs[a.fontWeight][i])return this.localGlyphs[a.fontWeight][i];let s=String.fromCharCode(i),{data:l,width:u,height:c,glyphWidth:h,glyphHeight:d,glyphLeft:f,glyphTop:p,glyphAdvance:m}=a.draw(s);return this.localGlyphs[a.fontWeight][i]={id:i,bitmap:new a3({width:u,height:c},l),metrics:{width:h/2,height:d/2,left:f/2,top:p/2-27,advance:m/2,localGlyph:!0}}}}function uo(r,n,i,o){let a=[],s=r.image,l=s.pixelRatio,u=s.paddedRect.w-2,c=s.paddedRect.h-2,h=r.right-r.left,d=r.bottom-r.top,f=s.stretchX||[[0,u]],p=s.stretchY||[[0,c]],m=(r,n)=>r+n[1]-n[0],g=f.reduce(m,0),y=p.reduce(m,0),_=u-g,v=c-y,b=0,x=g,w=0,E=y,C=0,S=_,M=0,k=v;if(s.content&&o){let r=s.content;b=ua(f,0,r[0]),w=ua(p,0,r[1]),x=ua(f,r[0],r[2]),E=ua(p,r[1],r[3]),C=r[0]-b,M=r[1]-w,S=r[2]-r[0]-x,k=r[3]-r[1]-E}let I=(o,a,u,c)=>{var f,p,m,_,v,I,L,A,z,P,O,D;let R=(o.stretch-b)/x*h+r.left,F=(m=o.fixed-C,m-S*o.stretch/g),B=(a.stretch-w)/E*d+r.top,N=(I=a.fixed-M,I-k*a.stretch/y),j=(u.stretch-b)/x*h+r.left,V=(z=u.fixed-C,z-S*u.stretch/g),U=(c.stretch-w)/E*d+r.top,q=(D=c.fixed-M,D-k*c.stretch/y),$=new T(R,B),H=new T(j,B),Z=new T(j,U),G=new T(R,U),W=new T(F/l,N/l),X=new T(V/l,q/l),Y=n*Math.PI/180;if(Y){let r=Math.sin(Y),n=Math.cos(Y),i=[n,-r,r,n];$._matMult(i),H._matMult(i),G._matMult(i),Z._matMult(i)}let K=o.stretch+o.fixed,J=a.stretch+a.fixed;return{tl:$,tr:H,bl:G,br:Z,tex:{x:s.paddedRect.x+1+K,y:s.paddedRect.y+1+J,w:u.stretch+u.fixed-K,h:c.stretch+c.fixed-J},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:W,pixelOffsetBR:X,minFontScaleX:S/l/h,minFontScaleY:k/l/d,isSDF:i}};if(o&&(s.stretchX||s.stretchY)){let r=us(f,_,g),n=us(p,v,y);for(let i=0;i<r.length-1;i++){let o=r[i],s=r[i+1];for(let r=0;r<n.length-1;r++)a.push(I(o,n[r],s,n[r+1]))}}else a.push(I({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:c+1}));return a}function ua(r,n,i){let o=0;for(let a of r)o+=Math.max(n,Math.min(i,a[1]))-Math.max(n,Math.min(i,a[0]));return o}function us(r,n,i){let o=[{fixed:-1,stretch:0}];for(let[n,i]of r){let r=o[o.length-1];o.push({fixed:n-r.stretch,stretch:r.stretch}),o.push({fixed:n-r.stretch,stretch:r.stretch+(i-n)})}return o.push({fixed:n+1,stretch:i}),o}ui.loadGlyphRange=function(r,n,i,o,a){let s=256*n,l=s+255,u=o.transformRequest(o.normalizeGlyphsURL(i).replace("{fontstack}",r).replace("{range}",`${s}-${l}`),eh.Glyphs);em(u,(r,n)=>{if(r)a(r);else if(n){let r={},i=new lV(n).readFields(lU,{});for(let n of i.glyphs)r[n.id]=n;a(null,{glyphs:r,ascender:i.ascender,descender:i.descender})}})},ui.TinySDF=class{constructor({fontSize:r=24,buffer:n=3,radius:i=8,cutoff:o=.25,fontFamily:a="sans-serif",fontWeight:s="normal",fontStyle:l="normal"}={}){this.buffer=n,this.cutoff=o,this.radius=i;let u=this.size=r+4*n,c=this._createCanvas(u),h=this.ctx=c.getContext("2d",{willReadFrequently:!0});h.font=`${l} ${s} ${r}px ${a}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(u*u),this.gridInner=new Float64Array(u*u),this.f=new Float64Array(u),this.z=new Float64Array(u+1),this.v=new Uint16Array(u)}_createCanvas(r){let n=document.createElement("canvas");return n.width=n.height=r,n}draw(r){let{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:o,actualBoundingBoxLeft:a,actualBoundingBoxRight:s}=this.ctx.measureText(r),l=Math.ceil(i),u=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-a))),c=Math.min(this.size-this.buffer,l+Math.ceil(o)),h=u+2*this.buffer,d=c+2*this.buffer,f=Math.max(h*d,0),p=new Uint8ClampedArray(f),m={data:p,width:h,height:d,glyphWidth:u,glyphHeight:c,glyphTop:l,glyphLeft:0,glyphAdvance:n};if(0===u||0===c)return m;let{ctx:g,buffer:y,gridInner:_,gridOuter:v}=this;g.clearRect(y,y,u,c),g.fillText(r,y,y+l);let b=g.getImageData(y,y,u,c);v.fill(1e20,0,f),_.fill(0,0,f);for(let r=0;r<c;r++)for(let n=0;n<u;n++){let i=b.data[4*(r*u+n)+3]/255;if(0===i)continue;let o=(r+y)*h+n+y;if(1===i)v[o]=0,_[o]=1e20;else{let r=.5-i;v[o]=r>0?r*r:0,_[o]=r<0?r*r:0}}ut(v,0,0,h,d,h,this.f,this.v,this.z),ut(_,y,y,u,c,h,this.f,this.v,this.z);for(let r=0;r<f;r++){let n=Math.sqrt(v[r])-Math.sqrt(_[r]);p[r]=Math.round(255-255*(n/this.radius+this.cutoff))}return m}};class ul{constructor(r=[],n=uu){if(this.data=r,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;let r=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),r}peek(){return this.data[0]}_up(r){let{data:n,compare:i}=this,o=n[r];for(;r>0;){let a=r-1>>1,s=n[a];if(i(o,s)>=0)break;n[r]=s,r=a}n[r]=o}_down(r){let{data:n,compare:i}=this,o=this.length>>1,a=n[r];for(;r<o;){let o=1+(r<<1),s=n[o],l=o+1;if(l<this.length&&0>i(n[l],s)&&(o=l,s=n[l]),i(s,a)>=0)break;n[r]=s,r=o}n[r]=a}}function uu(r,n){return r<n?-1:r>n?1:0}function uc(r,n){return n.max-r.max}class uh{constructor(r,n,i,o){this.p=new T(r,n),this.h=i,this.d=function(r,n){let i=!1,o=1/0;for(let a=0;a<n.length;a++){let s=n[a];for(let n=0,a=s.length,l=a-1;n<a;l=n++){let a=s[n],u=s[l];a.y>r.y!=u.y>r.y&&r.x<(u.x-a.x)*(r.y-a.y)/(u.y-a.y)+a.x&&(i=!i),o=Math.min(o,aV(r,a,u))}}return(i?1:-1)*Math.sqrt(o)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}}let ud=Number.POSITIVE_INFINITY,uf=Math.sqrt(2);function up(r,[n,i]){let o=0,a=0;if(i===ud){n<0&&(n=0);let i=n/uf;switch(r){case"top-right":case"top-left":a=i-7;break;case"bottom-right":case"bottom-left":a=-i+7;break;case"bottom":a=-n+7;break;case"top":a=n-7}switch(r){case"top-right":case"bottom-right":o=-i;break;case"top-left":case"bottom-left":o=i;break;case"left":o=n;break;case"right":o=-n}}else{switch(n=Math.abs(n),i=Math.abs(i),r){case"top-right":case"top-left":case"top":a=i-7;break;case"bottom-right":case"bottom-left":case"bottom":a=-i+7}switch(r){case"top-right":case"bottom-right":case"right":o=-n;break;case"top-left":case"bottom-left":case"left":o=n}}return[o,a]}function um(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ug(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_){let v=function(r,n,i,o,a,s,l,u){let c=[];if(0===n.positionedLines.length)return c;let h=o.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,d=function(r){let n=r[0],i=r[1],o=n*i;return o>0?[n,-i]:o<0?[-n,i]:0===n?[i,n]:[i,-n]}(i),f=Math.abs(n.top-n.bottom);for(let r of n.positionedLines)f-=r.lineOffset;let p=n.positionedLines.length,m=f/p,g=n.top-i[1];for(let r=0;r<p;++r){let o=n.positionedLines[r];for(let s of(g=function(r,n,i,o){let a=n+r.positionedLines[o].lineOffset;return 0===o?i+a/2:i+(a+(n+r.positionedLines[o-1].lineOffset))/2}(n,m,g,r),o.positionedGlyphs)){let r,o,f,p;if(!s.rect)continue;let m=s.rect||{},y=4,_=!0,v=1,b=0;if(s.imageName){let r=l[s.imageName];if(!r)continue;if(r.sdf){Y("SDF images are not supported in formatted text and will be ignored.");continue}_=!1,y=1/(v=r.pixelRatio)}let x=(a||u)&&s.vertical,w=s.metrics.advance*s.scale/2,E=s.metrics,C=s.rect;if(null===C)continue;u&&n.verticalizable&&(b=s.imageName?w-s.metrics.width*s.scale/2:0);let S=a?[s.x+w,s.y]:[0,0],M=[0,0],k=[0,0],I=!1;a||(x?(k=[s.x+w+d[0],s.y+d[1]-b],I=!0):M=[s.x+w+i[0],s.y+i[1]-b]);let L=C.w*s.scale/(v*(s.localGlyph?2:1)),A=C.h*s.scale/(v*(s.localGlyph?2:1));if(x){let n=s.y-g,i=new T(-w,w-n),a=-Math.PI/2,l=new T(...k);(r=new T(-w+M[0],M[1]))._rotateAround(a,i)._add(l),r.x+=-n+w,r.y-=(E.left-y)*s.scale;let u=s.imageName?E.advance*s.scale:24*s.scale,c=String.fromCharCode(s.glyph);""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c?r.x+=(1-y)*s.scale:""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c||""===c?r.x+=u-E.height*s.scale+(-y-1)*s.scale:r.x+=s.imageName||E.width+2*y===C.w&&E.height+2*y===C.h?(u-A)/2:(u-(E.height+2*y)*s.scale)/2,o=new T(r.x,r.y-L),f=new T(r.x+A,r.y),p=new T(r.x+A,r.y-L)}else{let n=(E.left-y)*s.scale-w+M[0],i=(-E.top-y)*s.scale+M[1],a=n+L,l=i+A;r=new T(n,i),o=new T(a,i),f=new T(n,l),p=new T(a,l)}if(h){let n;n=a?new T(0,0):I?new T(d[0],d[1]):new T(i[0],i[1]),r._rotateAround(h,n),o._rotateAround(h,n),f._rotateAround(h,n),p._rotateAround(h,n)}let z=new T(0,0),P=new T(0,0);c.push({tl:r,tr:o,bl:f,br:p,tex:m,writingMode:n.writingMode,glyphOffset:S,sectionIndex:s.sectionIndex,isSDF:_,pixelOffsetTL:z,pixelOffsetBR:P,minFontScaleX:0,minFontScaleY:0})}}return c}(0,o,c,s,l,u,a,r.allowVerticalPlacement),b=r.textSizeData,x=null;for(let o of("source"===b.kind?(x=[128*s.layout.get("text-size").evaluate(u,{},_)])[0]>32640&&Y(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`):"composite"===b.kind&&((x=[128*g.compositeTextSizes[0].evaluate(u,{},_),128*g.compositeTextSizes[1].evaluate(u,{},_)])[0]>32640||x[1]>32640)&&Y(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`),r.addSymbols(r.text,v,x,c,l,u,d,n,i,h.lineStartIndex,h.lineLength,m,y,_),f))p[o]=r.text.placedSymbolArray.length-1;return 4*v.length}function uy(r){for(let n in r)return r[n];return null}function u_(r,n,i,o,a,s,l,u,c,h){let d=l.top,f=l.bottom,p=l.left,m=l.right,g=l.collisionPadding;if(g&&(p-=g[0],d-=g[1],m+=g[2],f+=g[3]),c){let r=new T(p,d),n=new T(m,d),i=new T(p,f),o=new T(m,f),a=c*M,s=new T(0,0);h&&(s=new T(h[0],h[1])),r._rotateAround(a,s),n._rotateAround(a,s),i._rotateAround(a,s),o._rotateAround(a,s),p=Math.min(r.x,n.x,i.x,o.x),m=Math.max(r.x,n.x,i.x,o.x),d=Math.min(r.y,n.y,i.y,o.y),f=Math.max(r.y,n.y,i.y,o.y)}return r.emplaceBack(n.x,n.y,n.z,i.x,i.y,p,d,m,f,u,o,a,s),r.length-1}function uv(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);let n=r.bottom-r.top;return n>0?Math.max(10,n):null}function ub(r,n){let i=r.fovAboveCenter,o=r.elevation?r.elevation.getMinElevationBelowMSL()*n:0,a=(r._camera.position[2]*r.worldSize-o)/Math.cos(r._pitch),s=Math.sin(i)*a/Math.sin(Math.max(Math.PI/2-r._pitch-i,.01)),l=Math.sin(r._pitch)*s+a;return Math.min(1.01*l,a*(1/r._horizonShift))}function ux(r,n){if(!n.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:n};let i=Math.pow(2,-r.z),o=r.x*i,a=(r.x+1)*i,s=r.y*i,l=(r.y+1)*i,u=aT(o),c=aT(a),h=aM(s),d=aM(l),f=n.project(u,h),p=n.project(c,h),m=n.project(c,d),g=n.project(u,d),y=Math.min(f.x,p.x,m.x,g.x),_=Math.min(f.y,p.y,m.y,g.y),v=Math.max(f.x,p.x,m.x,g.x),b=Math.max(f.y,p.y,m.y,g.y),x=i/16;function w(r,i,o,a,s,l){let u=(o+s)/2,c=(a+l)/2,h=n.project(aT(u),aM(c)),d=Math.max(0,y-h.x,_-h.y,h.x-v,h.y-b);y=Math.min(y,h.x),v=Math.max(v,h.x),_=Math.min(_,h.y),b=Math.max(b,h.y),d>x&&(w(r,h,o,a,u,c),w(h,i,u,c,s,l))}w(f,p,o,s,a,s),w(p,m,a,s,a,l),w(m,g,a,l,o,l),w(g,f,o,l,o,s),y-=x,_-=x,v+=x,b+=x;let E=1/Math.max(v-y,b-_);return{scale:E,x:y*E,y:_*E,x2:v*E,y2:b*E,projection:n}}let uw=om(new Float32Array(16));class uE{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,n){return{x:0,y:0,z:0}}unproject(r,n){return new aw(0,0)}projectTilePoint(r,n,i){return{x:r,y:n,z:0}}locationPoint(r,n,i=!0){return r._coordinatePoint(r.locationCoordinate(n),i)}pixelsPerMeter(r,n){return 1/aE(r)*n}pixelSpaceConversion(r,n,i){return 1}farthestPixelDistance(r){return ub(r,r.pixelsPerMeter)}pointCoordinate(r,n,i,o){let a=r.horizonLineFromTop(!1),s=new T(n,Math.max(a,i));return r.rayIntersectionCoordinate(r.pointRayIntersection(s,o))}pointCoordinate3D(r,n,i){let o=new T(n,i);if(r.elevation)return r.elevation.pointCoordinate(o);{let n=this.pointCoordinate(r,o.x,o.y,0);return[n.x,n.y,n.z]}}isPointAboveHorizon(r,n){if(r.elevation)return!this.pointCoordinate3D(r,n.x,n.y);let i=r.horizonLineFromTop();return n.y<i}createInversionMatrix(r,n){return uw}createTileMatrix(r,n,i){let o,a,s;let l=i.canonical,u=om(new Float64Array(16));if(this.isReprojectedInTileSpace){let c=ux(l,this);o=1,a=c.x+i.wrap*c.scale,s=c.y,ov(u,u,[o/c.scale,o/c.scale,r.pixelsPerMeter/n])}else o=n/r.zoomScale(l.z),a=(l.x+Math.pow(2,l.z)*i.wrap)*o,s=l.y*o;return o_(u,u,[a,s,0]),ov(u,u,[o/8192,o/8192,1]),u}upVector(r,n,i){return[0,0,1]}upVectorScale(r,n,i){return{metersToTile:1}}}class uC extends uE{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];let[n,i]=this.parallels=r.parallels||[29.5,45.5],o=Math.sin(n*M);this.n=(o+Math.sin(i*M))/2,this.c=1+o*(2*this.n-o),this.r0=Math.sqrt(this.c)/this.n}project(r,n){let{n:i,c:o,r0:a}=this,s=(r-this.center[0])*M,l=n*M,u=Math.sqrt(o-2*i*Math.sin(l))/i;return{x:u*Math.sin(s*i),y:u*Math.cos(s*i)-a,z:0}}unproject(r,n){let{n:i,c:o,r0:a}=this,s=a+n,l=Math.atan2(r,Math.abs(s))*Math.sign(s);s*i<0&&(l-=Math.PI*Math.sign(r)*Math.sign(s));let u=this.center[0]*M*i;l=D(l,-Math.PI-u,Math.PI-u);let c=P(l/i*k+this.center[0],-180,180),h=Math.asin(P((o-(r*r+s*s)*i*i)/(2*i),-1,1)),d=P(h*k,-85.051129,85.051129);return new aw(c,d)}}let uS=Math.sqrt(3)/2;class uT extends uE{project(r,n){n=n/180*Math.PI,r=r/180*Math.PI;let i=Math.asin(uS*Math.sin(n)),o=i*i,a=o*o*o;return{x:.5*(r*Math.cos(i)/(uS*(1.340264+-.24331799999999998*o+a*(.0062510000000000005+.034164*o)))/Math.PI+.5),y:1-.5*(i*(1.340264+-.081106*o+a*(893e-6+.003796*o))/Math.PI+1),z:0}}unproject(r,n){r=(2*r-.5)*Math.PI;let i=n=(2*(1-n)-1)*Math.PI,o=i*i,a=o*o*o;for(let r,s,l=0;l<12&&(s=i*(1.340264+-.081106*o+a*(893e-6+.003796*o))-n,a=(o=(i=P(i-(r=s/(1.340264+-.24331799999999998*o+a*(.0062510000000000005+.034164*o))),-Math.PI/3,Math.PI/3))*i)*o*o,!(1e-12>Math.abs(r)));++l);let s=uS*r*(1.340264+-.24331799999999998*o+a*(.0062510000000000005+.034164*o))/Math.cos(i),l=Math.asin(Math.sin(i)/uS),u=P(180*s/Math.PI,-180,180),c=P(180*l/Math.PI,-85.051129,85.051129);return new aw(u,c)}}class uM extends uE{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,n){return{x:.5+r/360,y:.5-n/360,z:0}}unproject(r,n){let i=P(360*(.5-n),-85.051129,85.051129);return new aw(360*(r-.5),i)}}let uk=Math.PI/2;function uI(r){return Math.tan((uk+r)/2)}class uL extends uE{constructor(r){super(r),this.center=r.center||[0,30];let[n,i]=this.parallels=r.parallels||[30,30],o=n*M,a=i*M;this.southernCenter=o+a<0,this.southernCenter&&(o=-o,a=-a);let s=Math.cos(o),l=uI(o);this.n=o===a?Math.sin(o):Math.log(s/Math.cos(a))/Math.log(uI(a)/l),this.f=s*Math.pow(uI(o),this.n)/this.n}project(r,n){n*=M,this.southernCenter&&(n=-n),r=(r-this.center[0])*M;let{n:i,f:o}=this;o>0?n<-uk+1e-6&&(n=-uk+1e-6):n>uk-1e-6&&(n=uk-1e-6);let a=o/Math.pow(uI(n),i),s=a*Math.sin(i*r),l=o-a*Math.cos(i*r);return s=.5*(s/Math.PI+.5),l=.5*(l/Math.PI+.5),{x:s,y:this.southernCenter?l:1-l,z:0}}unproject(r,n){r=(2*r-.5)*Math.PI,this.southernCenter&&(n=1-n),n=(2*(1-n)-.5)*Math.PI;let{n:i,f:o}=this,a=o-n,s=Math.sign(a),l=Math.sign(i)*Math.sqrt(r*r+a*a),u=Math.atan2(r,Math.abs(a))*s;a*i<0&&(u-=Math.PI*Math.sign(r)*s);let c=P(u/i*k+this.center[0],-180,180),h=P((2*Math.atan(Math.pow(o/l,1/i))-uk)*k,-85.051129,85.051129);return new aw(c,this.southernCenter?-h:h)}}class uA extends uE{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,n){return{x:aC(r),y:aS(n),z:0}}unproject(r,n){let i=aT(r),o=aM(n);return new aw(i,o)}}let uz=85.051129*M;class uP extends uE{project(r,n){let i=(n*=M)*n,o=i*i;return{x:.5*((r*=M)*(.8707-.131979*i+o*(o*(.003971*i-.001529*o)-.013791))/Math.PI+.5),y:1-.5*(n*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))/Math.PI+1),z:0}}unproject(r,n){r=(2*r-.5)*Math.PI;let i=n=(2*(1-n)-1)*Math.PI,o=25,a=0,s=i*i;do{s=i*i;let r=s*s;a=(i*(1.007226+s*(.015085+r*(.028874*s-.044475-.005916*r)))-n)/(1.007226+s*(.045255+r*(.259866*s-.311325-.005916*11*r))),i=P(i-a,-uz,uz)}while(Math.abs(a)>1e-6&&--o>0)s=i*i;let l=P(r/(.8707+s*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979))*k,-180,180),u=i*k;return new aw(l,u)}}let uO=85.051129*M;class uD extends uE{project(r,n){n*=M,r*=M;let i=Math.cos(n),o=2/Math.PI,a=Math.acos(i*Math.cos(r/2)),s=Math.sin(a)/a,l=.5*(r*o+2*i*Math.sin(r/2)/s)||0,u=.5*(n+Math.sin(n)/s)||0;return{x:.5*(l/Math.PI+.5),y:1-.5*(u/Math.PI+1),z:0}}unproject(r,n){let i=r=(2*r-.5)*Math.PI,o=n=(2*(1-n)-1)*Math.PI,a=25,s=0,l=0;do{let a=Math.cos(o),u=Math.sin(o),c=2*u*a,h=u*u,d=a*a,f=Math.cos(i/2),p=Math.sin(i/2),m=2*f*p,g=p*p,y=1-d*f*f,_=y?1/y:0,v=y?Math.acos(a*f)*Math.sqrt(1/y):0,b=.5*(2*v*a*p+2*i/Math.PI)-r,x=.5*(v*u+o)-n,w=.5*_*(d*g+v*a*f*h)+1/Math.PI,E=_*(m*c/4-v*u*p),C=.125*_*(c*p-v*u*d*m),S=.5*_*(h*f+v*g*a)+.5,T=E*C-S*w;s=(x*E-b*S)/T,l=(b*C-x*w)/T,i=P(i-s,-Math.PI,Math.PI),o=P(o-l,-uO,uO)}while((Math.abs(s)>1e-6||Math.abs(l)>1e-6)&&--a>0)return new aw(i*k,o*k)}}class uR extends uE{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(this.parallels[0]*M)),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,n){let{scale:i,cosPhi:o}=this;return{x:r*M*o*i+.5,y:-Math.sin(n*M)/o*i+.5,z:0}}unproject(r,n){let{scale:i,cosPhi:o}=this,a=-(n-.5)/i,s=P((r-.5)/i*k/o,-180,180),l=Math.asin(P(a*o,-1,1)),u=P(l*k,-85.051129,85.051129);return new aw(s,u)}}class uF extends uA{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,n,i){let o=as(r,n,i);return oB(o,o,ac(o7(i))),{x:o[0],y:o[1],z:o[2]}}locationPoint(r,n){let i=aa(n.lat,n.lng),o=oD([],i),a=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(n),r._centerAltitude):r._centerAltitude;oO(i,i,o,1/aE(0)*8192*a);let s=om(new Float64Array(16));return oy(s,r.pixelMatrix,r.globeMatrix),oB(i,i,s),new T(i[0],i[1])}pixelsPerMeter(r,n){return 1/aE(0)*n}pixelSpaceConversion(r,n,i){let o=1/aE(r)*n,a=tQ(1/aE(45)*n,o,i);return this.pixelsPerMeter(r,n)/a}createTileMatrix(r,n,i){let o=ah(o7(i.canonical));return oy(new Float64Array(16),r.globeMatrix,o)}createInversionMatrix(r,n){let{center:i}=r,o=ac(o7(n));return ox(o,o,i.lng*M),ob(o,o,i.lat*M),ov(o,o,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(o)}pointCoordinate(r,n,i,o){return o6(r,n,i,!0)||new aI(0,0)}pointCoordinate3D(r,n,i){let o=this.pointCoordinate(r,n,i,0);return[o.x,o.y,o.z]}isPointAboveHorizon(r,n){return!o6(r,n.x,n.y,!1)}farthestPixelDistance(r){let n=function(r,n){let i;let o=r.cameraToCenterDistance,a=r._centerAltitude*n,s=r._camera,l=r._camera.forward(),u=ok([],oP([],l,-o),[0,0,a]),c=r.worldSize/(2*Math.PI),h=[0,0,-c],d=r.width/r.height,f=Math.tan(r.fovAboveCenter),p=oP([],s.up(),f),m=oP([],s.right(),f*d),g=oD([],ok([],ok([],l,p),m)),y=[];if(new oK(u,g).closestPointOnSphere(h,c,y)){let n=ok([],y,h),o=oI([],n,u);i=Math.cos(r.fovAboveCenter)*oT(o)}else{let r=oI([],u,h),n=oI([],h,u);oD(n,n);let o=oT(r)-c;i=Math.sqrt(o*(o+2*c));let a=Math.acos(i/(c+o))-Math.acos(oR(l,n));i*=Math.cos(a)}return 1.01*i}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),i=af(r.zoom);if(i>0){let o=ub(r,1/aE(r.center.lat)*r.worldSize),a=r.worldSize/(2*Math.PI),s=Math.max(r.width,r.height)/r.worldSize*Math.PI;return tQ(n,o+a*(1-Math.cos(s)),Math.pow(i,10))}return n}upVector(r,n,i){return as(n,i,r,1)}upVectorScale(r){return{metersToTile:o5(al(o7(r)))}}}function uB(r){let n=r.parallels,i=!!n&&.01>Math.abs(n[0]+n[1]);switch(r.name){case"mercator":return new uA(r);case"equirectangular":return new uM(r);case"naturalEarth":return new uP(r);case"equalEarth":return new uT(r);case"winkelTripel":return new uD(r);case"albers":return i?new uR(r):new uC(r);case"lambertConformalConic":return i?new uR(r):new uL(r);case"globe":return new uF(r)}throw Error(`Invalid projection name: ${r.name}`)}let uN=sj.types,uj=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function uV(r,n,i,o,a,s,l,u,c,h,d,f,p){let m=u?Math.min(32640,Math.round(u[0])):0,g=u?Math.min(32640,Math.round(u[1])):0;r.emplaceBack(n,i,Math.round(32*o),Math.round(32*a),s,l,(m<<1)+(c?1:0),g,16*h,16*d,256*f,256*p)}function uU(r,n,i,o,a,s,l){r.emplaceBack(n,i,o,a,s,l)}function uq(r,n,i,o,a){r.emplaceBack(n,i,o,a),r.emplaceBack(n,i,o,a),r.emplaceBack(n,i,o,a),r.emplaceBack(n,i,o,a)}class u${constructor(r){this.layoutVertexArray=new ih,this.indexArray=new ib,this.programConfigurations=r,this.segments=new oc,this.dynamicLayoutVertexArray=new is,this.opacityVertexArray=new ip,this.placedSymbolArray=new iz,this.globeExtVertexArray=new id}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(r,n,i,o){this.isEmpty()||(i&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,lh.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,lf.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,uj,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,ld.members,!0)),this.opacityVertexBuffer.itemSize=1),(i||o)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}nS(u$,"SymbolBuffers");class uH{constructor(r,n,i){this.layoutVertexArray=new r,this.layoutAttributes=n,this.indexArray=new i,this.segments=new oc,this.collisionVertexArray=new i_,this.collisionVertexArrayExt=new iv}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,lp.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,lm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}nS(uH,"CollisionBuffers");class uZ{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(r=>r.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=om([]),this.placementViewportMatrix=om([]);let n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=l_(this.zoom,n["text-size"]),this.iconSizeData=l_(this.zoom,n["icon-size"]);let i=this.layers[0].layout,o=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==o.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=i.get("text-writing-mode").map(r=>lW[r]),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.sourceID=r.sourceID,this.projection=r.projection}createArrays(){this.text=new u$(new ot(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new u$(new ot(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new iD,this.lineVertexArray=new iR,this.symbolInstances=new iO}calculateGlyphDependencies(r,n,i,o,a){for(let i=0;i<r.length;i++)if(n[r.charCodeAt(i)]=!0,o&&a){let o=lw[r.charAt(i)];o&&(n[o.charCodeAt(0)]=!0)}}populate(r,n,i,o){let a=this.layers[0],s=a.layout,l="globe"===this.projection.name,u=s.get("text-font"),c=s.get("text-field"),h=s.get("icon-image"),d=("constant"!==c.value.kind||c.value.value instanceof tg&&!c.value.value.isEmpty()||c.value.value.toString().length>0)&&("constant"!==u.value.kind||u.value.value.length>0),f="constant"!==h.value.kind||!!h.value.value||Object.keys(h.parameters).length>0,p=s.get("symbol-sort-key");if(this.features=[],!d&&!f)return;let m=n.iconDependencies,g=n.glyphDependencies,y=n.availableImages,_=new nG(this.zoom);for(let{feature:n,id:c,index:h,sourceLayerIndex:v}of r){let r,b;let x=a._featureFilter.needGeometry,w=aP(n,x);if(!a._featureFilter.filter(_,w,i))continue;if(x||(w.geometry=az(n,i,o)),l&&1!==n.type&&i.z<=5){let r=w.geometry,n=(r,n)=>.98078528056>oR(as(r.x,r.y,i,1),as(n.x,n.y,i,1));for(let i=0;i<r.length;i++)r[i]=function(r,n){let i=r[0],o=[i];for(let a=1;a<r.length;a++){let s=r[a];(function r(n,i,o,a){if(a(i,o)){let s=i.add(o)._mult(.5);r(n,i,s,a),r(n,s,o,a)}else n.push(o)})(o,i,s,n),i=s}return o}(r[i],n)}if(d){let n=a.getValueAndResolveTokens("text-field",w,i,y),o=tg.factory(n);(function(r){for(let n of r.sections)if(function(r){for(let n of r)if(nO(n.charCodeAt(0)))return!0;return!1}(n.text))return!0;return!1})(o)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===n$()||this.hasRTLText&&nZ.isParsed())&&(r=function(r,n,i){return r.sections.forEach(r=>{r.text=function(r,n,i){let o=n.layout.get("text-transform").evaluate(i,{});return"uppercase"===o?r=r.toLocaleUpperCase():"lowercase"===o&&(r=r.toLocaleLowerCase()),nZ.applyArabicShaping&&(r=nZ.applyArabicShaping(r)),r}(r.text,n,i)}),r}(o,a,w))}if(f){let r=a.getValueAndResolveTokens("icon-image",w,i,y);b=r instanceof ty?r:ty.fromString(r)}if(!r&&!b)continue;let E=this.sortFeaturesByKey?p.evaluate(w,{},i):void 0;if(this.features.push({id:c,text:r,icon:b,index:h,sourceLayerIndex:v,geometry:w.geometry,properties:n.properties,type:uN[n.type],sortKey:E}),b&&(m[b.name]=!0),r){let n=u.evaluate(w,{},i).join(","),o="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");for(let i of(this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(lW.vertical)>=0,r.sections))if(i.image)m[i.image.name]=!0;else{let a=nA(r.toString()),s=i.fontStack||n,l=g[s]=g[s]||{};this.calculateGlyphDependencies(i.text,l,o,this.allowVerticalPlacement,a)}}}"line"===s.get("symbol-placement")&&(this.features=function(r){let n={},i={},o=[],a=0;function s(n){o.push(r[n]),a++}function l(r,n,a){let s=i[r];return delete i[r],i[n]=s,o[s].geometry[0].pop(),o[s].geometry[0]=o[s].geometry[0].concat(a[0]),s}function u(r,i,a){let s=n[i];return delete n[i],n[r]=s,o[s].geometry[0].shift(),o[s].geometry[0]=a[0].concat(o[s].geometry[0]),s}function c(r,n,i){let o=i?n[0][n[0].length-1]:n[0][0];return`${r}:${o.x}:${o.y}`}for(let h=0;h<r.length;h++){let d=r[h],f=d.geometry,p=d.text?d.text.toString():null;if(!p){s(h);continue}let m=c(p,f),g=c(p,f,!0);if(m in i&&g in n&&i[m]!==n[g]){let r=u(m,g,f),a=l(m,g,o[r].geometry);delete n[m],delete i[g],i[c(p,o[a].geometry,!0)]=a,o[r].geometry=null}else m in i?l(m,g,f):g in n?u(m,g,f):(s(h),n[m]=a-1,i[g]=a-1)}return o.filter(r=>r.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((r,n)=>r.sortKey-n.sortKey)}update(r,n,i,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,n,this.layers,i,o),this.icon.programConfigurations.updatePaintArrays(r,n,this.layers,i,o))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=uB(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,n){let i=this.lineVertexArray.length;if(void 0!==r.segment)for(let{x:r,y:i}of n)this.lineVertexArray.emplaceBack(r,i);return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(r,n,i,o,a,s,l,u,c,h,d,f,p,m){let g=r.indexArray,y=r.layoutVertexArray,_=r.globeExtVertexArray,v=r.segments.prepareSegment(4*n.length,y,g,this.canOverlap?s.sortKey:void 0),b=this.glyphOffsetArray.length,x=v.vertexLength,w=this.allowVerticalPlacement&&l===lW.vertical?Math.PI/2:0,E=s.text&&s.text.sections;for(let o=0;o<n.length;o++){let{tl:a,tr:l,bl:h,br:d,tex:f,pixelOffsetTL:b,pixelOffsetBR:x,minFontScaleX:C,minFontScaleY:S,glyphOffset:T,isSDF:M,sectionIndex:k}=n[o],I=v.vertexLength,L=T[1];if(uV(y,c.x,c.y,a.x,L+a.y,f.x,f.y,i,M,b.x,b.y,C,S),uV(y,c.x,c.y,l.x,L+l.y,f.x+f.w,f.y,i,M,x.x,b.y,C,S),uV(y,c.x,c.y,h.x,L+h.y,f.x,f.y+f.h,i,M,b.x,x.y,C,S),uV(y,c.x,c.y,d.x,L+d.y,f.x+f.w,f.y+f.h,i,M,x.x,x.y,C,S),u){let{x:n,y:i,z:o}=u.anchor,[a,s,l]=u.up;uU(_,n,i,o,a,s,l),uU(_,n,i,o,a,s,l),uU(_,n,i,o,a,s,l),uU(_,n,i,o,a,s,l),uq(r.dynamicLayoutVertexArray,n,i,o,w)}else uq(r.dynamicLayoutVertexArray,c.x,c.y,c.z,w);g.emplaceBack(I,I+1,I+2),g.emplaceBack(I+1,I+2,I+3),v.vertexLength+=4,v.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(T[0]),o!==n.length-1&&k===n[o+1].sectionIndex||r.programConfigurations.populatePaintArrays(y.length,s,s.index,{},p,m,E&&E[k])}let C=u?u.anchor:c;r.placedSymbolArray.emplaceBack(C.x,C.y,C.z,c.x,c.y,b,this.glyphOffsetArray.length-b,x,h,d,c.segment,i?i[0]:0,i?i[1]:0,o[0],o[1],l,0,!1,0,f,0)}_commitLayoutVertex(r,n,i,o,a,s,l){r.emplaceBack(n,i,o,a,s,Math.round(l.x),Math.round(l.y))}_addCollisionDebugVertices(r,n,i,o,a,s,l){let u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=u.vertexLength,h=l.tileAnchorX,d=l.tileAnchorY;for(let r=0;r<4;r++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(n,-r.padding,-r.padding),i.collisionVertexArrayExt.emplaceBack(n,r.padding,-r.padding),i.collisionVertexArrayExt.emplaceBack(n,r.padding,r.padding),i.collisionVertexArrayExt.emplaceBack(n,-r.padding,r.padding),this._commitLayoutVertex(i.layoutVertexArray,o,a,s,h,d,new T(r.x1,r.y1)),this._commitLayoutVertex(i.layoutVertexArray,o,a,s,h,d,new T(r.x2,r.y1)),this._commitLayoutVertex(i.layoutVertexArray,o,a,s,h,d,new T(r.x2,r.y2)),this._commitLayoutVertex(i.layoutVertexArray,o,a,s,h,d,new T(r.x1,r.y2)),u.vertexLength+=4;let f=i.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),u.primitiveLength+=4}_addTextDebugCollisionBoxes(r,n,i,o,a,s){for(let l=o;l<a;l++){let o=i.get(l),a=this.getSymbolInstanceTextSize(r,s,n,l);this._addCollisionDebugVertices(o,a,this.textCollisionBox,o.projectedAnchorX,o.projectedAnchorY,o.projectedAnchorZ,s)}}_addIconDebugCollisionBoxes(r,n,i,o,a,s){for(let l=o;l<a;l++){let o=i.get(l),a=this.getSymbolInstanceIconSize(r,n,s.placedIconSymbolIndex);this._addCollisionDebugVertices(o,a,this.iconCollisionBox,o.projectedAnchorX,o.projectedAnchorY,o.projectedAnchorZ,s)}}generateCollisionDebugBuffers(r,n){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uH(ig,lg.members,iT),this.iconCollisionBox=new uH(ig,lg.members,iT);let i=lb(this.iconSizeData,r),o=lb(this.textSizeData,r);for(let a=0;a<this.symbolInstances.length;a++){let s=this.symbolInstances.get(a);this._addTextDebugCollisionBoxes(o,r,n,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(o,r,n,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(i,r,n,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(i,r,n,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s)}}getSymbolInstanceTextSize(r,n,i,o){let a=this.text.placedSymbolArray.get(n.rightJustifiedTextSymbolIndex>=0?n.rightJustifiedTextSymbolIndex:n.centerJustifiedTextSymbolIndex>=0?n.centerJustifiedTextSymbolIndex:n.leftJustifiedTextSymbolIndex>=0?n.leftJustifiedTextSymbolIndex:n.verticalPlacedTextSymbolIndex>=0?n.verticalPlacedTextSymbolIndex:o),s=lv(this.textSizeData,r,a)/24;return this.tilePixelRatio*s}getSymbolInstanceIconSize(r,n,i){let o=this.icon.placedSymbolArray.get(i),a=lv(this.iconSizeData,r,o);return this.tilePixelRatio*a}_commitDebugCollisionVertexUpdate(r,n,i){r.emplaceBack(n,-i,-i),r.emplaceBack(n,i,-i),r.emplaceBack(n,i,i),r.emplaceBack(n,-i,i)}_updateTextDebugCollisionBoxes(r,n,i,o,a,s){for(let l=o;l<a;l++){let o=i.get(l),a=this.getSymbolInstanceTextSize(r,s,n,l);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,a,o.padding)}}_updateIconDebugCollisionBoxes(r,n,i,o,a,s){for(let l=o;l<a;l++){let o=i.get(l),a=this.getSymbolInstanceIconSize(r,n,s);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,a,o.padding)}}updateCollisionDebugBuffers(r,n){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();let i=lb(this.iconSizeData,r),o=lb(this.textSizeData,r);for(let a=0;a<this.symbolInstances.length;a++){let s=this.symbolInstances.get(a);this._updateTextDebugCollisionBoxes(o,r,n,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(o,r,n,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(i,r,n,s.iconBoxStartIndex,s.iconBoxEndIndex,s.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(i,r,n,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,n,i,o,a,s,l,u,c){let h={};if(n<i){let{x1:i,y1:o,x2:a,y2:s,padding:l,projectedAnchorX:u,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p,featureIndex:m}=r.get(n);h.textBox={x1:i,y1:o,x2:a,y2:s,padding:l,projectedAnchorX:u,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p},h.textFeatureIndex=m}if(o<a){let{x1:n,y1:i,x2:a,y2:s,padding:l,projectedAnchorX:u,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p,featureIndex:m}=r.get(o);h.verticalTextBox={x1:n,y1:i,x2:a,y2:s,padding:l,projectedAnchorX:u,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p},h.verticalTextFeatureIndex=m}if(s<l){let{x1:n,y1:i,x2:o,y2:a,padding:l,projectedAnchorX:u,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p,featureIndex:m}=r.get(s);h.iconBox={x1:n,y1:i,x2:o,y2:a,padding:l,projectedAnchorX:u,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p},h.iconFeatureIndex=m}if(u<c){let{x1:n,y1:i,x2:o,y2:a,padding:s,projectedAnchorX:l,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p,featureIndex:m}=r.get(u);h.verticalIconBox={x1:n,y1:i,x2:o,y2:a,padding:s,projectedAnchorX:l,projectedAnchorY:c,projectedAnchorZ:d,tileAnchorX:f,tileAnchorY:p},h.verticalIconFeatureIndex=m}return h}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){let i=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,n){let i=r.placedSymbolArray.get(n),o=i.vertexStartIndex+4*i.numGlyphs;for(let n=i.vertexStartIndex;n<o;n+=4)r.indexArray.emplaceBack(n,n+1,n+2),r.indexArray.emplaceBack(n+1,n+2,n+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;let n=Math.sin(r),i=Math.cos(r),o=[],a=[],s=[];for(let r=0;r<this.symbolInstances.length;++r){s.push(r);let l=this.symbolInstances.get(r);o.push(0|Math.round(n*l.tileAnchorX+i*l.tileAnchorY)),a.push(l.featureIndex)}return s.sort((r,n)=>o[r]-o[n]||a[n]-a[r]),s}addToSortKeyRanges(r,n){let i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===n?i.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){for(let n of(this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[],this.symbolInstanceIndexes)){let r=this.symbolInstances.get(n);this.featureSortOrder.push(r.featureIndex);let{rightJustifiedTextSymbolIndex:i,centerJustifiedTextSymbolIndex:o,leftJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:s,placedIconSymbolIndex:l,verticalPlacedIconSymbolIndex:u}=r;i>=0&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&o!==i&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&a!==o&&a!==i&&this.addIndicesForPlacedSymbol(this.text,a),s>=0&&this.addIndicesForPlacedSymbol(this.text,s),l>=0&&this.addIndicesForPlacedSymbol(this.icon,l),u>=0&&this.addIndicesForPlacedSymbol(this.icon,u)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}nS(uZ,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),uZ.MAX_GLYPHS=65535,uZ.addDynamicAttributes=uq;let uG=new n5({"symbol-placement":new n2(eX.layout_symbol["symbol-placement"]),"symbol-spacing":new n2(eX.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new n2(eX.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new n4(eX.layout_symbol["symbol-sort-key"]),"symbol-z-order":new n2(eX.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new n2(eX.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new n2(eX.layout_symbol["icon-ignore-placement"]),"icon-optional":new n2(eX.layout_symbol["icon-optional"]),"icon-rotation-alignment":new n2(eX.layout_symbol["icon-rotation-alignment"]),"icon-size":new n4(eX.layout_symbol["icon-size"]),"icon-text-fit":new n2(eX.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new n2(eX.layout_symbol["icon-text-fit-padding"]),"icon-image":new n4(eX.layout_symbol["icon-image"]),"icon-rotate":new n4(eX.layout_symbol["icon-rotate"]),"icon-padding":new n2(eX.layout_symbol["icon-padding"]),"icon-keep-upright":new n2(eX.layout_symbol["icon-keep-upright"]),"icon-offset":new n4(eX.layout_symbol["icon-offset"]),"icon-anchor":new n4(eX.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new n2(eX.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new n2(eX.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new n2(eX.layout_symbol["text-rotation-alignment"]),"text-field":new n4(eX.layout_symbol["text-field"]),"text-font":new n4(eX.layout_symbol["text-font"]),"text-size":new n4(eX.layout_symbol["text-size"]),"text-max-width":new n4(eX.layout_symbol["text-max-width"]),"text-line-height":new n4(eX.layout_symbol["text-line-height"]),"text-letter-spacing":new n4(eX.layout_symbol["text-letter-spacing"]),"text-justify":new n4(eX.layout_symbol["text-justify"]),"text-radial-offset":new n4(eX.layout_symbol["text-radial-offset"]),"text-variable-anchor":new n2(eX.layout_symbol["text-variable-anchor"]),"text-anchor":new n4(eX.layout_symbol["text-anchor"]),"text-max-angle":new n2(eX.layout_symbol["text-max-angle"]),"text-writing-mode":new n2(eX.layout_symbol["text-writing-mode"]),"text-rotate":new n4(eX.layout_symbol["text-rotate"]),"text-padding":new n2(eX.layout_symbol["text-padding"]),"text-keep-upright":new n2(eX.layout_symbol["text-keep-upright"]),"text-transform":new n4(eX.layout_symbol["text-transform"]),"text-offset":new n4(eX.layout_symbol["text-offset"]),"text-allow-overlap":new n2(eX.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new n2(eX.layout_symbol["text-ignore-placement"]),"text-optional":new n2(eX.layout_symbol["text-optional"])});var uW={paint:new n5({"icon-opacity":new n4(eX.paint_symbol["icon-opacity"]),"icon-color":new n4(eX.paint_symbol["icon-color"]),"icon-halo-color":new n4(eX.paint_symbol["icon-halo-color"]),"icon-halo-width":new n4(eX.paint_symbol["icon-halo-width"]),"icon-halo-blur":new n4(eX.paint_symbol["icon-halo-blur"]),"icon-translate":new n2(eX.paint_symbol["icon-translate"]),"icon-translate-anchor":new n2(eX.paint_symbol["icon-translate-anchor"]),"text-opacity":new n4(eX.paint_symbol["text-opacity"]),"text-color":new n4(eX.paint_symbol["text-color"],{runtimeType:e5,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new n4(eX.paint_symbol["text-halo-color"]),"text-halo-width":new n4(eX.paint_symbol["text-halo-width"]),"text-halo-blur":new n4(eX.paint_symbol["text-halo-blur"]),"text-translate":new n2(eX.paint_symbol["text-translate"]),"text-translate-anchor":new n2(eX.paint_symbol["text-translate-anchor"])}),layout:uG};class uX{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:e1,this.defaultValue=r}evaluate(r){if(r.formattedSection){let n=this.defaultValue.property.overrides;if(n&&n.hasOverride(r.formattedSection))return n.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nS(uX,"FormatSectionOverride",{omit:["defaultValue"]});class uY extends os{constructor(r){super(r,uW)}recalculate(r,n){super.recalculate(r,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));let i=this.layout.get("text-writing-mode");if(i){let r=[];for(let n of i)0>r.indexOf(n)&&r.push(n);this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(r,n,i,o){var a;let s=this.layout.get(r).evaluate(n,{},i,o),l=this._unevaluatedLayout._values[r];return l.isDataDriven()||rH(l.value)||!s?s:(a=n.properties,s.replace(/{([^{}]+)}/g,(r,n)=>n in a?String(a[n]):""))}createBucket(r){return new uZ(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(let r of uW.paint.overridableProperties){if(!uY.hasPaintOverride(this.layout,r))continue;let n=this.paint.get(r),i=new uX(n),o=new r$(i,n.property.specification),a=null;a="constant"===n.value.kind||"source"===n.value.kind?new rG("source",o):new rW("composite",o,n.value.zoomStops,n.value._interpolationType),this.paint._values[r]=new n0(n.property,a,n.parameters)}}_handleOverridablePaintPropertyUpdate(r,n,i){return!(!this.layout||n.isDataDriven()||i.isDataDriven())&&uY.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,n){let i=r.get("text-field"),o=uW.paint.properties[n],a=!1,s=r=>{for(let n of r)if(o.overrides&&o.overrides.hasOverride(n))return void(a=!0)};if("constant"===i.value.kind&&i.value.value instanceof tg)s(i.value.value.sections);else if("source"===i.value.kind){let r=n=>{a||(n instanceof tw&&tb(n.value)===e7?s(n.value.sections):n instanceof tT?s(n.sections):n.eachChild(r))},n=i.value;n._styleExpression&&r(n._styleExpression.expression)}return a}getProgramConfiguration(r){return new oe(this,r)}}var uK={paint:new n5({"background-color":new n2(eX.paint_background["background-color"]),"background-pattern":new n2(eX.paint_background["background-pattern"]),"background-opacity":new n2(eX.paint_background["background-opacity"])})},uJ={paint:new n5({"raster-opacity":new n2(eX.paint_raster["raster-opacity"]),"raster-hue-rotate":new n2(eX.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new n2(eX.paint_raster["raster-brightness-min"]),"raster-brightness-max":new n2(eX.paint_raster["raster-brightness-max"]),"raster-saturation":new n2(eX.paint_raster["raster-saturation"]),"raster-contrast":new n2(eX.paint_raster["raster-contrast"]),"raster-resampling":new n2(eX.paint_raster["raster-resampling"]),"raster-fade-duration":new n2(eX.paint_raster["raster-fade-duration"])})};class uQ extends os{constructor(r){super(r,{}),this.implementation=r}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}var u0={paint:new n5({"sky-type":new n2(eX.paint_sky["sky-type"]),"sky-atmosphere-sun":new n2(eX.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new n2(eX.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new n2(eX.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new n2(eX.paint_sky["sky-gradient-radius"]),"sky-gradient":new n3(eX.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new n2(eX.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new n2(eX.paint_sky["sky-atmosphere-color"]),"sky-opacity":new n2(eX.paint_sky["sky-opacity"])})};function u1(r,n,i){let o=[0,0,1],a=o$([]);return oZ(a,a,i?-(r*M)+Math.PI:r*M),oH(a,a,-(n*M)),oN(o,o,a),oD(o,o)}let u2={circle:class extends os{constructor(r){super(r,aY)}createBucket(r){return new aR(r)}queryRadius(r){return aH("circle-radius",this,r)+aH("circle-stroke-width",this,r)+aZ(this.paint.get("circle-translate"))}queryIntersectsFeature(r,n,i,o,a,s,l,u){let c=aW(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,r.pixelToTileUnitsFactor),h=this.paint.get("circle-radius").evaluate(n,i)+this.paint.get("circle-stroke-width").evaluate(n,i);return aK(r,o,s,l,u,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),c,h)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new oe(this,r)}},heatmap:class extends os{createBucket(r){return new a0(r)}constructor(r){super(r,a6),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"heatmap-color"===r&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=a8({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return aH("heatmap-radius",this,r)}queryIntersectsFeature(r,n,i,o,a,s,l,u){let c=this.paint.get("heatmap-radius").evaluate(n,i);return aK(r,o,s,l,u,!0,!0,new T(0,0),c)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new oe(this,r)}},hillshade:class extends os{constructor(r){super(r,a9)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends os{constructor(r){super(r,sk)}getProgramIds(){let r=this.paint.get("fill-pattern"),n=r&&r.constantOr(1),i=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(r){return new oe(this,r)}recalculate(r,n){super.recalculate(r,n);let i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new sT(r)}queryRadius(){return aZ(this.paint.get("fill-translate"))}queryIntersectsFeature(r,n,i,o,a,s){return!r.queryGeometry.isAboveHorizon&&aB(aG(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,r.pixelToTileUnitsFactor),o)}isTileClipped(){return!0}},"fill-extrusion":class extends os{constructor(r){super(r,s1)}createBucket(r){return new sZ(r)}queryRadius(){return aZ(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new oe(this,r)}queryIntersectsFeature(r,n,i,o,a,s,l,u,c){var h,d,f,p;let m=aW(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,r.pixelToTileUnitsFactor),g=this.paint.get("fill-extrusion-height").evaluate(n,i),y=this.paint.get("fill-extrusion-base").evaluate(n,i),_=[0,0],v=u&&s.elevation,b=s.elevation?s.elevation.exaggeration():1,x=r.tile.getBucket(this);if(v&&x instanceof sZ){let r=x.centroidVertexArray,n=c+1;n<r.length&&(_[0]=r.geta_centroid_pos0(n),_[1]=r.geta_centroid_pos1(n))}if(0===_[0]&&1===_[1])return!1;"globe"===s.projection.name&&(o=sQ([o],[new T(0,0),new T(8192,8192)],r.tileID.canonical).map(r=>r.polygon).flat());let[w,E]=(h=o,d=v?u:null,f=s.center.lat,p=r.tileID.canonical,"globe"===s.projection.name?function(r,n,i,o,a,s,l,u,c,h,d){let f=[],p=[],m=r.projection.upVectorScale(d,r.center.lat,r.worldSize).metersToTile,g=[0,0,0,1],y=[0,0,0,1],_=(r,n,i,o)=>{r[0]=n,r[1]=i,r[2]=o,r[3]=1},v=sJ();for(let b of(i>0&&(i+=v),o+=v,n)){let n=[],v=[];for(let f of b){let p=f.x+a.x,b=f.y+a.y,x=r.projection.projectTilePoint(p,b,d),w=r.projection.upVector(d,f.x,f.y),E=i,C=o;if(l){let r=le(p,b,i,o,l,u,c,h);E+=r.base,C+=r.top}0!==i?_(g,x.x+w[0]*m*E,x.y+w[1]*m*E,x.z+w[2]*m*E):_(g,x.x,x.y,x.z),_(y,x.x+w[0]*m*C,x.y+w[1]*m*C,x.z+w[2]*m*C),oB(g,g,s),oB(y,y,s),n.push(new s8(g[0],g[1],g[2])),v.push(new s8(y[0],y[1],y[2]))}f.push(n),p.push(v)}return[f,p]}(s,h,y,g,m,l,d,_,b,f,p):d?function(r,n,i,o,a,s,l,u,c){let h=[],d=[],f=[0,0,0,1];for(let p of r){let r=[],m=[];for(let h of p){let d=h.x+o.x,p=h.y+o.y,g=le(d,p,n,i,s,l,u,c);f[0]=d,f[1]=p,f[2]=g.base,f[3]=1,oU(f,f,a),f[3]=Math.max(f[3],1e-5);let y=new s8(f[0]/f[3],f[1]/f[3],f[2]/f[3]);f[0]=d,f[1]=p,f[2]=g.top,f[3]=1,oU(f,f,a),f[3]=Math.max(f[3],1e-5);let _=new s8(f[0]/f[3],f[1]/f[3],f[2]/f[3]);r.push(y),m.push(_)}h.push(r),d.push(m)}return[h,d]}(h,y,g,m,l,d,_,b,f):function(r,n,i,o,a){let s=[],l=[],u=a[8]*n,c=a[9]*n,h=a[10]*n,d=a[11]*n,f=a[8]*i,p=a[9]*i,m=a[10]*i,g=a[11]*i;for(let n of r){let r=[],i=[];for(let s of n){let n=s.x+o.x,l=s.y+o.y,y=a[0]*n+a[4]*l+a[12],_=a[1]*n+a[5]*l+a[13],v=a[2]*n+a[6]*l+a[14],b=a[3]*n+a[7]*l+a[15],x=y+u,w=_+c,E=v+h,C=Math.max(b+d,1e-5),S=y+f,T=_+p,M=v+m,k=Math.max(b+g,1e-5);r.push(new s8(x/C,w/C,E/C)),i.push(new s8(S/k,T/k,M/k))}s.push(r),l.push(i)}return[s,l]}(h,y,g,m,l)),C=r.queryGeometry;return function(r,n,i){let o=1/0;aB(i,n)&&(o=s7(i,n[0]));for(let a=0;a<n.length;a++){let s=n[a],l=r[a];for(let r=0;r<s.length-1;r++){let n=s[r],a=[n,s[r+1],l[r+1],l[r],n];aF(i,a)&&(o=Math.min(o,s7(i,a)))}}return o!==1/0&&o}(w,E,C.isPointQuery()?C.screenBounds:C.screenGeometry)}},line:class extends os{constructor(r){super(r,lu),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if("line-gradient"===r){let r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof tJ,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(r,n){super.recalculate(r,n),this.paint._values["line-floorwidth"]=lc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new ls(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new oe(this,r)}queryRadius(r){var n,i;let o=(n=aH("line-width",this,r),(i=aH("line-gap-width",this,r))>0?i+2*n:n),a=aH("line-offset",this,r);return o/2+Math.abs(a)+aZ(this.paint.get("line-translate"))}queryIntersectsFeature(r,n,i,o,a,s){var l,u;if(r.queryGeometry.isAboveHorizon)return!1;let c=aG(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,r.pixelToTileUnitsFactor),h=r.pixelToTileUnitsFactor/2*(l=this.paint.get("line-width").evaluate(n,i),(u=this.paint.get("line-gap-width").evaluate(n,i))>0?u+2*l:l),d=this.paint.get("line-offset").evaluate(n,i);return d&&(o=function(r,n){let i=[],o=new T(0,0);for(let a=0;a<r.length;a++){let s=r[a],l=[];for(let r=0;r<s.length;r++){let i=s[r],a=s[r+1],u=0===r?o:i.sub(s[r-1])._unit()._perp(),c=r===s.length-1?o:a.sub(i)._unit()._perp(),h=u._add(c)._unit();h._mult(1/(h.x*c.x+h.y*c.y)),l.push(h._mult(n)._add(i))}i.push(l)}return i}(o,d*r.pixelToTileUnitsFactor)),function(r,n,i){for(let o=0;o<n.length;o++){let a=n[o];if(r.length>=3){for(let n=0;n<a.length;n++)if(aq(r,a[n]))return!0}if(function(r,n,i){if(r.length>1){if(aN(r,n))return!0;for(let o=0;o<n.length;o++)if(aj(n[o],r,i))return!0}for(let o=0;o<r.length;o++)if(aj(r[o],n,i))return!0;return!1}(r,a,i))return!0}return!1}(c,o,h)}isTileClipped(){return!0}},symbol:uY,background:class extends os{constructor(r){super(r,uK)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends os{constructor(r){super(r,uJ)}getProgramIds(){return["raster"]}},sky:class extends os{constructor(r){super(r,u0),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"sky-gradient"===r?this._updateColorRamp():"sky-atmosphere-sun"!==r&&"sky-atmosphere-halo-color"!==r&&"sky-atmosphere-color"!==r&&"sky-atmosphere-sun-intensity"!==r||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=a8({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){let n=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(r,n){if("atmosphere"===this.paint.get("sky-type")){let i=this.paint.get("sky-atmosphere-sun"),o=!i,a=r.style.light,s=a.properties.get("position");return o&&"viewport"===a.properties.get("anchor")&&Y("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),o?u1(s.azimuthal,90-s.polar,n):u1(i[0],90-i[1],n)}let i=this.paint.get("sky-gradient-center");return u1(i[0],90-i[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){let r=this.paint.get("sky-type");return"atmosphere"===r?["skyboxCapture","skybox"]:"gradient"===r?["skyboxGradient"]:null}}};class u4{constructor(r,n,i,o){this.context=r,this.format=i,this.texture=r.gl.createTexture(),this.update(n,o)}update(r,n,i){let{width:o,height:a}=r,{context:s}=this,{gl:l}=s,{HTMLImageElement:u,HTMLCanvasElement:c,HTMLVideoElement:h,ImageData:d,ImageBitmap:p}=f;if(l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),i||this.size&&this.size[0]===o&&this.size[1]===a){let{x:n,y:s}=i||{x:0,y:0};r instanceof u||r instanceof c||r instanceof h||r instanceof d||p&&r instanceof p?l.texSubImage2D(l.TEXTURE_2D,0,n,s,l.RGBA,l.UNSIGNED_BYTE,r):l.texSubImage2D(l.TEXTURE_2D,0,n,s,o,a,l.RGBA,l.UNSIGNED_BYTE,r.data)}else this.size=[o,a],r instanceof u||r instanceof c||r instanceof h||r instanceof d||p&&r instanceof p?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,r):l.texImage2D(l.TEXTURE_2D,0,this.format,o,a,0,this.format,l.UNSIGNED_BYTE,r.data);this.useMipmap=!!(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&l.generateMipmap(l.TEXTURE_2D)}bind(r,n){let{context:i}=this,{gl:o}=i;o.bindTexture(o.TEXTURE_2D,this.texture),r!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.useMipmap?r===o.NEAREST?o.NEAREST_MIPMAP_NEAREST:o.LINEAR_MIPMAP_NEAREST:r),this.filter=r),n!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,n),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,n),this.wrap=n)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class u3{constructor(r){this._callback=r,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class u5{constructor(){this.tasks={},this.taskQueue=[],$(["process"],this),this.invoker=new u3(this.process),this.nextId=0}add(r,n){let i=this.nextId++,o=function({type:r,isSymbolTile:n,zoom:i}){return i=i||0,"message"===r?0:"maybePrepare"!==r||n?"parseTile"!==r||n?"parseTile"===r&&n?300-i:"maybePrepare"===r&&n?400-i:500:200-i:100-i}(n);return 0===o?(J(),r(),{cancel:()=>{}}):(this.tasks[i]={fn:r,metadata:n,priority:o,id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}})}process(){J();{if(this.taskQueue=this.taskQueue.filter(r=>!!this.tasks[r]),!this.taskQueue.length)return;let r=this.pick();if(null===r)return;let n=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}}pick(){let r=null,n=1/0;for(let i=0;i<this.taskQueue.length;i++){let o=this.tasks[this.taskQueue[i]];o.priority<n&&(n=o.priority,r=i)}if(null===r)return null;let i=this.taskQueue[r];return this.taskQueue.splice(r,1),i}remove(){this.invoker.remove()}}class u6{constructor(r){this._stringToNumber={},this._numberToString=[];for(let n=0;n<r.length;n++){let i=r[n];this._stringToNumber[i]=n,this._numberToString[n]=i}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}let u8=["tile","layer","source","sourceLayer","state"];class u9{constructor(r,n,i,o,a){this.type="Feature",this._vectorTileFeature=r,this._z=n,this._x=i,this._y=o,this.properties=r.properties,this.id=a}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){let r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(let n of(void 0!==this.id&&(r.id=this.id),u8))void 0!==this[n]&&(r[n]=this[n]);return r}}let u7=new Uint16Array(8184);for(let r=0;r<2046;r++){let n=r+2,i=0,o=0,a=0,s=0,l=0,u=0;for(1&n?a=s=l=32:i=o=u=32;(n>>=1)>1;){let r=i+a>>1,c=o+s>>1;1&n?(a=i,s=o,i=l,o=u):(i=a,o=s,a=l,s=u),l=r,u=c}let c=4*r;u7[c+0]=i,u7[c+1]=o,u7[c+2]=a,u7[c+3]=s}let ce=new Uint16Array(2178),ct=new Uint8Array(1089),cr=new Uint16Array(1089);function cn(r){return 0===r?-.03125:32===r?.03125:0}var ci=ie([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);let co={type:2,extent:8192,loadGeometry:()=>[[new T(0,0),new T(8193,0),new T(8193,8193),new T(0,8193),new T(0,0)]]};class ca{constructor(r,n,i,o,a){this.tileID=r,this.uid=j(),this.uses=0,this.tileSize=n,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",o&&o.transform&&(this.projection=o.transform.projection)}registerFadeDuration(r){let n=r+this.timeAdded;n<eq.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=ux(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(r,n,i){if(this.unloadVectorData(),this.state="loaded",r){for(let o in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(r,n){let i={};if(!n)return i;for(let o of r){let r=o.layerIds.map(r=>n.getLayer(r)).filter(Boolean);if(0!==r.length)for(let n of(o.layers=r,o.stateDependentLayerIds&&(o.stateDependentLayers=o.stateDependentLayerIds.map(n=>r.filter(r=>r.id===n)[0])),r))i[n.id]=o}return i}(r.buckets,n.style),this.hasSymbolBuckets=!1,this.buckets){let r=this.buckets[o];if(r instanceof uZ){if(this.hasSymbolBuckets=!0,!i)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let r in this.buckets){let n=this.buckets[r];if(n instanceof uZ&&n.hasRTLText){this.hasRTLText=!0,nZ.isLoading()||nZ.isLoaded()||"deferred"!==n$()||nH();break}}for(let r in this.queryPadding=0,this.buckets){let i=this.buckets[r];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(r).queryRadius(i))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),r.lineAtlas&&(this.lineAtlas=r.lineAtlas)}else this.collisionBoxArray=new iL}unloadVectorData(){if(this.hasData()){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(r){return this.buckets[r.id]}upload(r){for(let n in this.buckets){let i=this.buckets[n];i.uploadPending()&&i.upload(r)}let n=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new u4(r,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new u4(r,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new u4(r,this.lineAtlas.image,n.ALPHA),this.lineAtlas.uploaded=!0)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,n,i,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:o,pixelPosMatrix:l,transform:s,params:a,tileTransform:this.tileTransform},r,n,i):{}}querySourceFeatures(r,n){let i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;let o=i.loadVTLayers(),a=n?n.sourceLayer:"",s=o._geojsonTileLayer||o[a];if(!s)return;let l=r5(n&&n.filter),{z:u,x:c,y:h}=this.tileID.canonical,d={z:u,x:c,y:h};for(let n=0;n<s.length;n++){let o=s.feature(n);if(l.needGeometry){let r=aP(o,!0);if(!l.filter(new nG(this.tileID.overscaledZ),r,this.tileID.canonical))continue}else if(!l.filter(new nG(this.tileID.overscaledZ),o))continue;let f=i.getId(o,a),p=new u9(o,u,c,h,f);p.tile=d,r.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let n=this.expirationTime;if(r.cacheControl){let n=Q(r.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(n){if(this.expirationTime<n)i=!0;else{let o=this.expirationTime-n;o?this.expirationTime=r+Math.max(o,3e4):i=!0}}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),2147483647)}setFeatureState(r,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(r).length||!n)return;let i=this.latestFeatureIndex.loadVTLayers(),o=n.style.listImages();for(let a in this.buckets){if(!n.style.hasLayer(a))continue;let s=this.buckets[a],l=s.layers[0].sourceLayer||"_geojsonTileLayer",u=i[l],c=r[l];if(!u||!c||0===Object.keys(c).length)continue;if(s.update(c,u,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),s instanceof ls||s instanceof sT){let r=n.style._getSourceCache(s.layers[0].source);n._terrain&&n._terrain.enabled&&r&&s.programConfigurations.needsUpload&&n._terrain._clearRenderCacheForTile(r.id,this.tileID)}let h=n&&n.style&&n.style.getLayer(a);h&&(this.queryPadding=Math.max(this.queryPadding,h.queryRadius(s)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<eq.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=eq.now()+r}setTexture(r,n){let i=n.context,o=i.gl;this.texture=this.texture||n.getTileTexture(r.width),this.texture?this.texture.update(r,{useMipmap:!0}):(this.texture=new u4(i,r,o.RGBA,{useMipmap:!0}),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE))}setDependencies(r,n){let i={};for(let r of n)i[r]=!0;this.dependencies[r]=i}hasDependency(r,n){for(let i of r){let r=this.dependencies[i];if(r){for(let i of n)if(r[i])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(r,n){if(!n||"mercator"===n.name||this._tileDebugBuffer)return;let i=az(co,this.tileID.canonical,this.tileTransform)[0],o=new ir,a=new iM;for(let r=0;r<i.length;r++){let{x:n,y:s}=i[r];o.emplaceBack(n,s),a.emplaceBack(r)}a.emplaceBack(0),this._tileDebugIndexBuffer=r.createIndexBuffer(a),this._tileDebugBuffer=r.createVertexBuffer(o,oY.members),this._tileDebugSegments=oc.simpleSegment(0,0,o.length,a.length)}_makeTileBoundsBuffers(r,n){let i,o;if(this._tileBoundsBuffer||!n||"mercator"===n.name)return;let a=az(co,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){let r=function(r,n){let i=ux(r,n),o=Math.pow(2,r.z);for(let a=0;a<33;a++)for(let s=0;s<33;s++){let l=aT((r.x+(s+cn(s))/32)/o),u=aM((r.y+(a+cn(a))/32)/o),c=n.project(l,u),h=33*a+s;ce[2*h+0]=Math.round((c.x*i.scale-i.x)*8192),ce[2*h+1]=Math.round((c.y*i.scale-i.y)*8192)}ct.fill(0),cr.fill(0);for(let r=2045;r>=0;r--){let n=4*r,i=u7[n+0],o=u7[n+1],a=u7[n+2],s=u7[n+3],l=i+a>>1,u=o+s>>1,c=l+u-o,h=u+i-l,d=33*o+i,f=33*s+a,p=33*u+l,m=Math.hypot((ce[2*d+0]+ce[2*f+0])/2-ce[2*p+0],(ce[2*d+1]+ce[2*f+1])/2-ce[2*p+1])>=16;ct[p]=ct[p]||(m?1:0),r<1022&&(ct[p]=ct[p]||ct[(o+h>>1)*33+(i+c>>1)]||ct[(s+h>>1)*33+(a+c>>1)])}let a=new io,s=new ib,l=0;function u(r,n){let i=33*n+r;return 0===cr[i]&&(a.emplaceBack(ce[2*i+0],ce[2*i+1],8192*r/32,8192*n/32),cr[i]=++l),cr[i]-1}function c(r,n,i,o,a,l){let h=r+i>>1,d=n+o>>1;if(Math.abs(r-a)+Math.abs(n-l)>1&&ct[33*d+h])c(a,l,r,n,h,d),c(i,o,a,l,h,d);else{let c=u(r,n),h=u(i,o),d=u(a,l);s.emplaceBack(c,h,d)}}return c(0,0,32,32,32,0),c(32,32,0,0,0,32),{vertices:a,indices:s}}(this.tileID.canonical,n);i=r.vertices,o=r.indices}else{for(let{x:r,y:n}of(i=new io,o=new ib,a))i.emplaceBack(r,n,0,0);let r=sv(i.int16,void 0,4);for(let n=0;n<r.length;n+=3)o.emplaceBack(r[n],r[n+1],r[n+2])}this._tileBoundsBuffer=r.createVertexBuffer(i,ci.members),this._tileBoundsIndexBuffer=r.createIndexBuffer(o),this._tileBoundsSegments=oc.simpleSegment(0,0,i.length,o.length)}_makeGlobeTileDebugBuffers(r,n){let i;let o=n.projection;if(!o||"globe"!==o.name||n.freezeTileCoverage)return;let a=this.tileID.canonical,s=ac(at(a,n)),l=af(n.zoom);l>0&&(i=og(new Float64Array(16),n.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(r,a,n,s,i,l),this._makeGlobeTileDebugTextBuffer(r,a,n,s,i,l)}_globePoint(r,n,i,o,a,s,l){let u=as(r,n,i);if(s){let a=1<<i.z,c=aC(o.center.lng),h=aS(o.center.lat),d=(i.x+.5)/a-c,f=0;d>.5?f=-1:d<-.5&&(f=1);let p=(r/8192+i.x)/a+f,m=(n/8192+i.y)/a;p=(p-c)*o._pixelsPerMercatorPixel+c,m=(m-h)*o._pixelsPerMercatorPixel+h;let g=[p*o.worldSize,m*o.worldSize,0];oB(g,g,s),u=ae(u,g,l)}return oB(u,u,a)}_makeGlobeTileDebugBorderBuffer(r,n,i,o,a,s){let l=new ir,u=new iM,c=new ii,h=(r,h,d,f,p)=>{let m=(d-r)/(p-1),g=(f-h)/(p-1),y=l.length;for(let d=0;d<p;d++){let f=r+d*m,p=h+d*g;l.emplaceBack(f,p);let _=this._globePoint(f,p,n,i,o,a,s);c.emplaceBack(_[0],_[1],_[2]),u.emplaceBack(y+d)}};h(0,0,8192,0,16),h(8192,0,8192,8192,16),h(8192,8192,0,8192,16),h(0,8192,0,0,16),this._tileDebugIndexBuffer=r.createIndexBuffer(u),this._tileDebugBuffer=r.createVertexBuffer(l,oY.members),this._globeTileDebugBorderBuffer=r.createVertexBuffer(c,oX.members),this._tileDebugSegments=oc.simpleSegment(0,0,l.length,u.length)}_makeGlobeTileDebugTextBuffer(r,n,i,o,a,s){let l=new ir,u=new ib,c=new ii;u.reserve(32),l.reserve(25),c.reserve(25);let h=(r,n)=>25*r+n;for(let r=0;r<25;r++){let u=2048*r;for(let r=0;r<25;r++){let h=2048*r;l.emplaceBack(h,u);let d=this._globePoint(h,u,n,i,o,a,s);c.emplaceBack(d[0],d[1],d[2])}}for(let r=0;r<4;r++)for(let n=0;n<4;n++){let i=h(r,n),o=h(r,n+1),a=h(r+1,n),s=h(r+1,n+1);u.emplaceBack(i,o,a),u.emplaceBack(a,o,s)}this._tileDebugTextIndexBuffer=r.createIndexBuffer(u),this._tileDebugTextBuffer=r.createVertexBuffer(l,oY.members),this._globeTileDebugTextBuffer=r.createVertexBuffer(c,oX.members),this._tileDebugTextSegments=oc.simpleSegment(0,0,25,32)}}class cs{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,n,i){let o=String(n);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][o]=this.stateChanges[r][o]||{},B(this.stateChanges[r][o],i),null===this.deletedStates[r])for(let n in this.deletedStates[r]={},this.state[r])n!==o&&(this.deletedStates[r][n]=null);else if(this.deletedStates[r]&&null===this.deletedStates[r][o])for(let n in this.deletedStates[r][o]={},this.state[r][o])i[n]||(this.deletedStates[r][o][n]=null);else for(let n in i)this.deletedStates[r]&&this.deletedStates[r][o]&&null===this.deletedStates[r][o][n]&&delete this.deletedStates[r][o][n]}removeFeatureState(r,n,i){if(null===this.deletedStates[r])return;let o=String(n);if(this.deletedStates[r]=this.deletedStates[r]||{},i&&void 0!==n)null!==this.deletedStates[r][o]&&(this.deletedStates[r][o]=this.deletedStates[r][o]||{},this.deletedStates[r][o][i]=null);else if(void 0!==n){if(this.stateChanges[r]&&this.stateChanges[r][o])for(i in this.deletedStates[r][o]={},this.stateChanges[r][o])this.deletedStates[r][o][i]=null;else this.deletedStates[r][o]=null}else this.deletedStates[r]=null}getState(r,n){let i=String(n),o=B({},(this.state[r]||{})[i],(this.stateChanges[r]||{})[i]);if(null===this.deletedStates[r])return{};if(this.deletedStates[r]){let i=this.deletedStates[r][n];if(null===i)return{};for(let r in i)delete o[r]}return o}initializeTileState(r,n){r.setFeatureState(this.state,n)}coalesceChanges(r,n){let i={};for(let r in this.stateChanges){this.state[r]=this.state[r]||{};let n={};for(let i in this.stateChanges[r])this.state[r][i]||(this.state[r][i]={}),B(this.state[r][i],this.stateChanges[r][i]),n[i]=this.state[r][i];i[r]=n}for(let r in this.deletedStates){this.state[r]=this.state[r]||{};let n={};if(null===this.deletedStates[r])for(let i in this.state[r])n[i]={},this.state[r][i]={};else for(let i in this.deletedStates[r]){if(null===this.deletedStates[r][i])this.state[r][i]={};else if(this.state[r][i])for(let n of Object.keys(this.deletedStates[r][i]))delete this.state[r][i][n];n[i]=this.state[r][i]}i[r]=i[r]||{},B(i[r],n)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(let o in r)r[o].setFeatureState(i,n)}}class cl{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,n){let i=this.toIdx(r,n);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(r,n){return this.leaves[this.toIdx(r,n)]}toIdx(r,n){return n*this.size+r}}function cu(r,n,i,o){let a=0,s=Number.MAX_VALUE;for(let l=0;l<3;l++)if(1e-15>Math.abs(o[l])){if(i[l]<r[l]||i[l]>n[l])return null}else{let u=1/o[l],c=(r[l]-i[l])*u,h=(n[l]-i[l])*u;if(c>h){let r=c;c=h,h=r}if(c>a&&(a=c),h<s&&(s=h),a>s)return null}return a}function cc(r,n,i,o,a,s,l,u,c,h,d){let f=o-r,p=a-n,m=s-i,g=l-r,y=u-n,_=c-i,v=d[1]*_-d[2]*y,b=d[2]*g-d[0]*_,x=d[0]*y-d[1]*g,w=f*v+p*b+m*x;if(1e-15>Math.abs(w))return null;let E=1/w,C=h[0]-r,S=h[1]-n,T=h[2]-i,M=(C*v+S*b+T*x)*E;if(M<0||M>1)return null;let k=S*m-T*p,I=T*f-C*m,L=C*p-S*f,A=(d[0]*k+d[1]*I+d[2]*L)*E;return A<0||M+A>1?null:(g*k+y*I+_*L)*E}function ch(r,n,i,o,a,s,l,u,c){let h=1<<i,d=s-o,f=l-a;u[0]=(r+0)/h*d+o,u[1]=(n+0)/h*f+a,c[0]=(r+1)/h*d+o,c[1]=(n+1)/h*f+a}class cd{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;let n=function(r){let n=Math.ceil(Math.log2(r.dim/8)),i=[],o=Math.ceil(Math.pow(2,n)),a=1/o,s=(r,n,i,o,a)=>{let s=o?1:0;a[0]=r*i,a[1]=n*i,a[2]=(r+1)*i-s,a[3]=(n+1)*i-s},l=new cl(o),u=[];for(let n=0;n<o*o;n++){s(n%o,Math.floor(n/o),a,!1,u);let i=cp(u[0],u[1],r),c=cp(u[2],u[1],r),h=cp(u[2],u[3],r),d=cp(u[0],u[3],r);l.minimums.push(Math.min(i,c,h,d)),l.maximums.push(Math.max(i,c,h,d)),l.leaves.push(1)}for(i.push(l),o/=2;o>=1;o/=2){let r=i[i.length-1];l=new cl(o);for(let n=0;n<o*o;n++){s(n%o,Math.floor(n/o),2,!0,u);let i=r.getElevation(u[0],u[1]),a=r.getElevation(u[2],u[1]),c=r.getElevation(u[2],u[3]),h=r.getElevation(u[0],u[3]),d=r.isLeaf(u[0],u[1]),f=r.isLeaf(u[2],u[1]),p=r.isLeaf(u[2],u[3]),m=r.isLeaf(u[0],u[3]),g=Math.min(i.min,a.min,c.min,h.min),y=Math.max(i.max,a.max,c.max,h.max),_=d&&f&&p&&m;l.maximums.push(y),l.minimums.push(g),l.leaves.push(y-g<=5&&_?1:0)}i.push(l)}return i}(this.dem),i=n.length-1,o=n[i];this._addNode(o.minimums[0],o.maximums[0],o.leaves[0]),this._construct(n,0,0,i,0)}raycastRoot(r,n,i,o,a,s,l=1){return cu([r,n,-100],[i,o,this.maximums[0]*l],a,s)}raycast(r,n,i,o,a,s,l=1){if(!this.nodeCount)return null;let u=this.raycastRoot(r,n,i,o,a,s,l);if(null==u)return null;let c=[],h=[],d=[],f=[],p=[{idx:0,t:u,nodex:0,nodey:0,depth:0}];for(;p.length>0;){let{idx:u,t:y,nodex:_,nodey:v,depth:b}=p.pop();if(this.leaves[u]){ch(_,v,b,r,n,i,o,d,f);let u=1<<b,c=(_+0)/u,h=(_+1)/u,p=(v+0)/u,x=(v+1)/u,w=cp(c,p,this.dem)*l,E=cp(h,p,this.dem)*l,C=cp(h,x,this.dem)*l,S=cp(c,x,this.dem)*l,T=cc(d[0],d[1],w,f[0],d[1],E,f[0],f[1],C,a,s),M=cc(f[0],f[1],C,d[0],f[1],S,d[0],d[1],w,a,s),k=Math.min(null!==T?T:Number.MAX_VALUE,null!==M?M:Number.MAX_VALUE);if(k!==Number.MAX_VALUE)return k;{var m,g;let r=oO([],a,s,y);if(cf(w,E,S,C,(r[0]-(m=d[0]))/(f[0]-m),(r[1]-(g=d[1]))/(f[1]-g))>=r[2])return y}continue}let x=0;for(let p=0;p<this._siblingOffset.length;p++){ch((_<<1)+this._siblingOffset[p][0],(v<<1)+this._siblingOffset[p][1],b+1,r,n,i,o,d,f),d[2]=-100,f[2]=this.maximums[this.childOffsets[u]+p]*l;let m=cu(d,f,a,s);if(null!=m){c[p]=m;let r=!1;for(let n=0;n<x&&!r;n++)m>=c[h[n]]&&(h.splice(n,0,p),r=!0);r||(h[x]=p),x++}}for(let r=0;r<x;r++){let n=h[r];p.push({idx:this.childOffsets[u]+n,t:c[n],nodex:(_<<1)+this._siblingOffset[n][0],nodey:(v<<1)+this._siblingOffset[n][1],depth:b+1})}}return null}_addNode(r,n,i){return this.minimums.push(r),this.maximums.push(n),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(r,n,i,o,a){if(1===r[o].isLeaf(n,i))return;this.childOffsets[a]||(this.childOffsets[a]=this.nodeCount);let s=o-1,l=r[s],u=0,c=0;for(let r=0;r<this._siblingOffset.length;r++){let o=2*n+this._siblingOffset[r][0],a=2*i+this._siblingOffset[r][1],s=l.getElevation(o,a),h=l.isLeaf(o,a),d=this._addNode(s.min,s.max,h);h&&(u|=1<<r),c||(c=d)}for(let o=0;o<this._siblingOffset.length;o++)u&1<<o||this._construct(r,2*n+this._siblingOffset[o][0],2*i+this._siblingOffset[o][1],s,c+o)}}function cf(r,n,i,o,a,s){return tQ(tQ(r,i,s),tQ(n,o,s),a)}function cp(r,n,i){let o=i.dim,a=P(r*o-.5,0,o-1),s=P(n*o-.5,0,o-1),l=Math.floor(a),u=Math.floor(s),c=Math.min(l+1,o-1),h=Math.min(u+1,o-1);return cf(i.get(l,u),i.get(c,u),i.get(l,h),i.get(c,h),a-l,s-u)}let cm={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class cg{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,n,i,o=!1,a=!1){if(this.uid=r,n.height!==n.width)throw RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return Y(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;let s=this.dim=n.height-2,l=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=i||"mapbox",this.borderReady=o,!o){for(let r=0;r<s;r++)l[this._idx(-1,r)]=l[this._idx(0,r)],l[this._idx(s,r)]=l[this._idx(s-1,r)],l[this._idx(r,-1)]=l[this._idx(r,0)],l[this._idx(r,s)]=l[this._idx(r,s-1)];l[this._idx(-1,-1)]=l[this._idx(0,0)],l[this._idx(s,-1)]=l[this._idx(s-1,0)],l[this._idx(-1,s)]=l[this._idx(0,s-1)],l[this._idx(s,s)]=l[this._idx(s-1,s-1)],a&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new cd(this)}get(r,n,i=!1){i&&(r=P(r,-1,this.dim),n=P(n,-1,this.dim));let o=4*this._idx(r,n);return("terrarium"===this.encoding?function(r,n,i){return 256*r+n+i/256-32768}:function(r,n,i){return(256*r*256+256*n+i)/10-1e4})(this.pixels[o],this.pixels[o+1],this.pixels[o+2])}static getUnpackVector(r){return cm[r]}get unpackVector(){return cm[this.encoding]}_idx(r,n){if(r<-1||r>=this.dim+1||n<-1||n>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(r+1)}static pack(r,n){let i=[0,0,0,0],o=cg.getUnpackVector(n),a=Math.floor((r+o[3])/o[2]);return i[2]=a%256,a=Math.floor(a/256),i[1]=a%256,a=Math.floor(a/256),i[0]=a,i}getPixels(){return new a5({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,n,i){if(this.dim!==r.dim)throw Error("dem dimension mismatch");let o=n*this.dim,a=n*this.dim+this.dim,s=i*this.dim,l=i*this.dim+this.dim;switch(n){case -1:o=a-1;break;case 1:a=o+1}switch(i){case -1:s=l-1;break;case 1:l=s+1}let u=-n*this.dim,c=-i*this.dim;for(let n=s;n<l;n++)for(let i=o;i<a;i++){let o=4*this._idx(i,n),a=4*this._idx(i+u,n+c);this.pixels[o+0]=r.pixels[a+0],this.pixels[o+1]=r.pixels[a+1],this.pixels[o+2]=r.pixels[a+2],this.pixels[o+3]=r.pixels[a+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}nS(cg,"DEMData"),nS(cd,"DemMinMaxQuadTree",{omit:["dem"]});class cy{constructor(r,n){this.max=r,this.onRemove=n,this.reset()}reset(){for(let r in this.data)for(let n of this.data[r])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(r,n,i){let o=r.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);let a={value:n,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout(()=>{this.remove(r,a)},i)),this.data[o].push(a),this.order.push(o),this.order.length>this.max){let r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let n=this.data[r].shift();return n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),n.value}getByKey(r){let n=this.data[r];return n?n[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,n){if(!this.has(r))return this;let i=r.wrapped().key,o=void 0===n?0:this.data[i].indexOf(n),a=this.data[i][o];return this.data[i].splice(o,1),a.timeout&&clearTimeout(a.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(a.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(r){let n=[];for(let i in this.data)for(let o of this.data[i])r(o.value)||n.push(o);for(let r of n)this.remove(r.value.tileID,r)}}class c_{constructor(r,n,i){this.func=r,this.mask=n,this.range=i}}c_.ReadOnly=!1,c_.ReadWrite=!0,c_.disabled=new c_(519,c_.ReadOnly,[0,1]);class cv{constructor(r,n,i,o,a,s){this.test=r,this.ref=n,this.mask=i,this.fail=o,this.depthFail=a,this.pass=s}}cv.disabled=new cv({func:519,mask:0},0,0,7680,7680,7680);class cb{constructor(r,n,i){this.blendFunction=r,this.blendColor=n,this.mask=i}}cb.Replace=[1,0],cb.disabled=new cb(cb.Replace,tf.transparent,[!1,!1,!1,!1]),cb.unblended=new cb(cb.Replace,tf.transparent,[!0,!0,!0,!0]),cb.alphaBlended=new cb([1,771],tf.transparent,[!0,!0,!0,!0]);class cx{constructor(r,n,i){this.enable=r,this.mode=n,this.frontFace=i}}cx.disabled=new cx(!1,1029,2305),cx.backCCW=new cx(!0,1029,2305),cx.backCW=new cx(!0,1029,2304),cx.frontCW=new cx(!0,1028,2304),cx.frontCCW=new cx(!0,1028,2305);class cw extends eW{constructor(r,n,i){super(),this.id=r,this._onlySymbols=i,n.on("data",r=>{"source"===r.dataType&&"metadata"===r.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===r.dataType&&"content"===r.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),n.on("error",()=>{this._sourceErrored=!0}),this._source=n,this._tiles={},this._cache=new cy(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=n.minTileCacheSize,this._maxTileCacheSize=n.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new cs,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(r){this.map=r,this._minTileCacheSize=void 0===this._minTileCacheSize&&r?r._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&r?r._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(let r in this._tiles){let n=this._tiles[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,n){return r.isSymbolTile=this._onlySymbols,this._source.loadTile(r,n)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){if(this._source.abortTile)return this._source.abortTile(r,()=>{})}serialize(){return this._source.serialize()}prepare(r){for(let n in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){let i=this._tiles[n];i.upload(r),i.prepare(this.map.style.imageManager)}}getIds(){return F(this._tiles).map(r=>r.tileID).sort(cE).map(r=>r.key)}getRenderableIds(r){let n=[];for(let i in this._tiles)this._isIdRenderable(+i,r)&&n.push(this._tiles[i]);return r?n.sort((r,n)=>{let i=r.tileID,o=n.tileID,a=new T(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),s=new T(o.canonical.x,o.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}).map(r=>r.tileID.key):n.map(r=>r.tileID).sort(cE).map(r=>r.key)}hasRenderableParent(r){let n=this.findLoadedParent(r,0);return!!n&&this._isIdRenderable(n.tileID.key)}_isIdRenderable(r,n){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(n||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else for(let r in this._cache.reset(),this._tiles)"errored"!==this._tiles[r].state&&this._reloadTile(+r,"reloading")}_reloadTile(r,n){let i=this._tiles[r];i&&("loading"!==i.state&&(i.state=n),this._loadTile(i,this._tileLoaded.bind(this,i,r,n)))}_tileLoaded(r,n,i,o){if(o){if(r.state="errored",404!==o.status)this._source.fire(new eG(o,{tile:r}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){let r=this.map.painter.terrain;this.update(this.transform,r.getScaledDemTileSize(),!0),r.resetTileLookupCache(this.id)}else this.update(this.transform)}else r.timeAdded=eq.now(),"expired"===i&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(n,r),"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new eZ("data",{dataType:"source",tile:r,coord:r.tileID,sourceCacheId:this.id}))}_backfillDEM(r){let n=this.getRenderableIds();for(let o=0;o<n.length;o++){let a=n[o];if(r.neighboringTiles&&r.neighboringTiles[a]){let n=this.getTileByID(a);i(r,n),i(n,r)}}function i(r,n){if(!r.dem||r.dem.borderReady)return;r.needsHillshadePrepare=!0,r.needsDEMTextureUpload=!0;let i=n.tileID.canonical.x-r.tileID.canonical.x,o=n.tileID.canonical.y-r.tileID.canonical.y,a=Math.pow(2,r.tileID.canonical.z),s=n.tileID.key;0===i&&0===o||Math.abs(o)>1||(Math.abs(i)>1&&(1===Math.abs(i+a)?i+=a:1===Math.abs(i-a)&&(i-=a)),n.dem&&r.dem&&(r.dem.backfillBorder(n.dem,i,o),r.neighboringTiles&&r.neighboringTiles[s]&&(r.neighboringTiles[s].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,n,i,o){for(let a in this._tiles){let s=this._tiles[a];if(o[a]||!s.hasData()||s.tileID.overscaledZ<=n||s.tileID.overscaledZ>i)continue;let l=s.tileID;for(;s&&s.tileID.overscaledZ>n+1;){let r=s.tileID.scaledTo(s.tileID.overscaledZ-1);(s=this._tiles[r.key])&&s.hasData()&&(l=r)}let u=l;for(;u.overscaledZ>n;)if(r[(u=u.scaledTo(u.overscaledZ-1)).key]){o[l.key]=l;break}}}findLoadedParent(r,n){if(r.key in this._loadedParentTiles){let i=this._loadedParentTiles[r.key];return i&&i.tileID.overscaledZ>=n?i:null}for(let i=r.overscaledZ-1;i>=n;i--){let n=r.scaledTo(i),o=this._getLoadedTile(n);if(o)return o}}_getLoadedTile(r){let n=this._tiles[r.key];return n&&n.hasData()?n:this._cache.getByKey(this._source.reparseOverscaled?r.wrapped().key:r.canonical.key)}updateCacheSize(r,n){n=n||this._source.tileSize;let i=Math.ceil(r.width/n)+1,o=Math.ceil(r.height/n)+1,a=Math.floor(i*o*5),s="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,a):a,l="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(l)}handleWrapJump(r){let n=Math.round((r-(void 0===this._prevLng?r:this._prevLng))/360);if(this._prevLng=r,n){let r={};for(let i in this._tiles){let o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(let n in this._tiles=r,this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(let r in this._tiles)this._setTileReloadTimer(+r,this._tiles[r])}}update(r,n,i){let o;if(this.transform=r,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!i)return;this.updateCacheSize(r,n),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?o=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(r=>new s5(r.canonical.z,r.wrap,r.canonical.z,r.canonical.x,r.canonical.y)):(o=r.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(o=o.filter(r=>this._source.hasTile(r)))):o=[];let a=this._updateRetainedTiles(o);if(cC(this._source.type)&&0!==o.length){let r={},n={},i=Object.keys(a);for(let o of i){let i=a[o],s=this._tiles[o];if(!s||s.fadeEndTime&&s.fadeEndTime<=eq.now())continue;let l=this.findLoadedParent(i,Math.max(i.overscaledZ-cw.maxOverzooming,this._source.minzoom));l&&(this._addTile(l.tileID),r[l.tileID.key]=l.tileID),n[o]=i}let s=o[o.length-1].overscaledZ;for(let r in this._tiles){let i=this._tiles[r];if(a[r]||!i.hasData())continue;let o=i.tileID;for(;o.overscaledZ>s;){o=o.scaledTo(o.overscaledZ-1);let s=this._tiles[o.key];if(s&&s.hasData()&&n[o.key]){a[r]=i.tileID;break}}}for(let n in r)a[n]||(this._coveredTiles[n]=!0,a[n]=r[n])}for(let r in a)this._tiles[r].clearFadeHold();let s=function(r,n){let i=[];for(let o in r)o in n||i.push(o);return i}(this._tiles,a);for(let r of s){let n=this._tiles[r];n.hasSymbolBuckets&&!n.holdingForFade()?n.setHoldDuration(this.map._fadeDuration):n.hasSymbolBuckets&&!n.symbolFadeFinished()||this._removeTile(+r)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(+r)}_updateRetainedTiles(r){let n={};if(0===r.length)return n;let i={},o=r.reduce((r,n)=>Math.min(r,n.overscaledZ),1/0),a=r[0].overscaledZ,s=Math.max(a-cw.maxOverzooming,this._source.minzoom),l=Math.max(a+cw.maxUnderzooming,this._source.minzoom),u={};for(let i of r){let r=this._addTile(i);n[i.key]=i,r.hasData()||o<this._source.maxzoom&&(u[i.key]=i)}for(let a of(this._retainLoadedChildren(u,o,l,n),r)){let r=this._tiles[a.key];if(r.hasData())continue;if(a.canonical.z>=this._source.maxzoom){let r=a.children(this._source.maxzoom)[0],i=this.getTile(r);if(i&&i.hasData()){n[r.key]=r;continue}}else{let r=a.children(this._source.maxzoom);if(n[r[0].key]&&n[r[1].key]&&n[r[2].key]&&n[r[3].key])continue}let o=r.wasRequested();for(let l=a.overscaledZ-1;l>=s;--l){let s=a.scaledTo(l);if(i[s.key]||(i[s.key]=!0,(r=this.getTile(s))||!o||(r=this._addTile(s)),r&&(n[s.key]=s,o=r.wasRequested(),r.hasData())))break}}return n}_updateLoadedParentTileCache(){for(let r in this._loadedParentTiles={},this._tiles){let n=[],i,o=this._tiles[r].tileID;for(;o.overscaledZ>0;){if(o.key in this._loadedParentTiles){i=this._loadedParentTiles[o.key];break}n.push(o.key);let r=o.scaledTo(o.overscaledZ-1);if(i=this._getLoadedTile(r))break;o=r}for(let r of n)this._loadedParentTiles[r]=i}}_addTile(r){let n=this._tiles[r.key];if(n)return n;(n=this._cache.getAndRemove(r))&&(this._setTileReloadTimer(r.key,n),n.tileID=r,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,n)));let i=!!n;if(!i){let i=this.map?this.map.painter:null;n=new ca(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,i,this._isRaster),this._loadTile(n,this._tileLoaded.bind(this,n,r.key,n.state))}return n?(n.uses++,this._tiles[r.key]=n,i||this._source.fire(new eZ("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null}_setTileReloadTimer(r,n){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let i=n.getExpiryTimeout();i&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},i))}_removeTile(r){let n=this._tiles[r];n&&(n.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),n.uses>0||(n.hasData()&&"reloading"!==n.state?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}clearTiles(){for(let r in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+r);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(r,n,i){let o=[],a=this.transform;if(!a)return o;let s="globe"===a.projection.name,l=aC(a.center.lng);for(let u in this._tiles){let c;let h=this._tiles[u];if(i&&h.clearQueryDebugViz(),!h.holdingForFade()){if(s){let r=h.tileID.canonical;if(0===r.z){let n=[Math.abs(P(l,...cS(r,-1))-l),Math.abs(P(l,...cS(r,1))-l)];c=[0,2*n.indexOf(Math.min(...n))-1]}else{let n=[Math.abs(P(l,...cS(r,-1))-l),Math.abs(P(l,...cS(r,0))-l),Math.abs(P(l,...cS(r,1))-l)];c=[n.indexOf(Math.min(...n))-1]}}else c=[0];for(let i of c){let s=r.containsTile(h,a,n,i);s&&o.push(s)}}}return o}getVisibleCoordinates(r){let n=this.getRenderableIds(r).map(r=>this._tiles[r].tileID);for(let r of n)r.projMatrix=this.transform.calculateProjMatrix(r.toUnwrapped());return n}hasTransition(){if(this._source.hasTransition())return!0;if(cC(this._source.type))for(let r in this._tiles){let n=this._tiles[r];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=eq.now())return!0}return!1}setFeatureState(r,n,i){this._state.updateState(r=r||"_geojsonTileLayer",n,i)}removeFeatureState(r,n,i){this._state.removeFeatureState(r=r||"_geojsonTileLayer",n,i)}getFeatureState(r,n){return this._state.getState(r=r||"_geojsonTileLayer",n)}setDependencies(r,n,i){let o=this._tiles[r];o&&o.setDependencies(n,i)}reloadTilesForDependencies(r,n){for(let i in this._tiles)this._tiles[i].hasDependency(r,n)&&this._reloadTile(+i,"reloading");this._cache.filter(i=>!i.hasDependency(r,n))}_preloadTiles(r,n){if(!this._sourceLoaded){let i=()=>{this._sourceLoaded&&(this._source.off("data",i),this._preloadTiles(r,n))};return void this._source.on("data",i)}let i=new Map,o=Array.isArray(r)?r:[r],a=this.map.painter.terrain,s=this.usedForTerrain&&a?a.getScaledDemTileSize():this._source.tileSize;for(let r of o){let n=r.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(let r of n)i.set(r.key,r);this.usedForTerrain&&r.updateElevation(!1)}R(Array.from(i.values()),(r,n)=>{let i=new ca(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(i,r=>{"raster-dem"===this._source.type&&i.dem&&this._backfillDEM(i),n(r,i)})},n)}}function cE(r,n){let i=Math.abs(2*r.wrap)-+(r.wrap<0),o=Math.abs(2*n.wrap)-+(n.wrap<0);return r.overscaledZ-n.overscaledZ||o-i||n.canonical.y-r.canonical.y||n.canonical.x-r.canonical.x}function cC(r){return"raster"===r||"image"===r||"video"===r||"custom"===r}function cS(r,n){let i=1<<r.z;return[r.x/i+n,(r.x+1)/i+n]}cw.maxOverzooming=10,cw.maxUnderzooming=3;class cT{constructor(r,n,i){this._demTile=r,this._dem=this._demTile.dem,this._scale=n,this._offset=i}static create(r,n,i){let o=i||r.findDEMTileFor(n);if(!o||!o.dem)return;let a=o.dem,s=o.tileID,l=1<<n.canonical.z-s.canonical.z;return new cT(o,o.tileSize/8192/l,[(n.canonical.x/l-s.canonical.x)*a.dim,(n.canonical.y/l-s.canonical.y)*a.dim])}tileCoordToPixel(r,n){let i=n*this._scale+this._offset[1],o=Math.floor(r*this._scale+this._offset[0]),a=Math.floor(i);return new T(o,a)}getElevationAt(r,n,i,o){let a=r*this._scale+this._offset[0],s=n*this._scale+this._offset[1],l=Math.floor(a),u=Math.floor(s),c=this._dem;return o=!!o,i?tQ(tQ(c.get(l,u,o),c.get(l,u+1,o),s-u),tQ(c.get(l+1,u,o),c.get(l+1,u+1,o),s-u),a-l):c.get(l,u,o)}getElevationAtPixel(r,n,i){return this._dem.get(r,n,!!i)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*(1/aE(r))*this._dem.stride}}class cM{constructor(r,n){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new nE(8192,16,0),this.featureIndexArray=new iB,this.promoteId=n}insert(r,n,i,o,a,s=0){let l=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,o,a,s);let u=this.grid;for(let r=0;r<n.length;r++){let i=n[r],o=[1/0,1/0,-1/0,-1/0];for(let r=0;r<i.length;r++){let n=i[r];o[0]=Math.min(o[0],n.x),o[1]=Math.min(o[1],n.y),o[2]=Math.max(o[2],n.x),o[3]=Math.max(o[3],n.y)}o[0]<8192&&o[1]<8192&&o[2]>=0&&o[3]>=0&&u.insert(l,o[0],o[1],o[2],o[3])}}loadVTLayers(){if(!this.vtLayers)for(let r in this.vtLayers=new sN(new lV(this.rawTileData)).layers,this.sourceLayerCoder=new u6(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[r]=[];return this.vtLayers}query(r,n,i,o){let a;this.loadVTLayers();let s=r.params||{},l=r5(s.filter),u=r.tileResult,c=r.transform,h=u.bufferedTilespaceBounds,d=this.grid.query(h.min.x,h.min.y,h.max.x,h.max.y,(r,n,i,o)=>a$(u.bufferedTilespaceGeometry,r,n,i,o));d.sort(cI);let f=null;c.elevation&&d.length>0&&(f=cT.create(c.elevation,this.tileID));let p={};for(let c=0;c<d.length;c++){let h=d[c];if(h===a)continue;a=h;let m=this.featureIndexArray.get(h),g=null;this.loadMatchingFeature(p,m,l,s.layers,s.availableImages,n,i,o,(n,i,o,a=0)=>(g||(g=az(n,this.tileID.canonical,r.tileTransform)),i.queryIntersectsFeature(u,n,o,g,this.z,r.transform,r.pixelPosMatrix,f,a)))}return p}loadMatchingFeature(r,n,i,o,a,s,l,u,c){let{featureIndex:h,bucketIndex:d,sourceLayerIndex:f,layoutVertexArrayOffset:p}=n,m=this.bucketLayerIDs[d];if(o&&!function(r,n){for(let i=0;i<r.length;i++)if(n.indexOf(r[i])>=0)return!0;return!1}(o,m))return;let g=this.sourceLayerCoder.decode(f),y=this.vtLayers[g].feature(h);if(i.needGeometry){let r=aP(y,!0);if(!i.filter(new nG(this.tileID.overscaledZ),r,this.tileID.canonical))return}else if(!i.filter(new nG(this.tileID.overscaledZ),y))return;let _=this.getId(y,g);for(let n=0;n<m.length;n++){let i=m[n];if(o&&0>o.indexOf(i))continue;let d=s[i];if(!d)continue;let f={};void 0!==_&&u&&(f=u.getState(d.sourceLayer||"_geojsonTileLayer",_));let g=B({},l[i]);g.paint=ck(g.paint,d.paint,y,f,a),g.layout=ck(g.layout,d.layout,y,f,a);let v=!c||c(y,d,f,p);if(!v)continue;let b=new u9(y,this.z,this.x,this.y,_);b.layer=g;let x=r[i];void 0===x&&(x=r[i]=[]),x.push({featureIndex:h,feature:b,intersectionZ:v})}}lookupSymbolFeatures(r,n,i,o,a,s,l,u){let c={};this.loadVTLayers();let h=r5(a);for(let a of r)this.loadMatchingFeature(c,{bucketIndex:i,sourceLayerIndex:o,featureIndex:a,layoutVertexArrayOffset:0},h,s,l,u,n);return c}loadFeature(r){let{featureIndex:n,sourceLayerIndex:i}=r;this.loadVTLayers();let o=this.sourceLayerCoder.decode(i),a=this.vtFeatures[o];if(a[n])return a[n];let s=this.vtLayers[o].feature(n);return a[n]=s,s}hasLayer(r){for(let n of this.bucketLayerIDs)for(let i of n)if(r===i)return!0;return!1}getId(r,n){let i=r.id;if(this.promoteId){let o="string"==typeof this.promoteId?this.promoteId:this.promoteId[n];null!=o&&(i=r.properties[o]),"boolean"==typeof i&&(i=Number(i))}return i}}function ck(r,n,i,o,a){return Z(r,(r,s)=>{let l=n instanceof n1?n.get(s):null;return l&&l.evaluate?l.evaluate(i,o,a):l})}function cI(r,n){return n-r}nS(cM,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cL{constructor(r,n){this.width=r,this.height=n,this.nextRow=0,this.image=new a3({width:r,height:n}),this.positions={},this.uploaded=!1}getDash(r,n){let i=this.getKey(r,n);return this.positions[i]}trim(){let r=this.width,n=this.height=U(this.nextRow);this.image.resize({width:r,height:n})}getKey(r,n){return r.join(",")+n}getDashRanges(r,n,i){let o=[],a=r.length%2==1?-r[r.length-1]*i:0,s=r[0]*i,l=!0;o.push({left:a,right:s,isDash:l,zeroLength:0===r[0]});let u=r[0];for(let n=1;n<r.length;n++){l=!l;let c=r[n];a=u*i,u+=c,s=u*i,o.push({left:a,right:s,isDash:l,zeroLength:0===c})}return o}addRoundDash(r,n,i){let o=n/2;for(let n=-i;n<=i;n++){let a=this.width*(this.nextRow+i+n),s=0,l=r[0];for(let u=0;u<this.width;u++){let c;u/l.right>1&&(l=r[++s]);let h=Math.abs(u-l.left),d=Math.abs(u-l.right),f=Math.min(h,d),p=n/i*(o+1);if(l.isDash){let r=o-Math.abs(p);c=Math.sqrt(f*f+r*r)}else c=o-Math.sqrt(f*f+p*p);this.image.data[a+u]=Math.max(0,Math.min(255,c+128))}}}addRegularDash(r,n){for(let n=r.length-1;n>=0;--n){let i=r[n],o=r[n+1];i.zeroLength?r.splice(n,1):o&&o.isDash===i.isDash&&(o.left=i.left,r.splice(n,1))}let i=r[0],o=r[r.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);let a=this.width*this.nextRow,s=0,l=r[0];for(let i=0;i<this.width;i++){i/l.right>1&&(l=r[++s]);let o=Math.abs(i-l.left),u=Math.abs(i-l.right),c=Math.min(o,u);this.image.data[a+i]=Math.max(0,Math.min(255,(l.isDash?c:-c)+n+128))}}addDash(r,n){let i=this.getKey(r,n);if(this.positions[i])return this.positions[i];let o="round"===n,a=o?7:0,s=2*a+1;if(this.nextRow+s>this.height)return Y("LineAtlas out of space"),null;0===r.length&&r.push(1);let l=0;for(let n=0;n<r.length;n++)r[n]<0&&(Y("Negative value is found in line dasharray, replacing values with 0"),r[n]=0),l+=r[n];if(0!==l){let i=this.width/l,s=this.getDashRanges(r,this.width,i);o?this.addRoundDash(s,i,a):this.addRegularDash(s,"square"===n?.5*i:0)}let u=this.nextRow+a;this.nextRow+=s;let c={tl:[u,a],br:[l,0]};return this.positions[i]=c,c}}nS(cL,"LineAtlas");class cA{constructor(r){let n={},i=[];for(let o in r){let a=r[o],s=n[o]={};for(let r in a.glyphs){let n=a.glyphs[+r];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;let o=n.metrics.localGlyph?2:1,l={x:0,y:0,w:n.bitmap.width+2*o,h:n.bitmap.height+2*o};i.push(l),s[r]=l}}let{w:o,h:a}=lH(i),s=new a3({width:o||1,height:a||1});for(let i in r){let o=r[i];for(let r in o.glyphs){let a=o.glyphs[+r];if(!a||0===a.bitmap.width||0===a.bitmap.height)continue;let l=n[i][r],u=a.metrics.localGlyph?2:1;a3.copy(a.bitmap,s,{x:0,y:0},{x:l.x+u,y:l.y+u},a.bitmap)}}this.image=s,this.positions=n}}nS(cA,"GlyphAtlas");class cz{constructor(r){this.tileID=new s5(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.tileZoom=r.tileZoom,this.uid=r.uid,this.zoom=r.zoom,this.canonical=r.tileID.canonical,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId,this.enableTerrain=!!r.enableTerrain,this.isSymbolTile=r.isSymbolTile,this.tileTransform=ux(r.tileID.canonical,r.projection),this.projection=r.projection}parse(r,n,i,o,a){let s,l,u,c;this.status="parsing",this.data=r,this.collisionBoxArray=new iL;let h=new u6(Object.keys(r.layers).sort()),d=new cM(this.tileID,this.promoteId);d.bucketLayerIDs=[];let f={},p=new cL(256,256),m={featureIndex:d,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:p,availableImages:i},g=n.familiesBySource[this.source];for(let n in g){let o=r.layers[n];if(!o)continue;let a=!1,s=!1;for(let r of g[n])"symbol"===r[0].type?a=!0:s=!0;if(!0===this.isSymbolTile&&!a||!1===this.isSymbolTile&&!s)continue;1===o.version&&Y(`Vector tile source "${this.source}" layer "${n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let l=h.encode(n),u=[];for(let r=0;r<o.length;r++){let i=o.feature(r),a=d.getId(i,n);u.push({feature:i,id:a,index:r,sourceLayerIndex:l})}for(let r of g[n]){let n=r[0];void 0!==this.isSymbolTile&&"symbol"===n.type!==this.isSymbolTile||n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(cP(r,this.zoom,i),(f[n.id]=n.createBucket({index:d.bucketLayerIDs.length,layers:r,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:i})).populate(u,m,this.tileID.canonical,this.tileTransform),d.bucketLayerIDs.push(r.map(r=>r.id)))}}p.trim();let y={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},_=()=>{if(s)return a(s);if(l&&u&&c){let r=new cA(l),n=new lG(u,c);for(let o in f){let a=f[o];a instanceof uZ?(cP(a.layers,this.zoom,i),function(r,n,i,o,a,s,l,u,c,h){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;let d=r.layers[0].layout,f=r.layers[0]._unevaluatedLayout._values,p={};if("composite"===r.textSizeData.kind){let{minZoom:n,maxZoom:i}=r.textSizeData;p.compositeTextSizes=[f["text-size"].possiblyEvaluate(new nG(n),u),f["text-size"].possiblyEvaluate(new nG(i),u)]}if("composite"===r.iconSizeData.kind){let{minZoom:n,maxZoom:i}=r.iconSizeData;p.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new nG(n),u),f["icon-size"].possiblyEvaluate(new nG(i),u)]}p.layoutTextSize=f["text-size"].possiblyEvaluate(new nG(c+1),u),p.layoutIconSize=f["icon-size"].possiblyEvaluate(new nG(c+1),u),p.textMaxSize=f["text-size"].possiblyEvaluate(new nG(18),u);let m="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),g=d.get("text-size");for(let s of r.features){let c=d.get("text-font").evaluate(s,{},u).join(","),f=g.evaluate(s,{},u),y=p.layoutTextSize.evaluate(s,{},u),_=(p.layoutIconSize.evaluate(s,{},u),{horizontal:{},vertical:void 0}),v=s.text,b,x=[0,0];if(v){let o=v.toString(),l=24*d.get("text-letter-spacing").evaluate(s,{},u),h=24*d.get("text-line-height").evaluate(s,{},u),p=!function(r){for(let i of r){var n;if(n=i.charCodeAt(0),nL.Arabic(n)||nL["Arabic Supplement"](n)||nL["Arabic Extended-A"](n)||nL["Arabic Presentation Forms-A"](n)||nL["Arabic Presentation Forms-B"](n))return!1}return!0}(o)?0:l,g=d.get("text-anchor").evaluate(s,{},u),b=d.get("text-variable-anchor");if(!b){let r=d.get("text-radial-offset").evaluate(s,{},u);x=r?up(g,[24*r,ud]):d.get("text-offset").evaluate(s,{},u).map(r=>24*r)}let w=m?"center":d.get("text-justify").evaluate(s,{},u),E="point"===d.get("symbol-placement"),C=E?24*d.get("text-max-width").evaluate(s,{},u):1/0,S=s=>{r.allowVerticalPlacement&&nA(o)&&(_.vertical=lK(v,n,i,a,c,C,h,g,s,p,x,lW.vertical,!0,y,f))};if(!m&&b){let r="auto"===w?b.map(r=>um(r)):[w],o=!1;for(let s=0;s<r.length;s++){let l=r[s];if(!_.horizontal[l]){if(o)_.horizontal[l]=_.horizontal[0];else{let r=lK(v,n,i,a,c,C,h,"center",l,p,x,lW.horizontal,!1,y,f);r&&(_.horizontal[l]=r,o=1===r.positionedLines.length)}}}S("left")}else{if("auto"===w&&(w=um(g)),E||d.get("text-writing-mode").indexOf("horizontal")>=0||!nA(o)){let r=lK(v,n,i,a,c,C,h,g,w,p,x,lW.horizontal,!1,y,f);r&&(_.horizontal[w]=r)}S(E?"left":w)}}let w=!1;if(s.icon&&s.icon.name){let n=o[s.icon.name];n&&(b=function(r,n,i){let{horizontalAlign:o,verticalAlign:a}=l4(i),s=n[0]-r.displaySize[0]*o,l=n[1]-r.displaySize[1]*a;return{image:r,top:l,bottom:l+r.displaySize[1],left:s,right:s+r.displaySize[0]}}(a[s.icon.name],d.get("icon-offset").evaluate(s,{},u),d.get("icon-anchor").evaluate(s,{},u)),w=n.sdf,void 0===r.sdfIcons?r.sdfIcons=n.sdf:r.sdfIcons!==n.sdf&&Y("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(n.pixelRatio!==r.pixelRatio||0!==d.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}let E=uy(_.horizontal)||_.vertical;r.iconsInText||(r.iconsInText=!!E&&E.iconsInText),(E||b)&&function(r,n,i,o,a,s,l,u,c,h,d,f,p){var m;let g,y=s.textMaxSize.evaluate(n,{},f);void 0===y&&(y=l);let _=r.layers[0].layout,v=_.get("icon-offset").evaluate(n,{},f),b=uy(i.horizontal)||i.vertical,x="globe"===p.name,w=l/24,E=r.tilePixelRatio*y/24,C=(m=r.overscaling,r.zoom>18&&m>2&&(m>>=1),Math.max(8192/(512*m),1)*_.get("symbol-spacing")),S=_.get("text-padding")*r.tilePixelRatio,k=_.get("icon-padding")*r.tilePixelRatio,I=_.get("text-max-angle")*M,L="map"===_.get("text-rotation-alignment")&&"point"!==_.get("symbol-placement"),A="map"===_.get("icon-rotation-alignment")&&"point"!==_.get("symbol-placement"),z=_.get("symbol-placement"),P=C/2,O=_.get("icon-text-fit");o&&"none"!==O&&(r.allowVerticalPlacement&&i.vertical&&(g=l5(o,i.vertical,O,_.get("icon-text-fit-padding"),v,w)),b&&(o=l5(o,b,O,_.get("icon-text-fit-padding"),v,w)));let D=(l,u,m)=>{if(u.x<0||u.x>=8192||u.y<0||u.y>=8192)return;let y=null;if(x){let{x:r,y:n,z:i}=p.projectTilePoint(u.x,u.y,m);y={anchor:new l6(r,n,i,0,void 0),up:p.upVector(m,u.x,u.y)}}!function(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T){let M=r.addToLineVertexArray(n,o),k,I,L,A,z,P,O,D=0,R=0,F=0,B=0,N=-1,j=-1,V={},U=iG(""),q=i?i.anchor:n,$=0,H=0;if(void 0===c._unevaluatedLayout.getValue("text-radial-offset")?[$,H]=c.layout.get("text-offset").evaluate(w,{},T).map(r=>24*r):($=24*c.layout.get("text-radial-offset").evaluate(w,{},T),H=ud),r.allowVerticalPlacement&&a.vertical){let r=a.vertical;if(g)P=uv(r),u&&(O=uv(u));else{let i=c.layout.get("text-rotate").evaluate(w,{},T)+90;L=u_(h,q,n,d,f,p,r,m,i,y),u&&(A=u_(h,q,n,d,f,p,u,v,i))}}if(s){let o=c.layout.get("icon-rotate").evaluate(w,{},T),a="none"!==c.layout.get("icon-text-fit"),l=uo(s,o,C,a),m=u?uo(u,o,C,a):void 0;I=u_(h,q,n,d,f,p,s,v,o),D=4*l.length;let g=r.iconSizeData,y=null;"source"===g.kind?(y=[128*c.layout.get("icon-size").evaluate(w,{},T)])[0]>32640&&Y(`${r.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`):"composite"===g.kind&&((y=[128*E.compositeIconSizes[0].evaluate(w,{},T),128*E.compositeIconSizes[1].evaluate(w,{},T)])[0]>32640||y[1]>32640)&&Y(`${r.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`),r.addSymbols(r.icon,l,y,x,b,w,!1,i,n,M.lineStartIndex,M.lineLength,-1,S,T),N=r.icon.placedSymbolArray.length-1,m&&(R=4*m.length,r.addSymbols(r.icon,m,y,x,b,w,lW.vertical,i,n,M.lineStartIndex,M.lineLength,-1,S,T),j=r.icon.placedSymbolArray.length-1)}for(let o in a.horizontal){let s=a.horizontal[o];k||(U=iG(s.text),g?z=uv(s):k=u_(h,q,n,d,f,p,s,m,c.layout.get("text-rotate").evaluate(w,{},T),y));let u=1===s.positionedLines.length;if(F+=ug(r,i,n,s,l,c,g,w,y,M,a.vertical?lW.horizontal:lW.horizontalOnly,u?Object.keys(a.horizontal):[o],V,N,E,S,T),u)break}a.vertical&&(B+=ug(r,i,n,a.vertical,l,c,g,w,y,M,lW.vertical,["vertical"],V,j,E,S,T));let Z=-1,G=(r,n)=>r?Math.max(r,n):n;Z=G(z,Z),Z=G(P,Z),Z=G(O,Z);let W=Z>-1?1:0;r.glyphOffsetArray.length>=uZ.MAX_GLYPHS&&Y("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&r.addToSortKeyRanges(r.symbolInstances.length,w.sortKey),r.symbolInstances.emplaceBack(q.x,q.y,q.z,n.x,n.y,V.right>=0?V.right:-1,V.center>=0?V.center:-1,V.left>=0?V.left:-1,V.vertical>=0?V.vertical:-1,N,j,U,void 0!==k?k:r.collisionBoxArray.length,void 0!==k?k+1:r.collisionBoxArray.length,void 0!==L?L:r.collisionBoxArray.length,void 0!==L?L+1:r.collisionBoxArray.length,void 0!==I?I:r.collisionBoxArray.length,void 0!==I?I+1:r.collisionBoxArray.length,A||r.collisionBoxArray.length,A?A+1:r.collisionBoxArray.length,d,F,B,D,R,W,0,$,H,Z)}(r,u,y,l,i,o,a,g,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,S,L,c,0,k,A,v,n,s,h,d,f)};if("line"===z)for(let a of ue(n.geometry,0,0,8192,8192)){let n=function(r,n,i,o,a,s,l,u,c){let h=o?.6*s*l:0,d=l7(o,a),f=d*l,p=0===r[0].x||r[0].x===c||0===r[0].y||r[0].y===c;return n-f<n/4&&(n=f+n/4),function r(n,i,o,a,s,l,u,c,h){let d=l/2,f=l9(n),p=0,m=i-o,g=[];for(let r=0;r<n.length-1;r++){let i=n[r],u=n[r+1],c=i.dist(u),y=u.angleTo(i);for(;m+o<p+c;){m+=o;let _=(m-p)/c,v=tQ(i.x,u.x,_),b=tQ(i.y,u.y,_);if(v>=0&&v<h&&b>=0&&b<h&&m-d>=0&&m+d<=f){let i=new l6(v,b,0,y,r);i._round(),a&&!l8(n,i,l,a,s)||g.push(i)}}p+=c}return c||g.length||u||(g=r(n,p/2,o,a,s,l,u,!0,h)),g}(r,p?n/2*u%n:(d/2+2*s)*l*u%n,n,h,i,f,p,!1,c)}(a,C,I,i.vertical||b,o,24,E,r.overscaling,8192);for(let i of n)b&&function(r,n,i,o){let a=r.compareText;if(n in a){let r=a[n];for(let n=r.length-1;n>=0;n--)if(o.dist(r[n])<i)return!0}else a[n]=[];return a[n].push(o),!1}(r,b.text,P,i)||D(a,i,f)}else if("line-center"===z){for(let r of n.geometry)if(r.length>1){let n=function(r,n,i,o,a,s){let l=i?14.399999999999999*s:0,u=l7(i,o)*s,c=0,h=l9(r)/2;for(let i=0;i<r.length-1;i++){let o=r[i],a=r[i+1],s=o.dist(a);if(c+s>h){let d=(h-c)/s,f=tQ(o.x,a.x,d),p=tQ(o.y,a.y,d),m=new l6(f,p,0,a.angleTo(o),i);return!l||l8(r,m,u,l,n)?m:void 0}c+=s}}(r,I,i.vertical||b,o,0,E);n&&D(r,n,f)}}else if("Polygon"===n.type)for(let r of sw(n.geometry,0)){let n=function(r,n=1,i=!1){let o=1/0,a=1/0,s=-1/0,l=-1/0,u=r[0];for(let r=0;r<u.length;r++){let n=u[r];(!r||n.x<o)&&(o=n.x),(!r||n.y<a)&&(a=n.y),(!r||n.x>s)&&(s=n.x),(!r||n.y>l)&&(l=n.y)}let c=Math.min(s-o,l-a),h=c/2,d=new ul([],uc);if(0===c)return new T(o,a);for(let n=o;n<s;n+=c)for(let i=a;i<l;i+=c)d.push(new uh(n+h,i+h,h,r));let f=function(r){let n=0,i=0,o=0,a=r[0];for(let r=0,s=a.length,l=s-1;r<s;l=r++){let s=a[r],u=a[l],c=s.x*u.y-u.x*s.y;i+=(s.x+u.x)*c,o+=(s.y+u.y)*c,n+=3*c}return new uh(i/n,o/n,0,r)}(r),p=d.length;for(;d.length;){let o=d.pop();(o.d>f.d||!f.d)&&(f=o,i&&console.log("found best %d after %d probes",Math.round(1e4*o.d)/1e4,p)),o.max-f.d<=n||(h=o.h/2,d.push(new uh(o.p.x-h,o.p.y-h,h,r)),d.push(new uh(o.p.x+h,o.p.y-h,h,r)),d.push(new uh(o.p.x-h,o.p.y+h,h,r)),d.push(new uh(o.p.x+h,o.p.y+h,h,r)),p+=4)}return i&&(console.log(`num probes: ${p}`),console.log(`best distance: ${f.d}`)),f.p}(r,16);D(r[0],new l6(n.x,n.y,0,0,void 0),f)}else if("LineString"===n.type)for(let r of n.geometry)D(r,new l6(r[0].x,r[0].y,0,0,void 0),f);else if("Point"===n.type)for(let r of n.geometry)for(let n of r)D([n],new l6(n.x,n.y,0,0,void 0),f)}(r,s,_,b,o,p,y,0,x,w,l,u,h)}s&&r.generateCollisionDebugBuffers(c,r.collisionBoxArray)}(a,l,r.positions,u,n.iconPositions,this.showCollisionBoxes,i,this.tileID.canonical,this.tileZoom,this.projection)):a.hasPattern&&(a instanceof ls||a instanceof sT||a instanceof sZ)&&(cP(a.layers,this.zoom,i),a.addFeatures(m,this.tileID.canonical,n.patternPositions,i,this.tileTransform))}this.status="done",a(null,{buckets:F(f).filter(r=>!r.isEmpty()),featureIndex:d,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:r.image,lineAtlas:p,imageAtlas:n,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?u:null,glyphPositions:this.returnDependencies?r.positions:null})}},v=Z(m.glyphDependencies,r=>Object.keys(r).map(Number));Object.keys(v).length?o.send("getGlyphs",{uid:this.uid,stacks:v},(r,n)=>{s||(s=r,l=n,_())},void 0,!1,y):l={};let b=Object.keys(m.iconDependencies);b.length?o.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"icons"},(r,n)=>{s||(s=r,u=n,_())},void 0,!1,y):u={};let x=Object.keys(m.patternDependencies);x.length?o.send("getImages",{icons:x,source:this.source,tileID:this.tileID,type:"patterns"},(r,n)=>{s||(s=r,c=n,_())},void 0,!1,y):c={},_()}}function cP(r,n,i){let o=new nG(n);for(let n of r)n.recalculate(o,i)}class cO{constructor(r){this.entries={},this.scheduler=r}request(r,n,i,o){let a=this.entries[r]=this.entries[r]||{callbacks:[]};if(a.result){let[r,i]=a.result;return this.scheduler?this.scheduler.add(()=>{o(r,i)},n):o(r,i),()=>{}}return a.callbacks.push(o),a.cancel||(a.cancel=i((i,o)=>{for(let r of(a.result=[i,o],a.callbacks))this.scheduler?this.scheduler.add(()=>{r(i,o)},n):r(i,o);setTimeout(()=>delete this.entries[r],3e3)})),()=>{a.result||(a.callbacks=a.callbacks.filter(r=>r!==o),a.callbacks.length||(a.cancel(),delete this.entries[r]))}}}function cD(r,n,i){let o=JSON.stringify(r.request);return r.data&&(this.deduped.entries[o]={result:[null,r.data]}),this.deduped.request(o,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},n=>{let o=em(r.request,(r,o,a,s)=>{r?n(r):o&&n(null,{vectorTile:i?void 0:new sN(new lV(o)),rawData:o,cacheControl:a,expires:s})});return()=>{o.cancel(),n()}},n)}let cR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class cF{static from(r){if(!(r instanceof ArrayBuffer))throw Error("Data must be an instance of ArrayBuffer.");let[n,i]=new Uint8Array(r,0,2);if(219!==n)throw Error("Data does not appear to be in a KDBush format.");let o=i>>4;if(1!==o)throw Error(`Got v${o} data when expected v1.`);let a=cR[15&i];if(!a)throw Error("Unrecognized array type.");let[s]=new Uint16Array(r,2,1),[l]=new Uint32Array(r,4,1);return new cF(l,s,a,r)}constructor(r,n=64,i=Float64Array,o){if(isNaN(r)||r<0)throw Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;let a=cR.indexOf(this.ArrayType),s=2*r*this.ArrayType.BYTES_PER_ELEMENT,l=r*this.IndexArrayType.BYTES_PER_ELEMENT,u=(8-l%8)%8;if(a<0)throw Error(`Unexpected typed array class: ${i}.`);o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+l+u,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+s+l+u),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+l+u,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=r)}add(r,n){let i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=r,this.coords[this._pos++]=n,i}finish(){let r=this._pos>>1;if(r!==this.numItems)throw Error(`Added ${r} items when expected ${this.numItems}.`);return function r(n,i,o,a,s,l){if(s-a<=o)return;let u=a+s>>1;(function r(n,i,o,a,s,l){for(;s>a;){if(s-a>600){let u=s-a+1,c=o-a+1,h=Math.log(u),d=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*d*(u-d)/u)*(c-u/2<0?-1:1);r(n,i,o,Math.max(a,Math.floor(o-c*d/u+f)),Math.min(s,Math.floor(o+(u-c)*d/u+f)),l)}let u=i[2*o+l],c=a,h=s;for(cB(n,i,a,o),i[2*s+l]>u&&cB(n,i,a,s);c<h;){for(cB(n,i,c,h),c++,h--;i[2*c+l]<u;)c++;for(;i[2*h+l]>u;)h--}i[2*a+l]===u?cB(n,i,a,h):cB(n,i,++h,s),h<=o&&(a=h+1),o<=h&&(s=h-1)}})(n,i,u,a,s,l),r(n,i,o,a,u-1,1-l),r(n,i,o,u+1,s,1-l)}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,n,i,o){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:a,coords:s,nodeSize:l}=this,u=[0,a.length-1,0],c=[];for(;u.length;){let h=u.pop()||0,d=u.pop()||0,f=u.pop()||0;if(d-f<=l){for(let l=f;l<=d;l++){let u=s[2*l],h=s[2*l+1];u>=r&&u<=i&&h>=n&&h<=o&&c.push(a[l])}continue}let p=f+d>>1,m=s[2*p],g=s[2*p+1];m>=r&&m<=i&&g>=n&&g<=o&&c.push(a[p]),(0===h?r<=m:n<=g)&&(u.push(f),u.push(p-1),u.push(1-h)),(0===h?i>=m:o>=g)&&(u.push(p+1),u.push(d),u.push(1-h))}return c}within(r,n,i){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:o,coords:a,nodeSize:s}=this,l=[0,o.length-1,0],u=[],c=i*i;for(;l.length;){let h=l.pop()||0,d=l.pop()||0,f=l.pop()||0;if(d-f<=s){for(let i=f;i<=d;i++)cj(a[2*i],a[2*i+1],r,n)<=c&&u.push(o[i]);continue}let p=f+d>>1,m=a[2*p],g=a[2*p+1];cj(m,g,r,n)<=c&&u.push(o[p]),(0===h?r-i<=m:n-i<=g)&&(l.push(f),l.push(p-1),l.push(1-h)),(0===h?r+i>=m:n+i>=g)&&(l.push(p+1),l.push(d),l.push(1-h))}return u}}function cB(r,n,i,o){cN(r,i,o),cN(n,2*i,2*o),cN(n,2*i+1,2*o+1)}function cN(r,n,i){let o=r[n];r[n]=r[i],r[i]=o}function cj(r,n,i,o){let a=r-i,s=n-o;return a*a+s*s}r.ARRAY_TYPE=od,r.AUTH_ERR_MSG=e_,r.Aabb=o0,r.Actor=class{constructor(r,n,i){this.target=r,this.parent=n,this.mapId=i,this.callbacks={},this.cancelCallbacks={},$(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=J()?r:f,this.scheduler=new u5}send(r,n,i,o,a=!1,s){let l=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=s,this.callbacks[l]=i);let u=et(this.globalScope)?void 0:[];return this.target.postMessage({id:l,type:r,hasCallback:!!i,targetMapId:o,mustQueue:a,sourceMapId:this.mapId,data:nk(n,u)},u),{cancel:()=>{i&&delete this.callbacks[l],this.target.postMessage({id:l,type:"<cancel>",targetMapId:o,sourceMapId:this.mapId})}}}receive(r){let n=r.data,i=n.id;if(i&&(!n.targetMapId||this.mapId===n.targetMapId)){if("<cancel>"===n.type){let r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r.cancel()}else if(n.mustQueue||J()){let r=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,n),r&&r.metadata||{type:"message"})}else this.processTask(i,n)}}processTask(r,n){if("<response>"===n.type){let i=this.callbacks[r];delete this.callbacks[r],i&&(n.error?i(nI(n.error)):i(null,nI(n.data)))}else{let i=et(this.globalScope)?void 0:[],o=n.hasCallback?(n,o)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:n?nk(n):null,data:nk(o,i)},i)}:r=>{},a=nI(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,a,o);else if(this.parent.getWorkerSource){let r=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,r[0],a.source)[r[1]](a,o)}else o(Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.CanonicalTileID=s4,r.Color=tf,r.ColorMode=cb,r.CullFaceMode=cx,r.DEMData=cg,r.DataConstantProperty=n2,r.DedupedRequest=cO,r.DepthMode=c_,r.EXTENT=8192,r.Elevation=class{isDataAvailableAtPoint(r){let n=this._source();if(this.isUsingMockSource()||!n||r.y<0||r.y>1)return!1;let i=n.getSource().maxzoom,o=1<<i,a=Math.floor(r.x),s=Math.floor((r.x-a)*o),l=Math.floor(r.y*o),u=this.findDEMTileFor(new s5(i,a,i,s,l));return!(!u||!u.dem)}getAtPointOrZero(r,n=0){return this.getAtPoint(r,n)||0}getAtPoint(r,n,i=!0){if(this.isUsingMockSource())return null;null==n&&(n=null);let o=this._source();if(!o||r.y<0||r.y>1)return n;let a=o.getSource().maxzoom,s=1<<a,l=Math.floor(r.x),u=r.x-l,c=new s5(a,l,a,Math.floor(u*s),Math.floor(r.y*s)),h=this.findDEMTileFor(c);if(!h||!h.dem)return n;let d=h.dem,f=1<<h.tileID.canonical.z,p=(u*f-h.tileID.canonical.x)*d.dim,m=(r.y*f-h.tileID.canonical.y)*d.dim,g=Math.floor(p),y=Math.floor(m);return(i?this.exaggeration():1)*tQ(tQ(d.get(g,y),d.get(g,y+1),m-y),tQ(d.get(g+1,y),d.get(g+1,y+1),m-y),p-g)}getAtTileOffset(r,n,i){let o=1<<r.canonical.z;return this.getAtPointOrZero(new aI(r.wrap+(r.canonical.x+n/8192)/o,(r.canonical.y+i/8192)/o))}getAtTileOffsetFunc(r,n,i,o){return a=>{let s=this.getAtTileOffset(r,a.x,a.y),l=o.upVector(r.canonical,a.x,a.y);return oP(l,l,s*o.upVectorScale(r.canonical,n,i).metersToTile),l}}getForTilePoints(r,n,i,o){if(this.isUsingMockSource())return!1;let a=cT.create(this,r,o);return!!a&&(n.forEach(r=>{r[2]=this.exaggeration()*a.getElevationAt(r[0],r[1],i)}),!0)}getMinMaxForTile(r){if(this.isUsingMockSource())return null;let n=this.findDEMTileFor(r);if(!n||!n.dem)return null;let i=n.dem.tree,o=n.tileID,a=1<<r.canonical.z-o.canonical.z,s=r.canonical.x/a-o.canonical.x,l=r.canonical.y/a-o.canonical.y,u=0;for(let n=0;n<r.canonical.z-o.canonical.z&&!i.leaves[u];n++){s*=2,l*=2;let r=2*Math.floor(l)+Math.floor(s);u=i.childOffsets[u]+r,s%=1,l%=1}return{min:this.exaggeration()*i.minimums[u],max:this.exaggeration()*i.maximums[u]}}getMinElevationBelowMSL(){throw Error("Pure virtual method called.")}raycast(r,n,i){throw Error("Pure virtual method called.")}pointCoordinate(r){throw Error("Pure virtual method called.")}_source(){throw Error("Pure virtual method called.")}isUsingMockSource(){throw Error("Pure virtual method called.")}exaggeration(){throw Error("Pure virtual method called.")}findDEMTileFor(r){throw Error("Pure virtual method called.")}get visibleDemTiles(){throw Error("Getter must be implemented in subclass.")}},r.ErrorEvent=eG,r.EvaluationParameters=nG,r.Event=eZ,r.Evented=eW,r.FillExtrusionBucket=sZ,r.Frustum=oQ,r.FrustumCorners=oJ,r.GLOBE_RADIUS=o1,r.GLOBE_SCALE_MATCH_LATITUDE=45,r.GLOBE_ZOOM_THRESHOLD_MAX=6,r.GLOBE_ZOOM_THRESHOLD_MIN=5,r.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r)}destroy(){for(let r of(this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy(),this._poleSegments))r.destroy();for(let r of this._gridSegments)r.withSkirts.destroy(),r.withoutSkirts.destroy();if(this._wireframeIndexBuffer)for(let r of(this._wireframeIndexBuffer.destroy(),this._wireframeSegments))r.destroy()}_fillGridMeshWithLods(r,n){let i=new ir,o=new ib,a=[],s=r+1+2,l=n[0]+1,u=n[0]+1+(1+n.length),c=(r,n,i)=>{let o=r===s-1?r-2:0===r?r:r-1;return[o+=i?24575:0,n]};for(let r=0;r<s;++r)i.emplaceBack(...c(r,0,!0));for(let r=0;r<l;++r)for(let n=0;n<s;++n)i.emplaceBack(...c(n,r,0===n||n===s-1));for(let r=0;r<n.length;++r){let o=n[r];for(let r=0;r<s;++r)i.emplaceBack(...c(r,o,!0))}for(let r=0;r<n.length;++r){let l=o.length,c=n[r]+1+2,h=new ib;for(let i=0;i<c-1;i++){let a=i===c-2,l=a?s*(u-n.length+r-i):s;for(let r=0;r<s-1;r++){let n=i*s+r;0===i||a||0===r||r===s-2?(h.emplaceBack(n+1,n,n+l),h.emplaceBack(n+l,n+l+1,n+1)):(o.emplaceBack(n+1,n,n+l),o.emplaceBack(n+l,n+l+1,n+1))}}let d=oc.simpleSegment(0,l,i.length,o.length-l);for(let r=0;r<h.uint16.length;r+=3)o.emplaceBack(h.uint16[r],h.uint16[r+1],h.uint16[r+2]);let f=oc.simpleSegment(0,l,i.length,o.length-l);a.push({withoutSkirts:d,withSkirts:f})}return{vertices:i,indices:o,segments:a}}_createGrid(r){let n=this._fillGridMeshWithLods(64,o2);this._gridSegments=n.segments,this._gridBuffer=r.createVertexBuffer(n.vertices,oY.members),this._gridIndexBuffer=r.createIndexBuffer(n.indices,!0)}_createPoles(r){let n=new ib;for(let r=0;r<=64;r++)n.emplaceBack(0,r+1,r+2);this._poleIndexBuffer=r.createIndexBuffer(n,!0);let i=new iC,o=new iC;this._poleSegments=[];for(let r=0,n=0;r<5;r++){let a=360/(1<<r);i.emplaceBack(0,-o1,0,.5,0),o.emplaceBack(0,-o1,0,.5,1);for(let r=0;r<=64;r++){let n=r/64,s=tQ(0,a,n),[l,u,c]=ao(ay,a_,s,o1);i.emplaceBack(l,u,c,n,0),o.emplaceBack(l,u,c,n,1)}this._poleSegments.push(oc.simpleSegment(n,0,66,64)),n+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(i,oW,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(o,oW,!1)}getGridBuffers(r,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[r].withSkirts:this._gridSegments[r].withoutSkirts]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r,n){if(!this._wireframeSegments){let n=new iT;this._wireframeSegments=[];for(let r=0,i=0;r<o2.length;r++){let o=o2[r];for(let r=1;r<o+1;r++)for(let i=1;i<65;i++){let o=67*r+i;n.emplaceBack(o,o+1),n.emplaceBack(o,o+67),n.emplaceBack(o,o+67+1)}let a=192*o;this._wireframeSegments.push(oc.simpleSegment(0,i,(o+1)*67,a)),i+=a}this._wireframeIndexBuffer=r.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},r.GlyphManager=ui,r.ImagePosition=lZ,r.KDBush=cF,r.LivePerformanceUtils={mark(r){f.performance.mark(r)},measure(r,n,i){f.performance.measure(r,n,i)}},r.LngLat=aw,r.LngLatBounds=oh,r.LocalGlyphMode=un,r.MAX_MERCATOR_LATITUDE=85.051129,r.MercatorCoordinate=aI,r.ONE_EM=24,r.OverscaledTileID=s5,r.PerformanceMarkers=eN,r.Point=T,r.Properties=n5,r.RGBAImage=a5,r.Ray=oK,r.RequestManager=class{constructor(r,n,i){this._transformRequestFn=r,this._customAccessToken=n,this._silenceAuthErrors=!!i,this._createSkuToken()}_createSkuToken(){let r=function(){let r="";for(let n=0;n<10;n++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,n){return this._transformRequestFn&&this._transformRequestFn(r,n)||{url:r}}normalizeStyleURL(r,n){if(!ev(r))return r;let i=eS(r);return i.path=`/styles/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||n)}normalizeGlyphsURL(r,n){if(!ev(r))return r;let i=eS(r);return i.path=`/fonts/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||n)}normalizeSourceURL(r,n,i,o){if(!ev(r))return r;let a=eS(r);return a.path=`/v4/${a.authority}.json`,a.params.push("secure"),i&&a.params.push(`language=${i}`),o&&a.params.push(`worldview=${o}`),this._makeAPIURL(a,this._customAccessToken||n)}normalizeSpriteURL(r,n,i,o){let a=eS(r);return ev(r)?(a.path=`/styles/v1${a.path}/sprite${n}${i}`,this._makeAPIURL(a,this._customAccessToken||o)):(a.path+=`${n}${i}`,eT(a))}normalizeTileURL(r,n,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!ev(r))return r;let o=eS(r);o.path=o.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||i&&"raster"!==o.authority&&512===i?"@2x":""}${g.supported?".webp":"$1"}`),"raster"===o.authority?o.path=`/${m.RASTER_URL_PREFIX}${o.path}`:(o.path=o.path.replace(/^.+\/v4\//,"/"),o.path=`/${m.TILE_URL_VERSION}${o.path}`);let a=this._customAccessToken||function(r){for(let n of r){let r=n.match(/^access_token=(.*)$/);if(r)return r[1]}return null}(o.params)||m.ACCESS_TOKEN;return m.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&o.params.push(`sku=${this._skuToken}`),this._makeAPIURL(o,a)}canonicalizeTileURL(r,n){let i=eS(r);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return r;let o="mapbox://";i.path.match(/^\/raster\/v1\//)?o+=`raster/${i.path.replace(`/${m.RASTER_URL_PREFIX}/`,"")}`:o+=`tiles/${i.path.replace(`/${m.TILE_URL_VERSION}/`,"")}`;let a=i.params;return n&&(a=a.filter(r=>!r.match(/^access_token=/))),a.length&&(o+=`?${a.join("&")}`),o}canonicalizeTileset(r,n){let i=!!n&&ev(n),o=[];for(let n of r.tiles||[])eb(n)?o.push(this.canonicalizeTileURL(n,i)):o.push(n);return o}_makeAPIURL(r,n){let i="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",o=eS(m.API_URL);if(r.protocol=o.protocol,r.authority=o.authority,"http"===r.protocol){let n=r.params.indexOf("secure");n>=0&&r.params.splice(n,1)}if("/"!==o.path&&(r.path=`${o.path}${r.path}`),!m.REQUIRE_ACCESS_TOKEN)return eT(r);if(n=n||m.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw Error(`An API access token is required to use Mapbox GL. ${i}`);if("s"===n[0])throw Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${i}`)}return r.params=r.params.filter(r=>-1===r.indexOf("access_token")),r.params.push(`access_token=${n||""}`),eT(r)}},r.ResourceType=eh,r.SegmentVector=oc,r.SourceCache=cw,r.StencilMode=cv,r.StructArrayLayout1ui2=iM,r.StructArrayLayout2f1f2i16=iy,r.StructArrayLayout2i4=ir,r.StructArrayLayout2ui4=iT,r.StructArrayLayout3f12=iv,r.StructArrayLayout3ui6=ib,r.StructArrayLayout4i8=io,r.StructArrayLayout5f20=iC,r.Texture=u4,r.Tile=ca,r.Transitionable=nY,r.Uniform1f=iJ,r.Uniform1i=class extends iK{constructor(r){super(r),this.current=0}set(r,n,i){this.fetchUniformLocation(r,n)&&this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},r.Uniform2f=class extends iK{constructor(r){super(r),this.current=[0,0]}set(r,n,i){this.fetchUniformLocation(r,n)&&(i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1])))}},r.Uniform3f=class extends iK{constructor(r){super(r),this.current=[0,0,0]}set(r,n,i){this.fetchUniformLocation(r,n)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2])))}},r.Uniform4f=iQ,r.UniformColor=i0,r.UniformMatrix2f=class extends iK{constructor(r){super(r),this.current=i4}set(r,n,i){if(this.fetchUniformLocation(r,n)){for(let r=0;r<4;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}}},r.UniformMatrix3f=class extends iK{constructor(r){super(r),this.current=i2}set(r,n,i){if(this.fetchUniformLocation(r,n)){for(let r=0;r<9;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix3fv(this.location,!1,i);break}}}},r.UniformMatrix4f=class extends iK{constructor(r){super(r),this.current=i1}set(r,n,i){if(this.fetchUniformLocation(r,n)){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let r=1;r<16;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}}},r.UnwrappedTileID=s3,r.ValidationError=rK,r.VectorTileFeature=sj,r.VectorTileWorkerSource=class extends eW{constructor(r,n,i,o,a){super(),this.actor=r,this.layerIndex=n,this.availableImages=i,this.loadVectorData=a||cD,this.loading={},this.loaded={},this.deduped=new cO(r.scheduler),this.isSpriteLoaded=o,this.scheduler=r.scheduler}loadTile(r,n){let i=r.uid,o=r&&r.request,a=o&&o.collectResourceTiming,s=this.loading[i]=new cz(r);s.abort=this.loadVectorData(r,(l,u)=>{let c=!this.loading[i];if(delete this.loading[i],c||l||!u)return s.status="done",c||(this.loaded[i]=s),n(l);let h=u.rawData,d={};u.expires&&(d.expires=u.expires),u.cacheControl&&(d.cacheControl=u.cacheControl),s.vectorTile=u.vectorTile||new sN(new lV(h));let f=()=>{s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,(r,i)=>{if(r||!i)return n(r);let s={};if(a){let r=eU(o);r.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(r)))}n(null,B({rawTileData:h.slice(0)},i,d,s))})};this.isSpriteLoaded?f():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(f,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):f()}),this.loaded=this.loaded||{},this.loaded[i]=s})}reloadTile(r,n){let i=this.loaded,o=r.uid,a=this;if(i&&i[o]){let s=i[o];s.showCollisionBoxes=r.showCollisionBoxes,s.enableTerrain=!!r.enableTerrain,s.projection=r.projection,s.tileTransform=ux(r.tileID.canonical,r.projection);let l=(r,i)=>{let o=s.reloadCallback;o&&(delete s.reloadCallback,s.parse(s.vectorTile,a.layerIndex,this.availableImages,a.actor,o)),n(r,i)};"parsing"===s.status?s.reloadCallback=l:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,l):l())}}abortTile(r,n){let i=r.uid,o=this.loading[i];o&&(o.abort&&o.abort(),delete this.loading[i]),n()}removeTile(r,n){let i=this.loaded,o=r.uid;i&&i[o]&&delete i[o],n()}},r.WritingMode=lW,r.ZoomDependentExpression=rW,r.add=ok,r.addDynamicAttributes=uq,r.adjoint=function(r,n){var i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8];return r[0]=l*d-u*h,r[1]=a*h-o*d,r[2]=o*u-a*l,r[3]=u*c-s*d,r[4]=i*d-a*c,r[5]=a*s-i*u,r[6]=s*h-l*c,r[7]=o*c-i*h,r[8]=i*l-o*s,r},r.asyncAll=R,r.bezier=A,r.bindAll=$,r.boundsAttributes=ci,r.bufferConvexPolygon=function(r,n){let i=[];for(let o=0;o<r.length;o++){let a=D(o-1,-1,r.length-1),s=D(o+1,-1,r.length-1),l=r[o],u=r[s],c=r[a].sub(l).unit(),h=u.sub(l).unit(),d=h.angleWithSep(c.x,c.y),f=c.add(h).unit().mult(-1*n/Math.sin(d/2));i.push(l.add(f))}return i},r.cacheEntryPossiblyAdded=function(r){++ec>ea&&(r.getActor().send("enforceCacheSizeLimit",eo),ec=0)},r.calculateGlobeLabelMatrix=function(r,n){let{x:i,y:o}=r.point,a=ad(i,o,r.worldSize/r._pixelsPerMercatorPixel,0,0);return oy(a,a,ah(o7(n)))},r.calculateGlobeMatrix=function(r){let{x:n,y:i}=r.point,{lng:o,lat:a}=r._center;return ad(n,i,r.worldSize,o,a)},r.calculateGlobeMercatorMatrix=function(r){let n=r.pixelsPerMeter,i=n/(1/aE(r.center.lat)),o=om(new Float64Array(16));return o_(o,o,[r.point.x,r.point.y,0]),ov(o,o,[i,i,n]),Float32Array.from(o)},r.circumferenceAtLatitude=aE,r.clamp=P,r.clearTileCache=function(r){if(!es())return;let n=f.caches.delete(ei);r&&n.catch(r).then(()=>r())},r.clipLine=ue,r.clone=function(r){var n=new od(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},r.clone$1=W,r.collisionCircleLayout=ly,r.config=m,r.conjugate=function(r,n){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=n[3],r},r.create=function(){var r=new od(16);return od!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},r.create$1=of,r.createExpression=rZ,r.createLayout=ie,r.createStyleLayer=function(r){return"custom"===r.type?new uQ(r):new u2[r.type](r)},r.cross=oF,r.degToRad=function(r){return r*M},r.distance=function(r,n){return Math.hypot(n[0]-r[0],n[1]-r[1],n[2]-r[2])},r.div=function(r,n,i){return r[0]=n[0]/i[0],r[1]=n[1]/i[1],r[2]=n[2]/i[2],r},r.dot=oR,r.earthRadius=av,r.ease=z,r.easeCubicInOut=L,r.ecefToLatLng=function([r,n,i]){let o=Math.hypot(r,n,i),a=Math.atan2(r,i),s=.5*Math.PI-Math.acos(-n/o);return new aw(a*k,s*k)},r.emitValidationErrors=nx,r.endsWith=H,r.enforceCacheSizeLimit=function(r){el(),i&&i.then(n=>{n.keys().then(i=>{for(let o=0;o<i.length-r;o++)n.delete(i[o])})})},r.evaluateSizeForFeature=lv,r.evaluateSizeForZoom=lb,r.evaluateVariableOffset=up,r.evented=nq,r.exactEquals=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]},r.exactEquals$1=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]},r.exported=eq,r.exported$1=g,r.extend=B,r.extend$1=eY,r.fillExtrusionHeightLift=sJ,r.filterObject=G,r.fromMat4=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],r},r.fromQuat=function(r,n){var i=n[0],o=n[1],a=n[2],s=n[3],l=i+i,u=o+o,c=a+a,h=i*l,d=o*l,f=o*u,p=a*l,m=a*u,g=a*c,y=s*l,_=s*u,v=s*c;return r[0]=1-f-g,r[1]=d+v,r[2]=p-_,r[3]=0,r[4]=d-v,r[5]=1-h-g,r[6]=m+y,r[7]=0,r[8]=p+_,r[9]=m-y,r[10]=1-h-f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.fromRotation=function(r,n){var i=Math.sin(n),o=Math.cos(n);return r[0]=o,r[1]=i,r[2]=0,r[3]=-i,r[4]=o,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},r.fromScaling=ow,r.furthestTileCorner=function(r){let n=Math.round((r+45+360)%360/90)%4;return I[n]},r.getAABBPointSquareDist=function(r,n,i){let o=0;for(let a=0;a<2;++a){let s=i?i[a]:0;r[a]>s&&(o+=(r[a]-s)*(r[a]-s)),n[a]<s&&(o+=(s-n[a])*(s-n[a]))}return o},r.getAnchorAlignment=l4,r.getAnchorJustification=um,r.getBounds=function(r){let n=1/0,i=1/0,o=-1/0,a=-1/0;for(let s of r)n=Math.min(n,s.x),i=Math.min(i,s.y),o=Math.max(o,s.x),a=Math.max(a,s.y);return{min:new T(n,i),max:new T(o,a)}},r.getColumn=en,r.getDefaultExportFromCjs=w,r.getGridMatrix=function(r,n,i,o){let a=n.getNorth(),s=n.getSouth(),l=n.getWest(),u=n.getEast(),c=1<<r.z,h=u-l,d=a-s,f=h/64,p=-d/o2[i],m=[0,f,0,p,0,0,a,l,0];if(r.z>0){let r=180/o;op(m,m,[r/h+1,0,0,0,r/d+1,0,-.5*r/f,.5*r/p,1])}return m[2]=c,m[5]=r.x,m[8]=r.y,m},r.getImage=ey,r.getJSON=function(r,n){return ep(B(r,{type:"json"}),n)},r.getLatitudinalLod=function(r){r=P(r,-80.051129,80.051129)/80.051129*90;let n=Math.pow(Math.abs(Math.sin(r*M)),3);return Math.round(n*(o2.length-1))},r.getMapSessionAPI=eF,r.getPerformanceMeasurement=eU,r.getProjection=uB,r.getRTLTextPluginStatus=n$,r.getReferrer=ef,r.getTilePoint=function(r,{x:n,y:i},o=0){return new T(((n-o)*r.scale-r.x)*8192,(i*r.scale-r.y)*8192)},r.getTileVec3=function(r,n,i=0){return oM(((n.x-i)*r.scale-r.x)*8192,(n.y*r.scale-r.y)*8192,n.z*aE(aM(n.y)))},r.getVideo=function(r,n){let i=f.document.createElement("video");i.muted=!0,i.onloadstart=function(){n(null,i)};for(let n=0;n<r.length;n++){let o=f.document.createElement("source");(function(r){let n=f.document.createElement("a");return n.href=r,n.protocol===f.document.location.protocol&&n.host===f.document.location.host})(r[n])||(i.crossOrigin="Anonymous"),o.src=r[n],i.appendChild(o)}return{cancel:()=>{}}},r.globeCenterToScreenPoint=function(r){let n=[0,0,0],i=om(new Float64Array(16));return oy(i,r.pixelMatrix,r.globeMatrix),oB(n,n,i),new T(n[0],n[1])},r.globeDenormalizeECEF=ah,r.globeECEFOrigin=function(r,n){let i=[0,0,0];return oB(i,i,ac(o7(n.canonical))),oB(i,i,r),i},r.globeMetersToEcef=o5,r.globeNormalizeECEF=ac,r.globePixelsToTileUnits=function(r,n){return 8192/(512*Math.pow(2,r))*al(o7(n))},r.globePoleMatrixForTile=function(r,n,i){let o=om(new Float64Array(16)),a=(n/(1<<r)-.5)*Math.PI*2;return ox(o,i.globeMatrix,a),Float32Array.from(o)},r.globeTileBounds=o7,r.globeTiltAtLngLat=ap,r.globeToMercatorTransition=af,r.globeUseCustomAntiAliasing=function(r,n,i){let o=af(i.zoom),a=r.style.map._antialias,s=!!n.extStandardDerivatives,l=n.extStandardDerivativesForceOff||r.terrain&&r.terrain.exaggeration()>0;return 0===o&&!a&&!l&&s},r.identity=om,r.identity$1=o$,r.invert=og,r.isFullscreen=function(){return!!f.document.fullscreenElement||!!f.document.webkitFullscreenElement},r.isLngLatBehindGlobe=am,r.isMapAuthenticated=function(r){return eB.has(r)},r.isMapboxURL=ev,r.isSafariWithAntialiasingBug=function(r){let n=r.navigator?r.navigator.userAgent:null;return!!et(r)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},r.latFromMercatorY=aM,r.latLngToECEF=aa,r.len=oT,r.length=oT,r.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},r.lngFromMercatorX=aT,r.loadVectorTile=cD,r.makeRequest=ep,r.mapValue=function(r,n,i,o,a){return P((r-n)/(i-n)*(a-o)+o,o,a)},r.mercatorScale=ak,r.mercatorXfromLng=aC,r.mercatorYfromLat=aS,r.mercatorZfromAltitude=function(r,n){return r/aE(n)},r.mul=oy,r.mul$1=oL,r.multiply=oy,r.multiply$1=op,r.multiply$2=oL,r.nextPowerOfTwo=U,r.normalize=oD,r.normalize$1=oV,r.normalize$2=oV,r.number=tQ,r.ortho=function(r,n,i,o,a,s,l){var u=1/(n-i),c=1/(o-a),h=1/(s-l);return r[0]=-2*u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*h,r[11]=0,r[12]=(n+i)*u,r[13]=(a+o)*c,r[14]=(l+s)*h,r[15]=1,r},r.pbf=lS,r.perspective=function(r,n,i,o,a){var s,l=1/Math.tan(n/2);return r[0]=l/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=a&&a!==1/0?(r[10]=(a+o)*(s=1/(o-a)),r[14]=2*a*o*s):(r[10]=-1,r[14]=-2*o),r},r.pick=function(r,n){let i={};for(let o=0;o<n.length;o++){let a=n[o];a in r&&(i[a]=r[a])}return i},r.plugin=nZ,r.pointGeometry=S,r.polesInViewport=function(r){let n=om(new Float64Array(16));oy(n,r.pixelMatrix,r.globeMatrix);let i=[0,o4,0],o=[0,o1,0];return oB(i,i,n),oB(o,o,n),[i[0]>0&&i[0]<=r.width&&i[1]>0&&i[1]<=r.height&&!am(r,new aw(r.center.lat,90)),o[0]>0&&o[0]<=r.width&&o[1]>0&&o[1]<=r.height&&!am(r,new aw(r.center.lat,-90))]},r.polygonContainsPoint=aq,r.polygonIntersectsBox=a$,r.polygonIntersectsPolygon=aF,r.polygonizeBounds=function(r,n,i=0,o=!0){let a=new T(i,i),s=r.sub(a),l=n.add(a),u=[s,new T(l.x,s.y),l,new T(s.x,l.y)];return o&&u.push(s.clone()),u},r.posAttributes=oY,r.postMapLoadEvent=eP,r.postPerformanceEvent=eD,r.postTurnstileEvent=eA,r.potpack=lH,r.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},r.radToDeg=function(r){return r*k},r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.registerForPluginStateChange=function(r){return r({pluginStatus:nN,pluginURL:nj}),nq.on("pluginStateChange",r),r},r.removeAuthState=function(r){eB.delete(r)},r.renderColorRamp=a8,r.resample=aL,r.rotateX=ob,r.rotateX$1=oH,r.rotateY=ox,r.rotateY$1=oZ,r.rotateZ=function(r,n,i){var o=Math.sin(i),a=Math.cos(i),s=n[0],l=n[1],u=n[2],c=n[3],h=n[4],d=n[5],f=n[6],p=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*a+h*o,r[1]=l*a+d*o,r[2]=u*a+f*o,r[3]=c*a+p*o,r[4]=h*a-s*o,r[5]=d*a-l*o,r[6]=f*a-u*o,r[7]=p*a-c*o,r},r.rotateZ$1=function(r,n,i){i*=.5;var o=n[0],a=n[1],s=n[2],l=n[3],u=Math.sin(i),c=Math.cos(i);return r[0]=o*c+a*u,r[1]=a*c-o*u,r[2]=s*c+l*u,r[3]=l*c-s*u,r},r.scale=ov,r.scale$1=oj,r.scale$2=oP,r.scaleAndAdd=oO,r.set=function(r,n,i,o){return r[0]=n,r[1]=i,r[2]=o,r},r.setCacheLimits=function(r,n){eo=r,ea=n},r.setColumn=function(r,n,i){r[4*n+0]=i[0],r[4*n+1]=i[1],r[4*n+2]=i[2],r[4*n+3]=i[3]},r.setRTLTextPlugin=function(r,n,i=!1){if(nN===nD||nN===nR||nN===nF)throw Error("setRTLTextPlugin cannot be called multiple times.");nj=eq.resolveURL(r),nN=nD,nB=n,nU(),i||nH()},r.smoothstep=O,r.spec=eX,r.squaredLength=function(r){var n=r[0],i=r[1],o=r[2];return n*n+i*i+o*o},r.storeAuthState=function(r,n){n?eB.add(r):eB.delete(r)},r.sub=oI,r.subtract=oI,r.symbolSize=lx,r.tileAABB=function(r,n,i,o,a,s,l,u,c){if("globe"===c.name)return function(r,n,i){let o=n/r.worldSize,a=r.globeMatrix;if(i.z<=1){let r=o7(i).getCorners();return ar(r,a,o),o0.fromPoints(r)}let s=an(i),l=ai(s);ar(l,a,o);let u=Number.MAX_VALUE,c=[-u,-u,-u],h=[u,u,u];if(s.contains(r.center)){for(let r of l)oA(h,h,r),oz(c,c,r);c[2]=0;let n=r.point,i=[n.x*o,n.y*o,0];return oA(h,h,i),oz(c,c,i),new o0(h,c)}let d=[a[12]*o,a[13]*o,a[14]*o],f=s.getCenter(),p=P(r.center.lat,-85.051129,85.051129),m=P(f.lat,-85.051129,85.051129),g=aC(r.center.lng),y=aS(p),_=g-aC(f.lng),v=y-aS(m);_>.5?_-=1:_<-.5&&(_+=1);let b=0;Math.abs(_)>Math.abs(v)?b=_>=0?1:3:(b=v>=0?0:2,oO(d,d,[a[4]*o,a[5]*o,a[6]*o],-Math.sin((v>=0?s.getSouth():s.getNorth())*M)*o1));let x=l[b],w=l[(b+1)%4],E=new o8(x,w,d),C=[o9(E,0)||x[0],o9(E,1)||x[1],o9(E,2)||x[2]],S=af(r.zoom);if(S>0){let o=function({x:r,y:n,z:i},o,a,s,l){let u=1/(1<<i),c=r*u,h=c+u,d=n*u,f=d+u,p=0,m=(c+h)/2-s;return m>.5?p=-1:m<-.5&&(p=1),c=((c+p)*o-(s*=o))*a+s,h=((h+p)*o-s)*a+s,d=(d*o-(l*=o))*a+l,[[c,f=(f*o-l)*a+l,0],[h,f,0],[h,d,0],[c,d,0]]}(i,n,r._pixelsPerMercatorPixel,g,y);for(let r=0;r<l.length;r++)ae(l[r],o[r],S);let a=ok([],o[b],o[(b+1)%4]);oP(a,a,.5),ae(C,a,S)}for(let r of l)oA(h,h,r),oz(c,c,r);return h[2]=Math.min(x[2],w[2]),oA(h,h,C),oz(c,c,C),new o0(h,c)}(r,n,new s4(i,o,a));let h=ux({z:i,x:o,y:a},c);return new o0([(s+h.x/h.scale)*n,n*(h.y/h.scale),l],[(s+h.x2/h.scale)*n,n*(h.y2/h.scale),u])},r.tileCornersToBounds=an,r.tileTransform=ux,r.transformMat3=function(r,n,i){var o=n[0],a=n[1],s=n[2];return r[0]=o*i[0]+a*i[3]+s*i[6],r[1]=o*i[1]+a*i[4]+s*i[7],r[2]=o*i[2]+a*i[5]+s*i[8],r},r.transformMat4=oB,r.transformMat4$1=oU,r.transformQuat=oN,r.transitionTileAABBinECEF=at,r.translate=o_,r.transpose=function(r,n){if(r===n){var i=n[1],o=n[2],a=n[5];r[1]=n[3],r[2]=n[6],r[3]=i,r[5]=n[7],r[6]=o,r[7]=a}else r[0]=n[0],r[1]=n[3],r[2]=n[6],r[3]=n[1],r[4]=n[4],r[5]=n[7],r[6]=n[2],r[7]=n[5],r[8]=n[8];return r},r.triggerPluginCompletionEvent=nV,r.uniqueId=j,r.updateGlobeVertexNormal=function(r,n,i,o,a){let s=5*n+2;r.float32[s+0]=i,r.float32[s+1]=o,r.float32[s+2]=a},r.validateCustomStyleLayer=function(r){let n=[],i=r.id;return void 0===i&&n.push({message:`layers.${i}: missing required property "id"`}),void 0===r.render&&n.push({message:`layers.${i}: missing required method "render"`}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&n.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),n},r.validateFilter=r=>nb(nn(r)),r.validateFog=r=>nb(nf(r)),r.validateLayer=r=>nb(ns(r)),r.validateLight=r=>nb(nh(r)),r.validateSource=r=>nb(nc(r)),r.validateStyle=ny,r.validateTerrain=r=>nb(nd(r)),r.values=F,r.vectorTile=sP,r.version=p,r.warnOnce=Y,r.window=f,r.wrap=D}),o(["./shared"],function(r){class n{constructor(r){this.keyCache={},r&&this.replace(r)}replace(r){this._layerConfigs={},this._layers={},this.update(r,[])}update(n,i){for(let i of n)this._layerConfigs[i.id]=i,(this._layers[i.id]=r.createStyleLayer(i)).compileFilter(),this.keyCache[i.id]&&delete this.keyCache[i.id];for(let r of i)delete this.keyCache[r],delete this._layerConfigs[r],delete this._layers[r];this.familiesBySource={};let o=function(n,i){let o={};for(let a=0;a<n.length;a++){let s=i&&i[n[a].id]||function(n){let i="";for(let o of r.refProperties)i+=`/${function r(n){if("number"==typeof n||"boolean"==typeof n||"string"==typeof n||null==n)return JSON.stringify(n);if(Array.isArray(n)){let i="[";for(let o of n)i+=`${r(o)},`;return`${i}]`}let i="{";for(let o of Object.keys(n).sort())i+=`${o}:${r(n[o])},`;return`${i}}`}(n[o])}`;return i}(n[a]);i&&(i[n[a].id]=s);let l=o[s];l||(l=o[s]=[]),l.push(n[a])}let a=[];for(let r in o)a.push(o[r]);return a}(r.values(this._layerConfigs),this.keyCache);for(let r of o){let n=r.map(r=>this._layers[r.id]),i=n[0];if("none"===i.visibility)continue;let o=i.source||"",a=this.familiesBySource[o];a||(a=this.familiesBySource[o]={});let s=i.sourceLayer||"_geojsonTileLayer",l=a[s];l||(l=a[s]=[]),l.push(n)}}}class i{loadTile(n,i){let{uid:o,encoding:a,rawImageData:s,padding:l,buildQuadTree:u}=n,c=r.window.ImageBitmap&&s instanceof r.window.ImageBitmap?this.getImageData(s,l):s;i(null,new r.DEMData(o,c,a,l<1,u))}getImageData(r,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(r.width,r.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=r.width,this.offscreenCanvas.height=r.height,this.offscreenCanvasContext.drawImage(r,0,0,r.width,r.height);let i=this.offscreenCanvasContext.getImageData(-n,-n,r.width+2*n,r.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),i}}function o(r,n){if(0!==r.length){a(r[0],n);for(var i=1;i<r.length;i++)a(r[i],!n)}}function a(r,n){for(var i=0,o=0,a=0,s=r.length,l=s-1;a<s;l=a++){var u=(r[a][0]-r[l][0])*(r[l][1]+r[a][1]),c=i+u;o+=Math.abs(i)>=Math.abs(u)?i-c+u:u-c+i,i=c}i+o>=0!=!!n&&r.reverse()}var s,l=r.getDefaultExportFromCjs(function r(n,i){var a,s=n&&n.type;if("FeatureCollection"===s)for(a=0;a<n.features.length;a++)r(n.features[a],i);else if("GeometryCollection"===s)for(a=0;a<n.geometries.length;a++)r(n.geometries[a],i);else if("Feature"===s)r(n.geometry,i);else if("Polygon"===s)o(n.coordinates,i);else if("MultiPolygon"===s)for(a=0;a<n.coordinates.length;a++)o(n.coordinates[a],i);return n});let u=r.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},h=r.pointGeometry,d=r.vectorTile.VectorTileFeature;function f(r,n){this.options=n||{},this.features=r,this.length=r.length}function p(r,n){this.id="number"==typeof r.id?r.id:void 0,this.type=r.type,this.rawGeometry=1===r.type?[r.geometry]:r.geometry,this.properties=r.tags,this.extent=n||4096}f.prototype.feature=function(r){return new p(this.features[r],this.options.extent)},p.prototype.loadGeometry=function(){var r=this.rawGeometry;this.geometry=[];for(var n=0;n<r.length;n++){for(var i=r[n],o=[],a=0;a<i.length;a++)o.push(new h(i[a][0],i[a][1]));this.geometry.push(o)}return this.geometry},p.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var r=this.geometry,n=1/0,i=-1/0,o=1/0,a=-1/0,s=0;s<r.length;s++)for(var l=r[s],u=0;u<l.length;u++){var c=l[u];n=Math.min(n,c.x),i=Math.max(i,c.x),o=Math.min(o,c.y),a=Math.max(a,c.y)}return[n,o,i,a]},p.prototype.toGeoJSON=d.prototype.toGeoJSON;var m=r.pbf;function g(r){var n=new m;return function(r,n){for(var i in r.layers)n.writeMessage(3,y,r.layers[i])}(r,n),n.finish()}function y(r,n){n.writeVarintField(15,r.version||1),n.writeStringField(1,r.name||""),n.writeVarintField(5,r.extent||4096);var i,o={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<r.length;i++)o.feature=r.feature(i),n.writeMessage(2,_,o);var a=o.keys;for(i=0;i<a.length;i++)n.writeStringField(3,a[i]);var s=o.values;for(i=0;i<s.length;i++)n.writeMessage(4,x,s[i])}function _(r,n){var i=r.feature;void 0!==i.id&&n.writeVarintField(1,i.id),n.writeMessage(2,v,r),n.writeVarintField(3,i.type),n.writeMessage(4,b,i)}function v(r,n){var i=r.feature,o=r.keys,a=r.values,s=r.keycache,l=r.valuecache;for(var u in i.properties){var c=i.properties[u],h=s[u];if(null!==c){void 0===h&&(o.push(u),s[u]=h=o.length-1),n.writeVarint(h);var d=typeof c;"string"!==d&&"boolean"!==d&&"number"!==d&&(c=JSON.stringify(c));var f=d+":"+c,p=l[f];void 0===p&&(a.push(c),l[f]=p=a.length-1),n.writeVarint(p)}}}function b(r,n){for(var i=r.loadGeometry(),o=r.type,a=0,s=0,l=i.length,u=0;u<l;u++){var c=i[u],h=1;1===o&&(h=c.length),n.writeVarint((h<<3)+1);for(var d=3===o?c.length-1:c.length,f=0;f<d;f++){1===f&&1!==o&&n.writeVarint((d-1<<3)+2);var p=c[f].x-a,m=c[f].y-s;n.writeVarint(p<<1^p>>31),n.writeVarint(m<<1^m>>31),a+=p,s+=m}3===o&&n.writeVarint(15)}}function x(r,n){var i=typeof r;"string"===i?n.writeStringField(1,r):"boolean"===i?n.writeBooleanField(7,r):"number"===i&&(r%1!=0?n.writeDoubleField(3,r):r<0?n.writeSVarintField(6,r):n.writeVarintField(5,r))}c.exports=g,c.exports.fromVectorTileJs=g,c.exports.fromGeojsonVt=function(r,n){n=n||{};var i={};for(var o in r)i[o]=new f(r[o].features,n),i[o].name=o,i[o].version=n.version,i[o].extent=n.extent;return g({layers:i})},c.exports.GeoJSONWrapper=f;var w=r.getDefaultExportFromCjs(c.exports);let E={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:r=>r},C=Math.fround||(s=new Float32Array(1),r=>(s[0]=+r,s[0]));class S{constructor(r){this.options=Object.assign(Object.create(E),r),this.trees=Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(r){let{log:n,minZoom:i,maxZoom:o}=this.options;n&&console.time("total time");let a=`prepare ${r.length} points`;n&&console.time(a),this.points=r;let s=[];for(let n=0;n<r.length;n++){let i=r[n];if(!i.geometry)continue;let[o,a]=i.geometry.coordinates,l=C(k(o)),u=C(I(a));s.push(l,u,1/0,n,-1,1),this.options.reduce&&s.push(0)}let l=this.trees[o+1]=this._createTree(s);n&&console.timeEnd(a);for(let r=o;r>=i;r--){let i=+Date.now();l=this.trees[r]=this._createTree(this._cluster(l,r)),n&&console.log("z%d: %d clusters in %dms",r,l.numItems,+Date.now()-i)}return n&&console.timeEnd("total time"),this}getClusters(r,n){let i=((r[0]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,r[1])),a=180===r[2]?180:((r[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,r[3]));if(r[2]-r[0]>=360)i=-180,a=180;else if(i>a){let r=this.getClusters([i,o,180,s],n),l=this.getClusters([-180,o,a,s],n);return r.concat(l)}let l=this.trees[this._limitZoom(n)],u=l.range(k(i),I(s),k(a),I(o)),c=l.data,h=[];for(let r of u){let n=this.stride*r;h.push(c[n+5]>1?T(c,n,this.clusterProps):this.points[c[n+3]])}return h}getChildren(r){let n=this._getOriginId(r),i=this._getOriginZoom(r),o="No cluster with the specified id.",a=this.trees[i];if(!a)throw Error(o);let s=a.data;if(n*this.stride>=s.length)throw Error(o);let l=this.options.radius/(this.options.extent*Math.pow(2,i-1)),u=a.within(s[n*this.stride],s[n*this.stride+1],l),c=[];for(let n of u){let i=n*this.stride;s[i+4]===r&&c.push(s[i+5]>1?T(s,i,this.clusterProps):this.points[s[i+3]])}if(0===c.length)throw Error(o);return c}getLeaves(r,n,i){let o=[];return this._appendLeaves(o,r,n=n||10,i=i||0,0),o}getTile(r,n,i){let o=this.trees[this._limitZoom(r)],a=Math.pow(2,r),{extent:s,radius:l}=this.options,u=l/s,c=(i-u)/a,h=(i+1+u)/a,d={features:[]};return this._addTileFeatures(o.range((n-u)/a,c,(n+1+u)/a,h),o.data,n,i,a,d),0===n&&this._addTileFeatures(o.range(1-u/a,c,1,h),o.data,a,i,a,d),n===a-1&&this._addTileFeatures(o.range(0,c,u/a,h),o.data,-1,i,a,d),d.features.length?d:null}getClusterExpansionZoom(r){let n=this._getOriginZoom(r)-1;for(;n<=this.options.maxZoom;){let i=this.getChildren(r);if(n++,1!==i.length)break;r=i[0].properties.cluster_id}return n}_appendLeaves(r,n,i,o,a){let s=this.getChildren(n);for(let n of s){let s=n.properties;if(s&&s.cluster?a+s.point_count<=o?a+=s.point_count:a=this._appendLeaves(r,s.cluster_id,i,o,a):a<o?a++:r.push(n),r.length===i)break}return a}_createTree(n){let i=new r.KDBush(n.length/this.stride|0,this.options.nodeSize,Float32Array);for(let r=0;r<n.length;r+=this.stride)i.add(n[r],n[r+1]);return i.finish(),i.data=n,i}_addTileFeatures(r,n,i,o,a,s){for(let l of r){let r,u,c,h;let d=l*this.stride,f=n[d+5]>1;if(f)r=M(n,d,this.clusterProps),u=n[d],c=n[d+1];else{let i=this.points[n[d+3]];r=i.properties;let[o,a]=i.geometry.coordinates;u=k(o),c=I(a)}let p={type:1,geometry:[[Math.round(this.options.extent*(u*a-i)),Math.round(this.options.extent*(c*a-o))]],tags:r};void 0!==(h=f||this.options.generateId?n[d+3]:this.points[n[d+3]].id)&&(p.id=h),s.features.push(p)}}_limitZoom(r){return Math.max(this.options.minZoom,Math.min(Math.floor(+r),this.options.maxZoom+1))}_cluster(r,n){let{radius:i,extent:o,reduce:a,minPoints:s}=this.options,l=i/(o*Math.pow(2,n)),u=r.data,c=[],h=this.stride;for(let i=0;i<u.length;i+=h){if(u[i+2]<=n)continue;u[i+2]=n;let o=u[i],d=u[i+1],f=r.within(u[i],u[i+1],l),p=u[i+5],m=p;for(let r of f){let i=r*h;u[i+2]>n&&(m+=u[i+5])}if(m>p&&m>=s){let r,s=o*p,l=d*p,g=-1,y=((i/h|0)<<5)+(n+1)+this.points.length;for(let o of f){let c=o*h;if(u[c+2]<=n)continue;u[c+2]=n;let d=u[c+5];s+=u[c]*d,l+=u[c+1]*d,u[c+4]=y,a&&(r||(r=this._map(u,i,!0),g=this.clusterProps.length,this.clusterProps.push(r)),a(r,this._map(u,c)))}u[i+4]=y,c.push(s/m,l/m,1/0,y,-1,m),a&&c.push(g)}else{for(let r=0;r<h;r++)c.push(u[i+r]);if(m>1)for(let r of f){let i=r*h;if(!(u[i+2]<=n)){u[i+2]=n;for(let r=0;r<h;r++)c.push(u[i+r])}}}}return c}_getOriginId(r){return r-this.points.length>>5}_getOriginZoom(r){return(r-this.points.length)%32}_map(r,n,i){if(r[n+5]>1){let o=this.clusterProps[r[n+6]];return i?Object.assign({},o):o}let o=this.points[r[n+3]].properties,a=this.options.map(o);return i&&a===o?Object.assign({},a):a}}function T(r,n,i){return{type:"Feature",id:r[n+3],properties:M(r,n,i),geometry:{type:"Point",coordinates:[360*(r[n]-.5),function(r){let n=(180-360*r)*Math.PI/180;return 360*Math.atan(Math.exp(n))/Math.PI-90}(r[n+1])]}}}function M(r,n,i){let o=r[n+5],a=o>=1e4?`${Math.round(o/1e3)}k`:o>=1e3?Math.round(o/100)/10+"k":o,s=r[n+6],l=-1===s?{}:Object.assign({},i[s]);return Object.assign(l,{cluster:!0,cluster_id:r[n+3],point_count:o,point_count_abbreviated:a})}function k(r){return r/360+.5}function I(r){let n=Math.sin(r*Math.PI/180),i=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return i<0?0:i>1?1:i}function L(r,n,i,o){var a={id:void 0===r?null:r,type:n,geometry:i,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(r){var n=r.geometry,i=r.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)A(r,n);else if("Polygon"===i||"MultiLineString"===i)for(var o=0;o<n.length;o++)A(r,n[o]);else if("MultiPolygon"===i)for(o=0;o<n.length;o++)for(var a=0;a<n[o].length;a++)A(r,n[o][a])}(a),a}function A(r,n){for(var i=0;i<n.length;i+=3)r.minX=Math.min(r.minX,n[i]),r.minY=Math.min(r.minY,n[i+1]),r.maxX=Math.max(r.maxX,n[i]),r.maxY=Math.max(r.maxY,n[i+1])}function z(r,n,i,o){if(n.geometry){var a=n.geometry.coordinates,s=n.geometry.type,l=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),u=[],c=n.id;if(i.promoteId?c=n.properties[i.promoteId]:i.generateId&&(c=o||0),"Point"===s)P(a,u);else if("MultiPoint"===s)for(var h=0;h<a.length;h++)P(a[h],u);else if("LineString"===s)O(a,u,l,!1);else if("MultiLineString"===s){if(i.lineMetrics){for(h=0;h<a.length;h++)O(a[h],u=[],l,!1),r.push(L(c,"LineString",u,n.properties));return}D(a,u,l,!1)}else if("Polygon"===s)D(a,u,l,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(h=0;h<n.geometry.geometries.length;h++)z(r,{id:c,geometry:n.geometry.geometries[h],properties:n.properties},i,o);return}throw Error("Input data is not a valid GeoJSON object.")}for(h=0;h<a.length;h++){var d=[];D(a[h],d,l,!0),u.push(d)}}r.push(L(c,s,u,n.properties))}}function P(r,n){var i;n.push(r[0]/360+.5),n.push(R(r[1])),n.push(0)}function O(r,n,i,o){for(var a,s,l=0,u=0;u<r.length;u++){var c,h=r[u][0]/360+.5,d=R(r[u][1]);n.push(h),n.push(d),n.push(0),u>0&&(l+=o?(a*d-h*s)/2:Math.sqrt(Math.pow(h-a,2)+Math.pow(d-s,2))),a=h,s=d}var f=n.length-3;n[2]=1,function r(n,i,o,a){for(var s,l=a,u=o-i>>1,c=o-i,h=n[i],d=n[i+1],f=n[o],p=n[o+1],m=i+3;m<o;m+=3){var g=function(r,n,i,o,a,s){var l=a-i,u=s-o;if(0!==l||0!==u){var c=((r-i)*l+(n-o)*u)/(l*l+u*u);c>1?(i=a,o=s):c>0&&(i+=l*c,o+=u*c)}return(l=r-i)*l+(u=n-o)*u}(n[m],n[m+1],h,d,f,p);if(g>l)s=m,l=g;else if(g===l){var y=Math.abs(m-u);y<c&&(s=m,c=y)}}l>a&&(s-i>3&&r(n,i,s,a),n[s+2]=l,o-s>3&&r(n,s,o,a))}(n,0,f,i),n[f+2]=1,n.size=Math.abs(l),n.start=0,n.end=n.size}function D(r,n,i,o){for(var a=0;a<r.length;a++){var s=[];O(r[a],s,i,o),n.push(s)}}function R(r){var n=Math.sin(r*Math.PI/180),i=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return i<0?0:i>1?1:i}function F(r,n,i,o,a,s,l,u){if(o/=n,s>=(i/=n)&&l<o)return r;if(l<i||s>=o)return null;for(var c=[],h=0;h<r.length;h++){var d=r[h],f=d.geometry,p=d.type,m=0===a?d.minX:d.minY,g=0===a?d.maxX:d.maxY;if(m>=i&&g<o)c.push(d);else if(!(g<i||m>=o)){var y=[];if("Point"===p||"MultiPoint"===p)(function(r,n,i,o,a){for(var s=0;s<r.length;s+=3){var l=r[s+a];l>=i&&l<=o&&(n.push(r[s]),n.push(r[s+1]),n.push(r[s+2]))}})(f,y,i,o,a);else if("LineString"===p)B(f,y,i,o,a,!1,u.lineMetrics);else if("MultiLineString"===p)j(f,y,i,o,a,!1);else if("Polygon"===p)j(f,y,i,o,a,!0);else if("MultiPolygon"===p)for(var _=0;_<f.length;_++){var v=[];j(f[_],v,i,o,a,!0),v.length&&y.push(v)}if(y.length){if(u.lineMetrics&&"LineString"===p){for(_=0;_<y.length;_++)c.push(L(d.id,p,y[_],d.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===y.length?(p="LineString",y=y[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===y.length?"Point":"MultiPoint"),c.push(L(d.id,p,y,d.tags))}}}return c.length?c:null}function B(r,n,i,o,a,s,l){for(var u,c,h=N(r),d=0===a?U:q,f=r.start,p=0;p<r.length-3;p+=3){var m=r[p],g=r[p+1],y=r[p+2],_=r[p+3],v=r[p+4],b=0===a?m:g,x=0===a?_:v,w=!1;l&&(u=Math.sqrt(Math.pow(m-_,2)+Math.pow(g-v,2))),b<i?x>i&&(c=d(h,m,g,_,v,i),l&&(h.start=f+u*c)):b>o?x<o&&(c=d(h,m,g,_,v,o),l&&(h.start=f+u*c)):V(h,m,g,y),x<i&&b>=i&&(c=d(h,m,g,_,v,i),w=!0),x>o&&b<=o&&(c=d(h,m,g,_,v,o),w=!0),!s&&w&&(l&&(h.end=f+u*c),n.push(h),h=N(r)),l&&(f+=u)}var E=r.length-3;m=r[E],g=r[E+1],y=r[E+2],(b=0===a?m:g)>=i&&b<=o&&V(h,m,g,y),E=h.length-3,s&&E>=3&&(h[E]!==h[0]||h[E+1]!==h[1])&&V(h,h[0],h[1],h[2]),h.length&&n.push(h)}function N(r){var n=[];return n.size=r.size,n.start=r.start,n.end=r.end,n}function j(r,n,i,o,a,s){for(var l=0;l<r.length;l++)B(r[l],n,i,o,a,s,!1)}function V(r,n,i,o){r.push(n),r.push(i),r.push(o)}function U(r,n,i,o,a,s){var l=(s-n)/(o-n);return r.push(s),r.push(i+(a-i)*l),r.push(1),l}function q(r,n,i,o,a,s){var l=(s-i)/(a-i);return r.push(n+(o-n)*l),r.push(s),r.push(1),l}function $(r,n){for(var i=[],o=0;o<r.length;o++){var a,s=r[o],l=s.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)a=H(s.geometry,n);else if("MultiLineString"===l||"Polygon"===l){a=[];for(var u=0;u<s.geometry.length;u++)a.push(H(s.geometry[u],n))}else if("MultiPolygon"===l)for(a=[],u=0;u<s.geometry.length;u++){for(var c=[],h=0;h<s.geometry[u].length;h++)c.push(H(s.geometry[u][h],n));a.push(c)}i.push(L(s.id,l,a,s.tags))}return i}function H(r,n){var i=[];i.size=r.size,void 0!==r.start&&(i.start=r.start,i.end=r.end);for(var o=0;o<r.length;o+=3)i.push(r[o]+n,r[o+1],r[o+2]);return i}function Z(r,n){if(r.transformed)return r;var i,o,a,s=1<<r.z,l=r.x,u=r.y;for(i=0;i<r.features.length;i++){var c=r.features[i],h=c.geometry,d=c.type;if(c.geometry=[],1===d)for(o=0;o<h.length;o+=2)c.geometry.push(G(h[o],h[o+1],n,s,l,u));else for(o=0;o<h.length;o++){var f=[];for(a=0;a<h[o].length;a+=2)f.push(G(h[o][a],h[o][a+1],n,s,l,u));c.geometry.push(f)}}return r.transformed=!0,r}function G(r,n,i,o,a,s){return[Math.round(i*(r*o-a)),Math.round(i*(n*o-s))]}function W(r,n,i,o,a,s){var l=o*o;if(o>0&&n.size<(a?l:o))i.numPoints+=n.length/3;else{for(var u=[],c=0;c<n.length;c+=3)(0===o||n[c+2]>l)&&(i.numSimplified++,u.push(n[c]),u.push(n[c+1])),i.numPoints++;a&&function(r,n){for(var i=0,o=0,a=r.length,s=a-2;o<a;s=o,o+=2)i+=(r[o]-r[s])*(r[o+1]+r[s+1]);if(i>0===n)for(o=0,a=r.length;o<a/2;o+=2){var l=r[o],u=r[o+1];r[o]=r[a-2-o],r[o+1]=r[a-1-o],r[a-2-o]=l,r[a-1-o]=u}}(u,s),r.push(u)}}function X(r,n){var i,o,a,s,l,u,c=(n=this.options=function(r,n){for(var i in n)r[i]=n[i];return r}(Object.create(this.options),n)).debug;if(c&&console.time("preprocess data"),n.maxZoom<0||n.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(n.promoteId&&n.generateId)throw Error("promoteId and generateId cannot be used together.");var h=function(r,n){var i=[];if("FeatureCollection"===r.type)for(var o=0;o<r.features.length;o++)z(i,r.features[o],n,o);else z(i,"Feature"===r.type?r:{geometry:r},n);return i}(r,n);this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",n.indexMaxZoom,n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=h,a=(o=n).buffer/o.extent,s=i,l=F(i,1,-1-a,a,0,-1,2,o),u=F(i,1,1-a,2+a,0,-1,2,o),(l||u)&&(s=F(i,1,-a,1+a,0,-1,2,o)||[],l&&(s=$(l,1).concat(s)),u&&(s=s.concat($(u,-1)))),(h=s).length&&this.splitTile(h,0,0,0),c&&(h.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Y(r,n,i){return 32*((1<<r)*i+n)+r}function K(n,i){let o=n.tileID.canonical;if(!this._geoJSONIndex)return i(null,null);let a=this._geoJSONIndex.getTile(o.z,o.x,o.y);if(!a)return i(null,null);let s=new class{constructor(n){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=n.length,this._features=n}feature(n){return new class{constructor(n){this._feature=n,this.extent=r.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}loadGeometry(){if(1===this._feature.type){let n=[];for(let i of this._feature.geometry)n.push([new r.Point(i[0],i[1])]);return n}{let n=[];for(let i of this._feature.geometry){let o=[];for(let n of i)o.push(new r.Point(n[0],n[1]));n.push(o)}return n}}toGeoJSON(r,n,i){return u.call(this,r,n,i)}}(this._features[n])}}(a.features),l=w(s);0===l.byteOffset&&l.byteLength===l.buffer.byteLength||(l=new Uint8Array(l)),i(null,{vectorTile:s,rawData:l.buffer})}X.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},X.prototype.splitTile=function(r,n,i,o,a,s,l){for(var u=[r,n,i,o],c=this.options,h=c.debug;u.length;){o=u.pop(),i=u.pop(),n=u.pop(),r=u.pop();var d=1<<n,f=Y(n,i,o),p=this.tiles[f];if(!p&&(h>1&&console.time("creation"),p=this.tiles[f]=function(r,n,i,o,a){for(var s=n===a.maxZoom?0:a.tolerance/((1<<n)*a.extent),l={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:o,z:n,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<r.length;u++){l.numFeatures++,function(r,n,i,o){var a=n.geometry,s=n.type,l=[];if("Point"===s||"MultiPoint"===s)for(var u=0;u<a.length;u+=3)l.push(a[u]),l.push(a[u+1]),r.numPoints++,r.numSimplified++;else if("LineString"===s)W(l,a,r,i,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(u=0;u<a.length;u++)W(l,a[u],r,i,"Polygon"===s,0===u);else if("MultiPolygon"===s)for(var c=0;c<a.length;c++){var h=a[c];for(u=0;u<h.length;u++)W(l,h[u],r,i,!0,0===u)}if(l.length){var d=n.tags||null;if("LineString"===s&&o.lineMetrics){for(var f in d={},n.tags)d[f]=n.tags[f];d.mapbox_clip_start=a.start/a.size,d.mapbox_clip_end=a.end/a.size}var p={geometry:l,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:d};null!==n.id&&(p.id=n.id),r.features.push(p)}}(l,r[u],s,a);var c=r[u].minX,h=r[u].minY,d=r[u].maxX,f=r[u].maxY;c<l.minX&&(l.minX=c),h<l.minY&&(l.minY=h),d>l.maxX&&(l.maxX=d),f>l.maxY&&(l.maxY=f)}return l}(r,n,i,o,c),this.tileCoords.push({z:n,x:i,y:o}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",n,i,o,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var m="z"+n;this.stats[m]=(this.stats[m]||0)+1,this.total++}if(p.source=r,a){if(n===c.maxZoom||n===a)continue;var g=1<<a-n;if(i!==Math.floor(s/g)||o!==Math.floor(l/g))continue}else if(n===c.indexMaxZoom||p.numPoints<=c.indexMaxPoints)continue;if(p.source=null,0!==r.length){h>1&&console.time("clipping");var y,_,v,b,x,w,E=.5*c.buffer/c.extent,C=.5-E,S=.5+E,T=1+E;y=_=v=b=null,x=F(r,d,i-E,i+S,0,p.minX,p.maxX,c),w=F(r,d,i+C,i+T,0,p.minX,p.maxX,c),r=null,x&&(y=F(x,d,o-E,o+S,1,p.minY,p.maxY,c),_=F(x,d,o+C,o+T,1,p.minY,p.maxY,c),x=null),w&&(v=F(w,d,o-E,o+S,1,p.minY,p.maxY,c),b=F(w,d,o+C,o+T,1,p.minY,p.maxY,c),w=null),h>1&&console.timeEnd("clipping"),u.push(y||[],n+1,2*i,2*o),u.push(_||[],n+1,2*i,2*o+1),u.push(v||[],n+1,2*i+1,2*o),u.push(b||[],n+1,2*i+1,2*o+1)}}},X.prototype.getTile=function(r,n,i){var o=this.options,a=o.extent,s=o.debug;if(r<0||r>24)return null;var l=1<<r,u=Y(r,n=(n%l+l)%l,i);if(this.tiles[u])return Z(this.tiles[u],a);s>1&&console.log("drilling down to z%d-%d-%d",r,n,i);for(var c,h=r,d=n,f=i;!c&&h>0;)h--,d=Math.floor(d/2),f=Math.floor(f/2),c=this.tiles[Y(h,d,f)];return c&&c.source?(s>1&&console.log("found parent tile z%d-%d-%d",h,d,f),s>1&&console.time("drilling down"),this.splitTile(c.source,h,d,f,r,n,i),s>1&&console.timeEnd("drilling down"),this.tiles[u]?Z(this.tiles[u],a):null):null};class J extends r.VectorTileWorkerSource{constructor(r,n,i,o,a){super(r,n,i,o,K),a&&(this.loadGeoJSON=a)}loadData(n,i){let o=n&&n.request,a=o&&o.collectResourceTiming;this.loadGeoJSON(n,(s,u)=>{if(s||!u)return i(s);if("object"!=typeof u)return i(Error(`Input data given to '${n.source}' is not a valid GeoJSON object.`));{l(u,!0);try{var c,h;if(n.filter){let i=r.createExpression(n.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));let o=u.features.filter(r=>i.value.evaluate({zoom:0},r));u={type:"FeatureCollection",features:o}}this._geoJSONIndex=n.cluster?new S(function({superclusterOptions:n,clusterProperties:i}){if(!i||!n)return n;let o={},a={},s={accumulated:null,zoom:0},l={properties:null},u=Object.keys(i);for(let n of u){let[s,l]=i[n],u=r.createExpression(l),c=r.createExpression("string"==typeof s?[s,["accumulated"],["get",n]]:s);o[n]=u.value,a[n]=c.value}return n.map=r=>{l.properties=r;let n={};for(let r of u)n[r]=o[r].evaluate(s,l);return n},n.reduce=(r,n)=>{for(let i of(l.properties=n,u))s.accumulated=r[i],r[i]=a[i].evaluate(s,l)},n}(n)).load(u.features):(c=u,h=n.geojsonVtOptions,new X(c,h))}catch(r){return i(r)}this.loaded={};let s={};if(a){let i=r.getPerformanceMeasurement(o);i&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(i)))}i(null,s)}})}reloadTile(r,n){let i=this.loaded;return i&&i[r.uid]?super.reloadTile(r,n):this.loadTile(r,n)}loadGeoJSON(n,i){if(n.request)r.getJSON(n.request,i);else{if("string"!=typeof n.data)return i(Error(`Input data given to '${n.source}' is not a valid GeoJSON object.`));try{return i(null,JSON.parse(n.data))}catch(r){return i(Error(`Input data given to '${n.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(r,n){try{n(null,this._geoJSONIndex.getClusterExpansionZoom(r.clusterId))}catch(r){n(r)}}getClusterChildren(r,n){try{n(null,this._geoJSONIndex.getChildren(r.clusterId))}catch(r){n(r)}}getClusterLeaves(r,n){try{n(null,this._geoJSONIndex.getLeaves(r.clusterId,r.limit,r.offset))}catch(r){n(r)}}}class Q{constructor(n){this.self=n,this.actor=new r.Actor(n,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=r.getProjection({name:"mercator"}),this.workerSourceTypes={vector:r.VectorTileWorkerSource,geojson:J},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(r,n)=>{if(this.workerSourceTypes[r])throw Error(`Worker source with name "${r}" already registered.`);this.workerSourceTypes[r]=n},this.self.registerRTLTextPlugin=n=>{if(r.plugin.isParsed())throw Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=n.applyArabicShaping,r.plugin.processBidirectionalText=n.processBidirectionalText,r.plugin.processStyledBidirectionalText=n.processStyledBidirectionalText}}clearCaches(r,n,i){delete this.layerIndexes[r],delete this.availableImages[r],delete this.workerSources[r],delete this.demWorkerSources[r],i()}checkIfReady(r,n,i){i()}setReferrer(r,n){this.referrer=n}spriteLoaded(n,i){for(let o in this.isSpriteLoaded[n]=i,this.workerSources[n]){let a=this.workerSources[n][o];for(let n in a)a[n]instanceof r.VectorTileWorkerSource&&(a[n].isSpriteLoaded=i,a[n].fire(new r.Event("isSpriteLoaded")))}}setImages(r,n,i){for(let i in this.availableImages[r]=n,this.workerSources[r]){let o=this.workerSources[r][i];for(let r in o)o[r].availableImages=n}i()}enableTerrain(r,n,i){this.terrain=n,i()}setProjection(n,i){this.projections[n]=r.getProjection(i)}setLayers(r,n,i){this.getLayerIndex(r).replace(n),i()}updateLayers(r,n,i){this.getLayerIndex(r).update(n.layers,n.removedIds),i()}loadTile(n,i,o){let a=this.enableTerrain?r.extend({enableTerrain:this.terrain},i):i;a.projection=this.projections[n]||this.defaultProjection,this.getWorkerSource(n,i.type,i.source).loadTile(a,o)}loadDEMTile(n,i,o){let a=this.enableTerrain?r.extend({buildQuadTree:this.terrain},i):i;this.getDEMWorkerSource(n,i.source).loadTile(a,o)}reloadTile(n,i,o){let a=this.enableTerrain?r.extend({enableTerrain:this.terrain},i):i;a.projection=this.projections[n]||this.defaultProjection,this.getWorkerSource(n,i.type,i.source).reloadTile(a,o)}abortTile(r,n,i){this.getWorkerSource(r,n.type,n.source).abortTile(n,i)}removeTile(r,n,i){this.getWorkerSource(r,n.type,n.source).removeTile(n,i)}removeSource(r,n,i){if(!this.workerSources[r]||!this.workerSources[r][n.type]||!this.workerSources[r][n.type][n.source])return;let o=this.workerSources[r][n.type][n.source];delete this.workerSources[r][n.type][n.source],void 0!==o.removeSource?o.removeSource(n,i):i()}loadWorkerSource(r,n,i){try{this.self.importScripts(n.url),i()}catch(r){i(r.toString())}}syncRTLPluginState(n,i,o){try{r.plugin.setState(i);let n=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&null!=n){this.self.importScripts(n);let i=r.plugin.isParsed();o(i?void 0:Error(`RTL Text Plugin failed to import scripts from ${n}`),i)}}catch(r){o(r.toString())}}getAvailableImages(r){let n=this.availableImages[r];return n||(n=[]),n}getLayerIndex(r){let i=this.layerIndexes[r];return i||(i=this.layerIndexes[r]=new n),i}getWorkerSource(r,n,i){if(this.workerSources[r]||(this.workerSources[r]={}),this.workerSources[r][n]||(this.workerSources[r][n]={}),!this.workerSources[r][n][i]){let o={send:(n,i,o,a,s,l)=>{this.actor.send(n,i,o,r,s,l)},scheduler:this.actor.scheduler};this.workerSources[r][n][i]=new this.workerSourceTypes[n](o,this.getLayerIndex(r),this.getAvailableImages(r),this.isSpriteLoaded[r])}return this.workerSources[r][n][i]}getDEMWorkerSource(r,n){return this.demWorkerSources[r]||(this.demWorkerSources[r]={}),this.demWorkerSources[r][n]||(this.demWorkerSources[r][n]=new i),this.demWorkerSources[r][n]}enforceCacheSizeLimit(n,i){r.enforceCacheSizeLimit(i)}getWorkerPerformanceMetrics(r,n,i){i(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Q(self)),Q}),o(["./shared"],function(r){let n,i,o;function a(r,n){if(Array.isArray(r)){if(!Array.isArray(n)||r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!a(r[i],n[i]))return!1;return!0}if("object"==typeof r&&null!==r&&null!==n){if("object"!=typeof n||Object.keys(r).length!==Object.keys(n).length)return!1;for(let i in r)if(!a(r[i],n[i]))return!1;return!0}return r===n}function s(r){var n;return"undefined"!=typeof window&&"undefined"!=typeof document&&!!Array.prototype&&!!Array.prototype.every&&!!Array.prototype.filter&&!!Array.prototype.forEach&&!!Array.prototype.indexOf&&!!Array.prototype.lastIndexOf&&!!Array.prototype.map&&!!Array.prototype.some&&!!Array.prototype.reduce&&!!Array.prototype.reduceRight&&!!Array.isArray&&!!Function.prototype&&!!Function.prototype.bind&&!!Object.keys&&!!Object.create&&!!Object.getPrototypeOf&&!!Object.getOwnPropertyNames&&!!Object.isSealed&&!!Object.isFrozen&&!!Object.isExtensible&&!!Object.getOwnPropertyDescriptor&&!!Object.defineProperty&&!!Object.defineProperties&&!!Object.seal&&!!Object.freeze&&!!Object.preventExtensions&&!!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)&&!!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var r,n,i=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(i);try{n=new Worker(o),r=!0}catch(n){r=!1}return n&&n.terminate(),URL.revokeObjectURL(o),r}()&&"Uint8ClampedArray"in window&&!!ArrayBuffer.isView&&!!function(){var r=document.createElement("canvas");r.width=r.height=1;var n=r.getContext("2d");if(!n)return!1;var i=n.getImageData(0,0,1,1);return i&&i.width===r.width}()&&(void 0===l[n=r&&r.failIfMajorPerformanceCaveat]&&(l[n]=function(r){var n,i,o,a=(n=document.createElement("canvas"),(i=Object.create(s.webGLContextAttributes)).failIfMajorPerformanceCaveat=r,n.getContext("webgl",i)||n.getContext("experimental-webgl",i));if(!a)return!1;try{o=a.createShader(a.VERTEX_SHADER)}catch(r){return!1}return!(!o||a.isContextLost())&&(a.shaderSource(o,"void main() {}"),a.compileShader(o),!0===a.getShaderParameter(o,a.COMPILE_STATUS))}(n)),!!l[n]&&!document.documentMode)}var l={};function u(n,i,o){let a=r.window.document.createElement(n);return void 0!==i&&(a.className=i),o&&o.appendChild(a),a}function c(n,i,o){let a=r.window.document.createElementNS("http://www.w3.org/2000/svg",n);for(let r of Object.keys(i))a.setAttributeNS(null,r,i[r]);return o&&o.appendChild(a),a}s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};let h=r.window.document&&r.window.document.documentElement.style,d=h&&void 0!==h.userSelect?"userSelect":"WebkitUserSelect";function f(){h&&d&&(n=h[d],h[d]="none")}function p(){h&&d&&(h[d]=n)}function m(n){n.preventDefault(),n.stopPropagation(),r.window.removeEventListener("click",m,!0)}function g(){r.window.addEventListener("click",m,!0),r.window.setTimeout(()=>{r.window.removeEventListener("click",m,!0)},0)}function y(r,n){let i=r.getBoundingClientRect();return b(r,i,n)}function _(r,n){let i=r.getBoundingClientRect(),o=[];for(let a=0;a<n.length;a++)o.push(b(r,i,n[a]));return o}function v(n){return void 0!==r.window.InstallTrigger&&2===n.button&&n.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button}function b(n,i,o){let a=n.offsetWidth===i.width?1:n.offsetWidth/i.width;return new r.Point((o.clientX-i.left)*a,(o.clientY-i.top)*a)}function x(r,n){var i=n[0],o=n[1],a=n[2],s=n[3],l=i*s-a*o;return l?(r[0]=s*(l=1/l),r[1]=-o*l,r[2]=-a*l,r[3]=i*l,r):null}class w extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:r,callback:n}of this.requestors)this._notify(r,n);this.requestors=[]}}hasImage(r){return!!this.getImage(r)}getImage(r){return this.images[r]}addImage(r,n){this._validate(r,n)&&(this.images[r]=n)}_validate(n,i){let o=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new r.ErrorEvent(Error(`Image "${n}" has invalid "stretchX" value`))),o=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new r.ErrorEvent(Error(`Image "${n}" has invalid "stretchY" value`))),o=!1),this._validateContent(i.content,i)||(this.fire(new r.ErrorEvent(Error(`Image "${n}" has invalid "content" value`))),o=!1),o}_validateStretch(r,n){if(!r)return!0;let i=0;for(let o of r){if(o[0]<i||o[1]<o[0]||n<o[1])return!1;i=o[1]}return!0}_validateContent(r,n){return!(r&&(4!==r.length||r[0]<0||n.data.width<r[0]||r[1]<0||n.data.height<r[1]||r[2]<0||n.data.width<r[2]||r[3]<0||n.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))}updateImage(r,n){n.version=this.images[r].version+1,this.images[r]=n,this.updatedImages[r]=!0}removeImage(r){let n=this.images[r];delete this.images[r],delete this.patterns[r],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,n){let i=!0;if(!this.isLoaded())for(let n of r)this.images[n]||(i=!1);this.isLoaded()||i?this._notify(r,n):this.requestors.push({ids:r,callback:n})}_notify(n,i){let o={};for(let i of n){this.images[i]||this.fire(new r.Event("styleimagemissing",{id:i}));let n=this.images[i];n?o[i]={data:n.data.clone(),pixelRatio:n.pixelRatio,sdf:n.sdf,version:n.version,stretchX:n.stretchX,stretchY:n.stretchY,content:n.content,hasRenderCallback:!!(n.userImage&&n.userImage.render)}:r.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,o)}getPixelSize(){let{width:r,height:n}=this.atlasImage;return{width:r,height:n}}getPattern(n){let i=this.patterns[n],o=this.getImage(n);if(!o)return null;if(i&&i.position.version===o.version)return i.position;if(i)i.position.version=o.version;else{let i={w:o.data.width+2,h:o.data.height+2,x:0,y:0},a=new r.ImagePosition(i,o);this.patterns[n]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){let i=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(n,this.atlasImage,i.RGBA),this.atlasTexture&&this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}_updatePatternAtlas(){let n=[];for(let r in this.patterns)n.push(this.patterns[r].bin);let{w:i,h:o}=r.potpack(n),a=this.atlasImage;for(let n in a.resize({width:i||1,height:o||1}),this.patterns){let{bin:i}=this.patterns[n],o=i.x+1,s=i.y+1,l=this.images[n].data,u=l.width,c=l.height;r.RGBAImage.copy(l,a,{x:0,y:0},{x:o,y:s},{width:u,height:c}),r.RGBAImage.copy(l,a,{x:0,y:c-1},{x:o,y:s-1},{width:u,height:1}),r.RGBAImage.copy(l,a,{x:0,y:0},{x:o,y:s+c},{width:u,height:1}),r.RGBAImage.copy(l,a,{x:u-1,y:0},{x:o-1,y:s},{width:1,height:c}),r.RGBAImage.copy(l,a,{x:0,y:0},{x:o+u,y:s},{width:1,height:c})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let n of r){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;let r=this.images[n];(function(r){let{userImage:n}=r;return!!(n&&n.render&&n.render())&&(r.data.replace(new Uint8Array(n.data.buffer)),!0)})(r)&&this.updateImage(n,r)}}}let E=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(n,i){return function([n,i,o]){let a=r.degToRad(i+90),s=r.degToRad(o);return{x:n*Math.cos(a)*Math.sin(s),y:n*Math.sin(a)*Math.sin(s),z:n*Math.cos(s),azimuthal:i,polar:o}}(n.expression.evaluate(i))}interpolate(n,i,o){return{x:r.number(n.x,i.x,o),y:r.number(n.y,i.y,o),z:r.number(n.z,i.z,o),azimuthal:r.number(n.azimuthal,i.azimuthal,o),polar:r.number(n.polar,i.polar,o)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)});class C extends r.Evented{constructor(n){super(),this._transitionable=new r.Transitionable(E),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,i={}){if(!this._validate(r.validateLight,n,i))for(let i in n){let o=n[i];r.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),o):this._transitionable.setValue(i,o)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(n,i,o){return(!o||!1!==o.validate)&&r.emitValidationErrors(this,n.call(r.validateStyle,r.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}let S=new r.Properties({source:new r.DataConstantProperty(r.spec.terrain.source),exaggeration:new r.DataConstantProperty(r.spec.terrain.exaggeration)}),T=class extends r.Evented{constructor(n,i){super(),this._transitionable=new r.Transitionable(S),this.set(n),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i}get(){return this._transitionable.serialize()}set(n){for(let i in n){let o=n[i];r.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),o):this._transitionable.setValue(i,o)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}};function M(n,i,o,a){let s=r.smoothstep(45,65,o),[l,u]=k(n,a),c=r.length(i),h=1-Math.min(1,Math.exp(-((c-l)/(u-l)*6)));return h*=h*h,(h=Math.min(1,1.00747*h))*s*n.alpha}function k(r,n){let i=.5/Math.tan(.5*n);return[r.range[0]+i,r.range[1]+i]}let I=new r.Properties({range:new r.DataConstantProperty(r.spec.fog.range),color:new r.DataConstantProperty(r.spec.fog.color),"high-color":new r.DataConstantProperty(r.spec.fog["high-color"]),"space-color":new r.DataConstantProperty(r.spec.fog["space-color"]),"horizon-blend":new r.DataConstantProperty(r.spec.fog["horizon-blend"]),"star-intensity":new r.DataConstantProperty(r.spec.fog["star-intensity"])});class L extends r.Evented{constructor(n,i){super(),this._transitionable=new r.Transitionable(I),this.set(n),this._transitioning=this._transitionable.untransitioned(),this._transform=i}get state(){let n=this._transform,i="globe"===n.projection.name,o=r.globeToMercatorTransition(n.zoom),a=this.properties.get("range");return{range:i?[r.number(.5,a[0],o),r.number(3,a[1],o)]:a,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(n,i={}){if(!this._validate(r.validateFog,n,i)){for(let i of Object.keys(r.spec.fog))n&&void 0===n[i]&&(n[i]=r.spec.fog[i].default);for(let i in n){let o=n[i];r.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),o):this._transitionable.setValue(i,o)}}}getOpacity(n){if(!this._transform.projection.supportsFog)return 0;let i=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:r.smoothstep(45,65,n))*i.a}getOpacityAtLatLng(n,i){return this._transform.projection.supportsFog?function(n,i,o){let a=r.MercatorCoordinate.fromLngLat(i),s=o.elevation?o.elevation.getAtPointOrZero(a):0,l=[a.x,a.y,s];return r.transformMat4(l,l,o.mercatorFogMatrix),M(n,l,o.pitch,o._fov)}(this.state,n,i):0}getFovAdjustedRange(r){return this._transform.projection.supportsFog?k(this.state,r):[0,1]}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(n,i,o){return(!o||!1!==o.validate)&&r.emitValidationErrors(this,n.call(r.validateStyle,r.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class A{constructor(n,i){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=r.uniqueId();let o=this.workerPool.acquire(this.id);for(let r=0;r<o.length;r++){let n=new A.Actor(o[r],i,this.id);n.name=`Worker ${r}`,this.actors.push(n)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(n,i,o){r.asyncAll(this.actors,(r,o)=>{r.send(n,i,o)},o=o||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}function z(n,i,o){return i*(r.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}A.Actor=r.Actor;class P{constructor(r,n,i,o){this.screenBounds=r,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,o)}static createFromScreenPoints(n,i){let o,a;if(n instanceof r.Point||"number"==typeof n[0]){let s=r.Point.convert(n);o=[s],a=i.isPointAboveHorizon(s)}else{let s=r.Point.convert(n[0]),l=r.Point.convert(n[1]);o=[s,l],a=r.polygonizeBounds(s,l).every(r=>i.isPointAboveHorizon(r))}return new P(o,i.getCameraPoint(),a,i)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(n){return r.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],n)}bufferedCameraGeometry(n){let i=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new r.Point(1,1)):this.screenBounds[1],a=r.polygonizeBounds(i,o,0,!1);return this.cameraPoint.y>o.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<o.x?a.splice(3,0,this.cameraPoint):this.cameraPoint.x>=o.x?a[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(a[3]=this.cameraPoint)),r.bufferConvexPolygon(a,n)}bufferedCameraGeometryGlobe(n){let i=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new r.Point(1,1)):this.screenBounds[1],a=r.polygonizeBounds(i,o,n),s=this.cameraPoint.clone();switch(3*((s.y>i.y)+(s.y>o.y))+((s.x>i.x)+(s.x>o.x))){case 0:a[0]=s,a[4]=s.clone();break;case 1:a.splice(1,0,s);break;case 2:a[1]=s;break;case 3:a.splice(4,0,s);break;case 5:a.splice(2,0,s);break;case 6:a[3]=s;break;case 7:a.splice(3,0,s);break;case 8:a[2]=s}return a}containsTile(n,i,o,a=0){var s;let l=n.queryPadding/i._pixelsPerMercatorPixel+1,u=o?this._bufferedCameraMercator(l,i):this._bufferedScreenMercator(l,i),c=n.tileID.wrap+(u.unwrapped?a:0),h=u.polygon.map(i=>r.getTilePoint(n.tileTransform,i,c));if(!r.polygonIntersectsBox(h,0,0,r.EXTENT,r.EXTENT))return;c=n.tileID.wrap+(this.screenGeometryMercator.unwrapped?a:0);let d=this.screenGeometryMercator.polygon.map(i=>r.getTileVec3(n.tileTransform,i,c)),f=d.map(n=>new r.Point(n[0],n[1])),p=i.getFreeCameraOptions().position||new r.MercatorCoordinate(0,0,0),m=r.getTileVec3(n.tileTransform,p,c),g=d.map(n=>{let i=r.sub(n,n,m);return r.normalize(i,i),new r.Ray(m,i)}),y=z(n,1,i.zoom)*i._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:f,tilespaceRays:g,bufferedTilespaceGeometry:h,bufferedTilespaceBounds:((s=r.getBounds(h)).min.x=r.clamp(s.min.x,0,r.EXTENT),s.min.y=r.clamp(s.min.y,0,r.EXTENT),s.max.x=r.clamp(s.max.x,0,r.EXTENT),s.max.y=r.clamp(s.max.y,0,r.EXTENT),s),tile:n,tileID:n.tileID,pixelToTileUnitsFactor:y}}_bufferedScreenMercator(r,n){let i=100*r|0;if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{let o;return o="globe"===n.projection.name?this._projectAndResample(this.bufferedScreenGeometry(r),n):{polygon:this.bufferedScreenGeometry(r).map(r=>n.pointCoordinate3D(r)),unwrapped:!0},this._screenRaycastCache[i]=o,o}}_bufferedCameraMercator(r,n){let i=100*r|0;if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{let o;return o="globe"===n.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(r),n):{polygon:this.bufferedCameraGeometry(r).map(r=>n.pointCoordinate3D(r)),unwrapped:!0},this._cameraRaycastCache[i]=o,o}}_projectAndResample(n,i){let o=function(n,i){let o=r.multiply([],i.pixelMatrix,i.globeMatrix),a=[0,-r.GLOBE_RADIUS,0,1],s=[0,r.GLOBE_RADIUS,0,1],l=[0,0,0,1];r.transformMat4$1(a,a,o),r.transformMat4$1(s,s,o),r.transformMat4$1(l,l,o);let u=new r.Point(a[0]/a[3],a[1]/a[3]),c=new r.Point(s[0]/s[3],s[1]/s[3]),h=r.polygonContainsPoint(n,u)&&a[3]<l[3],d=r.polygonContainsPoint(n,c)&&s[3]<l[3];if(!h&&!d)return null;let f=function(r,n,i){for(let o=1;o<r.length;o++){let a=D(n.pointCoordinate3D(r[o-1]).x),s=D(n.pointCoordinate3D(r[o]).x);if(i<0){if(a<s)return{idx:o,t:-a/(s-1-a)}}else if(s<a)return{idx:o,t:(1-a)/(s+1-a)}}return null}(n,i,h?-1:1);if(!f)return null;let{idx:p,t:m}=f,g=p>1?O(n.slice(0,p),i):[],y=p<n.length?O(n.slice(p),i):[];g=g.map(n=>new r.Point(D(n.x),n.y)),y=y.map(n=>new r.Point(D(n.x),n.y));let _=[...g];0===_.length&&_.push(y[y.length-1]);let v=r.number(_[_.length-1].y,(0===y.length?g[0]:y[0]).y,m);return _.push(...h?[new r.Point(0,v),new r.Point(0,0),new r.Point(1,0),new r.Point(1,v)]:[new r.Point(1,v),new r.Point(1,1),new r.Point(0,1),new r.Point(0,v)]),0===y.length?_.push(g[0]):_.push(...y),{polygon:_.map(n=>new r.MercatorCoordinate(n.x,n.y)),unwrapped:!1}}(n,i);if(o)return o;let a=function(n,i){let o=!1,a=-1/0,s=0;for(let r=0;r<n.length-1;r++)n[r].x>a&&(a=n[r].x,s=r);for(let r=0;r<n.length-1;r++){let i=(s+r)%(n.length-1),a=n[i],l=n[i+1];Math.abs(a.x-l.x)>.5&&(a.x<l.x?(a.x+=1,0===i&&(n[n.length-1].x+=1)):(l.x+=1,i+1===n.length-1&&(n[0].x+=1)),o=!0)}let l=r.mercatorXfromLng(i.center.lng);return o&&l<Math.abs(l-1)&&n.forEach(r=>{r.x-=1}),{polygon:n,unwrapped:o}}(O(n,i).map(n=>new r.Point(D(n.x),n.y)),i);return{polygon:a.polygon.map(n=>new r.MercatorCoordinate(n.x,n.y)),unwrapped:a.unwrapped}}}function O(n,i){return r.resample(n,r=>{let n=i.pointCoordinate3D(r);r.x=n.x,r.y=n.y},1/256)}function D(r){return r<0?1+r%1:r%1}function R(n,i,o,a,s){let l=function(o,a){if(o)return s(o);if(a){n.url&&a.tiles&&n.tiles&&delete n.tiles;let o=r.pick(r.extend(a,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(o.vectorLayers=a.vector_layers,o.vectorLayerIds=o.vectorLayers.map(r=>r.id)),o.tiles=i.canonicalizeTileset(o,n.url),s(null,o)}};return n.url?r.getJSON(i.transformRequest(i.normalizeSourceURL(n.url,null,o,a),r.ResourceType.Source),l):r.exported.frame(()=>l(null,n))}class F{constructor(n,i,o){this.bounds=r.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=i||0,this.maxzoom=o||24}validateBounds(r){return Array.isArray(r)&&4===r.length?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(n){let i=Math.pow(2,n.z),o=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*i),a=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*i),s=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*i),l=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*i);return n.x>=o&&n.x<s&&n.y>=a&&n.y<l}}class B{constructor(r,n,i){this.context=r;let o=r.gl;this.buffer=o.createBuffer(),this.dynamicDraw=!!i,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||n.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let n=this.context.gl;this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let N={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class j{constructor(r,n,i,o){this.length=n.length,this.attributes=i,this.itemSize=n.bytesPerElement,this.dynamicDraw=o,this.context=r;let a=r.gl;this.buffer=a.createBuffer(),r.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){let n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,n){for(let i=0;i<this.attributes.length;i++){let o=n.attributes[this.attributes[i].name];void 0!==o&&r.enableVertexAttribArray(o)}}setVertexAttribPointers(r,n,i){for(let o=0;o<this.attributes.length;o++){let a=this.attributes[o],s=n.attributes[a.name];void 0!==s&&r.vertexAttribPointer(s,a.components,r[N[a.type]],!1,this.itemSize,a.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class V{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class U extends V{getDefault(){return r.Color.transparent}set(r){let n=this.current;(r.r!==n.r||r.g!==n.g||r.b!==n.b||r.a!==n.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class q extends V{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class $ extends V{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class H extends V{getDefault(){return[!0,!0,!0,!0]}set(r){let n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Z extends V{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class G extends V{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class W extends V{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let n=this.current;(r.func!==n.func||r.ref!==n.ref||r.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class X extends V{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Y extends V{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;r?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=r,this.dirty=!1}}class K extends V{getDefault(){return[0,1]}set(r){let n=this.current;(r[0]!==n[0]||r[1]!==n[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class J extends V{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;r?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=r,this.dirty=!1}}class Q extends V{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class ee extends V{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;r?n.enable(n.BLEND):n.disable(n.BLEND),this.current=r,this.dirty=!1}}class et extends V{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let n=this.current;(r[0]!==n[0]||r[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class er extends V{getDefault(){return r.Color.transparent}set(r){let n=this.current;(r.r!==n.r||r.g!==n.g||r.b!==n.b||r.a!==n.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class en extends V{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ei extends V{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;r?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=r,this.dirty=!1}}class eo extends V{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ea extends V{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}let es,el=class extends V{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}};class eu extends V{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class ec extends V{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class eh extends V{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class ed extends V{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ef extends V{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;n.bindTexture(n.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class ep extends V{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class em extends V{getDefault(){return null}set(r){let n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class eg extends V{constructor(r){super(r),this.vao=r.extVertexArrayObject}getDefault(){return null}set(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)}}class ey extends V{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class e_ extends V{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ev extends V{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class eb extends V{constructor(r,n){super(r),this.context=r,this.parent=n}getDefault(){return null}}class ex extends eb{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class ew extends eb{attachment(){return this.gl.DEPTH_ATTACHMENT}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,this.attachment(),n.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class eE extends ew{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class eC{constructor(r,n,i,o){this.context=r,this.width=n,this.height=i;let a=this.framebuffer=r.gl.createFramebuffer();this.colorAttachment=new ex(r,a),o&&(this.depthAttachment=new ew(r,a))}destroy(){let r=this.context.gl,n=this.colorAttachment.get();if(n&&r.deleteTexture(n),this.depthAttachment){let n=this.depthAttachment.get();n&&r.deleteRenderbuffer(n)}r.deleteFramebuffer(this.framebuffer)}}class eS{constructor(r,n=!1){this.gl=r,this.isWebGL2=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),n&&(this.extVertexArrayObject={createVertexArrayOES:r.createVertexArray.bind(r),deleteVertexArrayOES:r.deleteVertexArray.bind(r),bindVertexArrayOES:r.bindVertexArray.bind(r)}),this.clearColor=new U(this),this.clearDepth=new q(this),this.clearStencil=new $(this),this.colorMask=new H(this),this.depthMask=new Z(this),this.stencilMask=new G(this),this.stencilFunc=new W(this),this.stencilOp=new X(this),this.stencilTest=new Y(this),this.depthRange=new K(this),this.depthTest=new J(this),this.depthFunc=new Q(this),this.blend=new ee(this),this.blendFunc=new et(this),this.blendColor=new er(this),this.blendEquation=new en(this),this.cullFace=new ei(this),this.cullFaceSide=new eo(this),this.frontFace=new ea(this),this.program=new el(this),this.activeTexture=new eu(this),this.viewport=new ec(this),this.bindFramebuffer=new eh(this),this.bindRenderbuffer=new ed(this),this.bindTexture=new ef(this),this.bindVertexBuffer=new ep(this),this.bindElementBuffer=new em(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new eg(this),this.pixelStoreUnpack=new ey(this),this.pixelStoreUnpackPremultiplyAlpha=new e_(this),this.pixelStoreUnpackFlipY=new ev(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=r.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=r.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=r.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),n||(this.extTextureHalfFloat=r.getExtension("OES_texture_half_float")),(n||this.extTextureHalfFloat&&r.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=n||r.getExtension("OES_standard_derivatives"),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,n){return new B(this,r,n)}createVertexBuffer(r,n,i){return new j(this,r,n,i)}createRenderbuffer(r,n,i){let o=this.gl,a=o.createRenderbuffer();return this.bindRenderbuffer.set(a),o.renderbufferStorage(o.RENDERBUFFER,r,n,i),this.bindRenderbuffer.set(null),a}createFramebuffer(r,n,i){return new eC(this,r,n,i)}clear({color:r,depth:n,stencil:i}){let o=this.gl,a=0;r&&(a|=o.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(a|=o.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),o.clear(a)}setCullFace(r){!1===r.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(n){a(n.blendFunction,r.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class eT extends r.Evented{constructor(n,i,o,a){if(super(),this.id=n,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(i,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a),this._tileWorkers={},this._deduped=new r.DedupedRequest}load(n){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"}));let i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,o=this.map._worldview;this._tileJSONRequest=R(this._options,this.map._requestManager,i,o,(a,s)=>{this._tileJSONRequest=null,this._loaded=!0,a?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),o&&2!==o.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${o}`),this.fire(new r.ErrorEvent(a))):s&&(r.extend(this,s),s.bounds&&(this.tileBounds=new F(s.bounds,this.minzoom,this.maxzoom)),r.postTurnstileEvent(s.tiles,this.map._requestManager._customAccessToken),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))),n&&n(a)})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(r){return this._options.tiles=r,this.reload(),this}setUrl(r){return this.url=r,this._options.url=r,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return r.extend({},this._options)}loadTile(n,i){let o=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(o,r.ResourceType.Tile),data:void 0,uid:n.uid,tileID:n.tileID,tileZoom:n.tileZoom,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:n.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,n.actor&&"expired"!==n.state)"loading"===n.state?n.reloadCallback=i:n.request=n.actor.send("reloadTile",a,s.bind(this));else if(n.actor=this._tileWorkers[o]=this._tileWorkers[o]||this.dispatcher.getActor(),this.dispatcher.ready)n.request=n.actor.send("loadTile",a,s.bind(this),void 0,!0);else{let i=r.loadVectorTile.call({deduped:this._deduped},a,(r,i)=>{r||!i?s.call(this,r):(a.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},n.actor&&n.actor.send("loadTile",a,s.bind(this),void 0,!0))},!0);n.request={cancel:i}}function s(o,a){return delete n.request,n.aborted?i(null):o&&404!==o.status?i(o):(a&&a.resourceTiming&&(n.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&n.setExpiryData(a),n.loadVectorData(a,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id})}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class eM extends r.Evented{constructor(n,i,o,a){super(),this.id=n,this.dispatcher=o,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},i),r.extend(this,r.pick(i,["url","scheme","tileSize"]))}load(n){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R(this._options,this.map._requestManager,null,null,(i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new r.ErrorEvent(i)):o&&(r.extend(this,o),o.bounds&&(this.tileBounds=new F(o.bounds,this.minzoom,this.maxzoom)),r.postTurnstileEvent(o.tiles),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))),n&&n(i)})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(r){return this._options.tiles=r,this.reload(),this}setUrl(r){return this.url=r,this._options.url=r,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return r.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(n,i){let o=r.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),o,this.tileSize);n.request=r.getImage(this.map._requestManager.transformRequest(a,r.ResourceType.Tile),(o,a,s,l)=>(delete n.request,n.aborted?(n.state="unloaded",i(null)):o?(n.state="errored",i(o)):a?(this.map._refreshExpiredTiles&&n.setExpiryData({cacheControl:s,expires:l}),n.setTexture(a,this.map.painter),n.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),void i(null)):i(null)))}static loadTileData(r,n,i){r.setTexture(n,i)}static unloadTileData(r,n){r.texture&&n.saveTileTexture(r.texture)}abortTile(r,n){r.request&&(r.request.cancel(),delete r.request),n()}unloadTile(r,n){r.texture&&this.map.painter.saveTileTexture(r.texture),n()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function ek(n,i,o,a,s,l,u,c){let h=[n,o,s,i,a,l,1,1,1],d=[u,c,1],f=r.adjoint([],h),[p,m,g]=r.transformMat3(d,d,r.transpose(f,f));return r.multiply$1(h,[p,0,0,0,m,0,0,0,g],h)}class eI extends r.Evented{constructor(r,n,i,o){super(),this.id=r,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=n,this._dirty=!1}load(n,i){this._loaded=i||!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(i,o)=>{if(this._imageRequest=null,this._loaded=!0,i)this.fire(new r.ErrorEvent(i));else if(o){let{HTMLImageElement:i}=r.window;this.image=o instanceof i?r.exported.getImageData(o):o,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,n&&(this.coordinates=n),this._finishLoading()}})}loaded(){return this._loaded}updateImage(r){return this.image&&r.url&&(this._imageRequest&&r.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=r.url,this.load(r.coordinates,this._loaded)),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(n){this.coordinates=n,this._boundsArray=void 0;let i=n.map(r.MercatorCoordinate.fromLngLat);return this.tileID=function(n){let i=1/0,o=1/0,a=-1/0,s=-1/0;for(let r of n)i=Math.min(i,r.x),o=Math.min(o,r.y),a=Math.max(a,r.x),s=Math.max(s,r.y);let l=Math.max(a-i,s-o),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),c=Math.pow(2,u);return new r.CanonicalTileID(u,Math.floor((i+a)/2*c),Math.floor((o+s)/2*c))}(i),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(n){for(let r in this.tiles){let n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}if(this._boundsArray)return;let i=r.tileTransform(this.tileID,this.map.transform.projection),[o,a,s,l]=this.coordinates.map(n=>{let o=i.projection.project(n[0],n[1]);return r.getTilePoint(i,o)._round()});this.perspectiveTransform=function(n,i,o,a,s,l,u,c,h,d){let f=ek(0,0,n,0,0,i,n,i),p=ek(o,a,s,l,u,c,h,d);return r.multiply$1(p,r.adjoint(f,f),p),[p[6]/p[8]*n/r.EXTENT,p[7]/p[8]*i/r.EXTENT]}(this.width,this.height,o.x,o.y,a.x,a.y,l.x,l.y,s.x,s.y);let u=this._boundsArray=new r.StructArrayLayout4i8;u.emplaceBack(o.x,o.y,0,0),u.emplaceBack(a.x,a.y,r.EXTENT,0),u.emplaceBack(l.x,l.y,0,r.EXTENT),u.emplaceBack(s.x,s.y,r.EXTENT,r.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=n.createVertexBuffer(u,r.boundsAttributes.members),this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;let n=this.map.painter.context,i=n.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new r.Texture(n,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(n)}loadTile(r,n){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored",n(null)}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}let eL={vector:eT,raster:eM,"raster-dem":class extends eM{constructor(n,i,o,a){super(n,i,o,a),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(n,i){let o=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function a(r,o){r&&(n.state="errored",i(r)),o&&(n.dem=o,n.dem.onDeserialize(),n.needsHillshadePrepare=!0,n.needsDEMTextureUpload=!0,n.state="loaded",i(null))}n.request=r.getImage(this.map._requestManager.transformRequest(o,r.ResourceType.Tile),(function(o,s,l,u){if(delete n.request,n.aborted)n.state="unloaded",i(null);else if(o)n.state="errored",i(o);else if(s){this.map._refreshExpiredTiles&&n.setExpiryData({cacheControl:l,expires:u});let i=r.window.ImageBitmap&&s instanceof r.window.ImageBitmap&&(null==es&&(es=r.window.OffscreenCanvas&&new r.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof r.window.createImageBitmap),es),o=1-(s.width-r.prevPowerOfTwo(s.width))/2;o<1||n.neighboringTiles||(n.neighboringTiles=this._getNeighboringTiles(n.tileID));let c=i?s:r.exported.getImageData(s,o),h={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:o};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",h,a.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(n){let i=n.canonical,o=Math.pow(2,i.z),a=(i.x-1+o)%o,s=0===i.x?n.wrap-1:n.wrap,l=(i.x+1+o)%o,u=i.x+1===o?n.wrap+1:n.wrap,c={};return c[new r.OverscaledTileID(n.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,u,i.z,l,i.y).key]={backfilled:!1},i.y>0&&(c[new r.OverscaledTileID(n.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,n.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,u,i.z,l,i.y-1).key]={backfilled:!1}),i.y+1<o&&(c[new r.OverscaledTileID(n.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,n.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,u,i.z,l,i.y+1).key]={backfilled:!1}),c}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded"}},geojson:class extends r.Evented{constructor(n,i,o,a){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(a),this._data=i.data,this._options=r.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;let s=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*s,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*s,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:r.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*s,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(r){this.map=r,this.setData(this._data)}setData(r){return this._data=r,this._updateWorkerData(),this}getClusterExpansionZoom(r,n){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},n),this}getClusterChildren(r,n){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},n),this}getClusterLeaves(r,n,i,o){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:n,offset:i},o),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new r.Event("dataloading",{dataType:"source"})),this._loaded=!1;let n=r.extend({},this.workerOptions),i=this._data;"string"==typeof i?(n.request=this.map._requestManager.transformRequest(r.exported.resolveURL(i),r.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,n,(n,i)=>{if(this._loaded=!0,this._pendingLoad=null,n)this.fire(new r.ErrorEvent(n));else{let n={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&i&&i.resourceTiming&&i.resourceTiming[this.id]&&(n.resourceTiming=i.resourceTiming[this.id]),this.fire(new r.Event("data",n)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(n,i){let o=n.actor?"reloadTile":"loadTile";n.actor=this.actor,n.request=this.actor.send(o,{type:this.type,uid:n.uid,tileID:n.tileID,tileZoom:n.tileZoom,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(r,a)=>(delete n.request,n.unloadVectorData(),n.aborted?i(null):r?i(r):(n.loadVectorData(a,this.map.painter,"reloadTile"===o),i(null))),void 0,"loadTile"===o)}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends eI{constructor(r,n,i,o){super(r,n,i,o),this.roundZoom=!0,this.type="video",this.options=n}load(){this._loaded=!1;let n=this.options;for(let i of(this.urls=[],n.urls))this.urls.push(this.map._requestManager.transformRequest(i,r.ResourceType.Source).url);r.getVideo(this.urls,(n,i)=>{this._loaded=!0,n?this.fire(new r.ErrorEvent(n)):i&&(this.video=i,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){let i=this.video.seekable;n<i.start(0)||n>i.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;let n=this.map.painter.context,i=n.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(n,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(n)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:eI,canvas:class extends eI{constructor(n,i,o,a){super(n,i,o,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(r=>!Array.isArray(r)||2!==r.length||r.some(r=>"number"!=typeof r))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;let i=this.map.painter.context;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}},custom:class extends r.Evented{constructor(n,i,o,a){super(),this.id=n,this.type="custom",this._dataType="raster",this._dispatcher=o,this._implementation=i,this.setEventedParent(a),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new r.ErrorEvent(Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new r.ErrorEvent(Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new F(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),r.extend(this,r.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return r.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(n){this._map=n,this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(n),this.load()}onRemove(r){this._implementation.onRemove&&this._implementation.onRemove(r)}hasTile(r){if(this._implementation.hasTile){let{x:n,y:i,z:o}=r.canonical;return this._implementation.hasTile({x:n,y:i,z:o})}return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(n,i){let{x:o,y:a,z:s}=n.tileID.canonical,l=new r.window.AbortController;n.request=Promise.resolve(this._implementation.loadTile({x:o,y:a,z:s},{signal:l.signal})).then((function(o){return delete n.request,n.aborted?(n.state="unloaded",i(null)):void 0===o?(n.state="errored",i(null)):null===o?(this.loadTileData(n,{width:this.tileSize,height:this.tileSize,data:null}),n.state="loaded",i(null)):o instanceof r.window.ImageData||o instanceof r.window.HTMLCanvasElement||o instanceof r.window.ImageBitmap||o instanceof r.window.HTMLImageElement?(this.loadTileData(n,o),n.state="loaded",void i(null)):(n.state="errored",i(Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(r=>{20!==r.code&&(n.state="errored",i(r))}),n.request.cancel=()=>l.abort()}loadTileData(r,n){eM.loadTileData(r,n,this._map.painter)}unloadTileData(r){eM.unloadTileData(r,this._map.painter)}unloadTile(r,n){if(this.unloadTileData(r),this._implementation.unloadTile){let{x:n,y:i,z:o}=r.tileID.canonical;this._implementation.unloadTile({x:n,y:i,z:o})}n()}abortTile(r,n){r.request&&r.request.cancel&&(r.request.cancel(),delete r.request),n()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(r=>({x:r.canonical.x,y:r.canonical.y,z:r.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))}}},eA=function(n,i,o,a){let s=new eL[i.type](n,i,o,a);if(s.id!==n)throw Error(`Expected Source id to be ${n} instead of ${s.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],s),s};function ez(r,n){let i=r.tileID,o=n.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}function eP(){return null!=n4.workerClass?new n4.workerClass:new r.window.Worker(n4.workerUrl)}let eO="mapboxgl_preloaded_worker_pool";class eD{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<eD.workerCount;)this.workers.push(new eP);return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],0===this.numActive()&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[eO]}numActive(){return Object.keys(this.active).length}}function eR(){return i||(i=new eD),i}function eF(n){n=n.slice();let i=Object.create(null);for(let r=0;r<n.length;r++)i[n[r].id]=n[r];for(let o=0;o<n.length;o++)"ref"in n[o]&&(n[o]=function(n,i){let o={};for(let r in n)"ref"!==r&&(o[r]=n[r]);return r.refProperties.forEach(r=>{r in i&&(o[r]=i[r])}),o}(n[o],i[n[o].ref]));return n}eD.workerCount=2;let eB={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function eN(r,n,i){i.push({command:eB.addSource,args:[r,n[r]]})}function ej(r,n,i){n.push({command:eB.removeSource,args:[r]}),i[r]=!0}function eV(r,n,i,o,s,l){let u;for(u in n=n||{},r=r||{})r.hasOwnProperty(u)&&(a(r[u],n[u])||i.push({command:l,args:[o,u,n[u],s]}));for(u in n)n.hasOwnProperty(u)&&!r.hasOwnProperty(u)&&(a(r[u],n[u])||i.push({command:l,args:[o,u,n[u],s]}))}function eU(r){return r.id}function eq(r,n){return r[n.id]=n,r}class e${constructor(r,n){this.reset(r,n)}reset(r,n){this.points=r||[],this._distances=[0];for(let r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(1===this.points.length)return this.points[0];n=r.clamp(n,0,1);let i=1,o=this._distances[i],a=n*this.paddedLength+this.padding;for(;o<a&&i<this._distances.length;)o=this._distances[++i];let s=i-1,l=this._distances[s],u=o-l,c=u>0?(a-l)/u:0;return this.points[s].mult(1-c).add(this.points[i].mult(c))}}class eH{constructor(r,n,i){let o=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(r/i),this.yCellCount=Math.ceil(n/i);for(let r=0;r<this.xCellCount*this.yCellCount;r++)o.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=n,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,n,i,o,a){this._forEachCell(n,i,o,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(a)}insertCircle(r,n,i,o){this._forEachCell(n-o,i-o,n+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(n),this.circles.push(i),this.circles.push(o)}_insertBoxCell(r,n,i,o,a,s){this.boxCells[a].push(s)}_insertCircleCell(r,n,i,o,a,s){this.circleCells[a].push(s)}_query(r,n,i,o,a,s){if(i<0||r>this.width||o<0||n>this.height)return!a&&[];let l=[];if(r<=0&&n<=0&&this.width<=i&&this.height<=o){if(a)return!0;for(let r=0;r<this.boxKeys.length;r++)l.push({key:this.boxKeys[r],x1:this.bboxes[4*r],y1:this.bboxes[4*r+1],x2:this.bboxes[4*r+2],y2:this.bboxes[4*r+3]});for(let r=0;r<this.circleKeys.length;r++){let n=this.circles[3*r],i=this.circles[3*r+1],o=this.circles[3*r+2];l.push({key:this.circleKeys[r],x1:n-o,y1:i-o,x2:n+o,y2:i+o})}return s?l.filter(s):l}return this._forEachCell(r,n,i,o,this._queryCell,l,{hitTest:a,seenUids:{box:{},circle:{}}},s),a?l.length>0:l}_queryCircle(r,n,i,o,a){let s=r-i,l=r+i,u=n-i,c=n+i;if(l<0||s>this.width||c<0||u>this.height)return!o&&[];let h=[];return this._forEachCell(s,u,l,c,this._queryCellCircle,h,{hitTest:o,circle:{x:r,y:n,radius:i},seenUids:{box:{},circle:{}}},a),o?h.length>0:h}query(r,n,i,o,a){return this._query(r,n,i,o,!1,a)}hitTest(r,n,i,o,a){return this._query(r,n,i,o,!0,a)}hitTestCircle(r,n,i,o){return this._queryCircle(r,n,i,!0,o)}_queryCell(r,n,i,o,a,s,l,u){let c=l.seenUids,h=this.boxCells[a];if(null!==h){let a=this.bboxes;for(let d of h)if(!c.box[d]){c.box[d]=!0;let h=4*d;if(r<=a[h+2]&&n<=a[h+3]&&i>=a[h+0]&&o>=a[h+1]&&(!u||u(this.boxKeys[d]))){if(l.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[d],x1:a[h],y1:a[h+1],x2:a[h+2],y2:a[h+3]})}}}let d=this.circleCells[a];if(null!==d){let a=this.circles;for(let h of d)if(!c.circle[h]){c.circle[h]=!0;let d=3*h;if(this._circleAndRectCollide(a[d],a[d+1],a[d+2],r,n,i,o)&&(!u||u(this.circleKeys[h]))){if(l.hitTest)return s.push(!0),!0;{let r=a[d],n=a[d+1],i=a[d+2];s.push({key:this.circleKeys[h],x1:r-i,y1:n-i,x2:r+i,y2:n+i})}}}}}_queryCellCircle(r,n,i,o,a,s,l,u){let c=l.circle,h=l.seenUids,d=this.boxCells[a];if(null!==d){let r=this.bboxes;for(let n of d)if(!h.box[n]){h.box[n]=!0;let i=4*n;if(this._circleAndRectCollide(c.x,c.y,c.radius,r[i+0],r[i+1],r[i+2],r[i+3])&&(!u||u(this.boxKeys[n])))return s.push(!0),!0}}let f=this.circleCells[a];if(null!==f){let r=this.circles;for(let n of f)if(!h.circle[n]){h.circle[n]=!0;let i=3*n;if(this._circlesCollide(r[i],r[i+1],r[i+2],c.x,c.y,c.radius)&&(!u||u(this.circleKeys[n])))return s.push(!0),!0}}}_forEachCell(r,n,i,o,a,s,l,u){let c=this._convertToXCellCoord(r),h=this._convertToYCellCoord(n),d=this._convertToXCellCoord(i),f=this._convertToYCellCoord(o);for(let p=c;p<=d;p++)for(let c=h;c<=f;c++)if(a.call(this,r,n,i,o,this.xCellCount*c+p,s,l,u))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,n,i,o,a,s){let l=o-r,u=a-n,c=i+s;return c*c>l*l+u*u}_circleAndRectCollide(r,n,i,o,a,s,l){let u=(s-o)/2,c=Math.abs(r-(o+u));if(c>u+i)return!1;let h=(l-a)/2,d=Math.abs(n-(a+h));if(d>h+i)return!1;if(c<=u||d<=h)return!0;let f=c-u,p=d-h;return f*f+p*p<=i*i}}let eZ={unknown:0,flipRequired:1,flipNotRequired:2},eG=Math.tan(85*Math.PI/180);function eW(n,i,o,a,s,l,u){let c=r.create();if(o){if("globe"===l.name){let n=r.calculateGlobeLabelMatrix(s,i);r.multiply(c,c,n)}else{let n=x([],u);c[0]=n[0],c[1]=n[1],c[4]=n[2],c[5]=n[3],a||r.rotateZ(c,c,s.angle)}}else r.multiply(c,s.labelPlaneMatrix,n);return c}function eX(r,n,i,o,a,s,l){let u=eW(r,n,i,o,a,s,l);return"globe"===s.name&&i||(u[2]=u[6]=u[10]=u[14]=0),u}function eY(n,i,o,a,s,l,u){if(o){if("globe"===l.name){let c=eW(n,i,o,a,s,l,u);return r.invert(c,c),r.multiply(c,n,c),c}{let i=r.clone(n),o=r.identity([]);return o[0]=u[0],o[1]=u[1],o[4]=u[2],o[5]=u[3],r.multiply(i,i,o),a||r.rotateZ(i,i,-s.angle),i}}return s.glCoordMatrix}function eK(n,i,o,a){let s=[n,i,o,1];o?r.transformMat4$1(s,s,a):e6(s,s,a);let l=s[3];return s[0]/=l,s[1]/=l,s[2]/=l,s}function eJ(r,n){return Math.min(.5+r/n*.5,1.5)}function eQ(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y){let{lineStartIndex:_,glyphStartIndex:v,segment:b}=u,x=v+u.numGlyphs,w=_+u.lineLength,E=n.getoffsetX(v),C=n.getoffsetX(x-1),S=e3(r*E,i,o,a,s,l,b,_,w,c,h,d,f,p,!0,m,g,y);if(!S)return null;let T=e3(r*C,i,o,a,s,l,b,_,w,c,h,d,f,p,!0,m,g,y);return T?{first:S,last:T}:null}function e0(n,i,o,a){return n===r.WritingMode.horizontal&&Math.abs(a)>Math.abs(o)?{useVertical:!0}:n===r.WritingMode.vertical?a>0?{needsFlipping:!0}:null:i!==eZ.unknown&&(0===o||Math.abs(a/o)>eG)?i===eZ.flipRequired?{needsFlipping:!0}:null:o<0?{needsFlipping:!0}:null}function e1(n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x){let w=i/24,E=n.lineOffsetX*w,C=n.lineOffsetY*w,{lineStartIndex:S,glyphStartIndex:T,numGlyphs:M,segment:k,writingMode:I,flipState:L}=n,A=S+n.lineLength,z=n=>{if(f){let[i,o,a]=n.up,s=d.length;r.updateGlobeVertexNormal(f,s+0,i,o,a),r.updateGlobeVertexNormal(f,s+1,i,o,a),r.updateGlobeVertexNormal(f,s+2,i,o,a),r.updateGlobeVertexNormal(f,s+3,i,o,a)}let[i,o,a]=n.point;r.addDynamicAttributes(d,i,o,a,n.angle)};if(M>1){let r=eQ(w,c,E,C,o,p,m,n,h,l,g,_,!1,v,b,x);if(!r)return{notEnoughRoom:!0};if(a&&!o){let[i,o,a]=r.first.point,[s,l,c]=r.last.point;[i,o]=eK(i,o,a,u),[s,l]=eK(s,l,c,u);let h=e0(I,L,(s-i)*y,l-o);if(n.flipState=h&&h.needsFlipping?eZ.flipRequired:eZ.flipNotRequired,h)return h}z(r.first);for(let r=T+1;r<T+M-1;r++){let n=e3(w*c.getoffsetX(r),E,C,o,p,m,k,S,A,h,l,g,_,!1,!1,v,b,x);if(!n)return d.length-=4*(r-T),{notEnoughRoom:!0};z(n)}z(r.last)}else{if(a&&!o){let i=eK(m.x,m.y,0,s),o=S+k+1,a=new r.Point(h.getx(o),h.gety(o)),l=eK(a.x,a.y,0,s),u=l[3]>0?l:e4(m,a,i,1,s,void 0,v,b.canonical),c=e0(I,L,(u[0]-i[0])*y,u[1]-i[1]);if(n.flipState=c&&c.needsFlipping?eZ.flipRequired:eZ.flipNotRequired,c)return c}let i=e3(w*c.getoffsetX(T),E,C,o,p,m,k,S,A,h,l,g,_,!1,!1,v,b,x);if(!i)return{notEnoughRoom:!0};z(i)}return{}}function e2(r,n,i,o,a){let{x:s,y:l,z:u}=o.projectTilePoint(r.x,r.y,n);if(!a)return eK(s,l,u,i);let[c,h,d]=a(r);return eK(s+c,l+h,u+d,i)}function e4(n,i,o,a,s,l,u,c){let h=e2(n.sub(i)._unit()._add(n),c,s,u,l);return r.sub(h,o,h),r.normalize(h,h),r.scaleAndAdd(h,o,h,a)}function e3(n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b){let x=a?n-i:n+i,w=x>0?1:-1,E=0;a&&(w*=-1,E=Math.PI),w<0&&(E+=Math.PI);let C=c+u+(w>0?0:1)|0,S=s,T=s,M=0,k=0,I=Math.abs(x),L=[],A=[],z=l,P=z,O=()=>e4(P,z,T,I-M+1,f,m,_,v.canonical);for(;M+k<=I;){if((C+=w)<c||C>=h)return null;if(T=S,P=z,L.push(T),g&&A.push(P),z=new r.Point(d.getx(C),d.gety(C)),!(S=p[C])){let r=e2(z,v.canonical,f,_,m);S=r[3]>0?p[C]=r:O()}M+=k,k=r.distance(T,S)}y&&m&&(p[C]&&(S=O(),k=r.distance(T,S)),p[C]=S);let D=(I-M)/k,R=z.sub(P)._mult(D)._add(P),F=r.sub([],S,T),B=r.scaleAndAdd([],T,F,D),N=[0,0,1],j=F[0],V=F[1];if(b&&(0!==(N=_.upVector(v.canonical,R.x,R.y))[0]||0!==N[1]||1!==N[2])){let n=[N[2],0,-N[0]],i=r.cross([],N,n);r.normalize(n,n),r.normalize(i,i),j=r.dot(F,n),V=r.dot(F,i)}if(o){let n=r.cross([],N,F);r.normalize(n,n),r.scaleAndAdd(B,B,n,o*w)}let U=E+Math.atan2(V,j);return L.push(B),g&&A.push(R),{point:B,angle:U,path:L,tilePath:A,up:N}}function e5(r,n){let i=n.length,o=i+4*r;n.resize(o),n.float32.fill(-1/0,4*i,4*o)}function e6(r,n,i){let o=n[0],a=n[1];return r[0]=i[0]*o+i[4]*a+i[12],r[1]=i[1]*o+i[5]*a+i[13],r[3]=i[3]*o+i[7]*a+i[15],r}class e8{constructor(r,n,i=new eH(r.width+200,r.height+200,25),o=new eH(r.width+200,r.height+200,25)){this.transform=r,this.grid=i,this.ignoredGrid=o,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+100,this.screenBottomBoundary=r.height+100,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.fogState=n}placeCollisionBox(r,n,i,o,a,s,l,u){let c=i.projectedAnchorX,h=i.projectedAnchorY,d=i.projectedAnchorZ,f=i.elevation,p=i.tileID,m=r.getProjection();if(f&&p){let[r,n,o]=m.upVector(p.canonical,i.tileAnchorX,i.tileAnchorY),a=m.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;c+=r*f*a,h+=n*f*a,d+=o*f*a}let g=this.projectAndGetPerspectiveRatio(l,c,h,d,i.tileID,"globe"===m.name||!!f||this.transform.pitch>0,m),y=s*g.perspectiveRatio,_=(i.x1*n+o.x-i.padding)*y+g.point.x,v=(i.y1*n+o.y-i.padding)*y+g.point.y,b=(i.x2*n+o.x+i.padding)*y+g.point.x,x=(i.y2*n+o.y+i.padding)*y+g.point.y,w=g.perspectiveRatio<=.55||g.occluded;return!this.isInsideGrid(_,v,b,x)||!a&&this.grid.hitTest(_,v,b,x,u)||w?{box:[],offscreen:!1,occluded:g.occluded}:{box:[_,v,b,x],offscreen:this.isOffscreen(_,v,b,x),occluded:!1}}placeCollisionCircles(n,i,o,a,s,l,u,c,h,d,f,p,m,g,y){let _=[],v=this.transform.elevation,b=n.getProjection(),x=v?v.getAtTileOffsetFunc(y,this.transform.center.lat,this.transform.worldSize,b):null,w=new r.Point(o.tileAnchorX,o.tileAnchorY),{x:E,y:C,z:S}=b.projectTilePoint(w.x,w.y,y.canonical);if(x){let[r,n,i]=x(w);E+=r,C+=n,S+=i}let T="globe"===b.name,M=this.projectAndGetPerspectiveRatio(u,E,C,S,y,T||!!v||this.transform.pitch>0,b),{perspectiveRatio:k}=M,I=(f?l/k:l*k)/r.ONE_EM,L=eK(E,C,S,c),A=M.signedDistanceFromCamera>0?eQ(I,s,o.lineOffsetX*I,o.lineOffsetY*I,!1,L,w,o,a,c,{},v&&!f?x:null,f&&!!v,b,y,f):null,z=!1,P=!1,O=!0;if(A&&!M.occluded){let n=.5*m*k+g,o=new r.Point(-100,-100),a=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),s=new e$,{first:l,last:u}=A,c=l.path.length,f=[];for(let r=c-1;r>=1;r--)f.push(l.path[r]);for(let r=1;r<u.path.length;r++)f.push(u.path[r]);let y=2.5*n;h&&(f=f.map(([r,n,i],o)=>(x&&!T&&(i=x(o<c-1?l.tilePath[c-1-o]:u.tilePath[o-c+2])[2]),eK(r,n,i,h)))).some(r=>r[3]<=0)&&(f=[]);let v=[];if(f.length>0){let n=1/0,i=-1/0,s=1/0,l=-1/0;for(let r of f)n=Math.min(n,r[0]),s=Math.min(s,r[1]),i=Math.max(i,r[0]),l=Math.max(l,r[1]);i>=o.x&&n<=a.x&&l>=o.y&&s<=a.y&&(v=[f.map(n=>new r.Point(n[0],n[1]))],(n<o.x||i>a.x||s<o.y||l>a.y)&&(v=r.clipLine(v,o.x,o.y,a.x,a.y)))}for(let r of v){s.reset(r,.25*n);let o=0;o=s.length<=.5*n?1:Math.ceil(s.paddedLength/y)+1;for(let r=0;r<o;r++){let a=r/Math.max(o-1,1),l=s.lerp(a),u=l.x+100,c=l.y+100;_.push(u,c,n,0);let h=u-n,f=c-n,m=u+n,g=c+n;if(O=O&&this.isOffscreen(h,f,m,g),P=P||this.isInsideGrid(h,f,m,g),!i&&this.grid.hitTestCircle(u,c,n,p)&&(z=!0,!d))return{circles:[],offscreen:!1,collisionDetected:z,occluded:!1}}}}return{circles:(d||!z)&&P?_:[],offscreen:O,collisionDetected:z,occluded:M.occluded}}queryRenderedSymbols(n){if(0===n.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};let i=[],o=1/0,a=1/0,s=-1/0,l=-1/0;for(let u of n){let n=new r.Point(u.x+100,u.y+100);o=Math.min(o,n.x),a=Math.min(a,n.y),s=Math.max(s,n.x),l=Math.max(l,n.y),i.push(n)}let u=this.grid.query(o,a,s,l).concat(this.ignoredGrid.query(o,a,s,l)),c={},h={};for(let n of u){let o=n.key;if(void 0===c[o.bucketInstanceId]&&(c[o.bucketInstanceId]={}),c[o.bucketInstanceId][o.featureIndex])continue;let a=[new r.Point(n.x1,n.y1),new r.Point(n.x2,n.y1),new r.Point(n.x2,n.y2),new r.Point(n.x1,n.y2)];r.polygonIntersectsPolygon(i,a)&&(c[o.bucketInstanceId][o.featureIndex]=!0,void 0===h[o.bucketInstanceId]&&(h[o.bucketInstanceId]=[]),h[o.bucketInstanceId].push(o.featureIndex))}return h}insertCollisionBox(r,n,i,o,a){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:o,collisionGroupID:a},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,n,i,o,a){let s=n?this.ignoredGrid:this.grid,l={bucketInstanceId:i,featureIndex:o,collisionGroupID:a};for(let n=0;n<r.length;n+=4)s.insertCircle(l,r[n],r[n+1],r[n+2])}projectAndGetPerspectiveRatio(n,i,o,a,s,l,u){let c=[i,o,a,1],h=!1;if(a||this.transform.pitch>0){if(r.transformMat4$1(c,c,n),this.fogState&&s&&"globe"!==u.name){let n=function(n,i,o,a,s,l){let u=l.calculateFogTileMatrix(s),c=[i,o,a];return r.transformMat4(c,c,u),M(n,c,l.pitch,l._fov)}(this.fogState,i,o,a,s.toUnwrapped(),this.transform);h=n>.9}}else e6(c,c,n);let d=c[3];return{point:new r.Point((c[0]/d+1)/2*this.transform.width+100,(-c[1]/d+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(u)/d*.5,1.5),signedDistanceFromCamera:d,occluded:l&&c[2]>d||h}}isOffscreen(r,n,i,o){return i<100||r>=this.screenRightBoundary||o<100||n>this.screenBottomBoundary}isInsideGrid(r,n,i,o){return i>=0&&r<this.gridRightBoundary&&o>=0&&n<this.gridBottomBoundary}getViewportMatrix(){let n=r.identity([]);return r.translate(n,n,[-100,-100,0]),n}}function e9(n,i,o){let a=i.createTileMatrix(n,n.worldSize,o.toUnwrapped());return r.multiply(new Float32Array(16),n.projMatrix,a)}function e7(r,n,i){return n.name===i.projection.name?r.projMatrix:e9(i,n,r)}class te{constructor(r,n,i,o){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?n:-n))):o&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class tt{constructor(r,n,i,o,a,s=!1){this.text=new te(r?r.text:null,n,i,a),this.icon=new te(r?r.icon:null,n,o,a),this.clipped=s}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tr{constructor(r,n,i,o=!1){this.text=r,this.icon=n,this.skipFade=i,this.clipped=o}}class tn{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class ti{constructor(r,n,i,o,a){this.bucketInstanceId=r,this.featureIndex=n,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=a}}class to{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let n=++this.maxGroupID;this.collisionGroups[r]={ID:n,predicate:r=>r.collisionGroupID===n}}return this.collisionGroups[r]}}function ta(n,i,o,a,s){let{horizontalAlign:l,verticalAlign:u}=r.getAnchorAlignment(n),c=r.evaluateVariableOffset(n,a);return new r.Point(-(l-.5)*i+c[0]*s,-(u-.5)*o+c[1]*s)}function ts(n,i,o,a,s){let l=new r.Point(n,i);return o&&l._rotate(a?s:-s),l}class tl{constructor(r,n,i,o,a){this.transform=r.clone(),this.projection=r.projection.name,this.collisionIndex=new e8(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new to(i),this.collisionCircleArrays={},this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,i,o,a){var s,l,u;let c=o.getBucket(i),h=o.latestFeatureIndex;if(!c||!h||i.id!==c.layerIds[0])return;let d=c.layers[0].layout,f=o.collisionBoxArray,p=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),m=o.tileSize/r.EXTENT,g=o.tileID.toUnwrapped();this.transform.setProjection(c.projection);let y=(s=o.tileID,l=c.getProjection(),u=this.transform,l.name===this.projection?u.calculateProjMatrix(s.toUnwrapped()):e9(u,l,s)),_="map"===d.get("text-pitch-alignment"),v="map"===d.get("text-rotation-alignment");i.compileFilter();let b=i.dynamicFilter(),x=i.dynamicFilterNeedsFeature(),w=this.transform.calculatePixelsToTileUnitsMatrix(o),E=eX(y,o.tileID.canonical,_,v,this.transform,c.getProjection(),w),C=null;if(_){let n=eY(y,o.tileID.canonical,_,v,this.transform,c.getProjection(),w);C=r.multiply([],this.transform.labelPlaneMatrix,n)}let S=null;b&&o.latestFeatureIndex&&(S={unwrappedTileID:g,dynamicFilter:b,dynamicFilterNeedsFeature:x,featureIndex:o.latestFeatureIndex}),this.retainedQueryData[c.bucketInstanceId]=new ti(c.bucketInstanceId,h,c.sourceLayerIndex,c.index,o.tileID);let T={bucket:c,layout:d,posMatrix:y,textLabelPlaneMatrix:E,labelToScreenMatrix:C,clippingData:S,scale:p,textPixelRatio:m,holdingForFade:o.holdingForFade(),collisionBoxArray:f,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(c.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:r.evaluateSizeForZoom(c.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(c.sourceID)};if(a)for(let r of c.sortKeyRanges){let{sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:a}=r;n.push({sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:a,parameters:T})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:c.symbolInstances.length,parameters:T})}attemptAnchorPlacement(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v){let{textOffset0:b,textOffset1:x,crossTileID:w}=f,E=[b,x],C=ta(r,i,o,E,a),S=this.collisionIndex.placeCollisionBox(m,a,n,ts(C.x,C.y,s,l,this.transform.angle),d,u,c,h.predicate);if(y){let r=m.getSymbolInstanceIconSize(v,this.transform.zoom,f.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(m,r,y,ts(C.x,C.y,s,l,this.transform.angle),d,u,c,h.predicate).box.length)return}if(S.box.length>0){let n;return this.prevPlacement&&this.prevPlacement.variableOffsets[w]&&this.prevPlacement.placements[w]&&this.prevPlacement.placements[w].text&&(n=this.prevPlacement.variableOffsets[w].anchor),this.variableOffsets[w]={textOffset:E,width:i,height:o,anchor:r,textScale:a,prevAnchor:n},this.markUsedJustification(m,r,f,g),m.allowVerticalPlacement&&(this.markUsedOrientation(m,g,f),this.placedOrientations[w]=g),{shift:C,placedGlyphBoxes:S}}}placeLayerBucketPart(n,i,o,a){let{bucket:s,layout:l,posMatrix:u,textLabelPlaneMatrix:c,labelToScreenMatrix:h,clippingData:d,textPixelRatio:f,holdingForFade:p,collisionBoxArray:m,partiallyEvaluatedTextSize:g,partiallyEvaluatedIconSize:y,collisionGroup:_}=n.parameters,v=l.get("text-optional"),b=l.get("icon-optional"),x=l.get("text-allow-overlap"),w=l.get("icon-allow-overlap"),E="map"===l.get("text-rotation-alignment"),C="map"===l.get("text-pitch-alignment"),S="none"!==l.get("icon-text-fit"),T="viewport-y"===l.get("symbol-z-order");this.transform.setProjection(s.projection);let M=x&&(w||!s.hasIconData()||b),k=w&&(x||!s.hasTextData()||v);!s.collisionArrays&&m&&s.deserializeCollisionBoxes(m),o&&a&&s.updateCollisionDebugBuffers(this.transform.zoom,m);let I=(n,a,m)=>{let{crossTileID:T,numVerticalGlyphVertices:I}=n;if(d){let o={zoom:this.transform.zoom,pitch:this.transform.pitch},a=null;if(d.dynamicFilterNeedsFeature){let r=this.retainedQueryData[s.bucketInstanceId];a=d.featureIndex.loadFeature({featureIndex:n.featureIndex,bucketIndex:r.bucketIndex,sourceLayerIndex:r.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,d.dynamicFilter)(o,a,this.retainedQueryData[s.bucketInstanceId].tileID.canonical,new r.Point(n.tileAnchorX,n.tileAnchorY),this.transform.calculateDistanceTileData(d.unwrappedTileID)))return this.placements[T]=new tr(!1,!1,!1,!0),void i.add(T)}if(i.has(T))return;if(p)return void(this.placements[T]=new tr(!1,!1,!1));let L=!1,A=!1,z=!0,P=!1,O=!1,D=null,R={box:null,offscreen:null,occluded:null},F={box:null,offscreen:null,occluded:null},B=null,N=null,j=null,V=0,U=0,q=0;m.textFeatureIndex?V=m.textFeatureIndex:n.useRuntimeCollisionCircles&&(V=n.featureIndex),m.verticalTextFeatureIndex&&(U=m.verticalTextFeatureIndex);let $=r=>{r.tileID=this.retainedQueryData[s.bucketInstanceId].tileID;let n=this.transform.elevation;(n||r.elevation)&&(r.elevation=n?n.getAtTileOffset(r.tileID,r.tileAnchorX,r.tileAnchorY):0)},H=m.textBox;if(H){$(H);let i=i=>{let o=r.WritingMode.horizontal;if(s.allowVerticalPlacement&&!i&&this.prevPlacement){let r=this.prevPlacement.placedOrientations[T];r&&(this.placedOrientations[T]=r,o=r,this.markUsedOrientation(s,o,n))}return o},o=(n,i)=>{if(s.allowVerticalPlacement&&I>0&&m.verticalTextBox){for(let o of s.writingModes)if(o===r.WritingMode.vertical?F=R=i():R=n(),R&&R.box&&R.box.length)break}else R=n()};if(l.get("text-variable-anchor")){let c=l.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[T]){let r=this.prevPlacement.variableOffsets[T];c.indexOf(r.anchor)>0&&(c=c.filter(n=>n!==r.anchor)).unshift(r.anchor)}let h=(r,i,o)=>{let l=s.getSymbolInstanceTextSize(g,n,this.transform.zoom,a),h=(r.x2-r.x1)*l+2*r.padding,d=(r.y2-r.y1)*l+2*r.padding,p=S&&!w?i:null;p&&$(p);let m={box:[],offscreen:!1,occluded:!1},v=x?2*c.length:c.length;for(let i=0;i<v;++i){let v=this.attemptAnchorPlacement(c[i%c.length],r,h,d,l,E,C,f,u,_,i>=c.length,n,a,s,o,p,g,y);if(v&&(m=v.placedGlyphBoxes)&&m.box&&m.box.length){L=!0,D=v.shift;break}}return m};o(()=>h(H,m.iconBox,r.WritingMode.horizontal),()=>{let n=m.verticalTextBox;return n&&$(n),s.allowVerticalPlacement&&!(R&&R.box&&R.box.length)&&I>0&&n?h(n,m.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),R&&(L=R.box,z=R.offscreen,P=R.occluded);let d=i(!(!R||!R.box));if(!L&&this.prevPlacement){let r=this.prevPlacement.variableOffsets[T];r&&(this.variableOffsets[T]=r,this.markUsedJustification(s,r.anchor,n,d))}}else{let l=(i,o)=>{let l=s.getSymbolInstanceTextSize(g,n,this.transform.zoom,a),c=this.collisionIndex.placeCollisionBox(s,l,i,new r.Point(0,0),x,f,u,_.predicate);return c&&c.box&&c.box.length&&(this.markUsedOrientation(s,o,n),this.placedOrientations[T]=o),c};o(()=>l(H,r.WritingMode.horizontal),()=>{let n=m.verticalTextBox;return s.allowVerticalPlacement&&I>0&&n?($(n),l(n,r.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),i(!!(R&&R.box&&R.box.length))}}if(L=(B=R)&&B.box&&B.box.length>0,z=B&&B.offscreen,P=B&&B.occluded,n.useRuntimeCollisionCircles){let i=s.text.placedSymbolArray.get(n.centerJustifiedTextSymbolIndex>=0?n.centerJustifiedTextSymbolIndex:n.verticalPlacedTextSymbolIndex),a=r.evaluateSizeForFeature(s.textSizeData,g,i),d=l.get("text-padding");N=this.collisionIndex.placeCollisionCircles(s,x,i,s.lineVertexArray,s.glyphOffsetArray,a,u,c,h,o,C,_.predicate,n.collisionCircleDiameter*a/r.ONE_EM,d,this.retainedQueryData[s.bucketInstanceId].tileID),L=x||N.circles.length>0&&!N.collisionDetected,z=z&&N.offscreen,P=N.occluded}if(m.iconFeatureIndex&&(q=m.iconFeatureIndex),m.iconBox){let i=i=>{$(i);let o=S&&D?ts(D.x,D.y,E,C,this.transform.angle):new r.Point(0,0),a=s.getSymbolInstanceIconSize(y,this.transform.zoom,n.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(s,a,i,o,w,f,u,_.predicate)};A=F&&F.box&&F.box.length&&m.verticalIconBox?(j=i(m.verticalIconBox)).box.length>0:(j=i(m.iconBox)).box.length>0,z=z&&j.offscreen,O=j.occluded}let Z=v||0===n.numHorizontalGlyphVertices&&0===I,G=b||0===n.numIconVertices;if(Z||G?G?Z||(A=A&&L):L=A&&L:A=L=A&&L,L&&B&&B.box&&this.collisionIndex.insertCollisionBox(B.box,l.get("text-ignore-placement"),s.bucketInstanceId,F&&F.box&&U?U:V,_.ID),A&&j&&this.collisionIndex.insertCollisionBox(j.box,l.get("icon-ignore-placement"),s.bucketInstanceId,q,_.ID),N&&(L&&this.collisionIndex.insertCollisionCircles(N.circles,l.get("text-ignore-placement"),s.bucketInstanceId,V,_.ID),o)){let r=s.bucketInstanceId,n=this.collisionCircleArrays[r];void 0===n&&(n=this.collisionCircleArrays[r]=new tn);for(let r=0;r<N.circles.length;r+=4)n.circles.push(N.circles[r+0]),n.circles.push(N.circles[r+1]),n.circles.push(N.circles[r+2]),n.circles.push(N.collisionDetected?1:0)}let W="globe"!==s.projection.name;M=M&&(W||!P),k=k&&(W||!O),this.placements[T]=new tr(L||M,A||k,z||s.justReloaded),i.add(T)};if(T){let r=s.getSortedSymbolIndexes(this.transform.angle);for(let n=r.length-1;n>=0;--n){let i=r[n];I(s.symbolInstances.get(i),i,s.collisionArrays[i])}}else for(let r=n.symbolInstanceStart;r<n.symbolInstanceEnd;r++)I(s.symbolInstances.get(r),r,s.collisionArrays[r]);if(o&&s.bucketInstanceId in this.collisionCircleArrays){let n=this.collisionCircleArrays[s.bucketInstanceId];r.invert(n.invProjMatrix,u),n.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}markUsedJustification(n,i,o,a){let{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:l,rightJustifiedTextSymbolIndex:u,verticalPlacedTextSymbolIndex:c,crossTileID:h}=o,d=r.getAnchorJustification(i),f=a===r.WritingMode.vertical?c:"left"===d?s:"center"===d?l:"right"===d?u:-1;s>=0&&(n.text.placedSymbolArray.get(s).crossTileID=f>=0&&s!==f?0:h),l>=0&&(n.text.placedSymbolArray.get(l).crossTileID=f>=0&&l!==f?0:h),u>=0&&(n.text.placedSymbolArray.get(u).crossTileID=f>=0&&u!==f?0:h),c>=0&&(n.text.placedSymbolArray.get(c).crossTileID=f>=0&&c!==f?0:h)}markUsedOrientation(n,i,o){let a=i===r.WritingMode.horizontal||i===r.WritingMode.horizontalOnly?i:0,s=i===r.WritingMode.vertical?i:0,{leftJustifiedTextSymbolIndex:l,centerJustifiedTextSymbolIndex:u,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:h}=o,d=n.text.placedSymbolArray;l>=0&&(d.get(l).placedOrientation=a),u>=0&&(d.get(u).placedOrientation=a),c>=0&&(d.get(c).placedOrientation=a),h>=0&&(d.get(h).placedOrientation=s)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let n=this.prevPlacement,i=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;let o=n?n.symbolFadeChange(r):1,a=n?n.opacities:{},s=n?n.variableOffsets:{},l=n?n.placedOrientations:{};for(let r in this.placements){let n=this.placements[r],s=a[r];s?(this.opacities[r]=new tt(s,o,n.text,n.icon,null,n.clipped),i=i||n.text!==s.text.placed||n.icon!==s.icon.placed):(this.opacities[r]=new tt(null,o,n.text,n.icon,n.skipFade,n.clipped),i=i||n.text||n.icon)}for(let r in a){let n=a[r];if(!this.opacities[r]){let a=new tt(n,o,!1,!1);a.isHidden()||(this.opacities[r]=a,i=i||n.text.placed||n.icon.placed)}}for(let r in s)this.variableOffsets[r]||!this.opacities[r]||this.opacities[r].isHidden()||(this.variableOffsets[r]=s[r]);for(let r in l)this.placedOrientations[r]||!this.opacities[r]||this.opacities[r].isHidden()||(this.placedOrientations[r]=l[r]);i?this.lastPlacementChangeTime=r:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:r)}updateLayerOpacities(r,n){let i=new Set;for(let o of n){let n=o.getBucket(r);n&&o.latestFeatureIndex&&r.id===n.layerIds[0]&&this.updateBucketOpacities(n,i,o.collisionBoxArray)}}updateBucketOpacities(n,i,o){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();let a=n.layers[0].layout,s=!!n.layers[0].dynamicFilter(),l=new tt(null,0,!1,!1,!0),u=a.get("text-allow-overlap"),c=a.get("icon-allow-overlap"),h=a.get("text-variable-anchor"),d="map"===a.get("text-rotation-alignment"),f="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),m=new tt(null,0,u&&(c||!n.hasIconData()||a.get("icon-optional")),c&&(u||!n.hasTextData()||a.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);let g=(r,n,i)=>{for(let o=0;o<n/4;o++)r.opacityVertexArray.emplaceBack(i)},y=0;for(let o=0;o<n.symbolInstances.length;o++){let a=n.symbolInstances.get(o),{numHorizontalGlyphVertices:u,numVerticalGlyphVertices:c,crossTileID:_,numIconVertices:v}=a,b=i.has(_),x=this.opacities[_];b?x=l:x||(x=m,this.opacities[_]=x),i.add(_);let w=u>0||c>0,E=v>0,C=this.placedOrientations[_],S=C===r.WritingMode.vertical,T=C===r.WritingMode.horizontal||C===r.WritingMode.horizontalOnly;if(!w&&!E||x.isHidden()||y++,w){let r=tc(x.text);g(n.text,u,S?th:r),g(n.text,c,T?th:r);let i=x.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:h}=a,d=n.text.placedSymbolArray,f=i||S?1:0;o>=0&&(d.get(o).hidden=f),s>=0&&(d.get(s).hidden=f),l>=0&&(d.get(l).hidden=f),h>=0&&(d.get(h).hidden=i||T?1:0);let p=this.variableOffsets[_];p&&this.markUsedJustification(n,p.anchor,a,C);let m=this.placedOrientations[_];m&&(this.markUsedJustification(n,"left",a,m),this.markUsedOrientation(n,m,a))}if(E){let r=tc(x.icon),{placedIconSymbolIndex:i,verticalPlacedIconSymbolIndex:o}=a,s=n.icon.placedSymbolArray,l=x.icon.isHidden()?1:0;i>=0&&(g(n.icon,v,S?th:r),s.get(i).hidden=l),o>=0&&(g(n.icon,a.numVerticalIconVertices,T?th:r),s.get(o).hidden=l)}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){let i=n.collisionArrays[o];if(i){let o=new r.Point(0,0),a=!0;if(i.textBox||i.verticalTextBox){if(h){let r=this.variableOffsets[_];r?(o=ta(r.anchor,r.width,r.height,r.textOffset,r.textScale),d&&o._rotate(f?this.transform.angle:-this.transform.angle)):a=!1}s&&(a=!x.clipped),i.textBox&&tu(n.textCollisionBox.collisionVertexArray,x.text.placed,!a||S,o.x,o.y),i.verticalTextBox&&tu(n.textCollisionBox.collisionVertexArray,x.text.placed,!a||T,o.x,o.y)}let l=a&&!!(!T&&i.verticalIconBox);i.iconBox&&tu(n.iconCollisionBox.collisionVertexArray,x.icon.placed,l,p?o.x:0,p?o.y:0),i.verticalIconBox&&tu(n.iconCollisionBox.collisionVertexArray,x.icon.placed,!l,p?o.x:0,p?o.y:0)}}}if(n.fullyClipped=0===y,n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){let r=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=r.invProjMatrix,n.placementViewportMatrix=r.viewportMatrix,n.collisionCircleArray=r.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(r){return 0===this.fadeDuration?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,n){let i=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*i>r}setStale(){this.stale=!0}}function tu(r,n,i,o,a){r.emplaceBack(n?1:0,i?1:0,o||0,a||0),r.emplaceBack(n?1:0,i?1:0,o||0,a||0),r.emplaceBack(n?1:0,i?1:0,o||0,a||0),r.emplaceBack(n?1:0,i?1:0,o||0,a||0)}function tc(r){if(0===r.opacity&&!r.placed)return 0;if(1===r.opacity&&r.placed)return 4294967295;let n=r.placed?1:0,i=Math.floor(127*r.opacity);return 33554432*i+16777216*n+131072*i+65536*n+512*i+256*n+2*i+n}let th=0;class td{constructor(r){this._sortAcrossTiles="viewport-y"!==r.layout.get("symbol-z-order")&&void 0!==r.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(r,n,i,o,a){let s=this._bucketParts;for(;this._currentTileIndex<r.length;)if(n.getBucketParts(s,o,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort((r,n)=>r.sortKey-n.sortKey));this._currentPartIndex<s.length;){let r=s[this._currentPartIndex];if(n.placeLayerBucketPart(r,this._seenCrossTileIDs,i,0===r.symbolInstanceStart),this._currentPartIndex++,a())return!0}return!1}}class tf{constructor(r,n,i,o,a,s,l,u){this.placement=new tl(r,a,s,l,u),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1}isDone(){return this._done}continuePlacement(n,i,o){let a=r.exported.now(),s=()=>{let n=r.exported.now()-a;return!this._forceFullPlacement&&n>2};for(;this._currentPlacementIndex>=0;){let r=i[n[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if("symbol"===r.type&&(!r.minzoom||r.minzoom<=a)&&(!r.maxzoom||r.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new td(r)),this._inProgressLayer.continuePlacement(o[r.source],this.placement,this._showCollisionBoxes,r,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let tp=512/r.EXTENT/2;class tm{constructor(n,i,o){this.tileID=n,this.bucketInstanceId=o,this.index=new r.KDBush(i.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];let a=n.canonical.x*r.EXTENT,s=n.canonical.y*r.EXTENT;for(let r=0;r<i.length;r++){let{key:n,crossTileID:o,tileAnchorX:l,tileAnchorY:u}=i.get(r),c=Math.floor((a+l)*tp),h=Math.floor((s+u)*tp);this.index.add(c,h),this.keys.push(n),this.crossTileIDs.push(o)}this.index.finish()}findMatches(n,i,o){let a=this.tileID.canonical.z<i.canonical.z?1:Math.pow(2,this.tileID.canonical.z-i.canonical.z),s=tp/Math.pow(2,i.canonical.z-this.tileID.canonical.z),l=i.canonical.x*r.EXTENT,u=i.canonical.y*r.EXTENT;for(let r=0;r<n.length;r++){let i=n.get(r);if(i.crossTileID)continue;let{key:c,tileAnchorX:h,tileAnchorY:d}=i,f=Math.floor((l+h)*s),p=Math.floor((u+d)*s),m=this.index.range(f-a,p-a,f+a,p+a);for(let r of m){let n=this.crossTileIDs[r];if(this.keys[r]===c&&!o.has(n)){o.add(n),i.crossTileID=n;break}}}}}class tg{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ty{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let n=Math.round((r-this.lng)/360);if(0!==n)for(let r in this.indexes){let i=this.indexes[r],o={};for(let r in i){let a=i[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+n),o[a.tileID.key]=a}this.indexes[r]=o}this.lng=r}addBucket(r,n,i){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let r=0;r<n.symbolInstances.length;r++)n.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]=new Set);let o=this.usedCrossTileIDs[r.overscaledZ];for(let i in this.indexes){let a=this.indexes[i];if(Number(i)>r.overscaledZ)for(let i in a){let s=a[i];s.tileID.isChildOf(r)&&s.findMatches(n.symbolInstances,r,o)}else{let s=a[r.scaledTo(Number(i)).key];s&&s.findMatches(n.symbolInstances,r,o)}}for(let r=0;r<n.symbolInstances.length;r++){let a=n.symbolInstances.get(r);a.crossTileID||(a.crossTileID=i.generate(),o.add(a.crossTileID))}return void 0===this.indexes[r.overscaledZ]&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new tm(r,n.symbolInstances,n.bucketInstanceId),!0}removeBucketCrossTileIDs(r,n){for(let i of n.crossTileIDs)this.usedCrossTileIDs[r].delete(i)}removeStaleBuckets(r){let n=!1;for(let i in this.indexes){let o=this.indexes[i];for(let a in o)r[o[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[a]),delete o[a],n=!0)}return n}}class t_{constructor(){this.layerIndexes={},this.crossTileIDs=new tg,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,n,i,o){let a=this.layerIndexes[r.id];void 0===a&&(a=this.layerIndexes[r.id]=new ty);let s=!1,l={};for(let u of("globe"!==o.name&&a.handleWrapJump(i),n)){let n=u.getBucket(r);n&&r.id===n.layerIds[0]&&(n.bucketInstanceId||(n.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(u.tileID,n,this.crossTileIDs)&&(s=!0),l[n.bucketInstanceId]=!0)}return a.removeStaleBuckets(l)&&(s=!0),s}pruneUnusedLayers(r){let n={};for(let i in r.forEach(r=>{n[r]=!0}),this.layerIndexes)n[i]||delete this.layerIndexes[i]}}let tv=(n,i)=>r.emitValidationErrors(n,i&&i.filter(r=>"source.canvas"!==r.identifier)),tb=r.pick(eB,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),tx=r.pick(eB,["setCenter","setZoom","setBearing","setPitch"]),tw={version:8,layers:[],sources:{}},tE={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class tC extends r.Evented{constructor(n,i={}){super(),this.map=n,this.dispatcher=new A(eR(),this),this.imageManager=new w,this.imageManager.setEventedParent(this),this.glyphManager=new r.GlyphManager(n._requestManager,i.localFontFamily?r.LocalGlyphMode.all:i.localIdeographFontFamily?r.LocalGlyphMode.ideographs:r.LocalGlyphMode.none,i.localFontFamily||i.localIdeographFontFamily),this.crossTileSymbolIndex=new t_,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());let o=this;this._rtlTextPluginCallback=tC.registerForPluginStateChange(n=>{o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:n.pluginStatus,pluginURL:n.pluginURL},(n,i)=>{if(r.triggerPluginCompletionEvent(n),i&&i.every(r=>r))for(let r in o._sourceCaches){let n=o._sourceCaches[r],i=n.getSource().type;"vector"!==i&&"geojson"!==i||n.reload()}})}),this.on("data",r=>{if("source"!==r.dataType||"metadata"!==r.sourceDataType)return;let n=this.getSource(r.sourceId);if(n&&n.vectorLayerIds)for(let r in this._layers){let i=this._layers[r];i.source===n.id&&this._validateLayer(i)}})}loadURL(n,i={}){this.fire(new r.Event("dataloading",{dataType:"style"}));let o="boolean"==typeof i.validate?i.validate:!r.isMapboxURL(n);n=this.map._requestManager.normalizeStyleURL(n,i.accessToken);let a=this.map._requestManager.transformRequest(n,r.ResourceType.Style);this._request=r.getJSON(a,(n,i)=>{this._request=null,n?this.fire(new r.ErrorEvent(n)):i&&this._load(i,o)})}loadJSON(n,i={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(n,!1!==i.validate)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(tw,!1)}_updateLayerCount(r,n){let i=n?1:-1;r.is3D()&&(this._num3DLayers+=i),"circle"===r.type&&(this._numCircleLayers+=i),"symbol"===r.type&&(this._numSymbolLayers+=i)}_load(n,i){if(i&&tv(this,r.validateStyle(n)))return;for(let i in this._loaded=!0,this.stylesheet=r.clone$1(n),this._updateMapProjection(),n.sources)this.addSource(i,n.sources[i],{validate:!1});this._changed=!1,n.sprite?this._loadSprite(n.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(n.glyphs);let o=eF(this.stylesheet.layers);for(let n of(this._order=o.map(r=>r.id),this._layers={},this._serializedLayers={},o)){let i=r.createStyleLayer(n);i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize(),this._updateLayerCount(i,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new C(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(r){r?this.stylesheet.projection=r:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(n){this._spriteRequest=function(n,i,o){let a,s,l;let u=r.exported.devicePixelRatio>1?"@2x":"",c=r.getJSON(i.transformRequest(i.normalizeSpriteURL(n,u,".json"),r.ResourceType.SpriteJSON),(r,n)=>{c=null,l||(l=r,a=n,d())}),h=r.getImage(i.transformRequest(i.normalizeSpriteURL(n,u,".png"),r.ResourceType.SpriteImage),(r,n)=>{h=null,l||(l=r,s=n,d())});function d(){if(l)o(l);else if(a&&s){let n=r.exported.getImageData(s),i={};for(let o in a){let{width:s,height:l,x:u,y:c,sdf:h,pixelRatio:d,stretchX:f,stretchY:p,content:m}=a[o],g=new r.RGBAImage({width:s,height:l});r.RGBAImage.copy(n,g,{x:u,y:c},{x:0,y:0},{width:s,height:l}),i[o]={data:g,pixelRatio:d,sdf:h,stretchX:f,stretchY:p,content:m}}o(null,i)}}return{cancel(){c&&(c.cancel(),c=null),h&&(h.cancel(),h=null)}}}(n,this.map._requestManager,(n,i)=>{if(this._spriteRequest=null,n)this.fire(new r.ErrorEvent(n));else if(i)for(let r in i)this.imageManager.addImage(r,i[r]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(n){let i=this.getSource(n.source);if(!i)return;let o=n.sourceLayer;o&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(o))&&this.fire(new r.ErrorEvent(Error(`Source layer "${o}" does not exist on source "${i.id}" as specified by style layer "${n.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this._sourceCaches)if(!this._sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(r){let n=[];for(let i of r){let r=this._layers[i];"custom"!==r.type&&n.push(r.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(let r in this._sourceCaches)if(this._sourceCaches[r].hasTransition())return!0;for(let r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(r){return!!this.terrain&&("function"==typeof r.isLayerDraped?r.isLayerDraped():tE[r.type])}_checkLoaded(){if(!this._loaded)throw Error("Style is not done loading")}update(n){if(!this._loaded)return;let i=this._changed;if(this._changed){let r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(let n in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){let r=this._updatedSources[n];"reload"===r?this._reloadSource(n):"clear"===r&&this._clearSource(n)}for(let r in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[r].updateTransitions(n);this.light.updateTransitions(n),this.fog&&this.fog.updateTransitions(n),this._resetUpdates()}let o={};for(let r in this._sourceCaches){let n=this._sourceCaches[r];o[r]=n.used,n.used=!1}for(let r of this._order){let i=this._layers[r];if(i.recalculate(n,this._availableImages),!i.isHidden(n.zoom)){let r=this._getLayerSourceCache(i);r&&(r.used=!0)}let o=this.map.painter;if(o){let r=i.getProgramIds();if(!r)continue;let a=i.getProgramConfiguration(n.zoom);for(let n of r)o.useProgram(n,a)}}for(let n in o){let i=this._sourceCaches[n];o[n]!==i.used&&i.getSource().fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i.getSource().id}))}this.light.recalculate(n),this.terrain&&this.terrain.recalculate(n),this.fog&&this.fog.recalculate(n),this.z=n.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),i&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let n in this._sourceCaches)this._sourceCaches[n].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateWorkerLayers(r,n){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:n})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),tv(this,r.validateStyle(n)))return!1;(n=r.clone$1(n)).layers=eF(n.layers);let i=(function(r,n){if(!r)return[{command:eB.setStyle,args:[n]}];let i=[];try{if(!a(r.version,n.version))return[{command:eB.setStyle,args:[n]}];a(r.center,n.center)||i.push({command:eB.setCenter,args:[n.center]}),a(r.zoom,n.zoom)||i.push({command:eB.setZoom,args:[n.zoom]}),a(r.bearing,n.bearing)||i.push({command:eB.setBearing,args:[n.bearing]}),a(r.pitch,n.pitch)||i.push({command:eB.setPitch,args:[n.pitch]}),a(r.sprite,n.sprite)||i.push({command:eB.setSprite,args:[n.sprite]}),a(r.glyphs,n.glyphs)||i.push({command:eB.setGlyphs,args:[n.glyphs]}),a(r.transition,n.transition)||i.push({command:eB.setTransition,args:[n.transition]}),a(r.light,n.light)||i.push({command:eB.setLight,args:[n.light]}),a(r.fog,n.fog)||i.push({command:eB.setFog,args:[n.fog]}),a(r.projection,n.projection)||i.push({command:eB.setProjection,args:[n.projection]});let o={},s=[];!function(r,n,i,o){let s;for(s in n=n||{},r=r||{})r.hasOwnProperty(s)&&(n.hasOwnProperty(s)||ej(s,i,o));for(s in n){var l,u;if(!n.hasOwnProperty(s))continue;let c=n[s];r.hasOwnProperty(s)?a(r[s],c)||("geojson"===r[s].type&&"geojson"===c.type&&function(r,n,i){let o;for(o in r[i])if(r[i].hasOwnProperty(o)&&"data"!==o&&!a(r[i][o],n[i][o]))return!1;for(o in n[i])if(n[i].hasOwnProperty(o)&&"data"!==o&&!a(r[i][o],n[i][o]))return!1;return!0}(r,n,s)?i.push({command:eB.setGeoJSONSourceData,args:[s,c.data]}):(l=s,u=n,ej(l,i,o),eN(l,u,i))):eN(s,n,i)}}(r.sources,n.sources,s,o);let l=[];r.layers&&r.layers.forEach(r=>{r.source&&o[r.source]?i.push({command:eB.removeLayer,args:[r.id]}):l.push(r)});let u=r.terrain;u&&o[u.source]&&(i.push({command:eB.setTerrain,args:[void 0]}),u=void 0),i=i.concat(s),a(u,n.terrain)||i.push({command:eB.setTerrain,args:[n.terrain]}),function(r,n,i){let o,s,l,u,c,h,d;n=n||[];let f=(r=r||[]).map(eU),p=n.map(eU),m=r.reduce(eq,{}),g=n.reduce(eq,{}),y=f.slice(),_=Object.create(null);for(o=0,s=0;o<f.length;o++)l=f[o],g.hasOwnProperty(l)?s++:(i.push({command:eB.removeLayer,args:[l]}),y.splice(y.indexOf(l,s),1));for(o=0,s=0;o<p.length;o++)l=p[p.length-1-o],y[y.length-1-o]!==l&&(m.hasOwnProperty(l)?(i.push({command:eB.removeLayer,args:[l]}),y.splice(y.lastIndexOf(l,y.length-s),1)):s++,h=y[y.length-o],i.push({command:eB.addLayer,args:[g[l],h]}),y.splice(y.length-o,0,l),_[l]=!0);for(o=0;o<p.length;o++)if(u=m[l=p[o]],c=g[l],!_[l]&&!a(u,c)){if(a(u.source,c.source)&&a(u["source-layer"],c["source-layer"])&&a(u.type,c.type)){for(d in eV(u.layout,c.layout,i,l,null,eB.setLayoutProperty),eV(u.paint,c.paint,i,l,null,eB.setPaintProperty),a(u.filter,c.filter)||i.push({command:eB.setFilter,args:[l,c.filter]}),a(u.minzoom,c.minzoom)&&a(u.maxzoom,c.maxzoom)||i.push({command:eB.setLayerZoomRange,args:[l,c.minzoom,c.maxzoom]}),u)u.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?eV(u[d],c[d],i,l,d.slice(6),eB.setPaintProperty):a(u[d],c[d])||i.push({command:eB.setLayerProperty,args:[l,d,c[d]]}));for(d in c)c.hasOwnProperty(d)&&!u.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?eV(u[d],c[d],i,l,d.slice(6),eB.setPaintProperty):a(u[d],c[d])||i.push({command:eB.setLayerProperty,args:[l,d,c[d]]}))}else i.push({command:eB.removeLayer,args:[l]}),h=y[y.lastIndexOf(l)+1],i.push({command:eB.addLayer,args:[c,h]})}}(l,n.layers,i)}catch(r){console.warn("Unable to compute style diff:",r),i=[{command:eB.setStyle,args:[n]}]}return i})(this.serialize(),n).filter(r=>!(r.command in tx));if(0===i.length)return!1;let o=i.filter(r=>!(r.command in tb));if(o.length>0)throw Error(`Unimplemented: ${o.map(r=>r.command).join(", ")}.`);return i.forEach(r=>{"setTransition"!==r.command&&"setProjection"!==r.command&&this[r.command].apply(this,r.args)}),this.stylesheet=n,this._updateMapProjection(),!0}addImage(n,i){return this.getImage(n)?this.fire(new r.ErrorEvent(Error("An image with this name already exists."))):(this.imageManager.addImage(n,i),this._afterImageUpdated(n),this)}updateImage(r,n){this.imageManager.updateImage(r,n)}getImage(r){return this.imageManager.getImage(r)}removeImage(n){return this.getImage(n)?(this.imageManager.removeImage(n),this._afterImageUpdated(n),this):this.fire(new r.ErrorEvent(Error("No image with this name exists.")))}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(n,i,o={}){if(this._checkLoaded(),void 0!==this.getSource(n))throw Error("There is already a source with this ID");if(!i.type)throw Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(r.validateSource,`sources.${n}`,i,null,o))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);let a=eA(n,i,this.dispatcher,this);a.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(n),source:a.serialize(),sourceId:n}));let s=i=>{let o=(i?"symbol:":"other:")+n,s=this._sourceCaches[o]=new r.SourceCache(o,a,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[n]=s,s.style=this,s.onAdd(this.map)};s(!1),"vector"!==i.type&&"geojson"!==i.type||s(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}removeSource(n){this._checkLoaded();let i=this.getSource(n);if(!i)throw Error("There is no source with this ID");for(let i in this._layers)if(this._layers[i].source===n)return this.fire(new r.ErrorEvent(Error(`Source "${n}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===n)return this.fire(new r.ErrorEvent(Error(`Source "${n}" cannot be removed while terrain is using it.`)));let o=this._getSourceCaches(n);for(let n of o)delete this._sourceCaches[n.id],delete this._updatedSources[n.id],n.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n.getSource().id})),n.setEventedParent(null),n.clearTiles();return delete this._otherSourceCaches[n],delete this._symbolSourceCaches[n],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(r,n){this._checkLoaded(),this.getSource(r).setData(n),this._changed=!0}getSource(r){let n=this._getSourceCache(r);return n&&n.getSource()}_getSources(){let r=[];for(let n in this._otherSourceCaches){let i=this._getSourceCache(n);i&&r.push(i.getSource())}return r}addLayer(n,i,o={}){let a;this._checkLoaded();let s=n.id;if(this.getLayer(s))return void this.fire(new r.ErrorEvent(Error(`Layer with id "${s}" already exists on this map`)));if("custom"===n.type){if(tv(this,r.validateCustomStyleLayer(n)))return;a=r.createStyleLayer(n)}else{if("object"==typeof n.source&&(this.addSource(s,n.source),n=r.clone$1(n),n=r.extend(n,{source:s})),this._validate(r.validateLayer,`layers.${s}`,n,{arrayIndex:-1},o))return;a=r.createStyleLayer(n),this._validateLayer(a),a.setEventedParent(this,{layer:{id:s}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}let l=i?this._order.indexOf(i):this._order.length;if(i&&-1===l)return void this.fire(new r.ErrorEvent(Error(`Layer with id "${i}" does not exist on this map.`)));this._order.splice(l,0,s),this._layerOrderChanged=!0,this._layers[s]=a;let u=this._getLayerSourceCache(a);if(this._removedLayers[s]&&a.source&&u&&"custom"!==a.type){let r=this._removedLayers[s];delete this._removedLayers[s],r.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",u.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(n,i){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===i)return;let o=this._order.indexOf(n);this._order.splice(o,1);let a=i?this._order.indexOf(i):this._order.length;i&&-1===a?this.fire(new r.ErrorEvent(Error(`Layer with id "${i}" does not exist on this map.`))):(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(n){this._checkLoaded();let i=this._layers[n];if(!i)return void this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style and cannot be removed.`)));i.setEventedParent(null),this._updateLayerCount(i,!1);let o=this._order.indexOf(n);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=i,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],i.onRemove&&i.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}hasLayerType(r){for(let n in this._layers)if(this._layers[n].type===r)return!0;return!1}setLayerZoomRange(n,i,o){this._checkLoaded();let a=this.getLayer(n);a?a.minzoom===i&&a.maxzoom===o||(null!=i&&(a.minzoom=i),null!=o&&(a.maxzoom=o),this._updateLayer(a)):this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,i,o={}){this._checkLoaded();let s=this.getLayer(n);if(s){if(!a(s.filter,i))return null==i?(s.filter=void 0,void this._updateLayer(s)):void(this._validate(r.validateFilter,`layers.${s.id}.filter`,i,{layerType:s.type},o)||(s.filter=r.clone$1(i),this._updateLayer(s)))}else this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(n){let i=this.getLayer(n);return i&&r.clone$1(i.filter)}setLayoutProperty(n,i,o,s={}){this._checkLoaded();let l=this.getLayer(n);l?a(l.getLayoutProperty(i),o)||(l.setLayoutProperty(i,o,s),this._updateLayer(l)):this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(n,i){let o=this.getLayer(n);if(o)return o.getLayoutProperty(i);this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style.`)))}setPaintProperty(n,i,o,s={}){this._checkLoaded();let l=this.getLayer(n);l?a(l.getPaintProperty(i),o)||(l.setPaintProperty(i,o,s)&&this._updateLayer(l),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(r,n){let i=this.getLayer(r);return i&&i.getPaintProperty(n)}setFeatureState(n,i){this._checkLoaded();let o=n.source,a=n.sourceLayer,s=this.getSource(o);if(!s)return void this.fire(new r.ErrorEvent(Error(`The source '${o}' does not exist in the map's style.`)));let l=s.type;if("geojson"===l&&a)return void this.fire(new r.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===l&&!a)return void this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));void 0===n.id&&this.fire(new r.ErrorEvent(Error("The feature id parameter must be provided.")));let u=this._getSourceCaches(o);for(let r of u)r.setFeatureState(a,n.id,i)}removeFeatureState(n,i){this._checkLoaded();let o=n.source,a=this.getSource(o);if(!a)return void this.fire(new r.ErrorEvent(Error(`The source '${o}' does not exist in the map's style.`)));let s=a.type,l="vector"===s?n.sourceLayer:void 0;if("vector"===s&&!l)return void this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof n.id&&"number"!=typeof n.id)return void this.fire(new r.ErrorEvent(Error("A feature id is required to remove its specific state property.")));let u=this._getSourceCaches(o);for(let r of u)r.removeFeatureState(l,n.id,i)}getFeatureState(n){this._checkLoaded();let i=n.source,o=n.sourceLayer,a=this.getSource(i);if(a){if("vector"!==a.type||o)return void 0===n.id&&this.fire(new r.ErrorEvent(Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(o,n.id);this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){let n={};for(let r in this._sourceCaches){let i=this._sourceCaches[r].getSource();n[i.id]||(n[i.id]=i.serialize())}return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:n,layers:this._serializeLayers(this._order)},r=>void 0!==r)}_updateLayer(r){this._updatedLayers[r.id]=!0;let n=this._getLayerSourceCache(r);r.source&&!this._updatedSources[r.source]&&n&&"raster"!==n.getSource().type&&(this._updatedSources[r.source]="reload",n.pause()),this._changed=!0,r.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(r){let n=r=>"fill-extrusion"===this._layers[r].type,i={},o=[];for(let a=this._order.length-1;a>=0;a--){let s=this._order[a];if(n(s))for(let n of(i[s]=a,r)){let r=n[s];if(r)for(let n of r)o.push(n)}}o.sort((r,n)=>n.intersectionZ-r.intersectionZ);let a=[];for(let s=this._order.length-1;s>=0;s--){let l=this._order[s];if(n(l))for(let r=o.length-1;r>=0;r--){let n=o[r].feature;if(i[n.layer.id]<s)break;a.push(n),o.pop()}else for(let n of r){let r=n[l];if(r)for(let n of r)a.push(n.feature)}}return a}queryRenderedFeatures(n,i,o){i&&i.filter&&this._validate(r.validateFilter,"queryRenderedFeatures.filter",i.filter,null,i);let a={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new r.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(let n of i.layers){let i=this._layers[n];if(!i)return this.fire(new r.ErrorEvent(Error(`The layer '${n}' does not exist in the map's style and cannot be queried for features.`))),[];a[i.source]=!0}}let s=[];i.availableImages=this._availableImages;let l=i&&i.layers?i.layers.some(r=>{let n=this.getLayer(r);return n&&n.is3D()}):this.has3DLayers(),u=P.createFromScreenPoints(n,o);for(let n in this._sourceCaches){let c=this._sourceCaches[n].getSource().id;i.layers&&!a[c]||s.push(function(n,i,o,a,s,l,u,c=!1){let h=n.tilesIn(a,u,c);h.sort(ez);let d=[];for(let a of h)d.push({wrappedTileID:a.tile.tileID.wrapped().key,queryResults:a.tile.queryRenderedFeatures(i,o,n._state,a,s,l,function(n,i){let o=r.identity([]);return r.scale(o,o,[.5*n.width,-(.5*n.height),1]),r.translate(o,o,[1,-1,0]),r.multiply(o,o,n.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(o)}(n.transform,a.tile.tileID),c)});let f=function(r){let n={},i={};for(let o of r){let r=o.queryResults,a=o.wrappedTileID,s=i[a]=i[a]||{};for(let i in r){let o=r[i],a=s[i]=s[i]||{},l=n[i]=n[i]||[];for(let r of o)a[r.featureIndex]||(a[r.featureIndex]=!0,l.push(r))}}return n}(d);for(let r in f)f[r].forEach(r=>{let i=r.feature,o=i.layer;o&&"background"!==o.type&&"sky"!==o.type&&(i.source=o.source,o["source-layer"]&&(i.sourceLayer=o["source-layer"]),i.state=void 0!==i.id?n.getFeatureState(o["source-layer"],i.id):{})});return f}(this._sourceCaches[n],this._layers,this._serializedLayers,u,i,o,l,!!this.map._showQueryGeometry))}return this.placement&&s.push(function(r,n,i,o,a,s,l){let u={},c=s.queryRenderedSymbols(o),h=[];for(let r of Object.keys(c).map(Number))h.push(l[r]);for(let i of(h.sort(ez),h)){let o=i.featureIndex.lookupSymbolFeatures(c[i.bucketInstanceId],n,i.bucketIndex,i.sourceLayerIndex,a.filter,a.layers,a.availableImages,r);for(let r in o){let n=u[r]=u[r]||[],a=o[r];for(let r of(a.sort((r,n)=>{let o=i.featureSortOrder;if(o){let i=o.indexOf(r.featureIndex);return o.indexOf(n.featureIndex)-i}return n.featureIndex-r.featureIndex}),a))n.push(r)}}for(let n in u)u[n].forEach(o=>{let a=o.feature,s=i(r[n]);if(!s)return;let l=s.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=l});return u}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),u.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(s)}querySourceFeatures(n,i){i&&i.filter&&this._validate(r.validateFilter,"querySourceFeatures.filter",i.filter,null,i);let o=this._getSourceCaches(n),a=[];for(let r of o)a=a.concat(function(r,n){let i=r.getRenderableIds().map(n=>r.getTileByID(n)),o=[],a={};for(let r=0;r<i.length;r++){let s=i[r],l=s.tileID.canonical.key;a[l]||(a[l]=!0,s.querySourceFeatures(o,n))}return o}(r,i));return a}addSourceType(r,n,i){return tC.getSourceType(r)?i(Error(`A source type called "${r}" already exists.`)):(tC.setSourceType(r,n),n.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:n.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(r,n={}){this._checkLoaded();let i=this.light.getLight(),o=!1;for(let n in r)if(!a(r[n],i[n])){o=!0;break}if(!o)return;let s=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(r,n),this.light.updateTransitions(s)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,i=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let o=n;if(1===i){if("object"==typeof o.source){let n="terrain-dem-src";this.addSource(n,o.source),o=r.clone$1(o),o=r.extend(o,{source:n})}if(this._validate(r.validateTerrain,"terrain",o))return}if(!this.terrain||this.terrain&&i!==this.terrain.drapeRenderMode){if(!o)return;this._createTerrain(o,i)}else{let n=this.terrain,i=n.get();for(let n of Object.keys(r.spec.terrain))!o.hasOwnProperty(n)&&r.spec.terrain[n].default&&(o[n]=r.spec.terrain[n].default);for(let r in o)if(!a(o[r],i[r])){n.set(o),this.stylesheet.terrain=o;let r=this._setTransitionParameters({duration:0});n.updateTransitions(r);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(r){let n=this.fog=new L(r,this.map.transform);this.stylesheet.fog=r;let i=this._setTransitionParameters({duration:0});n.updateTransitions(i)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(let r of this.map._markers)r._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(r){if(this._checkLoaded(),!r)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){let n=this.fog,i=n.get();for(let o in 0===Object.keys(r).length&&n.set(r),r)if(!a(r[o],i[o])){n.set(r),this.stylesheet.fog=r;let i=this._setTransitionParameters({duration:0});n.updateTransitions(i);break}}else this._createFog(r);this._markersNeedUpdate=!0}_setTransitionParameters(n){return{now:r.exported.now(),transition:r.extend(n,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;let r=this._order.filter(r=>this.isLayerDraped(this._layers[r])),n=this._order.filter(r=>!this.isLayerDraped(this._layers[r]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...r),this._drapedFirstOrder.push(...n)}_createTerrain(r,n){let i=this.terrain=new T(r,n);this.stylesheet.terrain=r,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();let o=this._setTransitionParameters({duration:0});i.updateTransitions(o)}_force3DLayerUpdate(){for(let r in this._layers){let n=this._layers[r];"fill-extrusion"===n.type&&this._updateLayer(n)}}_forceSymbolLayerUpdate(){for(let r in this._layers){let n=this._layers[r];"symbol"===n.type&&this._updateLayer(n)}}_validate(n,i,o,a,s={}){return(!s||!1!==s.validate)&&tv(this,n.call(r.validateStyle,r.extend({key:i,style:this.serialize(),value:o,styleSpec:r.spec},a)))}_remove(){for(let n in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[n].setEventedParent(null);for(let r in this._sourceCaches)this._sourceCaches[r].clearTiles(),this._sourceCaches[r].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(r){let n=this._getSourceCaches(r);for(let r of n)r.clearTiles()}_reloadSource(r){let n=this._getSourceCaches(r);for(let r of n)r.resume(),r.reload()}_reloadSources(){for(let r of this._getSources())r.reload&&r.reload()}_updateSources(r){for(let n in this._sourceCaches)this._sourceCaches[n].update(r)}_generateCollisionBoxes(){for(let r in this._sourceCaches){let n=this._sourceCaches[r];n.resume(),n.reload()}}_updatePlacement(n,i,o,a,s=!1){let l=!1,u=!1,c={};for(let r of this._order){let i=this._layers[r];if("symbol"!==i.type)continue;if(!c[i.source]){let r=this._getLayerSourceCache(i);if(!r)continue;c[i.source]=r.getRenderableIds(!0).map(n=>r.getTileByID(n)).sort((r,n)=>n.tileID.overscaledZ-r.tileID.overscaledZ||(r.tileID.isLessThan(n.tileID)?-1:1))}let o=this.crossTileSymbolIndex.addLayer(i,c[i.source],n.center.lng,n.projection);l=l||o}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===o,this._layerOrderChanged&&this.fire(new r.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),n.zoom))&&(this.pauseablePlacement=new tf(n,this._order,s,i,o,a,this.placement,this.fog&&n.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l)for(let r of this._order){let n=this._layers[r];"symbol"===n.type&&this.placement.updateLayerOpacities(n,c[n.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(let r in this._sourceCaches)this._sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,n,i){this.imageManager.getImages(n.icons,i),this._updateTilesForChangedImages();let o=r=>{r&&r.setDependencies(n.tileID.key,n.type,n.icons)};o(this._otherSourceCaches[n.source]),o(this._symbolSourceCaches[n.source])}getGlyphs(r,n,i){this.glyphManager.getGlyphs(n.stacks,i)}getResource(n,i,o){return r.makeRequest(i,o)}_getSourceCache(r){return this._otherSourceCaches[r]}_getLayerSourceCache(r){return"symbol"===r.type?this._symbolSourceCaches[r.source]:this._otherSourceCaches[r.source]}_getSourceCaches(r){let n=[];return this._otherSourceCaches[r]&&n.push(this._otherSourceCaches[r]),this._symbolSourceCaches[r]&&n.push(this._symbolSourceCaches[r]),n}_isSourceCacheLoaded(n){let i=this._getSourceCaches(n);return 0===i.length?(this.fire(new r.ErrorEvent(Error(`There is no source with ID '${n}'`))),!1):i.every(r=>r.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}tC.getSourceType=function(r){return eL[r]},tC.setSourceType=function(r,n){eL[r]=n},tC.registerForPluginStateChange=r.registerForPluginStateChange;var tS="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",tT="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",tM="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",tk="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",tI="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let tL={},tA={},tz=[];tR(tS,tz),tR(tM,tz),tR(tk,tz),tR(tI,tz),tL=tF("",tM),tA=tF(tI,tk);let tP=tF("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),tO="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var tD={background:tF("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:tF("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:tF("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:tF("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tF("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:tF("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:tF("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tF("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:tF("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:tF("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:tF("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:tF("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:tF("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:tF("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:tF("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:tF("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tF("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:tF("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:tF("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:tF("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:tF("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:tF("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:tF("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:tF("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:tF("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:tF("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tT),skyboxGradient:tF("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tT),skyboxCapture:tF("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:tF("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:tF("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function tR(r,n){let i=r.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of i)if("#"===(r=r.trim())[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();let i=r.split(" ");for(let r of i)n.includes(r)||n.push(r)}}function tF(r,n){let i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=n.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a={},s=[...tz];return tR(r,s),tR(n,s),{fragmentSource:r=r.replace(i,(r,n,i,o,s)=>(a[s]=!0,"define"===n?`
#ifndef HAS_UNIFORM_u_${s}
varying ${i} ${o} ${s};
#else
uniform ${i} ${o} u_${s};
#endif
`:`
#ifdef HAS_UNIFORM_u_${s}
    ${i} ${o} ${s} = u_${s};
#endif
`)),vertexSource:n=n.replace(i,(r,n,i,o,s)=>{let l="float"===o?"vec2":"vec4",u=s.match(/color/)?"color":l;return a[s]?"define"===n?`
#ifndef HAS_UNIFORM_u_${s}
uniform lowp float u_${s}_t;
attribute ${i} ${l} a_${s};
varying ${i} ${o} ${s};
#else
uniform ${i} ${o} u_${s};
#endif
`:"vec4"===u?`
#ifndef HAS_UNIFORM_u_${s}
    ${s} = a_${s};
#else
    ${i} ${o} ${s} = u_${s};
#endif
`:`
#ifndef HAS_UNIFORM_u_${s}
    ${s} = unpack_mix_${u}(a_${s}, u_${s}_t);
#else
    ${i} ${o} ${s} = u_${s};
#endif
`:"define"===n?`
#ifndef HAS_UNIFORM_u_${s}
uniform lowp float u_${s}_t;
attribute ${i} ${l} a_${s};
#else
uniform ${i} ${o} u_${s};
#endif
`:"vec4"===u?`
#ifndef HAS_UNIFORM_u_${s}
    ${i} ${o} ${s} = a_${s};
#else
    ${i} ${o} ${s} = u_${s};
#endif
`:`
#ifndef HAS_UNIFORM_u_${s}
    ${i} ${o} ${s} = unpack_mix_${u}(a_${s}, u_${s}_t);
#else
    ${i} ${o} ${s} = u_${s};
#endif
`}),staticAttributes:o,usedDefines:s}}class tB{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(r,n,i,o,a,s,l){this.context=r;let u=this.boundPaintVertexBuffers.length!==o.length;for(let r=0;!u&&r<o.length;r++)this.boundPaintVertexBuffers[r]!==o[r]&&(u=!0);let c=this.boundDynamicVertexBuffers.length!==l.length;for(let r=0;!c&&r<l.length;r++)this.boundDynamicVertexBuffers[r]!==l[r]&&(c=!0);if(!r.extVertexArrayObject||!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==i||u||c||this.boundIndexBuffer!==a||this.boundVertexOffset!==s)this.freshBind(n,i,o,a,s,l);else{for(let n of(r.bindVertexArrayOES.set(this.vao),l))n&&n.bind();a&&a.dynamicDraw&&a.bind()}}freshBind(r,n,i,o,a,s){let l;let u=r.numAttributes,c=this.context,h=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=r,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=a,this.boundDynamicVertexBuffers=s;else{l=c.currentNumAttributes||0;for(let r=u;r<l;r++)h.disableVertexAttribArray(r)}for(let o of(n.enableAttributes(h,r),n.bind(),n.setVertexAttribPointers(h,r,a),i))o.enableAttributes(h,r),o.bind(),o.setVertexAttribPointers(h,r,a);for(let n of s)n&&(n.enableAttributes(h,r),n.bind(),n.setVertexAttribPointers(h,r,a));o&&o.bind(),c.currentNumAttributes=u}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function tN(n,i,o){if(!i.needsDEMTextureUpload)return;let a=n.context,s=a.gl;a.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||n.getTileTexture(o.stride);let l=o.getPixels();i.demTexture?i.demTexture.update(l,{premultiply:!1}):i.demTexture=new r.Texture(a,l,s.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}let tj=n=>({u_matrix:new r.UniformMatrix4f(n),u_image0:new r.Uniform1i(n),u_skirt_height:new r.Uniform1f(n)}),tV=(r,n)=>({u_matrix:r,u_image0:0,u_skirt_height:n}),tU=(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g)=>({u_proj_matrix:Float32Array.from(r),u_globe_matrix:n,u_normalize_matrix:Float32Array.from(o),u_merc_matrix:i,u_zoom_transition:a,u_merc_center:s,u_image0:0,u_frustum_tl:l,u_frustum_tr:u,u_frustum_br:c,u_frustum_bl:h,u_globe_pos:d,u_globe_radius:f,u_viewport:p,u_grid_matrix:g?Float32Array.from(g):new Float32Array(9),u_skirt_height:m});function tq(r,n){return null!=r&&null!=n&&!(!r.hasData()||!n.hasData())&&null!=r.demTexture&&null!=n.demTexture&&r.tileID.key!==n.tileID.key}let t$=new class{constructor(){this.operations={}}newMorphing(r,n,i,o,a){if(r in this.operations){let n=this.operations[r];n.to.tileID.key!==i.tileID.key&&(n.queued=i)}else this.operations[r]={startTime:o,phase:0,duration:a,from:n,to:i,queued:null}}getMorphValuesForProxy(r){if(!(r in this.operations))return null;let n=this.operations[r];return{from:n.from,to:n.to,phase:n.phase}}update(r){for(let n in this.operations){let i=this.operations[n];for(i.phase=(r-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,r)){delete this.operations[n];break}}}_nextOp(r,n){return!!r.queued&&(r.from=r.to,r.to=r.queued,r.queued=null,r.phase=0,r.startTime=n,!0)}_validOp(r){return r.from.hasData()&&r.to.hasData()}},tH={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function tZ(r){return 6*Math.pow(1.5,22-r)}let tG=r=>({u_matrix:r});function tW(n,i,o,a,s){if(s>0){let l=r.exported.now(),u=(l-n.timeAdded)/s,c=i?(l-i.timeAdded)/s:-1,h=o.getSource(),d=a.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),f=!i||Math.abs(i.tileID.overscaledZ-d)>Math.abs(n.tileID.overscaledZ-d),p=f&&n.refreshedUponExpiration?1:r.clamp(f?u:1-c,0,1);return n.refreshedUponExpiration&&u>=1&&(n.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}class tX extends r.SourceCache{constructor(r){let n={type:"raster-dem",maxzoom:r.transform.maxZoom},i=new A(eR(),null),o=eA("mock-dem",n,i,r.style);super("mock-dem",o,!1),o.setEventedParent(this),this._sourceLoaded=!0}_loadTile(r,n){r.state="loaded",n(null)}}class tY extends r.SourceCache{constructor(r){let n=eA("proxy",{type:"geojson",maxzoom:r.transform.maxZoom},new A(eR(),null),r.style);super("proxy",n,!1),n.setEventedParent(this),this.map=this.getSource().map=r,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(n,i,o){if(n.freezeTileCoverage)return;this.transform=n;let a=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((i,o)=>{if(i[o.key]="",!this._tiles[o.key]){let i=new r.Tile(o,this._source.tileSize*o.overscaleFactor(),n.tileZoom);i.state="loaded",this._tiles[o.key]=i}return i},{});for(let r in this._tiles)r in a||(this.freeFBO(r),this._tiles[r].unloadVectorData(),delete this._tiles[r])}freeFBO(r){let n=this.proxyCachedFBO[r];if(void 0!==n){let i=Object.values(n);this.renderCachePool.push(...i),delete this.proxyCachedFBO[r]}}deallocRenderCache(){this.renderCache.forEach(r=>r.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class tK extends r.OverscaledTileID{constructor(r,n,i){super(r.overscaledZ,r.wrap,r.canonical.z,r.canonical.x,r.canonical.y),this.proxyTileKey=n,this.projMatrix=i}}class tJ extends r.Elevation{constructor(n,i){super(),this.painter=n,this.terrainTileForTile={},this.prevTerrainTileForTile={};let[o,a,s]=function(n){let i=new r.StructArrayLayout2i4,o=new r.StructArrayLayout3ui6;i.reserve(17161),o.reserve(33800);let a=r.EXTENT/128,s=r.EXTENT+a/2,l=s+a;for(let n=-a;n<l;n+=a)for(let o=-a;o<l;o+=a){let a=o<0||o>s||n<0||n>s?24575:0,l=r.clamp(Math.round(o),0,r.EXTENT),u=r.clamp(Math.round(n),0,r.EXTENT);i.emplaceBack(l+a,u)}let u=(r,n)=>{let i=131*n+r;o.emplaceBack(i+1,i,i+131),o.emplaceBack(i+131,i+131+1,i+1)};for(let r=1;r<129;r++)for(let n=1;n<129;n++)u(n,r);return[0,129].forEach(r=>{for(let n=0;n<130;n++)u(n,r),u(r,n)}),[i,o,32768]}(),l=n.context;this.gridBuffer=l.createVertexBuffer(o,r.posAttributes.members),this.gridIndexBuffer=l.createIndexBuffer(a),this.gridSegments=r.SegmentVector.simpleSegment(0,0,o.length,a.length),this.gridNoSkirtSegments=r.SegmentVector.simpleSegment(0,0,o.length,s),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new tY(i.map),this.orthoMatrix=r.create(),r.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,r.EXTENT,0,r.EXTENT,0,1);let u=l.gl;this._overlapStencilMode=new r.StencilMode({func:u.GEQUAL,mask:255},0,255,u.KEEP,u.KEEP,u.REPLACE),this._previousZoom=n.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new tX(i.map)}set style(r){r.on("data",this._onStyleDataEvent.bind(this)),r.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=r,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(n,i,o){if(n&&n.terrain){this._style!==n&&(this.style=n),this.enabled=!0;let a=n.terrain.properties;this.sourceCache=0===n.terrain.drapeRenderMode?this._mockSourceCache:n._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");let s=()=>{this.sourceCache.used&&r.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);let n=this.getScaledDemTileSize();this.sourceCache.update(i,n,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,s(),this._initializing=!0),s(),i.updateElevation(!0,o),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(r){this._findCoveringTileCache[r]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){let n=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==n.efficiency&&r.warnOnce(`Terrain render cache efficiency is not optimal (${n.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${n.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(r){r.coord&&"source"===r.dataType?this._clearRenderCacheForTile(r.sourceCacheId,r.coord):"style"===r.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(let r in this._style._sourceCaches)this._style._sourceCaches[r].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(r=>r.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){let r=2*this.proxySourceCache.getSource().tileSize;return[r,r]}set useVertexMorphing(r){this._useVertexMorphing=r}updateTileBinding(n){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;let i=this.proxySourceCache,o=this.painter.transform;this._initializing&&(this._initializing=0===o._centerAltitude&&-1===this.getAtPointOrZero(r.MercatorCoordinate.fromLngLat(o.center),-1),this._emptyDEMTextureDirty=!this._initializing);let a=this.proxyCoords=i.getIds().map(r=>{let n=i.getTileByID(r).tileID;return n.projMatrix=o.calculateProjMatrix(n.toUnwrapped()),n});(function(n,i){let o=i.transform.pointCoordinate(i.transform.getCameraPoint()),a=new r.Point(o.x,o.y);n.sort((n,i)=>{if(i.overscaledZ-n.overscaledZ)return i.overscaledZ-n.overscaledZ;let o=new r.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),s=new r.Point(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),l=a.mult(1<<n.canonical.z);return l.x-=.5,l.y-=.5,l.distSqr(o)-l.distSqr(s)})})(a,this.painter),this._previousZoom=o.zoom;let s=this.proxyToSource||{};this.proxyToSource={},a.forEach(r=>{this.proxyToSource[r.key]={}}),this.terrainTileForTile={};let l=this._style._sourceCaches;for(let r in l){let i=l[r];if(!i.used||(i!==this.sourceCache&&this.resetTileLookupCache(i.id),this._setupProxiedCoordsForOrtho(i,n[r],s),i.usedForTerrain))continue;let o=n[r];i.getSource().reparseOverscaled&&this._assignTerrainTiles(o)}this.proxiedCoords[i.id]=a.map(r=>new tK(r,r.key,this.orthoMatrix)),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(s),this.renderingToTexture=!1,this._updateTimestamp=r.exported.now();let u={};for(let r of(this._visibleDemTiles=[],this.proxyCoords)){let n=this.terrainTileForTile[r.key];if(!n)continue;let i=n.tileID.key;i in u||(this._visibleDemTiles.push(n),u[i]=i)}}_assignTerrainTiles(r){this._initializing||r.forEach(r=>{if(this.terrainTileForTile[r.key])return;let n=this._findTileCoveringTileID(r,this.sourceCache);n&&(this.terrainTileForTile[r.key]=n)})}_prepareDEMTextures(){let r=this.painter.context,n=r.gl;for(let i in this.terrainTileForTile){let o=this.terrainTileForTile[i],a=o.dem;a&&(!o.demTexture||o.needsDEMTextureUpload)&&(r.activeTexture.set(n.TEXTURE1),tN(this.painter,o,a))}}_prepareDemTileUniforms(r,n,i,o){if(!n||null==n.demTexture)return!1;let a=r.tileID.canonical,s=Math.pow(2,n.tileID.canonical.z-a.z),l=o||"";return i[`u_dem_tl${l}`]=[a.x*s%1,a.y*s%1],i[`u_dem_scale${l}`]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){let n=this.painter.context,i=n.gl;if(!this._emptyDepthBufferTexture){let o=new r.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new r.Texture(n,o,i.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let r=0,n=this._visibleDemTiles.reduce((n,i)=>{if(!i.dem)return n;let o=i.dem.tree.minimums[0];return o>0&&r++,n+o},0);return r?n/r:0}_updateEmptyDEMTexture(){let n=this.painter.context,i=n.gl;n.activeTexture.set(i.TEXTURE2);let o=this._getLoadedAreaMinimum(),a=new r.RGBAImage({width:1,height:1},new Uint8Array(r.DEMData.pack(o,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let s=this._emptyDEMTexture;return s?s.update(a,{premultiply:!1}):s=this._emptyDEMTexture=new r.Texture(n,a,i.RGBA,{premultiply:!1}),s}setupElevationDraw(n,i,o){var a;let s=this.painter.context,l=s.gl,u=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:r.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});u.u_dem_size=this.sourceCache.getSource().tileSize,u.u_exaggeration=this.exaggeration();let c=null,h=null,d=1;if(o&&o.morphing&&this._useVertexMorphing){let r=o.morphing.srcDemTile,i=o.morphing.dstDemTile;d=o.morphing.phase,r&&i&&(this._prepareDemTileUniforms(n,r,u,"_prev")&&(h=r),this._prepareDemTileUniforms(n,i,u)&&(c=i))}if(h&&c?(s.activeTexture.set(l.TEXTURE2),c.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE,l.NEAREST),s.activeTexture.set(l.TEXTURE4),h.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE,l.NEAREST),u.u_dem_lerp=d):(c=this.terrainTileForTile[n.tileID.key],s.activeTexture.set(l.TEXTURE2),(this._prepareDemTileUniforms(n,c,u)?c.demTexture:this.emptyDEMTexture).bind(l.NEAREST,l.CLAMP_TO_EDGE)),s.activeTexture.set(l.TEXTURE3),o&&o.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE),this._depthFBO&&(u.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE),u.u_depth_size_inv=[1,1]),o&&o.useMeterToDem&&c){let n=(1<<c.tileID.canonical.z)*r.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;u.u_meter_to_dem=n}if(o&&o.labelPlaneMatrixInv&&(u.u_label_plane_matrix_inv=o.labelPlaneMatrixInv),i.setTerrainUniformValues(s,u),"globe"===this.painter.transform.projection.name){let r=this.globeUniformValues(this.painter.transform,n.tileID.canonical,o&&o.useDenormalizedUpVectorScale);i.setGlobeUniformValues(s,r)}}globeUniformValues(n,i,o){let a=n.projection;return{u_tile_tl_up:a.upVector(i,0,0),u_tile_tr_up:a.upVector(i,r.EXTENT,0),u_tile_br_up:a.upVector(i,r.EXTENT,r.EXTENT),u_tile_bl_up:a.upVector(i,0,r.EXTENT),u_tile_up_scale:o?r.globeMetersToEcef(1):a.upVectorScale(i,n.center.lat,n.worldSize).metersToTile}}renderToBackBuffer(n){let i=this.painter,o=this.painter.context;0!==n.length&&(o.bindFramebuffer.set(null),o.viewport.set([0,0,i.width,i.height]),i.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(n,i,o,a,s){if("globe"===n.transform.projection.name)!function(n,i,o,a,s){let l,u;let c=n.context,h=c.gl,d=n.options.showTerrainWireframe?2:0,f=n.transform,p=r.globeUseCustomAntiAliasing(n,c,f),m=(r,i)=>{if(u===r)return;let o=[tH[r],"PROJECTION_GLOBE_VIEW"];p&&o.push("CUSTOM_ANTIALIASING"),i&&o.push(tH[d]),l=n.useProgram("globeRaster",null,o),u=r},g=n.colorModeForRenderPass(),y=new r.DepthMode(h.LEQUAL,r.DepthMode.ReadWrite,n.depthRangeFor3D);t$.update(s);let _=r.calculateGlobeMercatorMatrix(f),v=[r.mercatorXfromLng(f.center.lng),r.mercatorYfromLat(f.center.lat)],b=n.globeSharedBuffers,x=[f.width*r.exported.devicePixelRatio,f.height*r.exported.devicePixelRatio],w=Float32Array.from(f.globeMatrix),E={useDenormalizedUpVectorScale:!0};if((d?[!1,!0]:[!1]).forEach(d=>{let f=n.transform,p=tZ(f.zoom)*i.exaggeration();u=-1;let C=d?h.LINES:h.TRIANGLES;for(let u of a){let a=o.getTile(u),S=r.StencilMode.disabled,T=i.prevTerrainTileForTile[u.key],M=i.terrainTileForTile[u.key];tq(T,M)&&t$.newMorphing(u.key,T,M,s,250),c.activeTexture.set(h.TEXTURE0),a.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE);let k=t$.getMorphValuesForProxy(u.key),I=k?1:0;k&&r.extend$1(E,{morphing:{srcDemTile:k.from,dstDemTile:k.to,phase:r.easeCubicInOut(k.phase)}});let L=r.tileCornersToBounds(u.canonical),A=r.getLatitudinalLod(L.getCenter().lat),z=r.getGridMatrix(u.canonical,L,A,f.worldSize/f._pixelsPerMercatorPixel),P=r.globeNormalizeECEF(r.globeTileBounds(u.canonical)),O=tU(f.projMatrix,w,_,P,r.globeToMercatorTransition(f.zoom),v,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,x,p,z);if(m(I,d),i.setupElevationDraw(a,l,E),n.prepareDrawProgram(c,l,u.toUnwrapped()),b){let[i,o,a]=d?b.getWirefameBuffers(n.context,A):b.getGridBuffers(A,0!==p);l.draw(c,C,y,S,g,r.CullFaceMode.backCCW,O,"globe_raster",i,o,a)}}}),b){let s=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];for(let u of(p&&s.push("CUSTOM_ANTIALIASING"),l=n.useProgram("globeRaster",null,s),a)){let{x:a,y:s,z:d}=u.canonical,p=0===s,m=s===(1<<d)-1,[_,w,C,S]=b.getPoleBuffers(d);if(S&&(p||m)){let s=o.getTile(u);c.activeTexture.set(h.TEXTURE0),s.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE);let b=r.globePoleMatrixForTile(d,a,f),T=r.globeNormalizeECEF(r.globeTileBounds(u.canonical)),M=(n,i)=>n.draw(c,h.TRIANGLES,y,r.StencilMode.disabled,g,r.CullFaceMode.disabled,tU(f.projMatrix,b,b,T,0,v,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,x,0),"globe_pole_raster",i,C,S);i.setupElevationDraw(s,l,E),n.prepareDrawProgram(c,l,u.toUnwrapped()),p&&M(l,_),m&&(b=r.scale(r.create(),b,[1,-1,1]),M(l,w))}}}}(n,i,o,a,s);else{let l,u;let c=n.context,h=c.gl,d=n.options.showTerrainWireframe?2:0,f=(r,i)=>{if(u===r)return;let o=[tH[r]];i&&o.push(tH[d]),l=n.useProgram("terrainRaster",null,o),u=r},p=n.colorModeForRenderPass(),m=new r.DepthMode(h.LEQUAL,r.DepthMode.ReadWrite,n.depthRangeFor3D);t$.update(s);let g=n.transform,y=tZ(g.zoom)*i.exaggeration();(d?[!1,!0]:[!1]).forEach(d=>{u=-1;let _=d?h.LINES:h.TRIANGLES,[v,b]=d?i.getWirefameBuffer():[i.gridIndexBuffer,i.gridSegments];for(let u of a){let a;let x=o.getTile(u),w=r.StencilMode.disabled,E=i.prevTerrainTileForTile[u.key],C=i.terrainTileForTile[u.key];tq(E,C)&&t$.newMorphing(u.key,E,C,s,250),c.activeTexture.set(h.TEXTURE0),x.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST);let S=t$.getMorphValuesForProxy(u.key),T=S?1:0;S&&(a={morphing:{srcDemTile:S.from,dstDemTile:S.to,phase:r.easeCubicInOut(S.phase)}});let M=tV(u.projMatrix,!function(r,n){let i=1<<r.z;return!n&&(0===r.x||r.x===i-1)||0===r.y||r.y===i-1}(u.canonical,g.renderWorldCopies)?y:y/10);f(T,d),i.setupElevationDraw(x,l,a),n.prepareDrawProgram(c,l,u.toUnwrapped()),l.draw(c,_,m,w,p,r.CullFaceMode.backCCW,M,"terrain_raster",i.gridBuffer,v,b)}})}}(i,this,this.proxySourceCache,n,this._updateTimestamp),this.renderingToTexture=!0,i.gpuTimingDeferredRenderEnd(),n.splice(0,n.length))}renderBatch(n){if(0===this._drapedRenderBatches.length)return n+1;this.renderingToTexture=!0;let i=this.painter,o=this.painter.context,a=this.proxySourceCache,s=this.proxiedCoords[a.id],l=this._drapedRenderBatches.shift(),u=[],c=i.style.order,h=0;for(let d of s){let s;let f=a.getTileByID(d.proxyTileKey),p=a.proxyCachedFBO[d.key]?a.proxyCachedFBO[d.key][n]:void 0,m=void 0!==p?a.renderCache[p]:this.pool[h++],g=void 0!==p;if(f.texture=m.tex,g&&!m.dirty){u.push(f.tileID);continue}o.bindFramebuffer.set(m.fb.framebuffer),this.renderedToTile=!1,m.dirty&&(o.clear({color:r.Color.transparent,stencil:0}),m.dirty=!1);for(let r=l.start;r<=l.end;++r){let n=i.style._layers[c[r]];if(n.isHidden(i.transform.zoom))continue;let a=i.style._getLayerSourceCache(n),l=a?this.proxyToSource[d.key][a.id]:[d];l&&(o.viewport.set([0,0,m.fb.width,m.fb.height]),s!==(a?a.id:null)&&(this._setupStencil(m,l,n,a),s=a?a.id:null),i.renderLayer(i,a,n,l))}this.renderedToTile?(m.dirty=!0,u.push(f.tileID)):g||--h,5===h&&(h=0,this.renderToBackBuffer(u))}return this.renderToBackBuffer(u),this.renderingToTexture=!1,o.bindFramebuffer.set(null),o.viewport.set([0,0,i.width,i.height]),l.end+1}postRender(){}renderCacheEfficiency(r){let n=r.order.length;if(0===n)return{efficiency:100};let i,o=0,a=0,s=!1;for(let l=0;l<n;++l){let n=r._layers[r.order[l]];this._style.isLayerDraped(n)?(s&&++o,++a):s||(s=!0,i=n.id)}return 0===a?{efficiency:100}:{efficiency:100*(1-o/a),firstUndrapedLayer:i}}getMinElevationBelowMSL(){let r=0;return this._visibleDemTiles.filter(r=>r.dem).forEach(n=>{r=Math.min(r,n.dem.tree.minimums[0])}),0===r?r:(r-30)*this._exaggeration}raycast(r,n,i){if(!this._visibleDemTiles)return null;let o=this._visibleDemTiles.filter(r=>r.dem).map(o=>{let a=o.tileID,s=1<<a.overscaledZ,{x:l,y:u}=a.canonical,c=l/s,h=(l+1)/s,d=u/s,f=(u+1)/s;return{minx:c,miny:d,maxx:h,maxy:f,t:o.dem.tree.raycastRoot(c,d,h,f,r,n,i),tile:o}});for(let a of(o.sort((r,n)=>(null!==r.t?r.t:Number.MAX_VALUE)-(null!==n.t?n.t:Number.MAX_VALUE)),o)){if(null==a.t)break;let o=a.tile.dem.tree.raycast(a.minx,a.miny,a.maxx,a.maxy,r,n,i);if(null!=o)return o}return null}_createFBO(){let n=this.painter.context,i=n.gl,o=this.drapeBufferSize;n.activeTexture.set(i.TEXTURE0);let a=new r.Texture(n,{width:o[0],height:o[1],data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE);let s=n.createFramebuffer(o[0],o[1],!1);return s.colorAttachment.set(a.texture),s.depthAttachment=new eE(n,s.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=n.createRenderbuffer(n.gl.DEPTH_STENCIL,o[0],o[1]),this._stencilRef=0,s.depthAttachment.set(this._sharedDepthStencil),n.clear({stencil:0})):s.depthAttachment.set(this._sharedDepthStencil),n.extTextureFilterAnisotropic&&!n.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax),{fb:s,tex:a,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(let r in this._style._sourceCaches)if(this._style._sourceCaches[r].hasTransition())return!0;return this._style.order.some(r=>{let n=this._style._layers[r],i=n.isHidden(this.painter.transform.zoom);return"custom"===n.type?!i&&n.shouldRedrape():!i&&n.hasTransition()})}_clearLineLayersFromRenderCache(){let n=!1;for(let r of this._style._getSources())if(r instanceof eT){n=!0;break}if(!n)return;let i={};for(let n=0;n<this._style.order.length;++n){let o=this._style._layers[this._style.order[n]],a=this._style._getLayerSourceCache(o);if(a&&!i[a.id]&&!o.isHidden(this.painter.transform.zoom)&&"line"===o.type&&o.widthExpression() instanceof r.ZoomDependentExpression)for(let r of(i[a.id]=!0,this.proxyCoords)){let n=this.proxyToSource[r.key][a.id];if(n)for(let r of n)this._clearRenderCacheForTile(a.id,r)}}}_clearRasterLayersFromRenderCache(){let r=!1;for(let n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof eM){r=!0;break}if(!r)return;let n={};for(let r=0;r<this._style.order.length;++r){let i=this._style._layers[this._style.order[r]],o=this._style._getLayerSourceCache(i);if(!o||n[o.id]||i.isHidden(this.painter.transform.zoom)||"raster"!==i.type)continue;let a=i.paint.get("raster-fade-duration");for(let r of this.proxyCoords){let n=this.proxyToSource[r.key][o.id];if(n)for(let r of n){let n=tW(o.getTile(r),o.findLoadedParent(r,0),o,this.painter.transform,a);(1!==n.opacity||0!==n.mix)&&this._clearRenderCacheForTile(o.id,r)}}}}_setupDrapedRenderBatches(){let r=this._style.order,n=r.length;if(0===n)return;let i=[],o,a=0,s=this._style._layers[r[a]];for(;!this._style.isLayerDraped(s)&&s.isHidden(this.painter.transform.zoom)&&++a<n;)s=this._style._layers[r[a]];for(;a<n;++a){let n=this._style._layers[r[a]];n.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(n)?void 0===o&&(o=a):void 0!==o&&(i.push({start:o,end:a-1}),o=void 0))}void 0!==o&&i.push({start:o,end:a-1}),this._drapedRenderBatches=i}_setupRenderCache(r){let n=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,n.renderCache.length>n.renderCachePool.length){let r=Object.values(n.proxyCachedFBO);n.proxyCachedFBO={};for(let i=0;i<r.length;++i){let o=Object.values(r[i]);n.renderCachePool.push(...o)}}return}this._clearRasterLayersFromRenderCache();let i=this.proxyCoords,o=this._tilesDirty;for(let a=i.length-1;a>=0;a--){let s=i[a];if(n.getTileByID(s.key),void 0!==n.proxyCachedFBO[s.key]){let i=r[s.key],a=this.proxyToSource[s.key],l=0;for(let r in a){let n=a[r],s=i[r];if(!s||s.length!==n.length||n.some((n,i)=>n!==s[i]||o[r]&&o[r].hasOwnProperty(n.key))){l=-1;break}++l}for(let r in n.proxyCachedFBO[s.key])n.renderCache[n.proxyCachedFBO[s.key][r]].dirty=l<0||l!==Object.values(i).length}}let a=[...this._drapedRenderBatches];for(let r of(a.sort((r,n)=>n.end-n.start-(r.end-r.start)),a))for(let o of i){if(n.proxyCachedFBO[o.key])continue;let i=n.renderCachePool.pop();void 0===i&&n.renderCache.length<50&&(i=n.renderCache.length,n.renderCache.push(this._createFBO())),void 0!==i&&(n.proxyCachedFBO[o.key]={},n.proxyCachedFBO[o.key][r.start]=i,n.renderCache[i].dirty=!0)}this._tilesDirty={}}_setupStencil(r,n,i,o){let a;if(!o||!this._sourceTilesOverlap[o.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));let s=this.painter.context,l=s.gl;if(n.length<=1)return void(this._overlapStencilType=!1);if(i.isTileClipped())a=n.length,this._overlapStencilMode.test={func:l.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(n[0].overscaledZ>n[n.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:l.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(s.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,i.isTileClipped()&&this._renderTileClippingMasks(n,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(n){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[n.key]),this._overlapStencilMode):r.StencilMode.disabled}_renderTileClippingMasks(n,i){let o=this.painter,a=this.painter.context,s=a.gl;o._tileClippingMaskIDs={},a.setColorMode(r.ColorMode.disabled),a.setDepthMode(r.DepthMode.disabled);let l=o.useProgram("clippingMask");for(let u of n){let n=o._tileClippingMaskIDs[u.key]=--i;l.draw(a,s.TRIANGLES,r.DepthMode.disabled,new r.StencilMode({func:s.ALWAYS,mask:0},n,255,s.KEEP,s.KEEP,s.REPLACE),r.ColorMode.disabled,r.CullFaceMode.disabled,tG(u.projMatrix),"$clipping",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}pointCoordinate(n){let i=this.painter.transform;if(n.x<0||n.x>i.width||n.y<0||n.y>i.height)return null;let o=[n.x,n.y,1,1];r.transformMat4$1(o,o,i.pixelMatrixInverse),r.scale$1(o,o,1/o[3]),o[0]/=i.worldSize,o[1]/=i.worldSize;let a=i._camera.position,s=r.mercatorZfromAltitude(1,i.center.lat),l=[a[0],a[1],a[2]/s,0],u=r.subtract([],o.slice(0,3),l);r.normalize(u,u);let c=this.raycast(l,u,this._exaggeration);return null!==c&&c?(r.scaleAndAdd(l,l,u,c),l[3]=l[2],l[2]*=s,l):null}drawDepth(){let n=this.painter,i=n.context,o=this.proxySourceCache,a=Math.ceil(n.width),s=Math.ceil(n.height);if(this._depthFBO&&(this._depthFBO.width!==a||this._depthFBO.height!==s)&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){let n=i.gl,o=i.createFramebuffer(a,s,!0);i.activeTexture.set(n.TEXTURE0);let l=new r.Texture(i,{width:a,height:s,data:null},n.RGBA);l.bind(n.NEAREST,n.CLAMP_TO_EDGE),o.colorAttachment.set(l.texture);let u=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,a,s);o.depthAttachment.set(u),this._depthFBO=o,this._depthTexture=l}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,a,s]),function(n,i,o,a){if("globe"===n.transform.projection.name)return;let s=n.context,l=s.gl;s.clear({depth:1});let u=n.useProgram("terrainDepth"),c=new r.DepthMode(l.LESS,r.DepthMode.ReadWrite,n.depthRangeFor3D);for(let n of a){let a=o.getTile(n),h=tV(n.projMatrix,0);i.setupElevationDraw(a,u),u.draw(s,l.TRIANGLES,c,r.StencilMode.disabled,r.ColorMode.unblended,r.CullFaceMode.backCCW,h,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments)}}(n,this,o,this.proxyCoords)}_setupProxiedCoordsForOrtho(r,n,i){if(r.getSource() instanceof eI)return this._setupProxiedCoordsForImageSource(r,n,i);this._findCoveringTileCache[r.id]=this._findCoveringTileCache[r.id]||{};let o=this.proxiedCoords[r.id]=[],a=this.proxyCoords;for(let n=0;n<a.length;n++){let s=a[n],l=this._findTileCoveringTileID(s,r);if(l){let n=this._createProxiedId(s,l,i[s.key]&&i[s.key][r.id]);o.push(n),this.proxyToSource[s.key][r.id]=[n]}}let s=!1;for(let a=0;a<n.length;a++){let l=r.getTile(n[a]);if(!l||!l.hasData())continue;let u=this._findTileCoveringTileID(l.tileID,this.proxySourceCache);if(u&&u.tileID.canonical.z!==l.tileID.canonical.z){let n=this.proxyToSource[u.tileID.key][r.id],a=this._createProxiedId(u.tileID,l,i[u.tileID.key]&&i[u.tileID.key][r.id]);n?n.splice(n.length-1,0,a):this.proxyToSource[u.tileID.key][r.id]=[a],o.push(a),s=!0}}this._sourceTilesOverlap[r.id]=s}_setupProxiedCoordsForImageSource(n,i,o){if(!n.getSource().loaded())return;let a=this.proxiedCoords[n.id]=[],s=this.proxyCoords,l=n.getSource(),u=new r.Point(l.tileID.x,l.tileID.y)._div(1<<l.tileID.z),c=l.coordinates.map(r.MercatorCoordinate.fromLngLat).reduce((r,n)=>(r.min.x=Math.min(r.min.x,n.x-u.x),r.min.y=Math.min(r.min.y,n.y-u.y),r.max.x=Math.max(r.max.x,n.x-u.x),r.max.y=Math.max(r.max.y,n.y-u.y),r),{min:new r.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new r.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),h=(n,i)=>{let o=n.wrap+n.canonical.x/(1<<n.canonical.z),a=n.canonical.y/(1<<n.canonical.z),s=r.EXTENT/(1<<n.canonical.z),l=i.wrap+i.canonical.x/(1<<i.canonical.z),u=i.canonical.y/(1<<i.canonical.z);return o+s<l+c.min.x||o>l+c.max.x||a+s<u+c.min.y||a>u+c.max.y};for(let r=0;r<s.length;r++){let l=s[r];for(let r=0;r<i.length;r++){let s=n.getTile(i[r]);if(!s||!s.hasData()||h(l,s.tileID))continue;let u=this._createProxiedId(l,s,o[l.key]&&o[l.key][n.id]),c=this.proxyToSource[l.key][n.id];c?c.push(u):this.proxyToSource[l.key][n.id]=[u],a.push(u)}}}_createProxiedId(n,i,o){let a=this.orthoMatrix;if(o){let r=o.find(r=>r.key===i.tileID.key);if(r)return r}if(i.tileID.key!==n.key){let o,s,l;let u=n.canonical.z-i.tileID.canonical.z;a=r.create();let c=i.tileID.wrap-n.wrap<<n.overscaledZ;u>0?(s=(o=r.EXTENT>>u)*((i.tileID.canonical.x<<u)-n.canonical.x+c),l=o*((i.tileID.canonical.y<<u)-n.canonical.y)):(o=r.EXTENT<<-u,s=r.EXTENT*(i.tileID.canonical.x-(n.canonical.x+c<<-u)),l=r.EXTENT*(i.tileID.canonical.y-(n.canonical.y<<-u))),r.ortho(a,0,o,0,o,0,1),r.translate(a,a,[s,l,0])}return new tK(i.tileID,n.key,a)}_findTileCoveringTileID(n,i){let o=i.getTile(n);if(o&&o.hasData())return o;let a=this._findCoveringTileCache[i.id],s=a[n.key];if((o=s?i.getTileByID(s):null)&&o.hasData()||null===s)return o;let l=o?o.tileID:n,u=l.overscaledZ,c=i.getSource().minzoom,h=[];if(!s){let a=i.getSource().maxzoom;if(n.canonical.z>=a){let o=n.canonical.z-a;i.getSource().reparseOverscaled?(u=Math.max(n.canonical.z+2,i.transform.tileZoom),l=new r.OverscaledTileID(u,n.wrap,a,n.canonical.x>>o,n.canonical.y>>o)):0!==o&&(u=a,l=new r.OverscaledTileID(u,n.wrap,a,n.canonical.x>>o,n.canonical.y>>o))}l.key!==n.key&&(h.push(l.key),o=i.getTile(l))}let d=r=>{h.forEach(n=>{a[n]=r}),h.length=0};for(u-=1;u>=c&&(!o||!o.hasData());u--){o&&d(o.tileID.key);let r=l.calculateScaledKey(u);if((o=i.getTileByID(r))&&o.hasData())break;let n=a[r];if(null===n)break;void 0===n?h.push(r):o=i.getTileByID(n)}return d(o?o.tileID.key:null),o&&o.hasData()?o:null}findDEMTileFor(r){return this.enabled?this._findTileCoveringTileID(r,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(r,n){let i=this._tilesDirty[r];i||(i=this._tilesDirty[r]={}),i[n.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){let n=function(n){let i=0,o=new r.StructArrayLayout2ui4;for(let r=1;r<129;r++){for(let n=1;n<129;n++)i=131*r+n,o.emplaceBack(i,i+1),o.emplaceBack(i,i+131),o.emplaceBack(i+1,i+131),128===r&&o.emplaceBack(i+131,i+131+1);o.emplaceBack(i+1,i+1+131)}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(n),this.wireframeSegments=r.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,n.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class tQ{static cacheKey(r,n,i,o){let a=`${n}${o?o.cacheKey:""}`;for(let n of i)r.usedDefines.includes(n)&&(a+=`/${n}`);return a}constructor(n,i,o,a,s,l){let u=n.gl;this.program=u.createProgram();let c=function(r){let n=[];for(let i=0;i<r.length;i++){if(null===r[i])continue;let o=r[i].split(" ");n.push(o.pop())}return n}(o.staticAttributes),h=a?a.getBinderAttributes():[],d=c.concat(h),f=a?a.defines():[];f=f.concat(l.map(r=>`#define ${r}`));let p=n.isWebGL2?"#version 300 es\n":"",m=p+f.concat(n.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(tO):tO,tO,tS,tP.fragmentSource,tA.fragmentSource,o.fragmentSource).join("\n"),g=p+f.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",tS,tP.vertexSource,tA.vertexSource,tL.vertexSource,o.vertexSource).join("\n"),y=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);u.shaderSource(y,m),u.compileShader(y),u.attachShader(this.program,y);let _=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())this.failedToCreate=!0;else{u.shaderSource(_,g),u.compileShader(_),u.attachShader(this.program,_),this.attributes={},this.numAttributes=d.length;for(let r=0;r<this.numAttributes;r++)d[r]&&(u.bindAttribLocation(this.program,r,d[r]),this.attributes[d[r]]=r);u.linkProgram(this.program),u.deleteShader(_),u.deleteShader(y),this.fixedUniforms=s(n),this.binderUniforms=a?a.getUniforms(n):[],l.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new r.Uniform1i(n),u_dem_prev:new r.Uniform1i(n),u_dem_unpack:new r.Uniform4f(n),u_dem_tl:new r.Uniform2f(n),u_dem_scale:new r.Uniform1f(n),u_dem_tl_prev:new r.Uniform2f(n),u_dem_scale_prev:new r.Uniform1f(n),u_dem_size:new r.Uniform1f(n),u_dem_lerp:new r.Uniform1f(n),u_exaggeration:new r.Uniform1f(n),u_depth:new r.Uniform1i(n),u_depth_size_inv:new r.Uniform2f(n),u_meter_to_dem:new r.Uniform1f(n),u_label_plane_matrix_inv:new r.UniformMatrix4f(n)}),l.includes("GLOBE")&&(this.globeUniforms={u_tile_tl_up:new r.Uniform3f(n),u_tile_tr_up:new r.Uniform3f(n),u_tile_br_up:new r.Uniform3f(n),u_tile_bl_up:new r.Uniform3f(n),u_tile_up_scale:new r.Uniform1f(n)}),l.includes("FOG")&&(this.fogUniforms={u_fog_matrix:new r.UniformMatrix4f(n),u_fog_range:new r.Uniform2f(n),u_fog_color:new r.Uniform4f(n),u_fog_horizon_blend:new r.Uniform1f(n),u_fog_temporal_offset:new r.Uniform1f(n),u_frustum_tl:new r.Uniform3f(n),u_frustum_tr:new r.Uniform3f(n),u_frustum_br:new r.Uniform3f(n),u_frustum_bl:new r.Uniform3f(n),u_globe_pos:new r.Uniform3f(n),u_globe_radius:new r.Uniform1f(n),u_globe_transition:new r.Uniform1f(n),u_is_globe:new r.Uniform1i(n),u_viewport:new r.Uniform2f(n)})}}setTerrainUniformValues(r,n){if(!this.terrainUniforms)return;let i=this.terrainUniforms;if(!this.failedToCreate)for(let o in r.program.set(this.program),n)i[o]&&i[o].set(this.program,o,n[o])}setGlobeUniformValues(r,n){if(!this.globeUniforms)return;let i=this.globeUniforms;if(!this.failedToCreate)for(let o in r.program.set(this.program),n)i[o]&&i[o].set(this.program,o,n[o])}setFogUniformValues(r,n){if(!this.fogUniforms)return;let i=this.fogUniforms;if(!this.failedToCreate)for(let o in r.program.set(this.program),n)i[o].set(this.program,o,n[o])}draw(r,n,i,o,a,s,l,u,c,h,d,f,p,m,g){let y=r.gl;if(this.failedToCreate)return;for(let n of(r.program.set(this.program),r.setDepthMode(i),r.setStencilMode(o),r.setColorMode(a),r.setCullFace(s),Object.keys(this.fixedUniforms)))this.fixedUniforms[n].set(this.program,n,l[n]);m&&m.setUniforms(this.program,r,this.binderUniforms,f,{zoom:p});let _={[y.LINES]:2,[y.TRIANGLES]:3,[y.LINE_STRIP]:1}[n];for(let i of d.get()){let o=i.vaos||(i.vaos={});(o[u]||(o[u]=new tB)).bind(r,this,c,m?m.getPaintVertexBuffers():[],h,i.vertexOffset,g||[]),y.drawElements(n,i.primitiveLength*_,y.UNSIGNED_SHORT,i.primitiveOffset*_*2)}}}function t0(r,n){let i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,r.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_tile_units_to_pixels:1/z(n,1,r.transform.tileZoom),u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}let t1=r.create(),t2=(n,i,o,a,s,l,u,c,h,d,f)=>{let p=i.style.light,m=p.properties.get("position"),g=[m.x,m.y,m.z],y=r.create$1();"viewport"===p.properties.get("anchor")&&(r.fromRotation(y,-i.transform.angle),r.transformMat3(g,g,y));let _=p.properties.get("color"),v=i.transform,b={u_matrix:n,u_lightpos:g,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[_.r,_.g,_.b],u_vertical_gradient:+o,u_opacity:a,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:t1,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:s,u_edge_radius:l};return"globe"===v.projection.name&&(b.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],b.u_zoom_transition=h,b.u_inv_rot_matrix=f,b.u_merc_center=d,b.u_up_dir=v.projection.upVector(new r.CanonicalTileID(0,0,0),d[0]*r.EXTENT,d[1]*r.EXTENT),b.u_height_lift=c),b},t4=(n,i,o,a,s,l,u,c,h,d,f,p)=>{let m=t2(n,i,o,a,s,l,u,h,d,f,p),g={u_height_factor:-Math.pow(2,u.overscaledZ)/c.tileSize/8};return r.extend(m,t0(i,c),g)},t3=r=>({u_matrix:r}),t5=(n,i,o)=>r.extend(t3(n),t0(i,o)),t6=(r,n)=>({u_matrix:r,u_world:n}),t8=(n,i,o,a)=>r.extend(t5(n,i,o),{u_world:a}),t9=r.create(),t7=(n,i,o,a,s,l)=>{let u;let c=n.transform,h="globe"===c.projection.name;if("map"===l.paint.get("circle-pitch-alignment")){if(h){let n=r.globePixelsToTileUnits(c.zoom,i.canonical)*c._pixelsPerMercatorPixel;u=Float32Array.from([n,0,0,n])}else u=c.calculatePixelsToTileUnitsMatrix(o)}else u=new Float32Array([c.pixelsToGLUnits[0],0,0,c.pixelsToGLUnits[1]]);let d={u_camera_to_center_distance:c.cameraToCenterDistance,u_matrix:n.translatePosMatrix(i.projMatrix,o,l.paint.get("circle-translate"),l.paint.get("circle-translate-anchor")),u_device_pixel_ratio:r.exported.devicePixelRatio,u_extrude_scale:u,u_inv_rot_matrix:t9,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(h){d.u_inv_rot_matrix=a,d.u_merc_center=s,d.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],d.u_zoom_transition=r.globeToMercatorTransition(c.zoom);let n=s[0]*r.EXTENT,o=s[1]*r.EXTENT;d.u_up_dir=c.projection.upVector(new r.CanonicalTileID(0,0,0),n,o)}return d},re=r=>{let n=[];return"map"===r.paint.get("circle-pitch-alignment")&&n.push("PITCH_WITH_MAP"),"map"===r.paint.get("circle-pitch-scale")&&n.push("SCALE_WITH_MAP"),n},rt=(n,i,o,a)=>{let s=r.EXTENT/o.tileSize;return{u_matrix:n,u_camera_to_center_distance:i.getCameraToCenterDistance(a),u_extrude_scale:[i.pixelsToGLUnits[0]/s,i.pixelsToGLUnits[1]/s]}},rr=(r,n,i=1)=>({u_matrix:r,u_color:n,u_overlay:0,u_overlay_scale:i}),rn=r.create(),ri=(n,i,o,a,s,l,u)=>{let c=n.transform,h="globe"===c.projection.name,d=h?r.globePixelsToTileUnits(c.zoom,i.canonical)*c._pixelsPerMercatorPixel:z(o,1,l),f={u_matrix:i.projMatrix,u_extrude_scale:d,u_intensity:u,u_inv_rot_matrix:rn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(h){f.u_inv_rot_matrix=a,f.u_merc_center=s,f.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],f.u_zoom_transition=r.globeToMercatorTransition(c.zoom);let n=s[0]*r.EXTENT,o=s[1]*r.EXTENT;f.u_up_dir=c.projection.upVector(new r.CanonicalTileID(0,0,0),n,o)}return f},ro=(r,n,i,o,a,s,l)=>{let u=r.transform,c=u.calculatePixelsToTileUnitsMatrix(n);return{u_matrix:rl(r,n,i,o),u_pixels_to_tile_units:c,u_device_pixel_ratio:s,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:ru(i)?n.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:rs(n,r.transform),u_alpha_discard_threshold:0,u_trim_offset:l}},ra=(r,n,i,o,a)=>{let s=r.transform;return{u_matrix:rl(r,n,i,o),u_texsize:n.imageAtlasTexture.size,u_pixels_to_tile_units:s.calculatePixelsToTileUnitsMatrix(n),u_device_pixel_ratio:a,u_image:0,u_tile_units_to_pixels:rs(n,s),u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function rs(r,n){return 1/z(r,1,n.tileZoom)}function rl(r,n,i,o){return r.translatePosMatrix(o||n.tileID.projMatrix,n,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}function ru(r){let n=r.paint.get("line-dasharray").value;return n.value||"constant"!==n.kind}let rc=(r,n,i,o,a,s)=>{var l,u;return{u_matrix:r,u_tl_parent:n,u_scale_parent:i,u_fade_t:o.mix,u_opacity:o.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(u=a.paint.get("raster-saturation"))>0?1-1/(1.001-u):-u,u_contrast_factor:(l=a.paint.get("raster-contrast"))>0?1/(1-l):1+l,u_spin_weights:function(r){r*=Math.PI/180;let n=Math.sin(r),i=Math.cos(r);return[(2*i+1)/3,(-Math.sqrt(3)*n-i+1)/3,(Math.sqrt(3)*n-i+1)/3]}(a.paint.get("raster-hue-rotate")),u_perspective_transform:s}},rh=r.create(),rd=(n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_)=>{let v=s.transform,b={u_is_size_zoom_constant:+("constant"===n||"source"===n),u_is_size_feature_constant:+("constant"===n||"camera"===n),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:v.cameraToCenterDistance,u_rotate_symbol:+o,u_aspect_ratio:v.width/v.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:l,u_label_plane_matrix:u,u_coord_matrix:c,u_is_text:+h,u_pitch_with_map:+a,u_texsize:d,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:rh,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:rh,u_up_vector:[0,-1,0]};return"globe"===_.name&&(b.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],b.u_zoom_transition=p,b.u_inv_rot_matrix=g,b.u_merc_center=m,b.u_camera_forward=v._camera.forward(),b.u_ecef_origin=r.globeECEFOrigin(v.globeMatrix,f.toUnwrapped()),b.u_tile_matrix=Float32Array.from(v.globeMatrix),b.u_up_vector=y),b},rf=(n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v)=>r.extend(rd(n,i,o,a,s,l,u,c,h,d,p,m,g,y,_,v),{u_gamma_scale:a?s.transform.cameraToCenterDistance*Math.cos(s.terrain?0:s.transform._pitch):1,u_device_pixel_ratio:r.exported.devicePixelRatio,u_is_halo:+f}),rp=(n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_)=>r.extend(rf(n,i,o,a,s,l,u,c,!0,h,!0,f,p,m,g,y,_),{u_texsize_icon:d,u_texture_icon:1}),rm=(r,n,i)=>({u_matrix:r,u_opacity:n,u_color:i}),rg=(n,i,o,a,s)=>r.extend(function(r,n,i){let o=n.imageManager.getPattern(r.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,i.tileID.overscaledZ),u=i.tileSize*Math.pow(2,n.transform.tileZoom)/l,c=u*(i.tileID.canonical.x+i.tileID.wrap*l),h=u*i.tileID.canonical.y;return{u_image:0,u_pattern_tl:o.tl,u_pattern_br:o.br,u_texsize:[a,s],u_pattern_size:o.displaySize,u_tile_units_to_pixels:1/z(i,1,n.transform.tileZoom),u_pixel_coord_upper:[c>>16,h>>16],u_pixel_coord_lower:[65535&c,65535&h]}}(a,o,s),{u_matrix:n,u_opacity:i}),ry={fillExtrusion:n=>({u_matrix:new r.UniformMatrix4f(n),u_lightpos:new r.Uniform3f(n),u_lightintensity:new r.Uniform1f(n),u_lightcolor:new r.Uniform3f(n),u_vertical_gradient:new r.Uniform1f(n),u_opacity:new r.Uniform1f(n),u_edge_radius:new r.Uniform1f(n),u_ao:new r.Uniform2f(n),u_tile_id:new r.Uniform3f(n),u_zoom_transition:new r.Uniform1f(n),u_inv_rot_matrix:new r.UniformMatrix4f(n),u_merc_center:new r.Uniform2f(n),u_up_dir:new r.Uniform3f(n),u_height_lift:new r.Uniform1f(n)}),fillExtrusionPattern:n=>({u_matrix:new r.UniformMatrix4f(n),u_lightpos:new r.Uniform3f(n),u_lightintensity:new r.Uniform1f(n),u_lightcolor:new r.Uniform3f(n),u_vertical_gradient:new r.Uniform1f(n),u_height_factor:new r.Uniform1f(n),u_edge_radius:new r.Uniform1f(n),u_ao:new r.Uniform2f(n),u_tile_id:new r.Uniform3f(n),u_zoom_transition:new r.Uniform1f(n),u_inv_rot_matrix:new r.UniformMatrix4f(n),u_merc_center:new r.Uniform2f(n),u_up_dir:new r.Uniform3f(n),u_height_lift:new r.Uniform1f(n),u_image:new r.Uniform1i(n),u_texsize:new r.Uniform2f(n),u_pixel_coord_upper:new r.Uniform2f(n),u_pixel_coord_lower:new r.Uniform2f(n),u_tile_units_to_pixels:new r.Uniform1f(n),u_opacity:new r.Uniform1f(n)}),fill:n=>({u_matrix:new r.UniformMatrix4f(n)}),fillPattern:n=>({u_matrix:new r.UniformMatrix4f(n),u_image:new r.Uniform1i(n),u_texsize:new r.Uniform2f(n),u_pixel_coord_upper:new r.Uniform2f(n),u_pixel_coord_lower:new r.Uniform2f(n),u_tile_units_to_pixels:new r.Uniform1f(n)}),fillOutline:n=>({u_matrix:new r.UniformMatrix4f(n),u_world:new r.Uniform2f(n)}),fillOutlinePattern:n=>({u_matrix:new r.UniformMatrix4f(n),u_world:new r.Uniform2f(n),u_image:new r.Uniform1i(n),u_texsize:new r.Uniform2f(n),u_pixel_coord_upper:new r.Uniform2f(n),u_pixel_coord_lower:new r.Uniform2f(n),u_tile_units_to_pixels:new r.Uniform1f(n)}),circle:n=>({u_camera_to_center_distance:new r.Uniform1f(n),u_extrude_scale:new r.UniformMatrix2f(n),u_device_pixel_ratio:new r.Uniform1f(n),u_matrix:new r.UniformMatrix4f(n),u_inv_rot_matrix:new r.UniformMatrix4f(n),u_merc_center:new r.Uniform2f(n),u_tile_id:new r.Uniform3f(n),u_zoom_transition:new r.Uniform1f(n),u_up_dir:new r.Uniform3f(n)}),collisionBox:n=>({u_matrix:new r.UniformMatrix4f(n),u_camera_to_center_distance:new r.Uniform1f(n),u_extrude_scale:new r.Uniform2f(n)}),collisionCircle:n=>({u_matrix:new r.UniformMatrix4f(n),u_inv_matrix:new r.UniformMatrix4f(n),u_camera_to_center_distance:new r.Uniform1f(n),u_viewport_size:new r.Uniform2f(n)}),debug:n=>({u_color:new r.UniformColor(n),u_matrix:new r.UniformMatrix4f(n),u_overlay:new r.Uniform1i(n),u_overlay_scale:new r.Uniform1f(n)}),clippingMask:n=>({u_matrix:new r.UniformMatrix4f(n)}),heatmap:n=>({u_extrude_scale:new r.Uniform1f(n),u_intensity:new r.Uniform1f(n),u_matrix:new r.UniformMatrix4f(n),u_inv_rot_matrix:new r.UniformMatrix4f(n),u_merc_center:new r.Uniform2f(n),u_tile_id:new r.Uniform3f(n),u_zoom_transition:new r.Uniform1f(n),u_up_dir:new r.Uniform3f(n)}),heatmapTexture:n=>({u_image:new r.Uniform1i(n),u_color_ramp:new r.Uniform1i(n),u_opacity:new r.Uniform1f(n)}),hillshade:n=>({u_matrix:new r.UniformMatrix4f(n),u_image:new r.Uniform1i(n),u_latrange:new r.Uniform2f(n),u_light:new r.Uniform2f(n),u_shadow:new r.UniformColor(n),u_highlight:new r.UniformColor(n),u_accent:new r.UniformColor(n)}),hillshadePrepare:n=>({u_matrix:new r.UniformMatrix4f(n),u_image:new r.Uniform1i(n),u_dimension:new r.Uniform2f(n),u_zoom:new r.Uniform1f(n),u_unpack:new r.Uniform4f(n)}),line:n=>({u_matrix:new r.UniformMatrix4f(n),u_pixels_to_tile_units:new r.UniformMatrix2f(n),u_device_pixel_ratio:new r.Uniform1f(n),u_units_to_pixels:new r.Uniform2f(n),u_dash_image:new r.Uniform1i(n),u_gradient_image:new r.Uniform1i(n),u_image_height:new r.Uniform1f(n),u_texsize:new r.Uniform2f(n),u_tile_units_to_pixels:new r.Uniform1f(n),u_alpha_discard_threshold:new r.Uniform1f(n),u_trim_offset:new r.Uniform2f(n)}),linePattern:n=>({u_matrix:new r.UniformMatrix4f(n),u_texsize:new r.Uniform2f(n),u_pixels_to_tile_units:new r.UniformMatrix2f(n),u_device_pixel_ratio:new r.Uniform1f(n),u_image:new r.Uniform1i(n),u_units_to_pixels:new r.Uniform2f(n),u_tile_units_to_pixels:new r.Uniform1f(n),u_alpha_discard_threshold:new r.Uniform1f(n)}),raster:n=>({u_matrix:new r.UniformMatrix4f(n),u_tl_parent:new r.Uniform2f(n),u_scale_parent:new r.Uniform1f(n),u_fade_t:new r.Uniform1f(n),u_opacity:new r.Uniform1f(n),u_image0:new r.Uniform1i(n),u_image1:new r.Uniform1i(n),u_brightness_low:new r.Uniform1f(n),u_brightness_high:new r.Uniform1f(n),u_saturation_factor:new r.Uniform1f(n),u_contrast_factor:new r.Uniform1f(n),u_spin_weights:new r.Uniform3f(n),u_perspective_transform:new r.Uniform2f(n)}),symbolIcon:n=>({u_is_size_zoom_constant:new r.Uniform1i(n),u_is_size_feature_constant:new r.Uniform1i(n),u_size_t:new r.Uniform1f(n),u_size:new r.Uniform1f(n),u_camera_to_center_distance:new r.Uniform1f(n),u_rotate_symbol:new r.Uniform1i(n),u_aspect_ratio:new r.Uniform1f(n),u_fade_change:new r.Uniform1f(n),u_matrix:new r.UniformMatrix4f(n),u_label_plane_matrix:new r.UniformMatrix4f(n),u_coord_matrix:new r.UniformMatrix4f(n),u_is_text:new r.Uniform1i(n),u_pitch_with_map:new r.Uniform1i(n),u_texsize:new r.Uniform2f(n),u_tile_id:new r.Uniform3f(n),u_zoom_transition:new r.Uniform1f(n),u_inv_rot_matrix:new r.UniformMatrix4f(n),u_merc_center:new r.Uniform2f(n),u_camera_forward:new r.Uniform3f(n),u_tile_matrix:new r.UniformMatrix4f(n),u_up_vector:new r.Uniform3f(n),u_ecef_origin:new r.Uniform3f(n),u_texture:new r.Uniform1i(n)}),symbolSDF:n=>({u_is_size_zoom_constant:new r.Uniform1i(n),u_is_size_feature_constant:new r.Uniform1i(n),u_size_t:new r.Uniform1f(n),u_size:new r.Uniform1f(n),u_camera_to_center_distance:new r.Uniform1f(n),u_rotate_symbol:new r.Uniform1i(n),u_aspect_ratio:new r.Uniform1f(n),u_fade_change:new r.Uniform1f(n),u_matrix:new r.UniformMatrix4f(n),u_label_plane_matrix:new r.UniformMatrix4f(n),u_coord_matrix:new r.UniformMatrix4f(n),u_is_text:new r.Uniform1i(n),u_pitch_with_map:new r.Uniform1i(n),u_texsize:new r.Uniform2f(n),u_texture:new r.Uniform1i(n),u_gamma_scale:new r.Uniform1f(n),u_device_pixel_ratio:new r.Uniform1f(n),u_tile_id:new r.Uniform3f(n),u_zoom_transition:new r.Uniform1f(n),u_inv_rot_matrix:new r.UniformMatrix4f(n),u_merc_center:new r.Uniform2f(n),u_camera_forward:new r.Uniform3f(n),u_tile_matrix:new r.UniformMatrix4f(n),u_up_vector:new r.Uniform3f(n),u_ecef_origin:new r.Uniform3f(n),u_is_halo:new r.Uniform1i(n)}),symbolTextAndIcon:n=>({u_is_size_zoom_constant:new r.Uniform1i(n),u_is_size_feature_constant:new r.Uniform1i(n),u_size_t:new r.Uniform1f(n),u_size:new r.Uniform1f(n),u_camera_to_center_distance:new r.Uniform1f(n),u_rotate_symbol:new r.Uniform1i(n),u_aspect_ratio:new r.Uniform1f(n),u_fade_change:new r.Uniform1f(n),u_matrix:new r.UniformMatrix4f(n),u_label_plane_matrix:new r.UniformMatrix4f(n),u_coord_matrix:new r.UniformMatrix4f(n),u_is_text:new r.Uniform1i(n),u_pitch_with_map:new r.Uniform1i(n),u_texsize:new r.Uniform2f(n),u_texsize_icon:new r.Uniform2f(n),u_texture:new r.Uniform1i(n),u_texture_icon:new r.Uniform1i(n),u_gamma_scale:new r.Uniform1f(n),u_device_pixel_ratio:new r.Uniform1f(n),u_is_halo:new r.Uniform1i(n)}),background:n=>({u_matrix:new r.UniformMatrix4f(n),u_opacity:new r.Uniform1f(n),u_color:new r.UniformColor(n)}),backgroundPattern:n=>({u_matrix:new r.UniformMatrix4f(n),u_opacity:new r.Uniform1f(n),u_image:new r.Uniform1i(n),u_pattern_tl:new r.Uniform2f(n),u_pattern_br:new r.Uniform2f(n),u_texsize:new r.Uniform2f(n),u_pattern_size:new r.Uniform2f(n),u_pixel_coord_upper:new r.Uniform2f(n),u_pixel_coord_lower:new r.Uniform2f(n),u_tile_units_to_pixels:new r.Uniform1f(n)}),terrainRaster:tj,terrainDepth:tj,skybox:n=>({u_matrix:new r.UniformMatrix4f(n),u_sun_direction:new r.Uniform3f(n),u_cubemap:new r.Uniform1i(n),u_opacity:new r.Uniform1f(n),u_temporal_offset:new r.Uniform1f(n)}),skyboxGradient:n=>({u_matrix:new r.UniformMatrix4f(n),u_color_ramp:new r.Uniform1i(n),u_center_direction:new r.Uniform3f(n),u_radius:new r.Uniform1f(n),u_opacity:new r.Uniform1f(n),u_temporal_offset:new r.Uniform1f(n)}),skyboxCapture:n=>({u_matrix_3f:new r.UniformMatrix3f(n),u_sun_direction:new r.Uniform3f(n),u_sun_intensity:new r.Uniform1f(n),u_color_tint_r:new r.Uniform4f(n),u_color_tint_m:new r.Uniform4f(n),u_luminance:new r.Uniform1f(n)}),globeRaster:n=>({u_proj_matrix:new r.UniformMatrix4f(n),u_globe_matrix:new r.UniformMatrix4f(n),u_normalize_matrix:new r.UniformMatrix4f(n),u_merc_matrix:new r.UniformMatrix4f(n),u_zoom_transition:new r.Uniform1f(n),u_merc_center:new r.Uniform2f(n),u_image0:new r.Uniform1i(n),u_grid_matrix:new r.UniformMatrix3f(n),u_skirt_height:new r.Uniform1f(n),u_frustum_tl:new r.Uniform3f(n),u_frustum_tr:new r.Uniform3f(n),u_frustum_br:new r.Uniform3f(n),u_frustum_bl:new r.Uniform3f(n),u_globe_pos:new r.Uniform3f(n),u_globe_radius:new r.Uniform1f(n),u_viewport:new r.Uniform2f(n)}),globeAtmosphere:n=>({u_frustum_tl:new r.Uniform3f(n),u_frustum_tr:new r.Uniform3f(n),u_frustum_br:new r.Uniform3f(n),u_frustum_bl:new r.Uniform3f(n),u_horizon:new r.Uniform1f(n),u_transition:new r.Uniform1f(n),u_fadeout_range:new r.Uniform1f(n),u_color:new r.Uniform4f(n),u_high_color:new r.Uniform4f(n),u_space_color:new r.Uniform4f(n),u_star_intensity:new r.Uniform1f(n),u_star_density:new r.Uniform1f(n),u_star_size:new r.Uniform1f(n),u_temporal_offset:new r.Uniform1f(n),u_horizon_angle:new r.Uniform1f(n),u_rotation_matrix:new r.UniformMatrix4f(n)})};function r_(n,i,a,s,l,u,c){let h=n.context,d=h.gl,f=n.transform,p=n.useProgram("collisionBox"),m=[],g=0,y=0;for(let o=0;o<s.length;o++){let _=s[o],v=i.getTile(_),b=v.getBucket(a);if(!b)continue;let x=function(r,n,i){if(n.projection.name===i.projection.name)return r.projMatrix;let o=i.clone();return o.setProjection(n.projection),e9(o,n.getProjection(),r)}(_,b,f),w=x;0===l[0]&&0===l[1]||(w=n.translatePosMatrix(x,v,l,u));let E=c?b.textCollisionBox:b.iconCollisionBox,C=b.collisionCircleArray;if(C.length>0){let n=r.create(),i=w;r.mul(n,b.placementInvProjMatrix,f.glCoordMatrix),r.mul(n,n,b.placementViewportMatrix),m.push({circleArray:C,circleOffset:y,transform:i,invTransform:n,projection:b.getProjection()}),g+=C.length/4,y=g}E&&(n.terrain&&n.terrain.setupElevationDraw(v,p),p.draw(h,d.LINES,r.DepthMode.disabled,r.StencilMode.disabled,n.colorModeForRenderPass(),r.CullFaceMode.disabled,rt(w,f,v,b.getProjection()),a.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,null,f.zoom,null,[E.collisionVertexBuffer,E.collisionVertexBufferExt]))}if(!c||!m.length)return;let _=n.useProgram("collisionCircle"),v=new r.StructArrayLayout2f1f2i16;v.resize(4*g),v._trim();let b=0;for(let r of m)for(let n=0;n<r.circleArray.length/4;n++){let i=4*n,o=r.circleArray[i+0],a=r.circleArray[i+1],s=r.circleArray[i+2],l=r.circleArray[i+3];v.emplace(b++,o,a,s,l,0),v.emplace(b++,o,a,s,l,1),v.emplace(b++,o,a,s,l,2),v.emplace(b++,o,a,s,l,3)}(!o||o.length<2*g)&&(o=function(n){let i=2*n,o=new r.StructArrayLayout3ui6;o.resize(i),o._trim();for(let r=0;r<i;r++){let n=6*r;o.uint16[n+0]=4*r+0,o.uint16[n+1]=4*r+1,o.uint16[n+2]=4*r+2,o.uint16[n+3]=4*r+2,o.uint16[n+4]=4*r+3,o.uint16[n+5]=4*r+0}return o}(g));let x=h.createIndexBuffer(o,!0),w=h.createVertexBuffer(v,r.collisionCircleLayout.members,!0);for(let i of m){let o={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:f.getCameraToCenterDistance(i.projection),u_viewport_size:[f.width,f.height]};_.draw(h,d.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,n.colorModeForRenderPass(),r.CullFaceMode.disabled,o,a.id,w,x,r.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,f.zoom)}w.destroy(),x.destroy()}let rv=r.create();function rb(n,i,o,a,s,l,u,c,h,d,f,p){let m=n.context,g=m.gl,y=n.transform,_="map"===c,v="map"===h,b=_&&"point"!==o.layout.get("symbol-placement"),x=_&&!v&&!b,w=void 0!==o.layout.get("symbol-sort-key").constantOr(1),E=!1,C=n.depthModeForSublayer(0,r.DepthMode.ReadOnly),S=[r.mercatorXfromLng(y.center.lng),r.mercatorYfromLat(y.center.lat)],T=o.layout.get("text-variable-anchor"),M="globe"===y.projection.name,k=[],I=[0,-1,0],L=I;for(let c of((M||y.mercatorFromTransition)&&!_&&(L=function(n){let i=n._camera.getWorldToCamera(n.worldSize,1),o=r.multiply([],i,n.globeMatrix);r.invert(o,o);let a=[0,0,0],s=[0,1,0,0];return r.transformMat4$1(s,s,o),a[0]=s[0],a[1]=s[1],a[2]=s[2],r.normalize(a,a),a}(y)),a)){let a;let h=i.getTile(c),f=h.getBucket(o);if(!f||"mercator"===f.projection.name&&M)continue;let p=s?f.text:f.icon;if(!p||f.fullyClipped||!p.segments.get().length)continue;let m=p.programConfigurations.get(o.id),C=s||f.sdfIcons,A=s?f.textSizeData:f.iconSizeData,z=v||0!==y.pitch,P=r.evaluateSizeForZoom(A,y.zoom),O,D,R,F,B=[0,0],N=null;if(s)D=h.glyphAtlasTexture,R=g.LINEAR,O=h.glyphAtlasTexture.size,f.iconsInText&&(B=h.imageAtlasTexture.size,N=h.imageAtlasTexture,F=z||n.options.rotating||n.options.zooming||"composite"===A.kind||"camera"===A.kind?g.LINEAR:g.NEAREST);else{let r=1!==o.layout.get("icon-size").constantOr(0)||f.iconsNeedLinear;D=h.imageAtlasTexture,R=C||n.options.rotating||n.options.zooming||r||z?g.LINEAR:g.NEAREST,O=h.imageAtlasTexture.size}let j="globe"===f.projection.name,V=j?L:I,U=j?r.globeToMercatorTransition(y.zoom):0,q=e7(c,f.getProjection(),y),$=y.calculatePixelsToTileUnitsMatrix(h),H=eW(q,h.tileID.canonical,v,_,y,f.getProjection(),$),Z=n.terrain&&v&&b?r.invert(r.create(),H):rv,G=eY(q,h.tileID.canonical,v,_,y,f.getProjection(),$),W=T&&f.hasTextData(),X="none"!==o.layout.get("icon-text-fit")&&W&&f.hasIconData();if(b){let i=y.elevation,o=i?i.getAtTileOffsetFunc(c,y.center.lat,y.worldSize,f.getProjection()):null,a=eX(q,h.tileID.canonical,v,_,y,f.getProjection(),$);!function(n,i,o,a,s,l,u,c,h,d){let f=o.transform,p=a?n.textSizeData:n.iconSizeData,m=r.evaluateSizeForZoom(p,o.transform.zoom),g="globe"===f.projection.name,y=[256/o.width*2+1,256/o.height*2+1],_=a?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;_.clear();let v=null;g&&(v=a?n.text.globeExtVertexArray:n.icon.globeExtVertexArray);let b=n.lineVertexArray,x=a?n.text.placedSymbolArray:n.icon.placedSymbolArray,w=o.transform.width/o.transform.height,E,C=!1;for(let a=0;a<x.length;a++){let g=x.get(a),{numGlyphs:S,writingMode:T}=g;if(T!==r.WritingMode.vertical||C||E===r.WritingMode.horizontal||(C=!0),E=T,(g.hidden||T===r.WritingMode.vertical)&&!C){e5(S,_);continue}C=!1;let M=new r.Point(g.tileAnchorX,g.tileAnchorY),{x:k,y:I,z:L}=f.projection.projectTilePoint(M.x,M.y,d.canonical);if(h){let[r,n,i]=h(M);k+=r,I+=n,L+=i}let A=[k,I,L,1];if(r.transformMat4$1(A,A,i),!function(r,n){let i=r[0]/r[3],o=r[1]/r[3];return i>=-n[0]&&i<=n[0]&&o>=-n[1]&&o<=n[1]}(A,y)){e5(S,_);continue}let z=eJ(o.transform.cameraToCenterDistance,A[3]),P=r.evaluateSizeForFeature(p,m,g),O=u?P/z:P*z,D=eK(k,I,L,s);if(D[3]<=0){e5(S,_);continue}let R={},F=u?null:h,B=e1(g,O,!1,c,i,s,l,n.glyphOffsetArray,b,_,v,D,M,R,w,F,f.projection,d,u);C=B.useVertical,F&&B.needsFlipping&&(R={}),(B.notEnoughRoom||C||B.needsFlipping&&e1(g,O,!0,c,i,s,l,n.glyphOffsetArray,b,_,v,D,M,R,w,F,f.projection,d,u).notEnoughRoom)&&e5(S,_)}a?(n.text.dynamicLayoutVertexBuffer.updateData(_),v&&n.text.globeExtVertexBuffer.updateData(v)):(n.icon.dynamicLayoutVertexBuffer.updateData(_),v&&n.icon.globeExtVertexBuffer.updateData(v))}(f,q,n,s,a,G,v,d,o,c)}let Y=b||s&&T||X,K=n.translatePosMatrix(q,h,l,u),J=Y?rv:H,Q=n.translatePosMatrix(G,h,l,u,!0),ee=f.getProjection().createInversionMatrix(y,c.canonical),et=[];n.terrainRenderModeElevated()&&v&&et.push("PITCH_WITH_MAP_TERRAIN"),j&&et.push("PROJECTION_GLOBE_VIEW"),Y&&et.push("PROJECTED_POS_ON_VIEWPORT");let er=C&&0!==o.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1);a=C?f.iconsInText?rp(A.kind,P,x,v,n,K,J,Q,O,B,c,U,S,ee,V,f.getProjection()):rf(A.kind,P,x,v,n,K,J,Q,s,O,!0,c,U,S,ee,V,f.getProjection()):rd(A.kind,P,x,v,n,K,J,Q,s,O,c,U,S,ee,V,f.getProjection());let en={program:n.useProgram(f.iconsInText&&s?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon",m,et),buffers:p,uniformValues:a,atlasTexture:D,atlasTextureIcon:N,atlasInterpolation:R,atlasInterpolationIcon:F,isSDF:C,hasHalo:er,tile:h,labelPlaneMatrixInv:Z};if(w&&f.canOverlap){E=!0;let n=p.segments.get();for(let i of n)k.push({segments:new r.SegmentVector([i]),sortKey:i.sortKey,state:en})}else k.push({segments:p.segments,sortKey:0,state:en})}for(let r of(E&&k.sort((r,n)=>r.sortKey-n.sortKey),k)){let i=r.state;if(n.terrain&&n.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!M,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),m.activeTexture.set(g.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,g.CLAMP_TO_EDGE),i.atlasTextureIcon&&(m.activeTexture.set(g.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),i.isSDF){let a=i.uniformValues;i.hasHalo&&(a.u_is_halo=1,rx(i.buffers,r.segments,o,n,i.program,C,f,p,a)),a.u_is_halo=0}rx(i.buffers,r.segments,o,n,i.program,C,f,p,i.uniformValues)}}function rx(n,i,o,a,s,l,u,c,h){let d=a.context,f=[n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer,n.globeExtVertexBuffer];s.draw(d,d.gl.TRIANGLES,l,u,c,r.CullFaceMode.disabled,h,o.id,n.layoutVertexBuffer,n.indexBuffer,i,o.paint,a.transform.zoom,n.programConfigurations.get(o.id),f)}function rw(n,i,o,a,s,l,u){let c,h,d,f,p;let m=n.context.gl,g=o.paint.get("fill-pattern"),y=g&&g.constantOr(1);for(let _ of(u?(h=y&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",c=m.LINES):(h=y?"fillPattern":"fill",c=m.TRIANGLES),a)){let a=i.getTile(_);if(y&&!a.patternsLoaded())continue;let v=a.getBucket(o);if(!v)continue;n.prepareDrawTile();let b=v.programConfigurations.get(o.id),x=n.useProgram(h,b);y&&(n.context.activeTexture.set(m.TEXTURE0),a.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),b.updatePaintBuffers());let w=g.constantOr(null);if(w&&a.imageAtlas){let r=a.imageAtlas.patternPositions[w.toString()];r&&b.setConstantPatternPositions(r)}let E=n.translatePosMatrix(_.projMatrix,a,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(u){f=v.indexBuffer2,p=v.segments2;let r=n.terrain&&n.terrain.renderingToTexture?n.terrain.drapeBufferSize:[m.drawingBufferWidth,m.drawingBufferHeight];d="fillOutlinePattern"===h&&y?t8(E,n,a,r):t6(E,r)}else f=v.indexBuffer,p=v.segments,d=y?t5(E,n,a):t3(E);n.prepareDrawProgram(n.context,x,_.toUnwrapped()),x.draw(n.context,c,s,n.stencilModeForClipping(_),l,r.CullFaceMode.disabled,d,o.id,v.layoutVertexBuffer,f,p,o.paint,n.transform.zoom,b)}}function rE(n,i,o,a,s,l,u){let c=n.context,h=c.gl,d=n.transform,f=o.paint.get("fill-extrusion-pattern"),p=f.constantOr(1),m=o.paint.get("fill-extrusion-opacity"),g=[o.paint.get("fill-extrusion-ambient-occlusion-intensity"),o.paint.get("fill-extrusion-ambient-occlusion-radius")],y=o.layout.get("fill-extrusion-edge-radius"),_=y>0&&!o.paint.get("fill-extrusion-rounded-roof"),v=_?0:y,b="globe"===d.projection.name?r.fillExtrusionHeightLift():0,x="globe"===d.projection.name,w=x?r.globeToMercatorTransition(d.zoom):0,E=[r.mercatorXfromLng(d.center.lng),r.mercatorYfromLat(d.center.lat)],C=[];for(let y of(x&&C.push("PROJECTION_GLOBE_VIEW"),g[0]>0&&C.push("FAUX_AO"),_&&C.push("ZERO_ROOF_RADIUS"),a)){let a=i.getTile(y),_=a.getBucket(o);if(!_||_.projection.name!==d.projection.name)continue;let S=_.programConfigurations.get(o.id),T=n.useProgram(p?"fillExtrusionPattern":"fillExtrusion",S,C);if(n.terrain){let s=n.terrain;if(n.style.terrainSetForDrapingOnly())s.setupElevationDraw(a,T,{useMeterToDem:!0});else{if(!_.enableTerrain)continue;if(s.setupElevationDraw(a,T,{useMeterToDem:!0}),function(n,i,o,a,s,l){let u,c,h;let d=[n=>{let i=n.canonical.x-1,o=n.wrap;return i<0&&(i=(1<<n.canonical.z)-1,o--),new r.OverscaledTileID(n.overscaledZ,o,n.canonical.z,i,n.canonical.y)},n=>{let i=n.canonical.x+1,o=n.wrap;return i===1<<n.canonical.z&&(i=0,o++),new r.OverscaledTileID(n.overscaledZ,o,n.canonical.z,i,n.canonical.y)},n=>new r.OverscaledTileID(n.overscaledZ,n.wrap,n.canonical.z,n.canonical.x,(0===n.canonical.y?1<<n.canonical.z:n.canonical.y)-1),n=>new r.OverscaledTileID(n.overscaledZ,n.wrap,n.canonical.z,n.canonical.x,n.canonical.y===(1<<n.canonical.z)-1?0:n.canonical.y+1)],f=r=>{let n=i.getSource().minzoom,o=r=>{let n=i.getTileByID(r);if(n&&n.hasData())return n.getBucket(s)};for(let i of[0,-1,1]){if(r.overscaledZ+i<n)continue;let a=o(r.calculateScaledKey(r.overscaledZ+i));if(a)return a}},p=[0,0,0],m=(n,i)=>(p[0]=Math.min(n.min.y,i.min.y),p[1]=Math.max(n.max.y,i.max.y),p[2]=r.EXTENT-i.min.x>n.max.x?i.min.x-r.EXTENT:n.max.x,p),g=(n,i)=>(p[0]=Math.min(n.min.x,i.min.x),p[1]=Math.max(n.max.x,i.max.x),p[2]=r.EXTENT-i.min.y>n.max.y?i.min.y-r.EXTENT:n.max.y,p),y=[(r,n)=>m(r,n),(r,n)=>m(n,r),(r,n)=>g(r,n),(r,n)=>g(n,r)],_=new r.Point(0,0),v=(n,i,a,s,d)=>{let f=[[s?a:n,s?n:a,0],[s?a:i,s?i:a,0]],p=d<0?r.EXTENT+d:d,m=[s?p:(n+i)/2,s?(n+i)/2:p,0];return 0===a&&d<0||0!==a&&d>0?l.getForTilePoints(h,[m],!0,c):f.push(m),l.getForTilePoints(o,f,!0,u),Math.max(f[0][2],f[1][2],m[2])/l.exaggeration()};for(let n=0;n<4;n++){let i=(n<2?1:5)-n,s=a.borders[n];if(0===s.length)continue;let p=h=d[n](o),m=f(p);if(!(m&&m instanceof r.FillExtrusionBucket&&m.enableTerrain)||a.borderDoneWithNeighborZ[n]===m.canonical.z&&m.borderDoneWithNeighborZ[i]===a.canonical.z||!(c=l.findDEMTileFor(p))||!c.dem)continue;if(!u){let r=l.findDEMTileFor(o);if(!r||!r.dem)return;u=r}let g=m.borders[i],b=0,x=m.borderDoneWithNeighborZ[i]!==a.canonical.z;if(a.canonical.z===m.canonical.z){for(let o=0;o<s.length;o++){let l;let u=a.featuresOnBorder[s[o]],c=u.borders[n];for(;b<g.length&&!((l=m.featuresOnBorder[g[b]]).borders[i][1]>c[0]+3);)x&&m.encodeCentroid(void 0,l,!1),b++;if(l&&b<g.length){let o=b,s=0;for(;!(l.borders[i][0]>c[1]-3)&&(s++,++b!==g.length);)l=m.featuresOnBorder[g[b]];if(l=m.featuresOnBorder[g[o]],u.intersectsCount()>1||l.intersectsCount()>1||1!==s){1!==s&&(b=o),a.encodeCentroid(void 0,u,!1),x&&m.encodeCentroid(void 0,l,!1);continue}let h=y[n](u,l),d=n%2?r.EXTENT-1:0;_.x=v(h[0],Math.min(r.EXTENT-1,h[1]),d,n<2,h[2]),_.y=0,a.encodeCentroid(_,u,!1),x&&m.encodeCentroid(_,l,!1)}else a.encodeCentroid(void 0,u,!1)}a.borderDoneWithNeighborZ[n]=m.canonical.z,a.needsCentroidUpdate=!0,x&&(m.borderDoneWithNeighborZ[i]=a.canonical.z,m.needsCentroidUpdate=!0)}else{for(let r of s)a.encodeCentroid(void 0,a.featuresOnBorder[r],!1);if(x){for(let r of g)m.encodeCentroid(void 0,m.featuresOnBorder[r],!1);m.borderDoneWithNeighborZ[i]=a.canonical.z,m.needsCentroidUpdate=!0}a.borderDoneWithNeighborZ[n]=m.canonical.z,a.needsCentroidUpdate=!0}}(a.needsCentroidUpdate||!a.centroidVertexBuffer&&0!==a.centroidVertexArray.length)&&a.uploadCentroid(n)}(c,i,y,_,o,s),!_.centroidVertexBuffer){let r=T.attributes.a_centroid_pos;void 0!==r&&h.vertexAttrib2f(r,0,0)}}}p&&(n.context.activeTexture.set(h.TEXTURE0),a.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),S.updatePaintBuffers());let M=f.constantOr(null);if(M&&a.imageAtlas){let r=a.imageAtlas.patternPositions[M.toString()];r&&S.setConstantPatternPositions(r)}let k=n.translatePosMatrix(y.projMatrix,a,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),I=d.projection.createInversionMatrix(d,y.canonical),L=o.paint.get("fill-extrusion-vertical-gradient"),A=p?t4(k,n,L,m,g,v,y,a,b,w,E,I):t2(k,n,L,m,g,v,y,b,w,E,I);n.prepareDrawProgram(c,T,y.toUnwrapped());let z=[];n.terrain&&z.push(_.centroidVertexBuffer),x&&z.push(_.layoutVertexExtBuffer),T.draw(c,c.gl.TRIANGLES,s,l,u,r.CullFaceMode.backCCW,A,o.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,o.paint,n.transform.zoom,S,z)}}let rC=new r.Color(1,0,0,1),rS=new r.Color(0,1,0,1),rT=new r.Color(0,0,1,1),rM=new r.Color(1,0,1,1),rk=new r.Color(0,1,1,1);function rI(r,n,i,o){rA(r,0,n+i/2,r.transform.width,i,o)}function rL(r,n,i,o){rA(r,n-i/2,0,i,r.transform.height,o)}function rA(n,i,o,a,s,l){let u=n.context,c=u.gl;c.enable(c.SCISSOR_TEST),c.scissor(i*r.exported.devicePixelRatio,o*r.exported.devicePixelRatio,a*r.exported.devicePixelRatio,s*r.exported.devicePixelRatio),u.clear({color:l}),c.disable(c.SCISSOR_TEST)}let rz=r.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:rP}=rz;function rO(r,n,i,o){r.emplaceBack(n,i,o)}class rD{constructor(n){this.vertexArray=new r.StructArrayLayout3f12,this.indices=new r.StructArrayLayout3ui6,rO(this.vertexArray,-1,-1,1),rO(this.vertexArray,1,-1,1),rO(this.vertexArray,-1,1,1),rO(this.vertexArray,1,1,1),rO(this.vertexArray,-1,-1,-1),rO(this.vertexArray,1,-1,-1),rO(this.vertexArray,-1,1,-1),rO(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,rP),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=r.SegmentVector.simpleSegment(0,0,36,12)}}function rR(n,i,o,a,s,l){let u=n.gl,c=i.paint.get("sky-atmosphere-color"),h=i.paint.get("sky-atmosphere-halo-color"),d=i.paint.get("sky-atmosphere-sun-intensity"),f={u_matrix_3f:r.fromMat4(r.create$1(),a),u_sun_direction:s,u_sun_intensity:d,u_color_tint_r:[c.r,c.g,c.b,c.a],u_color_tint_m:[h.r,h.g,h.b,h.a],u_luminance:5e-5};u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_CUBE_MAP_POSITIVE_X+l,i.skyboxTexture,0),o.draw(n,u.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,r.ColorMode.unblended,r.CullFaceMode.frontCW,f,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}let rF=r.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class rB{constructor(n){let i=new r.StructArrayLayout5f20;i.emplaceBack(-1,1,1,0,0),i.emplaceBack(1,1,1,1,0),i.emplaceBack(1,-1,1,1,1),i.emplaceBack(-1,-1,1,0,1);let o=new r.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(i,rF.members),this.indexBuffer=n.createIndexBuffer(o),this.segments=r.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}let rN={symbol:function(n,i,o,a,s){if("translucent"!==n.renderPass)return;let l=r.StencilMode.disabled,u=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(n,i,o,a,s,l,u){let c=i.transform,h="map"===s,d="map"===l;for(let i of n){let n=a.getTile(i),s=n.getBucket(o);if(!s||!s.text||!s.text.segments.get().length)continue;let l=r.evaluateSizeForZoom(s.textSizeData,c.zoom),f=e7(i,s.getProjection(),c),p=c.calculatePixelsToTileUnitsMatrix(n),m=eW(f,n.tileID.canonical,d,h,c,s.getProjection(),p),g="none"!==o.layout.get("icon-text-fit")&&s.hasIconData();if(l){let o=Math.pow(2,c.zoom-n.tileID.overscaledZ);(function(n,i,o,a,s,l,u,c,h,d,f){let p=n.text.placedSymbolArray,m=n.text.dynamicLayoutVertexArray,g=n.icon.dynamicLayoutVertexArray,y={},_=n.getProjection(),v=e7(c,_,l),b=l.elevation,x=_.upVectorScale(c.canonical,l.center.lat,l.worldSize).metersToTile;m.clear();for(let g=0;g<p.length;g++){let w=p.get(g),{tileAnchorX:E,tileAnchorY:C,numGlyphs:S}=w,T=w.hidden||!w.crossTileID||n.allowVerticalPlacement&&!w.placedOrientation?null:a[w.crossTileID];if(T){let a=0,p=0,g=0;if(b){let r=b?b.getAtTileOffset(c,E,C):0,[n,i,o]=_.upVector(c.canonical,E,C);a=r*n*x,p=r*i*x,g=r*o*x}let[M,k,I,L]=eK(w.projectedAnchorX+a,w.projectedAnchorY+p,w.projectedAnchorZ+g,o?v:u),A=eJ(l.getCameraToCenterDistance(_),L),z=s.evaluateSizeForFeature(n.textSizeData,d,w)*A/r.ONE_EM;o&&(z*=n.tilePixelRatio/h);let P=function({width:n,height:i,anchor:o,textOffset:a,textScale:s},l){let{horizontalAlign:u,verticalAlign:c}=r.getAnchorAlignment(o),h=r.evaluateVariableOffset(o,a);return new r.Point((-(u-.5)*n/s+h[0])*l,(-(c-.5)*i/s+h[1])*l)}(T,z);o?({x:M,y:k,z:I}=_.projectTilePoint(E+P.x,C+P.y,c.canonical),[M,k,I]=eK(M+a,k+p,I+g,u)):(i&&P._rotate(-l.angle),M+=P.x,k+=P.y,I=0);let O=n.allowVerticalPlacement&&w.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let n=0;n<S;n++)r.addDynamicAttributes(m,M,k,I,O);f&&w.associatedIconIndex>=0&&(y[w.associatedIconIndex]={x:M,y:k,z:I,angle:O})}else e5(S,m)}if(f){g.clear();let i=n.icon.placedSymbolArray;for(let n=0;n<i.length;n++){let o=i.get(n),{numGlyphs:a}=o,s=y[n];if(o.hidden||!s)e5(a,g);else{let{x:n,y:i,z:o,angle:l}=s;for(let s=0;s<a;s++)r.addDynamicAttributes(g,n,i,o,l)}}n.icon.dynamicLayoutVertexBuffer.updateData(g)}n.text.dynamicLayoutVertexBuffer.updateData(m)})(s,h,d,u,r.symbolSize,c,m,i,o,l,g)}}}(a,n,o,i,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),s),0!==o.paint.get("icon-opacity").constantOr(1)&&rb(n,i,o,a,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),l,u),0!==o.paint.get("text-opacity").constantOr(1)&&rb(n,i,o,a,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),l,u),i.map.showCollisionBoxes&&(r_(n,i,o,a,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),r_(n,i,o,a,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(n,i,o,a){if("translucent"!==n.renderPass)return;let s=o.paint.get("circle-opacity"),l=o.paint.get("circle-stroke-width"),u=o.paint.get("circle-stroke-opacity"),c=void 0!==o.layout.get("circle-sort-key").constantOr(1);if(0===s.constantOr(1)&&(0===l.constantOr(1)||0===u.constantOr(1)))return;let h=n.context,d=h.gl,f=n.transform,p=n.depthModeForSublayer(0,r.DepthMode.ReadOnly),m=r.StencilMode.disabled,g=n.colorModeForRenderPass(),y="globe"===f.projection.name,_=[r.mercatorXfromLng(f.center.lng),r.mercatorYfromLat(f.center.lat)],v=[];for(let s=0;s<a.length;s++){let l=a[s],u=i.getTile(l),h=u.getBucket(o);if(!h||h.projection.name!==f.projection.name)continue;let d=h.programConfigurations.get(o.id),p=re(o);y&&p.push("PROJECTION_GLOBE_VIEW");let m=n.useProgram("circle",d,p),g=h.layoutVertexBuffer,b=h.globeExtVertexBuffer,x=h.indexBuffer,w=f.projection.createInversionMatrix(f,l.canonical),E={programConfiguration:d,program:m,layoutVertexBuffer:g,globeExtVertexBuffer:b,indexBuffer:x,uniformValues:t7(n,l,u,w,_,o),tile:u};if(c){let n=h.segments.get();for(let i of n)v.push({segments:new r.SegmentVector([i]),sortKey:i.sortKey,state:E})}else v.push({segments:h.segments,sortKey:0,state:E})}c&&v.sort((r,n)=>r.sortKey-n.sortKey);let b={useDepthForOcclusion:!y};for(let i of v){let{programConfiguration:a,program:s,layoutVertexBuffer:l,globeExtVertexBuffer:u,indexBuffer:c,uniformValues:y,tile:_}=i.state,v=i.segments;n.terrain&&n.terrain.setupElevationDraw(_,s,b),n.prepareDrawProgram(h,s,_.tileID.toUnwrapped()),s.draw(h,d.TRIANGLES,p,m,g,r.CullFaceMode.disabled,y,o.id,l,c,v,o.paint,f.zoom,a,[u])}},heatmap:function(n,i,o,a){if(0!==o.paint.get("heatmap-opacity")){if("offscreen"===n.renderPass){let s=n.context,l=s.gl,u=r.StencilMode.disabled,c=new r.ColorMode([l.ONE,l.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(r,n,i,o){let a=r.gl,s=n.width*o,l=n.height*o;r.activeTexture.set(a.TEXTURE1),r.viewport.set([0,0,s,l]);let u=i.heatmapFbo;if(!u||u&&(u.width!==s||u.height!==l)){u&&u.destroy();let n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),u=i.heatmapFbo=r.createFramebuffer(s,l,!1),function(r,n,i,o,a,s){let l=r.gl;l.texImage2D(l.TEXTURE_2D,0,r.isWebGL2&&r.extRenderToTextureHalfFloat?l.RGBA16F:l.RGBA,a,s,0,l.RGBA,r.extRenderToTextureHalfFloat?r.isWebGL2?l.HALF_FLOAT:r.extTextureHalfFloat.HALF_FLOAT_OES:l.UNSIGNED_BYTE,null),o.colorAttachment.set(i)}(r,0,n,u,s,l)}else a.bindTexture(a.TEXTURE_2D,u.colorAttachment.get()),r.bindFramebuffer.set(u.framebuffer)})(s,n,o,"globe"===n.transform.projection.name?.5:.25),s.clear({color:r.Color.transparent});let h=n.transform,d="globe"===h.projection.name,f=d?["PROJECTION_GLOBE_VIEW"]:null,p=d?r.CullFaceMode.frontCCW:r.CullFaceMode.disabled,m=[r.mercatorXfromLng(h.center.lng),r.mercatorYfromLat(h.center.lat)];for(let g=0;g<a.length;g++){let y=a[g];if(i.hasRenderableParent(y))continue;let _=i.getTile(y),v=_.getBucket(o);if(!v||v.projection.name!==h.projection.name)continue;let b=v.programConfigurations.get(o.id),x=n.useProgram("heatmap",b,f),{zoom:w}=n.transform;n.terrain&&n.terrain.setupElevationDraw(_,x),n.prepareDrawProgram(s,x,y.toUnwrapped());let E=h.projection.createInversionMatrix(h,y.canonical);x.draw(s,l.TRIANGLES,r.DepthMode.disabled,u,c,p,ri(n,y,_,E,m,w,o.paint.get("heatmap-intensity")),o.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,o.paint,n.transform.zoom,b,d?[v.globeExtVertexBuffer]:null)}s.viewport.set([0,0,n.width,n.height])}else"translucent"===n.renderPass&&(n.context.setColorMode(n.colorModeForRenderPass()),function(n,i){let o=n.context,a=o.gl,s=i.heatmapFbo;if(!s)return;o.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,s.colorAttachment.get()),o.activeTexture.set(a.TEXTURE1);let l=i.colorRampTexture;l||(l=i.colorRampTexture=new r.Texture(o,i.colorRamp,a.RGBA)),l.bind(a.LINEAR,a.CLAMP_TO_EDGE),n.useProgram("heatmapTexture").draw(o,a.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,n.colorModeForRenderPass(),r.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")},i.id,n.viewportBuffer,n.quadTriangleIndexBuffer,n.viewportSegments,i.paint,n.transform.zoom)}(n,o))}},line:function(n,i,o,a){if("translucent"!==n.renderPass)return;let s=o.paint.get("line-opacity"),l=o.paint.get("line-width");if(0===s.constantOr(1)||0===l.constantOr(1))return;let u=n.depthModeForSublayer(0,r.DepthMode.ReadOnly),c=n.colorModeForRenderPass(),h=n.terrain&&n.terrain.renderingToTexture?1:r.exported.devicePixelRatio,d=o.paint.get("line-dasharray"),f=d.constantOr(1),p=o.layout.get("line-cap"),m=o.paint.get("line-pattern"),g=m.constantOr(1),y=o.paint.get("line-gradient"),_=g?"linePattern":"line",v=n.context,b=v.gl,x=(r=>{let n=[];ru(r)&&n.push("RENDER_LINE_DASH"),r.paint.get("line-gradient")&&n.push("RENDER_LINE_GRADIENT");let i=r.paint.get("line-trim-offset");0===i[0]&&0===i[1]||n.push("RENDER_LINE_TRIM_OFFSET");let o=r.paint.get("line-pattern").constantOr(1),a=1!==r.paint.get("line-opacity").constantOr(1);return!o&&a&&n.push("RENDER_LINE_ALPHA_DISCARD"),n})(o),w=x.includes("RENDER_LINE_ALPHA_DISCARD");for(let s of(n.terrain&&n.terrain.clipOrMaskOverlapStencilType()&&(w=!1),a)){let a=i.getTile(s);if(g&&!a.patternsLoaded())continue;let l=a.getBucket(o);if(!l)continue;n.prepareDrawTile();let E=l.programConfigurations.get(o.id),C=n.useProgram(_,E,x),S=m.constantOr(null);if(S&&a.imageAtlas){let r=a.imageAtlas.patternPositions[S.toString()];r&&E.setConstantPatternPositions(r)}let T=d.constantOr(null),M=p.constantOr(null);if(!g&&T&&M&&a.lineAtlas){let r=a.lineAtlas.getDash(T,M);r&&E.setConstantPatternPositions(r)}let[k,I]=o.paint.get("line-trim-offset");("round"===M||"square"===M)&&k!==I&&(0===k&&(k-=1),1===I&&(I+=1));let L=n.terrain?s.projMatrix:null,A=g?ra(n,a,o,L,h):ro(n,a,o,L,l.lineClipsArray.length,h,[k,I]);if(y){let a=l.gradients[o.id],u=a.texture;if(o.gradientVersion!==a.version){let c=256;if(o.stepInterpolant){let o=i.getSource().maxzoom,a=s.canonical.z===o?Math.ceil(1<<n.transform.maxZoom-s.canonical.z):1;c=r.clamp(r.nextPowerOfTwo(l.maxLineLength/r.EXTENT*1024*a),256,v.maxTextureSize)}a.gradient=r.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:c,image:a.gradient||void 0,clips:l.lineClipsArray}),a.texture?a.texture.update(a.gradient):a.texture=new r.Texture(v,a.gradient,b.RGBA),a.version=o.gradientVersion,u=a.texture}v.activeTexture.set(b.TEXTURE1),u.bind(o.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}f&&(v.activeTexture.set(b.TEXTURE0),a.lineAtlasTexture.bind(b.LINEAR,b.REPEAT),E.updatePaintBuffers()),g&&(v.activeTexture.set(b.TEXTURE0),a.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),E.updatePaintBuffers()),n.prepareDrawProgram(v,C,s.toUnwrapped());let z=i=>{C.draw(v,b.TRIANGLES,u,i,c,r.CullFaceMode.disabled,A,o.id,l.layoutVertexBuffer,l.indexBuffer,l.segments,o.paint,n.transform.zoom,E,[l.layoutVertexBuffer2])};if(w){let i=n.stencilModeForClipping(s).ref;0===i&&n.terrain&&v.clear({stencil:0});let o={func:b.EQUAL,mask:255};A.u_alpha_discard_threshold=.8,z(new r.StencilMode(o,i,255,b.KEEP,b.KEEP,b.INVERT)),A.u_alpha_discard_threshold=0,z(new r.StencilMode(o,i,255,b.KEEP,b.KEEP,b.KEEP))}else z(n.stencilModeForClipping(s))}w&&(n.resetStencilClippingMasks(),n.terrain&&v.clear({stencil:0}))},fill:function(n,i,o,a){let s=o.paint.get("fill-color"),l=o.paint.get("fill-opacity");if(0===l.constantOr(1))return;let u=n.colorModeForRenderPass(),c=o.paint.get("fill-pattern"),h=n.opaquePassEnabledForLayer()&&!c.constantOr(1)&&1===s.constantOr(r.Color.transparent).a&&1===l.constantOr(0)?"opaque":"translucent";if(n.renderPass===h){let s=n.depthModeForSublayer(1,"opaque"===n.renderPass?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly);rw(n,i,o,a,s,u,!1)}if("translucent"===n.renderPass&&o.paint.get("fill-antialias")){let s=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,r.DepthMode.ReadOnly);rw(n,i,o,a,s,u,!0)}},"fill-extrusion":function(n,i,o,a){let s=o.paint.get("fill-extrusion-opacity");if(0!==s&&"translucent"===n.renderPass){let l=new r.DepthMode(n.context.gl.LEQUAL,r.DepthMode.ReadWrite,n.depthRangeFor3D);if(1!==s||o.paint.get("fill-extrusion-pattern").constantOr(1))rE(n,i,o,a,l,r.StencilMode.disabled,r.ColorMode.disabled),rE(n,i,o,a,l,n.stencilModeFor3D(),n.colorModeForRenderPass()),n.resetStencilClippingMasks();else{let s=n.colorModeForRenderPass();rE(n,i,o,a,l,r.StencilMode.disabled,s)}}},hillshade:function(n,i,o,a){if("offscreen"!==n.renderPass&&"translucent"!==n.renderPass)return;let s=n.context,l=n.depthModeForSublayer(0,r.DepthMode.ReadOnly),u=n.colorModeForRenderPass(),c=n.terrain&&n.terrain.renderingToTexture,[h,d]="translucent"!==n.renderPass||c?[{},a]:n.stencilConfigForOverlap(a);for(let a of d){let s=i.getTile(a);if(s.needsHillshadePrepare&&"offscreen"===n.renderPass)!function(n,i,o,a,s,l){let u=n.context,c=u.gl;if(!i.dem)return;let h=i.dem;if(u.activeTexture.set(c.TEXTURE1),tN(n,i,h),!i.demTexture)return;i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);let d=h.dim;u.activeTexture.set(c.TEXTURE0);let f=i.fbo;if(!f){let n=new r.Texture(u,{width:d,height:d,data:null},c.RGBA);n.bind(c.LINEAR,c.CLAMP_TO_EDGE),(f=i.fbo=u.createFramebuffer(d,d,!0)).colorAttachment.set(n.texture)}u.bindFramebuffer.set(f.framebuffer),u.viewport.set([0,0,d,d]);let{tileBoundsBuffer:p,tileBoundsIndexBuffer:m,tileBoundsSegments:g}=n.getMercatorTileBoundsBuffers();n.useProgram("hillshadePrepare").draw(u,c.TRIANGLES,a,s,l,r.CullFaceMode.disabled,((n,i)=>{let o=i.stride,a=r.create();return r.ortho(a,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(a,a,[0,-r.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[o,o],u_zoom:n.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,h),o.id,p,m,g),i.needsHillshadePrepare=!1}(n,s,o,l,r.StencilMode.disabled,u);else if("translucent"===n.renderPass){let i=c&&n.terrain?n.terrain.stencilModeForRTTOverlap(a):h[a.overscaledZ];!function(n,i,o,a,s,l,u){let c=n.context,h=c.gl,d=o.fbo;if(!d)return;n.prepareDrawTile();let f=n.useProgram("hillshade");c.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,d.colorAttachment.get());let p=((n,i,o,a)=>{let s=o.paint.get("hillshade-shadow-color"),l=o.paint.get("hillshade-highlight-color"),u=o.paint.get("hillshade-accent-color"),c=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===o.paint.get("hillshade-illumination-anchor")&&(c-=n.transform.angle);let h=!n.options.moving;return{u_matrix:a||n.transform.calculateProjMatrix(i.tileID.toUnwrapped(),h),u_image:0,u_latrange:function(n,i){let o=Math.pow(2,i.canonical.z),a=i.canonical.y;return[new r.MercatorCoordinate(0,a/o).toLngLat().lat,new r.MercatorCoordinate(0,(a+1)/o).toLngLat().lat]}(0,i.tileID),u_light:[o.paint.get("hillshade-exaggeration"),c],u_shadow:s,u_highlight:l,u_accent:u}})(n,o,a,n.terrain?i.projMatrix:null);n.prepareDrawProgram(c,f,i.toUnwrapped());let{tileBoundsBuffer:m,tileBoundsIndexBuffer:g,tileBoundsSegments:y}=n.getTileBoundsBuffers(o);f.draw(c,h.TRIANGLES,s,l,u,r.CullFaceMode.disabled,p,a.id,m,g,y)}(n,a,s,o,l,i,u)}}s.viewport.set([0,0,n.width,n.height]),n.resetStencilClippingMasks()},raster:function(n,i,o,a,s,l){if("translucent"!==n.renderPass||0===o.paint.get("raster-opacity")||!a.length)return;let u=n.context,c=u.gl,h=i.getSource(),d=n.useProgram("raster"),f=n.colorModeForRenderPass(),p=n.terrain&&n.terrain.renderingToTexture,[m,g]=h instanceof eI||p?[{},a]:n.stencilConfigForOverlap(a),y=g[g.length-1].overscaledZ,_=!n.options.moving;for(let a of g){let s,g;let v=p?r.DepthMode.disabled:n.depthModeForSublayer(a.overscaledZ-y,1===o.paint.get("raster-opacity")?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly,c.LESS),b=a.toUnwrapped(),x=i.getTile(a);if(p&&(!x||!x.hasData()))continue;let w=p?a.projMatrix:n.transform.calculateProjMatrix(b,_),E=n.terrain&&p?n.terrain.stencilModeForRTTOverlap(a):m[a.overscaledZ],C=l?0:o.paint.get("raster-fade-duration");x.registerFadeDuration(C);let S=i.findLoadedParent(a,0),T=tW(x,S,i,n.transform,C);n.terrain&&n.terrain.prepareDrawTile();let M="nearest"===o.paint.get("raster-resampling")?c.NEAREST:c.LINEAR;u.activeTexture.set(c.TEXTURE0),x.texture.bind(M,c.CLAMP_TO_EDGE),u.activeTexture.set(c.TEXTURE1),S?(S.texture.bind(M,c.CLAMP_TO_EDGE),s=Math.pow(2,S.tileID.overscaledZ-x.tileID.overscaledZ),g=[x.tileID.canonical.x*s%1,x.tileID.canonical.y*s%1]):x.texture.bind(M,c.CLAMP_TO_EDGE),x.texture.useMipmap&&u.extTextureFilterAnisotropic&&n.transform.pitch>20&&c.texParameterf(c.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax);let k=rc(w,g||[0,0],s||1,T,o,h instanceof eI?h.perspectiveTransform:[0,0]);if(n.prepareDrawProgram(u,d,b),h instanceof eI)h.boundsBuffer&&h.boundsSegments&&d.draw(u,c.TRIANGLES,v,r.StencilMode.disabled,f,r.CullFaceMode.disabled,k,o.id,h.boundsBuffer,n.quadTriangleIndexBuffer,h.boundsSegments);else{let{tileBoundsBuffer:i,tileBoundsIndexBuffer:a,tileBoundsSegments:s}=n.getTileBoundsBuffers(x);d.draw(u,c.TRIANGLES,v,E,f,r.CullFaceMode.disabled,k,o.id,i,a,s)}}n.resetStencilClippingMasks()},background:function(n,i,o,a){let s=o.paint.get("background-color"),l=o.paint.get("background-opacity");if(0===l)return;let u=n.context,c=u.gl,h=n.transform,d=h.tileSize,f=o.paint.get("background-pattern");if(n.isPatternMissing(f))return;let p=!f&&1===s.a&&1===l&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass!==p)return;let m=r.StencilMode.disabled,g=n.depthModeForSublayer(0,"opaque"===p?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly),y=n.colorModeForRenderPass(),_=n.useProgram(f?"backgroundPattern":"background"),v,b=a;for(let p of(b||(b=Object.values(v=n.getBackgroundTiles()).map(r=>r.tileID)),f&&(u.activeTexture.set(c.TEXTURE0),n.imageManager.bind(n.context)),b)){let b=p.toUnwrapped(),x=a?p.projMatrix:n.transform.calculateProjMatrix(b);n.prepareDrawTile();let w=i?i.getTile(p):v?v[p.key]:new r.Tile(p,d,h.zoom,n),E=f?rg(x,l,n,f,{tileID:p,tileSize:d}):rm(x,l,s);n.prepareDrawProgram(u,_,b);let{tileBoundsBuffer:C,tileBoundsIndexBuffer:S,tileBoundsSegments:T}=n.getTileBoundsBuffers(w);_.draw(u,c.TRIANGLES,g,m,y,r.CullFaceMode.disabled,E,o.id,C,S,T)}},sky:function(n,i,o){let a=n.transform,s="mercator"===a.projection.name||"globe"===a.projection.name?1:r.smoothstep(7,8,a.zoom),l=o.paint.get("sky-opacity")*s;if(0===l)return;let u=n.context,c=o.paint.get("sky-type"),h=new r.DepthMode(u.gl.LEQUAL,r.DepthMode.ReadOnly,[0,1]),d=n.frameCounter/1e3%1;"atmosphere"===c?"offscreen"===n.renderPass?o.needsSkyboxCapture(n)&&(function(n,i,o,a){let s=n.context,l=s.gl,u=i.skyboxFbo;if(!u){u=i.skyboxFbo=s.createFramebuffer(32,32,!1),i.skyboxGeometry=new rD(s),i.skyboxTexture=s.gl.createTexture(),l.bindTexture(l.TEXTURE_CUBE_MAP,i.skyboxTexture),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_MAG_FILTER,l.LINEAR);for(let r=0;r<6;++r)l.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,l.RGBA,32,32,0,l.RGBA,l.UNSIGNED_BYTE,null)}s.bindFramebuffer.set(u.framebuffer),s.viewport.set([0,0,32,32]);let c=i.getCenter(n,!0),h=n.useProgram("skyboxCapture"),d=new Float64Array(16);r.identity(d),r.rotateY(d,d,-(.5*Math.PI)),rR(s,i,h,d,c,0),r.identity(d),r.rotateY(d,d,.5*Math.PI),rR(s,i,h,d,c,1),r.identity(d),r.rotateX(d,d,-(.5*Math.PI)),rR(s,i,h,d,c,2),r.identity(d),r.rotateX(d,d,.5*Math.PI),rR(s,i,h,d,c,3),r.identity(d),rR(s,i,h,d,c,4),r.identity(d),r.rotateY(d,d,Math.PI),rR(s,i,h,d,c,5),s.viewport.set([0,0,n.width,n.height])}(n,o),o.markSkyboxValid(n)):"sky"===n.renderPass&&function(n,i,o,a,s){let l=n.context,u=l.gl,c=n.transform,h=n.useProgram("skybox");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_CUBE_MAP,i.skyboxTexture);let d={u_matrix:c.skyboxMatrix,u_sun_direction:i.getCenter(n,!1),u_cubemap:0,u_opacity:a,u_temporal_offset:s};n.prepareDrawProgram(l,h),h.draw(l,u.TRIANGLES,o,r.StencilMode.disabled,n.colorModeForRenderPass(),r.CullFaceMode.backCW,d,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(n,o,h,l,d):"gradient"===c&&"sky"===n.renderPass&&function(n,i,o,a,s){var l,u,c;let h=n.context,d=h.gl,f=n.transform,p=n.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new rD(h)),h.activeTexture.set(d.TEXTURE0);let m=i.colorRampTexture;m||(m=i.colorRampTexture=new r.Texture(h,i.colorRamp,d.RGBA)),m.bind(d.LINEAR,d.CLAMP_TO_EDGE);let g=(l=f.skyboxMatrix,u=i.getCenter(n,!1),c=i.paint.get("sky-gradient-radius"),{u_matrix:l,u_color_ramp:0,u_center_direction:u,u_radius:r.degToRad(c),u_opacity:a,u_temporal_offset:s});n.prepareDrawProgram(h,p),p.draw(h,d.TRIANGLES,o,r.StencilMode.disabled,n.colorModeForRenderPass(),r.CullFaceMode.backCW,g,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(n,o,h,l,d)},debug:function(n,i,o){for(let a=0;a<o.length;a++)!function(n,i,o){let a=n.context,s=n.transform,l=a.gl,u="globe"===s.projection.name,c=o.projMatrix;if(u&&r.globeToMercatorTransition(s.zoom)>0){let n=r.transitionTileAABBinECEF(o.canonical,s),i=r.globeDenormalizeECEF(n);c=r.multiply(new Float32Array(16),s.globeMatrix,i),r.multiply(c,s.projMatrix,c)}let h=n.useProgram("debug",null,u?["PROJECTION_GLOBE_VIEW"]:null),d=i.getTileByID(o.key);n.terrain&&n.terrain.setupElevationDraw(d,h);let f=r.DepthMode.disabled,p=r.StencilMode.disabled,m=n.colorModeForRenderPass(),g="$debug";a.activeTexture.set(l.TEXTURE0),n.emptyTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),u?d._makeGlobeTileDebugBuffers(n.context,s):d._makeDebugTileBoundsBuffers(n.context,s.projection);let y=d._tileDebugBuffer||n.debugBuffer,_=d._tileDebugIndexBuffer||n.debugIndexBuffer,v=d._tileDebugSegments||n.debugSegments;h.draw(a,l.LINE_STRIP,f,p,m,r.CullFaceMode.disabled,rr(c,r.Color.red),g,y,_,v,null,null,null,[d._globeTileDebugBorderBuffer]);let b=d.latestRawTileData,x=Math.floor((b&&b.byteLength||0)/1024),w=i.getTile(o).tileSize,E=512/Math.min(w,512)*(o.overscaledZ/s.zoom)*.5,C=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(C+=` => ${o.overscaledZ}`),function(r,n){r.initDebugOverlayCanvas();let i=r.debugOverlayCanvas,o=r.context.gl,a=r.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,i.width,i.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(n,5,5),a.strokeText(n,5,5),r.debugOverlayTexture.update(i),r.debugOverlayTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}(n,C+=` ${x}kb`);let S=d._tileDebugTextBuffer||n.debugBuffer,T=d._tileDebugTextIndexBuffer||n.quadTriangleIndexBuffer,M=d._tileDebugTextSegments||n.debugSegments;h.draw(a,l.TRIANGLES,f,p,r.ColorMode.alphaBlended,r.CullFaceMode.disabled,rr(c,r.Color.transparent,E),g,S,T,M,null,null,null,[d._globeTileDebugTextBuffer])}(n,i,o[a])},custom:function(n,i,o,a){let s=n.context,l=o.implementation;if(!n.transform.projection.unsupportedLayers||!n.transform.projection.unsupportedLayers.includes("custom")||n.terrain&&(n.terrain.renderingToTexture||"offscreen"===n.renderPass)&&o.isLayerDraped()){if("offscreen"===n.renderPass){let i=l.prerender;if(i){if(n.setCustomLayerDefaults(),s.setColorMode(n.colorModeForRenderPass()),"globe"===n.transform.projection.name){let o=n.transform.pointMerc;i.call(l,s.gl,n.transform.customLayerMatrix(),n.transform.getProjection(),n.transform.globeToMercatorMatrix(),r.globeToMercatorTransition(n.transform.zoom),[o.x,o.y],n.transform.pixelsPerMeterRatio)}else i.call(l,s.gl,n.transform.customLayerMatrix());s.setDirty(),n.setBaseState()}}else if("translucent"===n.renderPass){if(n.terrain&&n.terrain.renderingToTexture){let i=l.renderToTile;if(i){let o=a[0].canonical,u=new r.MercatorCoordinate(o.x+a[0].wrap*(1<<o.z),o.y,o.z);s.setDepthMode(r.DepthMode.disabled),s.setStencilMode(r.StencilMode.disabled),s.setColorMode(n.colorModeForRenderPass()),n.setCustomLayerDefaults(),i.call(l,s.gl,u),s.setDirty(),n.setBaseState()}return}n.setCustomLayerDefaults(),s.setColorMode(n.colorModeForRenderPass()),s.setStencilMode(r.StencilMode.disabled);let i="3d"===l.renderingMode?new r.DepthMode(n.context.gl.LEQUAL,r.DepthMode.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,r.DepthMode.ReadOnly);if(s.setDepthMode(i),"globe"===n.transform.projection.name){let i=n.transform.pointMerc;l.render(s.gl,n.transform.customLayerMatrix(),n.transform.getProjection(),n.transform.globeToMercatorMatrix(),r.globeToMercatorTransition(n.transform.zoom),[i.x,i.y],n.transform.pixelsPerMeterRatio)}else l.render(s.gl,n.transform.customLayerMatrix());s.setDirty(),n.setBaseState(),s.bindFramebuffer.set(null)}}else r.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class rj{constructor(n,i,o=!1){this.context=new eS(n,o),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=r.SourceCache.maxUnderzooming+r.SourceCache.maxOverzooming+1,this.depthEpsilon=1/65536,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(r,n){let i=!!r&&!!r.terrain&&this.transform.projection.supportsTerrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new tJ(this,r));let o=this._terrain;this.transform.elevation=i?o:null,o.update(r,this.transform,n)}_updateFog(r){let n=r.fog;if(!n||"globe"===this.transform.projection.name||1>n.getOpacity(this.transform.pitch)||.03>n.properties.get("horizon-blend"))return void(this.transform.fogCullDistSq=null);let[i,o]=n.getFovAdjustedRange(this.transform._fov);if(i>o)return void(this.transform.fogCullDistSq=null);let a=i+.78*(o-i);this.transform.fogCullDistSq=a*a}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(n,i){if(this.width=n*r.exported.devicePixelRatio,this.height=i*r.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let r of this.style.order)this.style._layers[r].resize()}setup(){let n=this.context,i=new r.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(r.EXTENT,0),i.emplaceBack(0,r.EXTENT),i.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(i,r.posAttributes.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);let o=new r.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(r.EXTENT,0),o.emplaceBack(0,r.EXTENT),o.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=n.createVertexBuffer(o,r.posAttributes.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);let a=new r.StructArrayLayout2i4;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(-1,1),a.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(a,r.posAttributes.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);let s=new r.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(r.EXTENT,0,r.EXTENT,0),s.emplaceBack(0,r.EXTENT,0,r.EXTENT),s.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.mercatorBoundsBuffer=n.createVertexBuffer(s,r.boundsAttributes.members),this.mercatorBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);let l=new r.StructArrayLayout3ui6;l.emplaceBack(0,1,2),l.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(l);let u=new r.StructArrayLayout1ui2;for(let r of[0,1,3,2,0])u.emplaceBack(r);this.debugIndexBuffer=n.createIndexBuffer(u),this.emptyTexture=new r.Texture(n,new r.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),n.gl.RGBA),this.identityMat=r.create();let c=this.context.gl;this.stencilClearMode=new r.StencilMode({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO),this.loadTimeStamps.push(r.window.performance.now()),this.atmosphereBuffer=new rB(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(r){return r._makeTileBoundsBuffers(this.context,this.transform.projection),r._tileBoundsBuffer?{tileBoundsBuffer:r._tileBoundsBuffer,tileBoundsIndexBuffer:r._tileBoundsIndexBuffer,tileBoundsSegments:r._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){let n=this.context,i=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(n,i.TRIANGLES,r.DepthMode.disabled,this.stencilClearMode,r.ColorMode.disabled,r.CullFaceMode.disabled,tG(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(n,i,o){if(!i||this.currentStencilSource===i.id||!n.isTileClipped()||!o||0===o.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let r=!1;for(let n of o)if(void 0===this._tileClippingMaskIDs[n.key]){r=!0;break}if(!r)return}this.currentStencilSource=i.id;let a=this.context,s=a.gl;this.nextStencilID+o.length>256&&this.clearStencil(),a.setColorMode(r.ColorMode.disabled),a.setDepthMode(r.DepthMode.disabled);let l=this.useProgram("clippingMask");for(let n of(this._tileClippingMaskIDs={},o)){let o=i.getTile(n),u=this._tileClippingMaskIDs[n.key]=this.nextStencilID++,{tileBoundsBuffer:c,tileBoundsIndexBuffer:h,tileBoundsSegments:d}=this.getTileBoundsBuffers(o);l.draw(a,s.TRIANGLES,r.DepthMode.disabled,new r.StencilMode({func:s.ALWAYS,mask:0},u,255,s.KEEP,s.KEEP,s.REPLACE),r.ColorMode.disabled,r.CullFaceMode.disabled,tG(n.projMatrix),"$clipping",c,h,d)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let n=this.nextStencilID++,i=this.context.gl;return new r.StencilMode({func:i.NOTEQUAL,mask:255},n,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(n){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(n);let i=this.context.gl;return new r.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(n){let i=this.context.gl,o=n.sort((r,n)=>n.overscaledZ-r.overscaledZ),a=o[o.length-1].overscaledZ,s=o[0].overscaledZ-a+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();let n={};for(let o=0;o<s;o++)n[o+a]=new r.StencilMode({func:i.GEQUAL,mask:255},o+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=s,[n,o]}return[{[a]:r.StencilMode.disabled},o]}colorModeForRenderPass(){let n=this.context.gl;if(this._showOverdrawInspector){let i=1/8;return new r.ColorMode([n.CONSTANT_COLOR,n.ONE],new r.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?r.ColorMode.unblended:r.ColorMode.alphaBlended}depthModeForSublayer(n,i,o){if(!this.opaquePassEnabledForLayer())return r.DepthMode.disabled;let a=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new r.DepthMode(o||this.context.gl.LEQUAL,i,[a,a])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,i){this.style=n,this.options=i,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();let o=this.style.order,a=this.style._sourceCaches;for(let r in a){let n=a[r];n.used&&n.prepare(this.context)}let s={},l={},u={};for(let r in a){let n=a[r];s[r]=n.getVisibleCoordinates(),l[r]=s[r].slice().reverse(),u[r]=n.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let r=0;r<o.length;r++)if(this.style._layers[o[r]].is3D()){this.opaquePassCutoff=r;break}if(this.terrain&&(this.terrain.updateTileBinding(u),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new r.GlobeSharedBuffers(this.context)),!r.isMapAuthenticated(this.context.gl))return;for(let r of(this.renderPass="offscreen",o)){let i=this.style._layers[r],o=n._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;let a=o?l[o.id]:void 0;("custom"===i.type||i.isSky()||a&&a.length)&&this.renderLayer(this,o,i,a)}this.depthRangeFor3D=[0,1-(n.order.length+2)*this.numSublayers*this.depthEpsilon];let c=this.terrain;if(c&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&c.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:i.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){let r=this.style._layers[o[this.currentLayer]],i=n._getLayerSourceCache(r);if(r.isSky())continue;let a=i?l[i.id]:void 0;this._renderTileClippingMasks(r,i,a),this.renderLayer(this,i,r,a)}if(this.style.fog&&this.transform.projection.supportsFog&&function(n,i){var o,a,s;let l=n.context,u=l.gl,c=n.transform,h=new r.DepthMode(u.LEQUAL,r.DepthMode.ReadOnly,[0,1]),d=n.useProgram("globeAtmosphere",null,"globe"===c.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),f=r.globeToMercatorTransition(c.zoom),p=i.properties.get("color").toArray01(),m=i.properties.get("high-color").toArray01(),g=i.properties.get("space-color").toArray01PremultipliedAlpha(),y=r.identity$1([]);r.rotateY$1(y,y,-r.degToRad(c._center.lng)),r.rotateX$1(y,y,r.degToRad(c._center.lat)),r.rotateZ$1(y,y,c.angle),r.rotateX$1(y,y,-c._pitch);let _=r.fromQuat(new Float32Array(16),y),v=r.mapValue(i.properties.get("star-intensity"),0,1,0,.25),b=r.mapValue(i.properties.get("horizon-blend"),0,1,5e-4,.25),x=r.globeUseCustomAntiAliasing(n,l,c)&&5e-4===b?c.worldSize/(2*Math.PI*1.025)-1:c.globeRadius,w=n.frameCounter/1e3%1,E=r.length(c.globeCenterInViewSpace),C=Math.sqrt(Math.pow(E,2)-Math.pow(x,2)),S=Math.acos(C/E),T=(o=c.frustumCorners.TL,a=c.frustumCorners.TR,s=c.frustumCorners.BR,{u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:c.frustumCorners.BL,u_horizon:c.frustumCorners.horizon,u_transition:f,u_fadeout_range:b,u_color:p,u_high_color:m,u_space_color:g,u_star_intensity:v,u_star_size:5*r.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:w,u_horizon_angle:S,u_rotation_matrix:_});n.prepareDrawProgram(l,d);let M=n.atmosphereBuffer;M&&d.draw(l,u.TRIANGLES,h,r.StencilMode.disabled,r.ColorMode.alphaBlended,r.CullFaceMode.backCW,T,"skybox",M.vertexBuffer,M.indexBuffer,M.segments)}(this,this.style.fog),this.renderPass="sky",(r.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){let r=this.style._layers[o[this.currentLayer]],i=n._getLayerSourceCache(r);r.isSky()&&this.renderLayer(this,i,r,i?l[i.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<o.length;){let r=this.style._layers[o[this.currentLayer]],i=n._getLayerSourceCache(r);if(r.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(r)){if(r.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}let a=i?("symbol"===r.type?u:l)[i.id]:void 0;this._renderTileClippingMasks(r,i,i?s[i.id]:void 0),this.renderLayer(this,i,r,a),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let i=null;r.values(this.style._layers).forEach(r=>{let o=n._getLayerSourceCache(r);o&&!r.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<o.getSource().maxzoom)&&(i=o)}),i&&this.options.showTileBoundaries&&rN.debug(this,i,i.getVisibleCoordinates())}this.options.showPadding&&function(r){var n,i;let o=r.transform.padding;rI(r,r.transform.height-(o.top||0),3,rC),rI(r,o.bottom||0,3,rS),rL(r,o.left||0,3,rT),rL(r,r.transform.width-(o.right||0),3,rM);let a=r.transform.centerPoint;n=a.x,i=r.transform.height-a.y,rA(r,n-1,i-10,2,20,rk),rA(r,n-10,i-1,20,2,rk)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(r.window.performance.now()),this.saveCanvasCopy())}renderLayer(r,n,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||o&&o.length)&&(this.id=i.id,this.gpuTimingStart(i),r.transform.projection.unsupportedLayers&&r.transform.projection.unsupportedLayers.includes(i.type)&&(!r.terrain||"custom"!==i.type)||rN[i.type](r,n,i,o,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(r){if(!this.options.gpuTiming)return;let n=this.context.extTimerQuery,i=this.gpuTimers[r.id];i||(i=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:n.createQueryEXT()}),i.calls++,n.beginQueryEXT(n.TIME_ELAPSED_EXT,i.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){let r=this.context.extTimerQuery,n=r.createQueryEXT();this.deferredRenderGpuTimeQueries.push(n),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;let r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;let r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}collectGpuTimers(){let r=this.gpuTimers;return this.gpuTimers={},r}collectDeferredRenderGpuQueries(){let r=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],r}queryGpuTimers(r){let n={};for(let i in r){let o=r[i],a=this.context.extTimerQuery,s=a.getQueryObjectEXT(o.query,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(o.query),n[i]=s}return n}queryGpuTimeDeferredRender(r){if(!this.options.gpuTimingDeferredRender)return 0;let n=this.context.extTimerQuery,i=0;for(let o of r)i+=n.getQueryObjectEXT(o,n.QUERY_RESULT_EXT)/1e6,n.deleteQueryEXT(o);return i}translatePosMatrix(n,i,o,a,s){if(!o[0]&&!o[1])return n;let l=s?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(l){let r=Math.sin(l),n=Math.cos(l);o=[o[0]*n-o[1]*r,o[0]*r+o[1]*n]}let u=[s?o[0]:z(i,o[0],this.transform.zoom),s?o[1]:z(i,o[1],this.transform.zoom),0],c=new Float32Array(16);return r.translate(c,n,u),c}saveTileTexture(r){let n=this._tileTextures[r.size[0]];n?n.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let n=this._tileTextures[r];return n&&n.length>0?n.pop():null}isPatternMissing(r){return null===r||void 0!==r&&!this.imageManager.getPattern(r.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){let r=this.terrain&&this.terrain.renderingToTexture,n=this.terrain&&0===this.terrain.exaggeration(),i=this.style&&this.style.fog,o=[];return this.terrainRenderModeElevated()&&o.push("TERRAIN"),"globe"===this.transform.projection.name&&o.push("GLOBE"),n&&o.push("ZERO_EXAGGERATION"),i&&!r&&0!==i.getOpacity(this.transform.pitch)&&o.push("FOG"),r&&o.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&o.push("OVERDRAW_INSPECTOR"),o}useProgram(r,n,i){this.cache=this.cache||{};let o=this.currentGlobalDefines().concat(i||[]),a=tQ.cacheKey(tD[r],r,o,n);return this.cache[a]||(this.cache[a]=new tQ(this.context,r,tD[r],n,ry[r],o)),this.cache[a]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(n,i,o){if(this.terrain&&this.terrain.renderingToTexture)return;let a=this.style.fog;if(a){let s=a.getOpacity(this.transform.pitch),l=((n,i,o,a,s,l,u,c,h,d,f)=>{let p=n.transform,m=i.properties.get("color").toArray01();m[3]=a;let g=n.frameCounter/1e3%1;return{u_fog_matrix:o?p.calculateFogTileMatrix(o):n.identityMat,u_fog_range:i.getFovAdjustedRange(p._fov),u_fog_color:m,u_fog_horizon_blend:i.properties.get("horizon-blend"),u_fog_temporal_offset:g,u_frustum_tl:s,u_frustum_tr:l,u_frustum_br:u,u_frustum_bl:c,u_globe_pos:h,u_globe_radius:d,u_viewport:f,u_globe_transition:r.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,a,o,s,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*r.exported.devicePixelRatio,this.transform.height*r.exported.devicePixelRatio]);i.setFogUniformValues(n,l)}}setTileLoadedFlag(r){this.tileLoaded=r}saveCanvasCopy(){let r=this.canvasCopy();r&&(this.frameCopies.push(r),this.tileLoaded=!1)}canvasCopy(){let r=this.context.gl,n=r.createTexture();return r.bindTexture(r.TEXTURE_2D,n),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,r.drawingBufferWidth,r.drawingBufferHeight,0),n}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;let r=this.style&&this.style.fog;return!!r&&0!==r.getOpacity(this.transform.pitch)}getBackgroundTiles(){let n=this._backgroundTiles,i=this._backgroundTiles={},o=this.transform.coveringTiles({tileSize:512});for(let a of o)i[a.key]=n[a.key]||new r.Tile(a,512,this.transform.tileZoom,this);return i}clearBackgroundTiles(){this._backgroundTiles={}}}class rV{constructor(r=0,n=0,i=0,o=0){if(isNaN(r)||r<0||isNaN(n)||n<0||isNaN(i)||i<0||isNaN(o)||o<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=n,this.left=i,this.right=o}interpolate(n,i,o){return null!=i.top&&null!=n.top&&(this.top=r.number(n.top,i.top,o)),null!=i.bottom&&null!=n.bottom&&(this.bottom=r.number(n.bottom,i.bottom,o)),null!=i.left&&null!=n.left&&(this.left=r.number(n.left,i.left,o)),null!=i.right&&null!=n.right&&(this.right=r.number(n.right,i.right,o)),this}getCenter(n,i){let o=r.clamp((this.left+n-this.right)/2,0,n),a=r.clamp((this.top+i-this.bottom)/2,0,i);return new r.Point(o,a)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new rV(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function rU(n,i){let o=r.getColumn(n,3);r.fromQuat(n,i),r.setColumn(n,3,o)}function rq(n,i){let o=r.identity$1([]);return r.rotateZ$1(o,o,-i),r.rotateX$1(o,o,-n),o}function r$(n,i){let o=[n[0],n[1],0],a=[i[0],i[1],0];if(r.length(o)>=1e-15){let n=r.normalize([],o);r.scale$2(a,n,r.dot(a,n)),i[0]=a[0],i[1]=a[1]}let s=r.cross([],i,n);if(1e-15>r.len(s))return null;let l=Math.atan2(-s[1],s[0]);return rq(Math.atan2(Math.sqrt(n[0]*n[0]+n[1]*n[1]),-n[2]),l)}class rH{constructor(r,n){this.position=r,this.orientation=n}get position(){return this._position}set position(n){if(n){let i=n instanceof r.MercatorCoordinate?n:new r.MercatorCoordinate(n[0],n[1],n[2]);this._renderWorldCopies&&(i.x=r.wrap(i.x,0,1)),this._position=i}else this._position=null}lookAtPoint(n,i){if(this.orientation=null,!this.position)return;let o=this.position,a=this._elevation?this._elevation.getAtPointOrZero(r.MercatorCoordinate.fromLngLat(n)):0,s=r.MercatorCoordinate.fromLngLat(n,a),l=[s.x-o.x,s.y-o.y,s.z-o.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=r$(l,i)}setPitchBearing(n,i){this.orientation=rq(r.degToRad(n),r.degToRad(-i))}}class rZ{constructor(n,i){this._transform=r.identity([]),this.orientation=i,this.position=n}get mercatorPosition(){let n=this.position;return new r.MercatorCoordinate(n[0],n[1],n[2])}get position(){let n=r.getColumn(this._transform,3);return[n[0],n[1],n[2]]}set position(n){n&&r.setColumn(this._transform,3,[n[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(n){this._orientation=n||r.identity$1([]),n&&rU(this._transform,this._orientation)}getPitchBearing(){let r=this.forward(),n=this.right();return{bearing:Math.atan2(-n[1],n[0]),pitch:Math.atan2(Math.sqrt(r[0]*r[0]+r[1]*r[1]),-r[2])}}setPitchBearing(r,n){this._orientation=rq(r,n),rU(this._transform,this._orientation)}forward(){let n=r.getColumn(this._transform,2);return[-n[0],-n[1],-n[2]]}up(){let n=r.getColumn(this._transform,1);return[-n[0],-n[1],-n[2]]}right(){let n=r.getColumn(this._transform,0);return[n[0],n[1],n[2]]}getCameraToWorld(n,i){let o=new Float64Array(16);return r.invert(o,this.getWorldToCamera(n,i)),o}getWorldToCameraPosition(n,i,o){let a=this.position;r.scale$2(a,a,-n);let s=new Float64Array(16);return r.fromScaling(s,[o,o,o]),r.translate(s,s,a),s[10]*=i,s}getWorldToCamera(n,i){let o=new Float64Array(16),a=new Float64Array(4),s=this.position;return r.conjugate(a,this._orientation),r.scale$2(s,s,-n),r.fromQuat(o,a),r.translate(o,o,s),o[1]*=-1,o[5]*=-1,o[9]*=-1,o[13]*=-1,o[8]*=i,o[9]*=i,o[10]*=i,o[11]*=i,o}getCameraToClipPerspective(n,i,o,a){let s=new Float64Array(16);return r.perspective(s,n,i,o,a),s}getDistanceToElevation(n,i=!1){let o=0===n?0:r.mercatorZfromAltitude(n,i?r.latFromMercatorY(this.position[1]):this.position[1]),a=this.forward();return(o-this.position[2])/a[2]}clone(){return new rZ([...this.position],[...this.orientation])}}function rG(n,i){let o=rX(n.projection,n.zoom,n.width,n.height),a=function(n,i,o,a,s){let l=new r.LngLat(o.lng-180*rY,o.lat),u=new r.LngLat(o.lng+180*rY,o.lat),c=n.project(l.lng,l.lat),h=n.project(u.lng,u.lat),d=-Math.atan2(h.y-c.y,h.x-c.x),f=r.MercatorCoordinate.fromLngLat(o);f.y=r.clamp(f.y,-1+rY,1-rY);let p=f.toLngLat(),m=n.project(p.lng,p.lat),g=r.MercatorCoordinate.fromLngLat(p);g.x+=rY;let y=g.toLngLat(),_=n.project(y.lng,y.lat),v=rJ(_.x-m.x,_.y-m.y,d),b=r.MercatorCoordinate.fromLngLat(p);b.y+=rY;let x=b.toLngLat(),w=n.project(x.lng,x.lat),E=rJ(w.x-m.x,w.y-m.y,d),C=Math.abs(v.x)/Math.abs(E.y),S=r.identity([]);r.rotateZ(S,S,-d*(1-(s?0:a)));let T=r.identity([]);return r.scale(T,T,[1,1-(1-C)*a,1]),T[4]=-E.x/E.y*a,r.rotateZ(T,T,d),r.multiply(T,S,T),T}(n.projection,0,n.center,o,i),s=rW(n);return r.scale(a,a,[s,s,1]),a}function rW(n){let i=n.projection,o=rX(n.projection,n.zoom,n.width,n.height),a=rK(i,n.center),s=rK(i,r.LngLat.convert(i.center));return Math.pow(2,a*o+(1-o)*s)}function rX(n,i,o,a,s=1/0){let l=n.range;if(!l)return 0;let u=Math.min(s,Math.max(o,a)),c=Math.log(u/1024)/Math.LN2;return r.smoothstep(l[0]+c,l[1]+c,i)}let rY=1/4e4;function rK(n,i){let o=r.clamp(i.lat,-r.MAX_MERCATOR_LATITUDE,r.MAX_MERCATOR_LATITUDE),a=new r.LngLat(i.lng-180*rY,o),s=new r.LngLat(i.lng+180*rY,o),l=n.project(a.lng,o),u=n.project(s.lng,o),c=r.MercatorCoordinate.fromLngLat(a),h=r.MercatorCoordinate.fromLngLat(s),d=u.x-l.x,f=u.y-l.y,p=h.x-c.x,m=h.y-c.y,g=Math.sqrt((p*p+m*m)/(d*d+f*f));return Math.log(g)/Math.LN2}function rJ(r,n,i){let o=Math.cos(i),a=Math.sin(i);return{x:r*o-n*a,y:r*a+n*o}}class rQ{constructor(n,i,o,a,s,l,u){this.tileSize=512,this._renderWorldCopies=void 0===s||s,this._minZoom=n||0,this._maxZoom=i||22,this._minPitch=null==o?0:o,this._maxPitch=null==a?60:a,this.setProjection(l),this.setMaxBounds(u),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new rV,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new rZ,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){let r=new rQ(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return r._elevation=this._elevation,r._centerAltitude=this._centerAltitude,r._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,r.tileSize=this.tileSize,r.mercatorFromTransition=this.mercatorFromTransition,r.width=this.width,r.height=this.height,r.cameraElevationReference=this.cameraElevationReference,r._center=this._center,r._setZoom(this.zoom),r._seaLevelZoom=this._seaLevelZoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._nearZ=this._nearZ,r._farZ=this._farZ,r._averageElevation=this._averageElevation,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._camera=this._camera.clone(),r._calcMatrices(),r.freezeTileCoverage=this.freezeTileCoverage,r.frustumCorners=this.frustumCorners,r}get elevation(){return this._elevation}set elevation(r){this._elevation!==r&&(this._elevation=r,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(r,n=!1){let i=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||i)&&this._updateCameraOnTerrain(),(r||i)&&this._constrainCamera(n),this._calcMatrices()}getProjection(){return r.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};let i=this.projection?this.getProjection():void 0;this.projection=r.getProjection(this.projectionOptions);let o=!a(i,this.getProjection());return o&&this._calcMatrices(),this.mercatorFromTransition=!1,o}setMercatorFromTransition(){let n=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=r.getProjection({name:"mercator"});let i=n!==this.projection.name;return i&&this._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(r){void 0===r?r=!0:null===r&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){let r=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(r))}get cameraWorldSize(){let r=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(r))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return r.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.Point(this.width,this.height)}get bearing(){return r.wrap(this.rotation,-180,180)}set bearing(r){this.rotation=r}get rotation(){return-this.angle/Math.PI*180}set rotation(n){var i,o,a,s,l,u,c,h,d,f;let p=-n*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(i=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),o=this.rotationMatrix,a=this.rotationMatrix,s=this.angle,l=a[0],u=a[1],c=a[2],h=a[3],d=Math.sin(s),f=Math.cos(s),o[0]=l*f+c*d,o[1]=u*f+h*d,o[2]=-(l*d)+c*f,o[3]=-(u*d)+h*f)}get pitch(){return this._pitch/Math.PI*180}set pitch(n){let i=r.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){let r=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/r)}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=r.degToRad(n),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(r){this._averageElevation=r,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(r){let n=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==n&&(this._unmodified=!1,this._setZoom(n),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(r){this._zoom=r,this.scale=this.zoomScale(r),this.tileZoom=Math.floor(r),this.zoomFraction=r-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);let r=this._elevation;this._centerAltitude=r.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=r.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;let n=this._elevation,i=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],o=this.horizonLineFromTop(),a=0,s=0;for(let l=0;l<i.length;l++){let u=new r.Point(i[l][0]*this.width,o+i[l][1]*(this.height-o)),c=n.pointCoordinate(u);if(!c)continue;let h=1/Math.hypot(c[0]-this._camera.position[0],c[1]-this._camera.position[1]);a+=c[3]*h,s+=h}return 0===s?NaN:a/s}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;let r=this._seaLevelZoom,n=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),i=this.pixelsPerMeter/this.worldSize*n,o=this._mercatorZfromZoom(r),a=this._mercatorZfromZoom(this._maxZoom),s=Math.max(o-i,a);this._setZoom(this._zoomFromMercatorZ(s))}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}computeZoomRelativeTo(n){let i;let o=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,n.toAltitude()));i=n.z<this._camera.position[2]?[o.x,o.y,o.z]:[n.x,n.y,n.z];let a=r.length(r.sub([],this._camera.position,i));return r.clamp(this._zoomFromMercatorZ(a),this._minZoom,this._maxZoom)}setFreeCameraOptions(n){if(!this.height||!n.position&&!n.orientation)return;this._updateCameraState();let i=!1;if(n.orientation&&!r.exactEquals(n.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(n.orientation)),n.position){let o=[n.position.x,n.position.y,n.position.z];r.exactEquals$1(o,this._camera.position)||(this._setCameraPosition(o),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();let n=this._camera.position,i=new rH;return i.position=new r.MercatorCoordinate(n[0],n[1],n[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this.renderWorldCopies,i}_setCameraOrientation(n){if(!r.length$1(n))return!1;r.normalize$1(n,n);let i=r.transformQuat([],[0,0,-1],n),o=r.transformQuat([],[0,-1,0],n);if(o[2]<0)return!1;let a=r$(i,o);return!!a&&(this._camera.orientation=a,!0)}_setCameraPosition(n){let i=this.zoomScale(this.minZoom)*this.tileSize,o=this.zoomScale(this.maxZoom)*this.tileSize,a=this.cameraToCenterDistance;n[2]=r.clamp(n[2],a/o,a/i),this._camera.position=n}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,n,i){this._unmodified=!1,this._edgeInsets.interpolate(r,n,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){let n=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,n)}getVisibleUnwrappedCoordinates(n){let i=[new r.UnwrappedTileID(0,n)];if(this.renderWorldCopies){let o=this.pointCoordinate(new r.Point(0,0)),a=this.pointCoordinate(new r.Point(this.width,0)),s=this.pointCoordinate(new r.Point(this.width,this.height)),l=this.pointCoordinate(new r.Point(0,this.height)),u=Math.floor(Math.min(o.x,a.x,s.x,l.x)),c=Math.floor(Math.max(o.x,a.x,s.x,l.x));for(let o=u-1;o<=c+1;o++)0!==o&&i.push(new r.UnwrappedTileID(o,n))}return i}coveringTiles(n){let i=this.coveringZoomLevel(n),o=i,a=this.elevation&&!n.isTerrainDEM,s="mercator"===this.projection.name;if(void 0!==n.minzoom&&i<n.minzoom)return[];void 0!==n.maxzoom&&i>n.maxzoom&&(i=n.maxzoom);let l=this.locationCoordinate(this.center),u=this.center.lat,c=1<<i,h=[c*l.x,c*l.y,0],d="globe"===this.projection.name,f=!d,p=r.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,f),m=d?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),g=c*r.mercatorZfromAltitude(1,this.center.lat),y=this._camera.position[2]/r.mercatorZfromAltitude(1,this.center.lat),_=[c*m.x,c*m.y,y*(f?1:g)],v=this.cameraToCenterDistance/n.tileSize*(n.roundZoom?1:.502),b=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?i:0,x=n.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,w=n.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,E=this.projection.isReprojectedInTileSpace?rW(this):1,C=n=>{let i=1/4e4,o=new r.MercatorCoordinate(n.x+i,n.y,n.z),a=new r.MercatorCoordinate(n.x,n.y+i,n.z),s=n.toLngLat(),l=o.toLngLat(),u=a.toLngLat(),c=this.locationCoordinate(s),h=this.locationCoordinate(l),d=this.locationCoordinate(u),f=Math.hypot(h.x-c.x,h.y-c.y),p=Math.hypot(d.x-c.x,d.y-c.y);return Math.sqrt(f*p)*E/i},S=n=>({aabb:r.tileAABB(this,c,0,0,0,n,w,x,this.projection),zoom:0,x:0,y:0,minZ:w,maxZ:x,wrap:n,fullyVisible:!1}),T=[],M=[],k=i,I=n.reparseOverscaled?o:i,L=r=>r*r,A=L((y-this._centerAltitude)*g),z=r=>{if(!this._elevation||!r.tileID||!s)return;let n=this._elevation.getMinMaxForTile(r.tileID),i=r.aabb;n?(i.min[2]=n.min,i.max[2]=n.max,i.center[2]=(i.min[2]+i.max[2])/2):(r.shouldSplit=P(r),r.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=this._centerAltitude))},P=n=>{if(n.zoom<b)return!0;if(n.zoom===k)return!1;if(null!=n.shouldSplit)return n.shouldSplit;let i=n.aabb.distanceX(_),s=n.aabb.distanceY(_),l=A,c=1;if(d){l=L(n.aabb.distanceZ(_));let i=Math.pow(2,n.zoom),o=r.latFromMercatorY((n.y+1)/i),a=r.latFromMercatorY(n.y/i),s=Math.min(Math.max(u,o),a),h=r.circumferenceAtLatitude(s)/r.circumferenceAtLatitude(u);if(c=s===u?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,h/this._mercatorScaleRatio),this.zoom<=r.GLOBE_ZOOM_THRESHOLD_MIN&&n.zoom===k-1&&h>=.9)return!0}else if(a&&(l=L(n.aabb.distanceZ(_)*g)),this.projection.isReprojectedInTileSpace&&o<=5){let i=Math.pow(2,n.zoom),o=C(new r.MercatorCoordinate((n.x+.5)/i,(n.y+.5)/i));c=o>.85?1:o}let h=i*i+s*s+l,f=L((1<<k-n.zoom)*v*c*((r,n)=>{if(n*L(.707)<r)return 1;let i=Math.sqrt(n/r);return i/(1.4144271570014144+(Math.pow(1.1,i-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(l,A),h));return h<f};if(this.renderWorldCopies)for(let r=1;r<=3;r++)T.push(S(-r)),T.push(S(r));for(T.push(S(0));T.length>0;){let o=T.pop(),l=o.x,u=o.y,f=o.fullyVisible;if(!f){let r=o.aabb.intersects(p);if(0===r)continue;f=2===r}if(o.zoom!==k&&P(o))for(let n=0;n<4;n++){let i=(l<<1)+n%2,h=(u<<1)+(n>>1),p={aabb:s?o.aabb.quadrant(n):r.tileAABB(this,c,o.zoom+1,i,h,o.wrap,o.minZ,o.maxZ,this.projection),zoom:o.zoom+1,x:i,y:h,wrap:o.wrap,fullyVisible:f,tileID:void 0,shouldSplit:void 0,minZ:o.minZ,maxZ:o.maxZ};a&&!d&&(p.tileID=new r.OverscaledTileID(o.zoom+1===k?I:o.zoom+1,o.wrap,o.zoom+1,i,h),z(p)),T.push(p)}else{let a=o.zoom===k?I:o.zoom;if(n.minzoom&&n.minzoom>a)continue;let s=h[0]-(.5+l+(o.wrap<<o.zoom))*(1<<i-o.zoom),c=h[1]-.5-u,d=o.tileID?o.tileID:new r.OverscaledTileID(a,o.wrap,o.zoom,l,u);M.push({tileID:d,distanceSq:s*s+c*c})}}if(this.fogCullDistSq){let i=this.fogCullDistSq,o=this.horizonLineFromTop();M=M.filter(a=>{let s=[0,0,0,1],l=[r.EXTENT,r.EXTENT,0,1],u=this.calculateFogTileMatrix(a.tileID.toUnwrapped());r.transformMat4$1(s,s,u),r.transformMat4$1(l,l,u);let c=r.getAABBPointSquareDist(s,l);if(0===c)return!0;let h=!1,d=this._elevation;if(d&&c>i&&0!==o){let i;let s=this.calculateProjMatrix(a.tileID.toUnwrapped());n.isTerrainDEM||(i=d.getMinMaxForTile(a.tileID)),i||(i={min:w,max:x});let l=r.furthestTileCorner(this.rotation),u=[l[0]*r.EXTENT,l[1]*r.EXTENT,i.max];r.transformMat4(u,u,s),h=(1-u[1])*this.height*.5<o}return c<i||h})}return M.sort((r,n)=>r.distanceSq-n.distanceSq).map(r=>r.tileID)}resize(r,n){this.width=r,this.height=n,this.pixelsToGLUnits=[2/r,-2/n],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(n){let i=r.clamp(n.lat,-r.MAX_MERCATOR_LATITUDE,r.MAX_MERCATOR_LATITUDE),o=this.projection.project(n.lng,i);return new r.Point(o.x*this.worldSize,o.y*this.worldSize)}unproject(r){return this.projection.unproject(r.x/this.worldSize,r.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/r.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(n,i){let o,a;let s=this.centerPoint;if("globe"===this.projection.name){let r=this.worldSize;o=(i.x-s.x)/r,a=(i.y-s.y)/r}else{let r=this.pointCoordinate(i),n=this.pointCoordinate(s);o=r.x-n.x,a=r.y-n.y}let l=this.locationCoordinate(n);this.setLocation(new r.MercatorCoordinate(l.x-o,l.y-a))}setLocation(r){this.center=this.coordinateLocation(r),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(r){return this.projection.locationPoint(this,r)}locationPoint3D(r){return this.projection.locationPoint(this,r,!0)}pointLocation(r){return this.coordinateLocation(this.pointCoordinate(r))}pointLocation3D(r){return this.coordinateLocation(this.pointCoordinate3D(r))}locationCoordinate(n,i){let o=i?r.mercatorZfromAltitude(i,n.lat):void 0,a=this.projection.project(n.lng,n.lat);return new r.MercatorCoordinate(a.x,a.y,o)}coordinateLocation(r){return this.projection.unproject(r.x,r.y)}pointRayIntersection(n,i){let o=null!=i?i:this._centerAltitude,a=[n.x,n.y,0,1],s=[n.x,n.y,1,1];r.transformMat4$1(a,a,this.pixelMatrixInverse),r.transformMat4$1(s,s,this.pixelMatrixInverse);let l=s[3];r.scale$1(a,a,1/a[3]),r.scale$1(s,s,1/l);let u=a[2],c=s[2];return{p0:a,p1:s,t:u===c?0:(o-u)/(c-u)}}screenPointToMercatorRay(n){let i=[n.x,n.y,0,1],o=[n.x,n.y,1,1];return r.transformMat4$1(i,i,this.pixelMatrixInverse),r.transformMat4$1(o,o,this.pixelMatrixInverse),r.scale$1(i,i,1/i[3]),r.scale$1(o,o,1/o[3]),i[2]=r.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,o[2]=r.mercatorZfromAltitude(o[2],this._center.lat)*this.worldSize,r.scale$1(i,i,1/this.worldSize),r.scale$1(o,o,1/this.worldSize),new r.Ray([i[0],i[1],i[2]],r.normalize([],r.sub([],o,i)))}rayIntersectionCoordinate(n){let{p0:i,p1:o,t:a}=n,s=r.mercatorZfromAltitude(i[2],this._center.lat),l=r.mercatorZfromAltitude(o[2],this._center.lat);return new r.MercatorCoordinate(r.number(i[0],o[0],a)/this.worldSize,r.number(i[1],o[1],a)/this.worldSize,r.number(s,l,a))}pointCoordinate(r,n=this._centerAltitude){return this.projection.pointCoordinate(this,r.x,r.y,n)}pointCoordinate3D(n){if(!this.elevation)return this.pointCoordinate(n);let i=this.projection.pointCoordinate3D(this,n.x,n.y);if(i)return new r.MercatorCoordinate(i[0],i[1],i[2]);let o=0,a=this.horizonLineFromTop();if(n.y>a)return this.pointCoordinate(n);let s=.02*a,l=n.clone();for(let n=0;n<10&&a-o>s;n++){l.y=r.number(o,a,.66);let n=this.projection.pointCoordinate3D(this,l.x,l.y);n?(a=l.y,i=n):o=l.y}return i?new r.MercatorCoordinate(i[0],i[1],i[2]):this.pointCoordinate(n)}isPointAboveHorizon(r){return this.projection.isPointAboveHorizon(this,r)}isPointOnSurface(n){if(n.y<0||n.y>this.height||n.x<0||n.x>this.width)return!1;if(this.elevation||this.zoom>=r.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(n);let i=this.pointCoordinate(n);return i.y>=0&&i.y<=1}_coordinatePoint(n,i){let o=i&&this.elevation?this.elevation.getAtPointOrZero(n,this._centerAltitude):this._centerAltitude,a=[n.x*this.worldSize,n.y*this.worldSize,o+n.toAltitude(),1];return r.transformMat4$1(a,a,this.pixelMatrix),a[3]>0?new r.Point(a[0]/a[3],a[1]/a[3]):new r.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){let{top:n,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=this.pointLocation3D(new r.Point(i,n)),l=this.pointLocation3D(new r.Point(a,n)),u=this.pointLocation3D(new r.Point(a,o)),c=this.pointLocation3D(new r.Point(i,o)),h=Math.min(s.lng,l.lng,u.lng,c.lng),d=Math.max(s.lng,l.lng,u.lng,c.lng),f=Math.min(s.lat,l.lat,u.lat,c.lat),p=Math.max(s.lat,l.lat,u.lat,c.lat),m=Math.pow(2,-this.zoom)/16*270,g="globe"===this.projection.name?1:4,y=(n,i,o,a,s)=>{let l=(n+o)/2,u=(i+a)/2,c=new r.Point(l,u),{lng:_,lat:v}=this.pointLocation3D(c),b=Math.max(0,h-_,f-v,_-d,v-p);h=Math.min(h,_),d=Math.max(d,_),f=Math.min(f,v),p=Math.max(p,v),(s<g||b>m)&&(y(n,i,l,u,s+1),y(l,u,o,a,s+1))};if(y(i,n,a,n,1),y(a,n,a,o,1),y(a,o,i,o,1),y(i,o,i,n,1),"globe"===this.projection.name){let[n,i]=r.polesInViewport(this);n?(p=90,d=180,h=-180):i&&(f=-90,d=180,h=-180)}return new r.LngLatBounds(new r.LngLat(h,f),new r.LngLat(d,p))}_getBoundsRectangular(n,i){let{top:o,left:a}=this._edgeInsets,s=this.height-this._edgeInsets.bottom,l=this.width-this._edgeInsets.right,u=new r.Point(a,o),c=new r.Point(l,o),h=new r.Point(l,s),d=new r.Point(a,s),f=this.pointCoordinate(u,n),p=this.pointCoordinate(c,n),m=this.pointCoordinate(h,i),g=this.pointCoordinate(d,i),y=(r,n)=>(n.y-r.y)/(n.x-r.x);return f.y>1&&p.y>=0?f=new r.MercatorCoordinate((1-g.y)/y(g,f)+g.x,1):f.y<0&&p.y<=1&&(f=new r.MercatorCoordinate(-g.y/y(g,f)+g.x,0)),p.y>1&&f.y>=0?p=new r.MercatorCoordinate((1-m.y)/y(m,p)+m.x,1):p.y<0&&f.y<=1&&(p=new r.MercatorCoordinate(-m.y/y(m,p)+m.x,0)),(new r.LngLatBounds).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(g)).extend(this.coordinateLocation(m))}_getBoundsRectangularTerrain(){let r=this.elevation;if(!r.visibleDemTiles.length||r.isUsingMockSource())return this._getBoundsRectangular(0,0);let n=r.visibleDemTiles.reduce((r,n)=>{if(n.dem){let i=n.dem.tree;r.min=Math.min(r.min,i.minimums[0]),r.max=Math.max(r.max,i.maximums[0])}return r},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(n.min*r.exaggeration(),n.max*r.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(r=!0){let n=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,i=this.height/2-n*(1-this._horizonShift);return r?Math.max(0,i):i}getMaxBounds(){return this.maxBounds}setMaxBounds(n){this.maxBounds=n,this.minLat=-r.MAX_MERCATOR_LATITUDE,this.maxLat=r.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,n&&(this.minLat=n.getSouth(),this.maxLat=n.getNorth(),this.minLng=n.getWest(),this.maxLng=n.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=r.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=r.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=r.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=r.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(r,n){return this.projection.createTileMatrix(this,n,r)}calculateDistanceTileData(n){let i=n.key,o=this._distanceTileDataCache;if(o[i])return o[i];let a=n.canonical,s=1/this.height,l=this.cameraWorldSize,u=l/this.zoomScale(a.z),c=(a.x+Math.pow(2,a.z)*n.wrap)*u,h=a.y*u,d=this.point;d.x*=l/this.worldSize,d.y*=l/this.worldSize;let f=this.angle,p=Math.sin(-f),m=-Math.cos(-f);return o[i]={bearing:[p,m],center:[(d.x-c)*s,(d.y-h)*s],scale:u/r.EXTENT*s},o[i]}calculateFogTileMatrix(n){let i=n.key,o=this._fogTileMatrixCache;if(o[i])return o[i];let a=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,n);return r.multiply(a,this.worldToFogMatrix,a),o[i]=new Float32Array(a),o[i]}calculateProjMatrix(n,i=!1){let o=n.key,a=i?this._alignedProjMatrixCache:this._projMatrixCache;if(a[o])return a[o];let s=this.calculatePosMatrix(n,this.worldSize);return r.multiply(s,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:i?this.alignedProjMatrix:this.projMatrix,s),a[o]=new Float32Array(s),a[o]}calculatePixelsToTileUnitsMatrix(n){let i=n.tileID.key,o=this._pixelsToTileUnitsCache;if(o[i])return o[i];let a=function(n,i){var o,a,s,l,u,c,h,d;let{scale:f}=n.tileTransform,p=f*r.EXTENT/(n.tileSize*Math.pow(2,i.zoom-n.tileID.overscaledZ+n.tileID.canonical.z));return o=new Float32Array(4),l=(a=i.inverseAdjustmentMatrix)[1],u=a[2],c=a[3],d=(s=[p,p])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=u*d,o[3]=c*d,o}(n,this);return o[i]=a,o[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){let n=1/this.worldSize,i=r.fromScaling([],[n,n,n]);return r.multiply(i,i,this.globeMatrix),i}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;let n=this._elevation;this._updateCameraState();let i=r.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,o=this._computeCameraPosition(i),a=this._camera.forward(),s=r.mercatorZfromAltitude(1,this._center.lat);o[2]/=s,a[2]/=s,r.normalize(a,a);let l=n.raycast(o,a,n.exaggeration());if(l){let n=r.scaleAndAdd([],o,a,l),i=new r.MercatorCoordinate(n[0],n[1],r.mercatorZfromAltitude(n[2],r.latFromMercatorY(n[1]))),u=(i.z+r.length([i.x-o[0],i.y-o[1],i.z-o[2]*s]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(u),this._centerAltitude=i.toAltitude(),this._center=this.coordinateLocation(i),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(n=!1){if(!this._elevation)return;let i=this._elevation,o=r.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,a=this._computeCameraPosition(o),s=i.getAtPointOrZero(new r.MercatorCoordinate(...a)),l=this.pixelsPerMeter/this.worldSize*s,u=this._minimumHeightOverTerrain(),c=a[2]-l;if(c<=u){if(c<0||n){let n=this.locationCoordinate(this._center,this._centerAltitude),i=[a[0],a[1],n.z-a[2]],o=r.length(i);i[2]-=(u-c)/this._pixelsPerMercatorPixel;let s=r.length(i);if(0===s)return;r.scale$2(i,i,o/s*this._pixelsPerMercatorPixel),this._camera.position=[a[0],a[1],n.z*this._pixelsPerMercatorPixel-i[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||n){let i=this.center;return i.lat=r.clamp(i.lat,this.minLat,this.maxLat),!this.maxBounds&&(this.renderWorldCopies||n)||(i.lng=r.clamp(i.lng,this.minLng,this.maxLng)),this.center=i,void(this._constraining=!1)}let i=this._unmodified,{x:o,y:a}=this.point,s=0,l=o,u=a,c=this.width/2,h=this.height/2,d=this.worldMinY*this.scale,f=this.worldMaxY*this.scale;if(a-h<d&&(u=d+h),a+h>f&&(u=f-h),f-d<this.height&&(s=Math.max(s,this.height/(f-d)),u=(f+d)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){let r=this.worldMinX*this.scale,n=this.worldMaxX*this.scale,i=this.worldSize/2-(r+n)/2;(l=(o+i+this.worldSize)%this.worldSize-i)-c<r&&(l=r+c),l+c>n&&(l=n-c),n-r<this.width&&(s=Math.max(s,this.width/(n-r)),l=(n+r)/2)}l===o&&u===a||(this.center=this.unproject(new r.Point(l,u))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let r=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(r=Math.max(r,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),r}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;let n=this.centerOffset,i=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=r.mercatorZfromAltitude(1,this.center.lat)/r.mercatorZfromAltitude(1,r.GLOBE_SCALE_MATCH_LATITUDE));let o=rX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,o),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;let a="meters"===this.projection.zAxisUnit?i:1,s=this._camera.getWorldToCamera(this.worldSize,a),l=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);l[8]=-(2*n.x)/this.width,l[9]=2*n.y/this.height;let u=r.mul([],l,s);if(this.projection.isReprojectedInTileSpace){let n=this.locationCoordinate(this.center),i=r.identity([]);r.translate(i,i,[n.x*this.worldSize,n.y*this.worldSize,0]),r.multiply(i,i,rG(this)),r.translate(i,i,[-n.x*this.worldSize,-n.y*this.worldSize,0]),r.multiply(u,u,i),this.inverseAdjustmentMatrix=function(r){let n=rG(r,!0);return x([],[n[0],n[1],n[4],n[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=r.scale([],u,[this.worldSize,this.worldSize,this.worldSize/a,1]),this.projMatrix=u,this.invProjMatrix=r.invert(new Float64Array(16),this.projMatrix);let c=r.invert([],l);this.frustumCorners=r.FrustumCorners.fromInvProjectionMatrix(c,this.horizonLineFromTop(),this.height);let h=new Float32Array(16);r.identity(h),r.scale(h,h,[1,-1,1]),r.rotateX(h,h,this._pitch),r.rotateZ(h,h,this.angle);let d=r.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),f=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;d[8]=-(2*n.x)/this.width,d[9]=2*(n.y+f)/this.height,this.skyboxMatrix=r.multiply(h,d,h);let p=this.point,m=p.x,g=p.y,y=this.width%2/2,_=this.height%2/2,v=Math.cos(this.angle),b=Math.sin(this.angle),w=m-Math.round(m)+v*y+b*_,E=g-Math.round(g)+v*_+b*y,C=new Float64Array(u);if(r.translate(C,C,[w>.5?w-1:w,E>.5?E-1:E,0]),this.alignedProjMatrix=C,u=r.create(),r.scale(u,u,[this.width/2,-this.height/2,1]),r.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=r.create(),r.scale(u,u,[1,-1,1]),r.translate(u,u,[-1,-1,0]),r.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(u=r.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");if(this.pixelMatrixInverse=u,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=r.calculateGlobeMatrix(this);let n=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=r.transformMat4(n,n,s),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=u;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};let n=this.cameraWorldSizeForFog,i=this.cameraPixelsPerMeter,o=this._camera.position,a=1/this.height/this._pixelsPerMercatorPixel,s=[n,n,i];r.scale$2(s,s,a),r.scale$2(o,o,-1),r.multiply$2(o,o,s);let l=r.create();r.translate(l,l,o),r.scale(l,l,s),this.mercatorFogMatrix=l,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(n,i,a)}_computeCameraPosition(r){let n=(r=r||this.pixelsPerMeter)/this.pixelsPerMeter,i=this._camera.forward(),o=this.point,a=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*n-r/this.worldSize*this._centerAltitude;return[o.x/this.worldSize-i[0]*a,o.y/this.worldSize-i[1]*a,r/this.worldSize*this._centerAltitude-i[2]*a]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(n){let i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),o=this._camera.position[2],a=n[2],s=1;this.projection.wrap&&(this.center=this.center.wrap()),a>0&&(s=Math.min((i-o)/a,1)),this._camera.position=r.scaleAndAdd([],this._camera.position,n,s),this._updateStateFromCamera()}_updateStateFromCamera(){let n=this._camera.position,i=this._camera.forward(),{pitch:o,bearing:a}=this._camera.getPitchBearing(),s=r.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,l=this._mercatorZfromZoom(this._maxZoom)*Math.cos(r.degToRad(this._maxPitch)),u=Math.max((n[2]-s)/Math.cos(o),l),c=this._zoomFromMercatorZ(u);r.scaleAndAdd(n,n,i,u),this._pitch=r.clamp(o,r.degToRad(this.minPitch),r.degToRad(this.maxPitch)),this.angle=r.wrap(a,-Math.PI,Math.PI),this._setZoom(r.clamp(c,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new r.MercatorCoordinate(n[0],n[1],n[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(r){return Math.pow(2,r)*this.tileSize}_mercatorZfromZoom(r){return this.cameraToCenterDistance/this._worldSizeFromZoom(r)}_minimumHeightOverTerrain(){let r=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(r)}_zoomFromMercatorZ(r){return this.scaleZoom(this.cameraToCenterDistance/(r*this.tileSize))}zoomFromMercatorZAdjusted(n){let i=0,o=r.GLOBE_ZOOM_THRESHOLD_MAX,a=0,s=1/0;for(;o-i>1e-6&&o>i;){let r=i+.5*(o-i),l=this.tileSize*Math.pow(2,r),u=this.getCameraToCenterDistance(this.projection,r,l),c=this.scaleZoom(u/(n*this.tileSize)),h=Math.abs(r-c);h<s&&(s=h,a=r),r<c?i=r:o=r}return a}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(r.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(n,i){let o=Math.min(n.x,i.x),a=Math.max(n.x,i.x),s=Math.min(n.y,i.y),l=Math.max(n.y,i.y);if(s<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;let u=[new r.Point(o,s),new r.Point(a,l),new r.Point(o,l),new r.Point(a,s)],c=this.renderWorldCopies?-3:0,h=this.renderWorldCopies?4:1;for(let r of u){let n=this.pointRayIntersection(r);if(n.t<0)return!0;let i=this.rayIntersectionCoordinate(n);if(i.x<c||i.y<0||i.x>h||i.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+r.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new r.Point(0,0),new r.Point(this.width,this.height))}zoomDeltaToMovement(n,i){let o=r.length(r.sub([],this._camera.position,n)),a=this._zoomFromMercatorZ(o)+i;return o-this._mercatorZfromZoom(a)}getCameraPoint(){if("globe"===this.projection.name){let n=function([n,i,o],a){let s=[n,i,o,1];r.transformMat4$1(s,s,a);let l=s[3]=Math.max(s[3],1e-6);return s[0]/=l,s[1]/=l,s[2]/=l,s}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new r.Point(n[0],n[1])}{let n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,n))}}getCameraToCenterDistance(r,n=this.zoom,i=this.worldSize){let o=rX(r,n,this.width,this.height,1024),a=r.pixelSpaceConversion(this.center.lat,i,o);return .5/Math.tan(.5*this._fov)*this.height*a}getWorldToCameraMatrix(){let n=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&r.multiply(n,n,this.globeMatrix),n}}function r0(r,n){let i=!1,o=null,a=()=>{o=null,i&&(r(),o=setTimeout(a,n),i=!1)};return()=>(i=!0,o||a(),o)}class r1{constructor(n){this._hashName=n&&encodeURIComponent(n),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=r0(this._updateHashUnthrottled.bind(this),300)}addTo(n){return this._map=n,r.window.addEventListener("hashchange",this._onHashChange,!1),n.on("moveend",this._updateHash),this}remove(){return this._map&&(this._map.off("moveend",this._updateHash),r.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0),this}getHashString(){let n=this._map;if(!n)return"";let i=r2(n);if(this._hashName){let n=this._hashName,o=!1,a=r.window.location.hash.slice(1).split("&").map(r=>{let a=r.split("=")[0];return a===n?(o=!0,`${a}=${i}`):r}).filter(r=>r);return o||a.push(`${n}=${i}`),`#${a.join("&")}`}return`#${i}`}_getCurrentHash(){let n=r.window.location.hash.replace("#","");if(this._hashName){let r;return n.split("&").map(r=>r.split("=")).forEach(n=>{n[0]===this._hashName&&(r=n)}),(r&&r[1]||"").split("/")}return n.split("/")}_onHashChange(){let r=this._map;if(!r)return!1;let n=this._getCurrentHash();if(n.length>=3&&!n.some(r=>isNaN(r))){let i=r.dragRotate.isEnabled()&&r.touchZoomRotate.isEnabled()?+(n[3]||0):r.getBearing();return r.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:i,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){let n=r.window.location.href.replace(/(#.+)?$/,this.getHashString());r.window.history.replaceState(r.window.history.state,null,n)}}function r2(r,n){let i=r.getCenter(),o=Math.round(100*r.getZoom())/100,a=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),s=Math.pow(10,a),l=Math.round(i.lng*s)/s,u=Math.round(i.lat*s)/s,c=r.getBearing(),h=r.getPitch(),d=n?`/${l}/${u}/${o}`:`${o}/${u}/${l}`;return(c||h)&&(d+="/"+Math.round(10*c)/10),h&&(d+=`/${Math.round(h)}`),d}let r4={linearity:.3,easing:r.bezier(0,0,.3,1)},r3=r.extend({deceleration:2500,maxSpeed:1400},r4),r5=r.extend({deceleration:20,maxSpeed:1400},r4),r6=r.extend({deceleration:1e3,maxSpeed:360},r4),r8=r.extend({deceleration:1e3,maxSpeed:90},r4);class r9{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:n})}_drainInertiaBuffer(){let n=this._inertiaBuffer,i=r.exported.now();for(;n.length>0&&i-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;let i={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0};for(let{settings:r}of this._inertiaBuffer)i.zoom+=r.zoomDelta||0,i.bearing+=r.bearingDelta||0,i.pitch+=r.pitchDelta||0,r.panDelta&&i.pan._add(r.panDelta),r.around&&(i.around=r.around),r.pinchAround&&(i.pinchAround=r.pinchAround);let o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(i.pan.mag()){let s=ne(i.pan.mag(),o,r.extend({},r3,n||{}));a.offset=i.pan.mult(s.amount/i.pan.mag()),a.center=this._map.transform.center,r7(a,s)}if(i.zoom){let r=ne(i.zoom,o,r5);a.zoom=this._map.transform.zoom+r.amount,r7(a,r)}if(i.bearing){let n=ne(i.bearing,o,r6);a.bearing=this._map.transform.bearing+r.clamp(n.amount,-179,179),r7(a,n)}if(i.pitch){let r=ne(i.pitch,o,r8);a.pitch=this._map.transform.pitch+r.amount,r7(a,r)}if(a.zoom||a.bearing){let r=void 0===i.pinchAround?i.around:i.pinchAround;a.around=r?this._map.unproject(r):this._map.getCenter()}return this.clear(),a.noMoveStart=!0,a}}function r7(r,n){(!r.duration||r.duration<n.duration)&&(r.duration=n.duration,r.easing=n.easing)}function ne(n,i,o){let{maxSpeed:a,linearity:s,deceleration:l}=o,u=r.clamp(n*s/(i/1e3),-a,a),c=Math.abs(u)/(l*s);return{easing:o.easing,duration:1e3*c,amount:u*(c/2)}}class nt extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,i,o,a={}){let s=y(i.getCanvasContainer(),o),l=i.unproject(s);super(n,r.extend({point:s,lngLat:l,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}}class nr extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,i,o){let a="touchend"===n?o.changedTouches:o.touches,s=_(i.getCanvasContainer(),a),l=s.map(r=>i.unproject(r)),u=s.reduce((r,n,i,o)=>r.add(n.div(o.length)),new r.Point(0,0));super(n,{points:s,point:u,lngLats:l,lngLat:i.unproject(u),originalEvent:o}),this._defaultPrevented=!1}}class nn extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,n,i){super(r,{originalEvent:i}),this._defaultPrevented=!1}}class ni{constructor(r,n){this._map=r,this._clickTolerance=n.clickTolerance}reset(){this._mousedownPos=void 0}wheel(r){return this._firePreventable(new nn(r.type,this._map,r))}mousedown(r,n){return this._mousedownPos=n,this._firePreventable(new nt(r.type,this._map,r))}mouseup(r){this._map.fire(new nt(r.type,this._map,r))}preclick(n){let i=r.extend({},n);i.type="preclick",this._map.fire(new nt(i.type,this._map,i))}click(r,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||(this.preclick(r),this._map.fire(new nt(r.type,this._map,r)))}dblclick(r){return this._firePreventable(new nt(r.type,this._map,r))}mouseover(r){this._map.fire(new nt(r.type,this._map,r))}mouseout(r){this._map.fire(new nt(r.type,this._map,r))}touchstart(r){return this._firePreventable(new nr(r.type,this._map,r))}touchmove(r){this._map.fire(new nr(r.type,this._map,r))}touchend(r){this._map.fire(new nr(r.type,this._map,r))}touchcancel(r){this._map.fire(new nr(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class no{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(r){this._map.fire(new nt(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new nt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new nt(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class na{constructor(r,n){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,n){this.isEnabled()&&r.shiftKey&&0===r.button&&(f(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(r,n){if(!this._active)return;let i=this._startPos,o=this._lastPos;if(!i||!o||o.equals(n)||!this._box&&n.dist(i)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=u("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));let a=Math.min(i.x,n.x),s=Math.max(i.x,n.x),l=Math.min(i.y,n.y),c=Math.max(i.y,n.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${a}px,${l}px)`,this._box.style.width=s-a+"px",this._box.style.height=c-l+"px")})}mouseupWindow(n,i){if(!this._active)return;let o=this._startPos;if(o&&0===n.button){if(this.reset(),g(),o.x!==i.x||o.y!==i.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:r=>r.fitScreenCoordinates(o,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",n)}}keydown(r){this._active&&27===r.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",r))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),p(),delete this._startPos,delete this._lastPos}_fireEvent(n,i){return this._map.fire(new r.Event(n,{originalEvent:i}))}}function ns(r,n){let i={};for(let o=0;o<r.length;o++)i[r[o].identifier]=n[o];return i}class nl{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(n,i,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(n){let i=new r.Point(0,0);for(let r of n)i._add(r);return i.div(n.length)}(i),this.touches=ns(o,i)))}touchmove(r,n,i){if(this.aborted||!this.centroid)return;let o=ns(i,n);for(let r in this.touches){let n=o[r];(!n||n.dist(this.touches[r])>30)&&(this.aborted=!0)}}touchend(r,n,i){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){let r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}class nu{constructor(r){this.singleTap=new nl(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(r,n,i){this.singleTap.touchstart(r,n,i)}touchmove(r,n,i){this.singleTap.touchmove(r,n,i)}touchend(r,n,i){let o=this.singleTap.touchend(r,n,i);if(o){let n=r.timeStamp-this.lastTime<500,i=!this.lastTap||30>this.lastTap.dist(o);if(n&&i||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}}}class nc{constructor(){this._zoomIn=new nu({numTouches:1,numTaps:2}),this._zoomOut=new nu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,n,i){this._zoomIn.touchstart(r,n,i),this._zoomOut.touchstart(r,n,i)}touchmove(r,n,i){this._zoomIn.touchmove(r,n,i),this._zoomOut.touchmove(r,n,i)}touchend(r,n,i){let o=this._zoomIn.touchend(r,n,i),a=this._zoomOut.touchend(r,n,i);return o?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:n=>n.easeTo({duration:300,zoom:n.getZoom()+1,around:n.unproject(o)},{originalEvent:r})}):a?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:n=>n.easeTo({duration:300,zoom:n.getZoom()-1,around:n.unproject(a)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}let nh={0:1,2:2};class nd{constructor(r){this.reset(),this._clickTolerance=r.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(r,n){return!1}_move(r,n){return{}}mousedown(r,n){if(this._lastPoint)return;let i=v(r);this._correctButton(r,i)&&(this._lastPoint=n,this._eventButton=i)}mousemoveWindow(r,n){let i=this._lastPoint;if(i){if(r.preventDefault(),null!=this._eventButton&&function(r,n){let i=nh[n];return void 0===r.buttons||(r.buttons&i)!==i}(r,this._eventButton))this.reset();else if(this._moved||!(n.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=n,this._move(i,n)}}mouseupWindow(r){this._lastPoint&&v(r)===this._eventButton&&(this._moved&&g(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nf extends nd{mousedown(r,n){super.mousedown(r,n),this._lastPoint&&(this._active=!0)}_correctButton(r,n){return 0===n&&!r.ctrlKey}_move(r,n){return{around:n,panDelta:n.sub(r)}}}class np extends nd{_correctButton(r,n){return 0===n&&r.ctrlKey||2===n}_move(r,n){let i=.8*(n.x-r.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(r){r.preventDefault()}}class nm extends nd{_correctButton(r,n){return 0===n&&r.ctrlKey||2===n}_move(r,n){let i=-.5*(n.y-r.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(r){r.preventDefault()}}class ng{constructor(n,i){this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset(),r.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)}touchstart(r,n,i){return this._calculateTransform(r,n,i)}touchmove(n,i,o){if(this._active&&!(o.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===o.length&&!r.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return n.cancelable&&n.preventDefault(),this._calculateTransform(n,i,o)}}touchend(r,n,i){this._calculateTransform(r,n,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,i,o){o.length>0&&(this._active=!0);let a=ns(o,i),s=new r.Point(0,0),l=new r.Point(0,0),u=0;for(let r in a){let n=a[r],i=this._touches[r];i&&(s._add(n),l._add(n.sub(i)),u++,a[r]=n)}if(this._touches=a,u<this._minTouches||!l.mag())return;let c=l.div(u);return this._sum._add(c),this._sum.mag()<this._clickTolerance?void 0:{around:s.div(u),panDelta:c}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=u("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class ny{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(r){}_move(r,n,i){return{}}touchstart(r,n,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([n[0],n[1]]))}touchmove(r,n,i){let o=this._firstTwoTouches;if(!o)return;r.preventDefault();let[a,s]=o,l=n_(i,n,a),u=n_(i,n,s);if(!l||!u)return;let c=this._aroundCenter?null:l.add(u).div(2);return this._move([l,u],c,r)}touchend(r,n,i){if(!this._firstTwoTouches)return;let[o,a]=this._firstTwoTouches,s=n_(i,n,o),l=n_(i,n,a);s&&l||(this._active&&g(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function n_(r,n,i){for(let o=0;o<r.length;o++)if(r[o].identifier===i)return n[o]}function nv(r,n){return Math.log(r/n)/Math.LN2}class nb extends ny{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,n){let i=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(.1>Math.abs(nv(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:nv(this._distance,i),pinchAround:n}}}function nx(r,n){return 180*r.angleWith(n)/Math.PI}class nw extends ny{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,n){let i=this._vector;if(this._vector=r[0].sub(r[1]),i&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:nx(this._vector,i),pinchAround:n}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let n=25/(Math.PI*this._minDiameter)*360,i=this._startVector;if(!i)return!1;let o=nx(r,i);return Math.abs(o)<n}}function nE(r){return Math.abs(r.y)>Math.abs(r.x)}class nC extends ny{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(r){this._lastPoints=r,nE(r[0].sub(r[1]))&&(this._valid=!1)}_move(n,i,o){let a=this._lastPoints;if(!a)return;let s=n[0].sub(a[0]),l=n[1].sub(a[1]);return this._map._cooperativeGestures&&!r.isFullscreen()&&o.touches.length<3||(this._valid=this.gestureBeginsVertically(s,l,o.timeStamp),!this._valid)?void 0:(this._lastPoints=n,this._active=!0,{pitchDelta:-((s.y+l.y)/2*.5)})}gestureBeginsVertically(r,n,i){if(void 0!==this._valid)return this._valid;let o=r.mag()>=2,a=n.mag()>=2;if(!o&&!a)return;if(!o||!a)return null==this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;let s=r.y>0==n.y>0;return nE(r)&&nE(n)&&s}}class nS{constructor(){this._panStep=100,this._bearingStep=15,this._pitchStep=10,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let n=0,i=0,o=0,a=0,s=0;switch(r.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:r.shiftKey?i=-1:(r.preventDefault(),a=-1);break;case 39:r.shiftKey?i=1:(r.preventDefault(),a=1);break;case 38:r.shiftKey?o=1:(r.preventDefault(),s=-1);break;case 40:r.shiftKey?o=-1:(r.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(i=0,o=0),{cameraAnimation:l=>{let u=l.getZoom();l.easeTo({duration:300,easeId:"keyboardHandler",easing:nT,zoom:n?Math.round(u)+n*(r.shiftKey?2:1):u,bearing:l.getBearing()+i*this._bearingStep,pitch:l.getPitch()+o*this._pitchStep,offset:[-a*this._panStep,-s*this._panStep],center:l.getCenter()},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nT(r){return r*(2-r)}class nM{constructor(n,i){this._map=n,this._el=n.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(n.ctrlKey||n.metaKey||this.isZooming()||r.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let i=n.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=r.exported.now(),a=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&4>Math.abs(i)?this._type="trackpad":a>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=200>Math.abs(a*i)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),n.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=n,this._delta-=i,this._active||this._start(n)),n.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let n=y(this._el,r);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:n,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let n=this._map.transform;"wheel"===this._type&&n.projection.wrap&&(n._center.lng>=180||n._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);let i=()=>n._terrainEnabled()&&this._aroundCoord?n.computeZoomRelativeTo(this._aroundCoord):n.zoom;if(0!==this._delta){let r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==o&&(o=1/o);let a=i(),s=Math.pow(2,a),l="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(l*o))),"wheel"===this._type&&(this._startZoom=a,this._easing=this._smoothOutEasing(200)),this._delta=0}let o="number"==typeof this._targetZoom?this._targetZoom:i(),a=this._startZoom,s=this._easing,l,u=!1;if("wheel"===this._type&&a&&s){let n=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),i=s(n);l=r.number(a,o,i),n<1?this._frameId||(this._frameId=!0):u=!0}else l=o,u=!0;return this._active=!0,u&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!u,zoomDelta:l-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let i=r.ease;if(this._prevEase){let n=this._prevEase,o=(r.exported.now()-n.start)/n.duration,a=n.easing(o+.01)-n.easing(o),s=.27/Math.sqrt(a*a+1e-4)*.01,l=Math.sqrt(.0729-s*s);i=r.bezier(s,l,.25,1)}return this._prevEase={start:r.exported.now(),duration:n,easing:i},i}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=u("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(r.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class nk{constructor(r,n){this._clickZoom=r,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class nI{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(r,n){return r.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(r.shiftKey?-1:1),around:i.unproject(n)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nL{constructor(){this._tap=new nu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(r,n,i){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=n[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(r,n,i))}touchmove(r,n,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;let o=n[0],a=o.y-this._swipePoint.y;return this._swipePoint=o,r.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(r,n,i)}touchend(r,n,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(r,n,i)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nA{constructor(r,n,i){this._el=r,this._mousePan=n,this._touchPan=i}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nz{constructor(r,n,i){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=n,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class nP{constructor(r,n,i,o){this._el=r,this._touchZoom=n,this._touchRotate=i,this._tapDragZoom=o,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}let nO=r=>r.zoom||r.drag||r.pitch||r.rotate;class nD extends r.Event{}class nR{constructor(){this.constants=[1,1,.01],this.radius=0}setup(n,i){let o=r.sub([],i,n);this.radius=r.length(o[2]<0?r.div([],o,this.constants):[o[0],o[1],0])}projectRay(n){r.div(n,n,this.constants),r.normalize(n,n),r.mul$1(n,n,this.constants);let i=r.scale$2([],n,this.radius);if(i[2]>0){let n=r.scale$2([],[0,0,1],r.dot(i,[0,0,1])),o=r.scale$2([],r.normalize([],[i[0],i[1],0]),this.radius),a=r.add([],i,r.scale$2([],r.sub([],r.add([],o,n),i),2));i[0]=a[0],i[1]=a[1]}return i}}function nF(r){return r.panDelta&&r.panDelta.mag()||r.zoomDelta||r.bearingDelta||r.pitchDelta}class nB{constructor(n,i){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new r9(n),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new nR,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),r.bindAll(["handleEvent","handleWindowEvent"],this);let o=this._el;for(let[n,i,a]of(this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[r.window,"blur",void 0]],this._listeners))n.addEventListener(i,n===r.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(let[n,i,o]of this._listeners)n.removeEventListener(i,n===r.window.document?this.handleWindowEvent:this.handleEvent,o)}_addDefaultHandlers(r){let n=this._map,i=n.getCanvasContainer();this._add("mapEvent",new ni(n,r));let o=n.boxZoom=new na(n,r);this._add("boxZoom",o);let a=new nc,s=new nI;n.doubleClickZoom=new nk(s,a),this._add("tapZoom",a),this._add("clickZoom",s);let l=new nL;this._add("tapDragZoom",l);let u=n.touchPitch=new nC(n);this._add("touchPitch",u);let c=new np(r),h=new nm(r);n.dragRotate=new nz(r,c,h),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]);let d=new nf(r),f=new ng(n,r);n.dragPan=new nA(i,d,f),this._add("mousePan",d),this._add("touchPan",f,["touchZoom","touchRotate"]);let p=new nw,m=new nb;n.touchZoomRotate=new nP(i,m,p,l),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]),this._add("blockableMapEvent",new no(n));let g=n.scrollZoom=new nM(n,this);this._add("scrollZoom",g,["mousePan"]);let y=n.keyboard=new nS;for(let i of(this._add("keyboard",y),["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"]))r.interactive&&r[i]&&n[i].enable(r[i])}_add(r,n,i){this._handlers.push({handlerName:r,handler:n,allowed:i}),this._handlersById[r]=n}stop(r){if(!this._updatingCamera){for(let{handler:r}of this._handlers)r.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!nO(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(r,n,i){for(let o in r)if(o!==i&&(!n||0>n.indexOf(o)))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){let n=[];for(let i of r)this._el.contains(i.target)&&n.push(i);return n}handleEvent(r,n){this._updatingCamera=!0;let i="renderFrame"===r.type,o=i?void 0:r,a={needsRenderFrame:!1},s={},l={},u=r.touches?this._getMapTouches(r.touches):void 0,c=u?_(this._el,u):i?void 0:y(this._el,r);for(let{handlerName:i,handler:h,allowed:d}of this._handlers){let f;h.isEnabled()&&(this._blockedByActive(l,d,i)?h.reset():h[n||r.type]&&(f=h[n||r.type](r,c,u),this.mergeHandlerResult(a,s,f,i,o),f&&f.needsRenderFrame&&this._triggerRenderFrame()),(f||h.isActive())&&(l[i]=h))}let h={};for(let r in this._previousActiveHandlers)l[r]||(h[r]=o);this._previousActiveHandlers=l,(Object.keys(h).length||nF(a))&&(this._changes.push([a,s,h]),this._triggerRenderFrame()),(Object.keys(l).length||nF(a))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:d}=a;d&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],d(this._map))}mergeHandlerResult(n,i,o,a,s){if(!o)return;r.extend(n,o);let l={handlerName:a,originalEvent:o.originalEvent||s};void 0!==o.zoomDelta&&(i.zoom=l),void 0!==o.panDelta&&(i.drag=l),void 0!==o.pitchDelta&&(i.pitch=l),void 0!==o.bearingDelta&&(i.rotate=l)}_applyChanges(){let n={},i={},o={};for(let[a,s,l]of this._changes)a.panDelta&&(n.panDelta=(n.panDelta||new r.Point(0,0))._add(a.panDelta)),a.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(n.around=a.around),void 0!==a.aroundCoord&&(n.aroundCoord=a.aroundCoord),void 0!==a.pinchAround&&(n.pinchAround=a.pinchAround),a.noInertia&&(n.noInertia=a.noInertia),r.extend(i,s),r.extend(o,l);this._updateMapTransform(n,i,o),this._changes=[]}_updateMapTransform(n,i,o){var a;let s=this._map,l=s.transform,u=r=>[r.x,r.y,r.z];if((r=>{let n=this._eventsInProgress.drag;return n&&!this._handlersById[n.handlerName].isActive()})()&&!nF(n)){let r=l.zoom;l.cameraElevationReference="sea",l.recenterOnTerrain(),l.cameraElevationReference="ground",r!==l.zoom&&this._map._update(!0)}if(l._isCameraConstrained&&s._stop(!0),!nF(n))return void this._fireEvents(i,o,!0);let{panDelta:c,zoomDelta:h,bearingDelta:d,pitchDelta:f,around:p,aroundCoord:m,pinchAround:g}=n;l._isCameraConstrained&&(h>0&&(h=0),l._isCameraConstrained=!1),void 0!==g&&(p=g),(h||i[a="drag"]&&!this._eventsInProgress[a])&&p&&(this._dragOrigin=u(l.pointCoordinate3D(p)),this._trackingEllipsoid.setup(l._camera.position,this._dragOrigin)),l.cameraElevationReference="sea",s._stop(!0),p=p||s.transform.centerPoint,d&&(l.bearing+=d),f&&(l.pitch+=f),l._updateCameraState();let y=[0,0,0];if(c){if("mercator"===l.projection.name){let r=this._trackingEllipsoid.projectRay(l.screenPointToMercatorRay(p).dir),n=this._trackingEllipsoid.projectRay(l.screenPointToMercatorRay(p.sub(c)).dir);y[0]=n[0]-r[0],y[1]=n[1]-r[1]}else{let n=l.pointCoordinate(p);if("globe"===l.projection.name){c=c.rotate(-l.angle);let i=l._pixelsPerMercatorPixel/l.worldSize;y[0]=-c.x*r.mercatorScale(r.latFromMercatorY(n.y))*i,y[1]=-c.y*r.mercatorScale(l.center.lat)*i}else{let r=l.pointCoordinate(p.sub(c));n&&r&&(y[0]=r.x-n.x,y[1]=r.y-n.y)}}}let _=l.zoom,v=[0,0,0];if(h){let n=u(m||l.pointCoordinate3D(p)),i={dir:r.normalize([],r.sub([],n,l._camera.position))};if(i.dir[2]<0){let o=l.zoomDeltaToMovement(n,h);r.scale$2(v,i.dir,o)}}let b=r.add(y,y,v);l._translateCameraConstrained(b),h&&Math.abs(l.zoom-_)>1e-4&&l.recenterOnTerrain(),l.cameraElevationReference="ground",this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(i,o,!0)}_fireEvents(n,i,o){let a;let s=nO(this._eventsInProgress),l=nO(n),u={};for(let r in n){let{originalEvent:i}=n[r];this._eventsInProgress[r]||(u[`${r}start`]=i),this._eventsInProgress[r]=n[r]}for(let r in!s&&l&&this._fireEvent("movestart",l.originalEvent),u)this._fireEvent(r,u[r]);for(let r in l&&this._fireEvent("move",l.originalEvent),n){let{originalEvent:i}=n[r];this._fireEvent(r,i)}let c={};for(let r in this._eventsInProgress){let{handlerName:n,originalEvent:o}=this._eventsInProgress[r];this._handlersById[n].isActive()||(delete this._eventsInProgress[r],a=i[n]||o,c[`${r}end`]=a)}for(let r in c)this._fireEvent(r,c[r]);let h=nO(this._eventsInProgress);if(o&&(s||l)&&!h){var d,f;this._updatingCamera=!0;let n=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions);n?(0!==(d=n.bearing||this._map.getBearing())&&-this._bearingSnap<d&&d<this._bearingSnap&&(n.bearing=0),this._map.easeTo(n,{originalEvent:a})):(this._map.fire(new r.Event("moveend",{originalEvent:a})),0!==(f=this._map.getBearing())&&-this._bearingSnap<f&&f<this._bearingSnap&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,i){this._map.fire(new r.Event(n,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{this._frameId=void 0,this.handleEvent(new nD("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}let nN="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class nj extends r.Evented{constructor(n,i){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=i.bearingSnap,this._respectPrefersReducedMotion=!1!==i.respectPrefersReducedMotion,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,n){return this.jumpTo({center:r},n)}panBy(n,i,o){return n=r.Point.convert(n).mult(-1),this.panTo(this.transform.center,r.extend({offset:n},i),o)}panTo(n,i,o){return this.easeTo(r.extend({center:n},i),o)}getZoom(){return this.transform.zoom}setZoom(r,n){return this.jumpTo({zoom:r},n),this}zoomTo(n,i,o){return this.easeTo(r.extend({zoom:n},i),o)}zoomIn(r,n){return this.zoomTo(this.getZoom()+1,r,n),this}zoomOut(r,n){return this.zoomTo(this.getZoom()-1,r,n),this}getBearing(){return this.transform.bearing}setBearing(r,n){return this.jumpTo({bearing:r},n),this}getPadding(){return this.transform.padding}setPadding(r,n){return this.jumpTo({padding:r},n),this}rotateTo(n,i,o){return this.easeTo(r.extend({bearing:n},i),o)}resetNorth(n,i){return this.rotateTo(0,r.extend({duration:1e3},n),i),this}resetNorthPitch(n,i){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},n),i),this}snapToNorth(r,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,n):this}getPitch(){return this.transform.pitch}setPitch(r,n){return this.jumpTo({pitch:r},n),this}cameraForBounds(n,i){n=r.LngLatBounds.convert(n);let o=i&&i.bearing||0,a=i&&i.pitch||0,s=n.getNorthWest(),l=n.getSouthEast();return this._cameraForBounds(this.transform,s,l,o,a,i)}_extendCameraOptions(n){let i={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=r.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){let r=n.padding;n.padding={top:r,bottom:r,right:r,left:r}}return n.padding=r.extend(i,n.padding),n}_minimumAABBFrustumDistance(r,n){let i=n.max[0]-n.min[0],o=n.max[1]-n.min[1];return i/o>r.aspect?i/(2*Math.tan(.5*r.fovX)*r.aspect):o/(2*Math.tan(.5*r.fovY)*r.aspect)}_cameraForBoundsOnGlobe(n,i,o,a,s,l){let u=n.clone(),c=this._extendCameraOptions(l);u.bearing=a,u.pitch=s;let h=r.LngLat.convert(i),d=r.LngLat.convert(o),f=.5*(h.lat+d.lat),p=.5*(h.lng+d.lng),m=r.latLngToECEF(f,p),g=r.normalize([],m),y=r.normalize([],r.cross([],g,[0,1,0])),_=r.cross([],y,g),v=[y[0],y[1],y[2],0,_[0],_[1],_[2],0,g[0],g[1],g[2],0,0,0,0,1],b=[m,r.latLngToECEF(h.lat,h.lng),r.latLngToECEF(d.lat,h.lng),r.latLngToECEF(d.lat,d.lng),r.latLngToECEF(h.lat,d.lng),r.latLngToECEF(f,h.lng),r.latLngToECEF(f,d.lng),r.latLngToECEF(h.lat,p),r.latLngToECEF(d.lat,p)],x=r.Aabb.fromPoints(b.map(n=>[r.dot(y,n),r.dot(_,n),r.dot(g,n)])),w=r.transformMat4([],x.center,v);0===r.squaredLength(w)&&r.set(w,0,0,1),r.normalize(w,w),r.scale$2(w,w,r.GLOBE_RADIUS),u.center=r.ecefToLatLng(w);let E=u.getWorldToCameraMatrix(),C=r.invert(new Float64Array(16),E);x=r.Aabb.applyTransform(x,r.multiply([],E,v)),r.transformMat4(w,w,E);let S=.5*(x.max[2]-x.min[2]),T=this._minimumAABBFrustumDistance(u,x),M=r.scale$2([],[0,0,1],S),k=r.add(M,w,M),I=T+(0===u.pitch?0:r.distance(w,k)),L=u.globeCenterInViewSpace,A=r.sub([],w,[L[0],L[1],L[2]]);r.normalize(A,A),r.scale$2(A,A,I);let z=r.add([],w,A);r.transformMat4(z,z,C);let P=r.earthRadius/r.GLOBE_RADIUS,O=r.length(z),D=r.mercatorZfromAltitude(Math.max(O*P-r.earthRadius,Number.EPSILON),0),R=Math.min(u.zoomFromMercatorZAdjusted(D),c.maxZoom);return R>.5*(r.GLOBE_ZOOM_THRESHOLD_MIN+r.GLOBE_ZOOM_THRESHOLD_MAX)?(u.setProjection({name:"mercator"}),u.zoom=R,this._cameraForBounds(u,i,o,a,s,l)):{center:u.center,zoom:R,bearing:a,pitch:s}}queryTerrainElevation(n,i){let o=this.transform.elevation;return o?(i=r.extend({},{exaggerated:!0},i),o.getAtPoint(r.MercatorCoordinate.fromLngLat(n),null,i.exaggerated)):null}_cameraForBounds(n,i,o,a,s,l){if("globe"===n.projection.name)return this._cameraForBoundsOnGlobe(n,i,o,a,s,l);let u=n.clone(),c=this._extendCameraOptions(l),h=u.padding;u.bearing=a,u.pitch=s;let d=r.LngLat.convert(i),f=r.LngLat.convert(o),p=new r.LngLat(d.lng,f.lat),m=new r.LngLat(f.lng,d.lat),g=u.project(d),y=u.project(f),_=this.queryTerrainElevation(d),v=this.queryTerrainElevation(f),b=this.queryTerrainElevation(p),x=this.queryTerrainElevation(m),w=[[g.x,g.y,Math.min(_||0,v||0,b||0,x||0)],[y.x,y.y,Math.max(_||0,v||0,b||0,x||0)]],E=r.Aabb.fromPoints(w),C=u.getWorldToCameraMatrix(),S=r.invert(new Float64Array(16),C);E=r.Aabb.applyTransform(E,C);let T=r.sub([],E.max,E.min),M=h.left||0,k=h.right||0,I=h.bottom||0,L=h.top||0,{left:A,right:z,top:P,bottom:O}=c.padding,D=.5*(M+k),R=.5*(L+I),F=Math.min(u.scaleZoom(u.scale*Math.min((u.width-(M+k+A+z))/T[0],(u.height-(I+L+O+P))/T[1])),c.maxZoom),B=u.scale/u.zoomScale(F);E=new r.Aabb([E.min[0]-(A+D)*B,E.min[1]-(O+R)*B,E.min[2]],[E.max[0]+(z+D)*B,E.max[1]+(P+R)*B,E.max[2]]);let N=.5*T[2],j=this._minimumAABBFrustumDistance(u,E),V=[0,0,1,0];r.transformMat4$1(V,V,C),r.normalize$2(V,V);let U=r.scale$2([],V,j+N),q=r.add([],E.center,U),$=("number"==typeof c.offset.x&&"number"==typeof c.offset.y?new r.Point(c.offset.x,c.offset.y):r.Point.convert(c.offset)).rotate(-r.degToRad(a));E.center[0]-=$.x*B,E.center[1]+=$.y*B,r.transformMat4(E.center,E.center,S),r.transformMat4(q,q,S);let H=[E.center[0],E.center[1],q[2]*u.pixelsPerMeter];r.scale$2(H,H,1/u.worldSize);let Z=r.lngFromMercatorX(H[0]),G=r.latFromMercatorY(H[1]),W=Math.min(u._zoomFromMercatorZ(H[2]),c.maxZoom),X=new r.LngLat(Z,G);return u.mercatorFromTransition&&W<.5*(r.GLOBE_ZOOM_THRESHOLD_MIN+r.GLOBE_ZOOM_THRESHOLD_MAX)?(u.setProjection({name:"globe"}),u.zoom=W,this._cameraForBounds(u,i,o,a,s,l)):{center:X,zoom:W,bearing:a,pitch:s}}fitBounds(r,n,i){let o=this.cameraForBounds(r,n);return this._fitInternal(o,n,i)}fitScreenCoordinates(n,i,o,a,s){let l=r.Point.convert(n),u=r.Point.convert(i),c=new r.Point(Math.min(l.x,u.x),Math.min(l.y,u.y)),h=new r.Point(Math.max(l.x,u.x),Math.max(l.y,u.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(l,u))return this;let d=this.transform.pointLocation3D(c),f=this.transform.pointLocation3D(h),p=this.transform.pointLocation3D(new r.Point(c.x,h.y)),m=this.transform.pointLocation3D(new r.Point(h.x,c.y)),g=[Math.min(d.lng,f.lng,p.lng,m.lng),Math.min(d.lat,f.lat,p.lat,m.lat)],y=[Math.max(d.lng,f.lng,p.lng,m.lng),Math.max(d.lat,f.lat,p.lat,m.lat)],_=a&&a.pitch?a.pitch:this.getPitch(),v=this._cameraForBounds(this.transform,g,y,o,_,a);return this._fitInternal(v,a,s)}_fitInternal(n,i,o){return n?(delete(i=r.extend(n,i)).padding,i.linear?this.easeTo(i,o):this.flyTo(i,o)):this}jumpTo(n,i){this.stop();let o=n.preloadOnly?this.transform.clone():this.transform,a=!1,s=!1,l=!1;return"zoom"in n&&o.zoom!==+n.zoom&&(a=!0,o.zoom=+n.zoom),void 0!==n.center&&(o.center=r.LngLat.convert(n.center)),"bearing"in n&&o.bearing!==+n.bearing&&(s=!0,o.bearing=+n.bearing),"pitch"in n&&o.pitch!==+n.pitch&&(l=!0,o.pitch=+n.pitch),null==n.padding||o.isPaddingEqual(n.padding)||(o.padding=n.padding),n.preloadOnly?(this._preloadTiles(o),this):(this.fire(new r.Event("movestart",i)).fire(new r.Event("move",i)),a&&this.fire(new r.Event("zoomstart",i)).fire(new r.Event("zoom",i)).fire(new r.Event("zoomend",i)),s&&this.fire(new r.Event("rotatestart",i)).fire(new r.Event("rotate",i)).fire(new r.Event("rotateend",i)),l&&this.fire(new r.Event("pitchstart",i)).fire(new r.Event("pitch",i)).fire(new r.Event("pitchend",i)),this.fire(new r.Event("moveend",i)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||r.warnOnce(nN),this.transform.getFreeCameraOptions()}setFreeCameraOptions(n,i){let o=this.transform;if(!o.projection.supportsFreeCamera)return r.warnOnce(nN),this;this.stop();let a=o.zoom,s=o.pitch,l=o.bearing;o.setFreeCameraOptions(n);let u=a!==o.zoom,c=s!==o.pitch,h=l!==o.bearing;return this.fire(new r.Event("movestart",i)).fire(new r.Event("move",i)),u&&this.fire(new r.Event("zoomstart",i)).fire(new r.Event("zoom",i)).fire(new r.Event("zoomend",i)),h&&this.fire(new r.Event("rotatestart",i)).fire(new r.Event("rotate",i)).fire(new r.Event("rotateend",i)),c&&this.fire(new r.Event("pitchstart",i)).fire(new r.Event("pitch",i)).fire(new r.Event("pitchend",i)),this.fire(new r.Event("moveend",i)),this}easeTo(n,i){let o,a,s,l,u;this._stop(!1,n.easeId),(!1===(n=r.extend({offset:[0,0],duration:500,easing:r.ease},n)).animate||this._prefersReducedMotion(n))&&(n.duration=0);let c=this.transform,h=this.getZoom(),d=this.getBearing(),f=this.getPitch(),p=this.getPadding(),m="zoom"in n?+n.zoom:h,g="bearing"in n?this._normalizeBearing(n.bearing,d):d,y="pitch"in n?+n.pitch:f,_="padding"in n?n.padding:c.padding,v=r.Point.convert(n.offset);if("globe"===c.projection.name){let i=r.MercatorCoordinate.fromLngLat(c.center),l=v.rotate(-c.angle);i.x+=l.x/c.worldSize,i.y+=l.y/c.worldSize;let u=i.toLngLat(),h=r.LngLat.convert(n.center||u);this._normalizeCenter(h),o=c.centerPoint.add(l),a=new r.Point(i.x,i.y).mult(c.worldSize),s=new r.Point(r.mercatorXfromLng(h.lng),r.mercatorYfromLat(h.lat)).mult(c.worldSize).sub(a)}else{o=c.centerPoint.add(v);let i=c.pointLocation(o),l=r.LngLat.convert(n.center||i);this._normalizeCenter(l),a=c.project(i),s=c.project(l).sub(a)}let b=c.zoomScale(m-h);n.around&&(l=r.LngLat.convert(n.around),u=c.locationPoint(l));let x=this._zooming||m!==h,w=this._rotating||d!==g,E=this._pitching||y!==f,C=!c.isPaddingEqual(_),S=c=>S=>{if(x&&(c.zoom=r.number(h,m,S)),w&&(c.bearing=r.number(d,g,S)),E&&(c.pitch=r.number(f,y,S)),C&&(c.interpolatePadding(p,_,S),o=c.centerPoint.add(v)),l)c.setLocationAtPoint(l,u);else{let r=c.zoomScale(c.zoom-h),n=m>h?Math.min(2,b):Math.max(.5,b),i=Math.pow(n,1-S),l=c.unproject(a.add(s.mult(S*i)).mult(r));c.setLocationAtPoint(c.renderWorldCopies?l.wrap():l,o)}return n.preloadOnly||this._fireMoveEvents(i),c};if(n.preloadOnly){let r=this._emulate(S,n.duration,c);return this._preloadTiles(r),this}let T={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=x,this._rotating=w,this._pitching=E,this._padding=C,this._easeId=n.easeId,this._prepareEase(i,n.noMoveStart,T),this._ease(S(c),r=>{c.recenterOnTerrain(),this._afterEase(i,r)},n),this}_prepareEase(n,i,o={}){this._moving=!0,this.transform.cameraElevationReference="sea",i||o.moving||this.fire(new r.Event("movestart",n)),this._zooming&&!o.zooming&&this.fire(new r.Event("zoomstart",n)),this._rotating&&!o.rotating&&this.fire(new r.Event("rotatestart",n)),this._pitching&&!o.pitching&&this.fire(new r.Event("pitchstart",n))}_fireMoveEvents(n){this.fire(new r.Event("move",n)),this._zooming&&this.fire(new r.Event("zoom",n)),this._rotating&&this.fire(new r.Event("rotate",n)),this._pitching&&this.fire(new r.Event("pitch",n))}_afterEase(n,i){if(this._easeId&&i&&this._easeId===i)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";let o=this._zooming,a=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,o&&this.fire(new r.Event("zoomend",n)),a&&this.fire(new r.Event("rotateend",n)),s&&this.fire(new r.Event("pitchend",n)),this.fire(new r.Event("moveend",n))}flyTo(n,i){if(this._prefersReducedMotion(n)){let o=r.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,i)}this.stop(),n=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},n);let o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in n?r.clamp(+n.zoom,o.minZoom,o.maxZoom):a,h="bearing"in n?this._normalizeBearing(n.bearing,s):s,d="pitch"in n?+n.pitch:l,f="padding"in n?n.padding:o.padding,p=o.zoomScale(c-a),m=r.Point.convert(n.offset),g=o.centerPoint.add(m),y=o.pointLocation(g),_=r.LngLat.convert(n.center||y);this._normalizeCenter(_);let v=o.project(y),b=o.project(_).sub(v),x=n.curve,w=Math.max(o.width,o.height),E=w/p,C=b.mag();if("minZoom"in n){let i=r.clamp(Math.min(n.minZoom,a,c),o.minZoom,o.maxZoom),s=w/o.zoomScale(i-a);x=Math.sqrt(s/C*2)}let S=x*x;function T(r){let n=(E*E-w*w+(r?-1:1)*S*S*C*C)/(2*(r?E:w)*S*C);return Math.log(Math.sqrt(n*n+1)-n)}function M(r){return(Math.exp(r)-Math.exp(-r))/2}function k(r){return(Math.exp(r)+Math.exp(-r))/2}let I=T(0),L=function(r){return k(I)/k(I+x*r)},A=function(r){var n;return w*((k(I)*(M(n=I+x*r)/k(n))-M(I))/S)/C},z=(T(1)-I)/x;if(1e-6>Math.abs(C)||!isFinite(z)){if(1e-6>Math.abs(w-E))return this.easeTo(n,i);let r=E<w?-1:1;z=Math.abs(Math.log(E/w))/x,A=function(){return 0},L=function(n){return Math.exp(r*x*n)}}n.duration="duration"in n?+n.duration:1e3*z/("screenSpeed"in n?+n.screenSpeed/x:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0);let P=s!==h,O=d!==l,D=!o.isPaddingEqual(f),R=o=>p=>{let y=p*z,x=1/L(y);o.zoom=1===p?c:a+o.scaleZoom(x),P&&(o.bearing=r.number(s,h,p)),O&&(o.pitch=r.number(l,d,p)),D&&(o.interpolatePadding(u,f,p),g=o.centerPoint.add(m));let w=1===p?_:o.unproject(v.add(b.mult(A(y))).mult(x));return o.setLocationAtPoint(o.renderWorldCopies?w.wrap():w,g),o._updateCameraOnTerrain(),n.preloadOnly||this._fireMoveEvents(i),o};if(n.preloadOnly){let r=this._emulate(R,n.duration,o);return this._preloadTiles(r),this}return this._zooming=!0,this._rotating=P,this._pitching=O,this._padding=D,this._prepareEase(i,!1),this._ease(R(o),()=>this._afterEase(i),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,n){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){let r=this._onEaseEnd;this._onEaseEnd=void 0,r.call(this,n)}if(!r){let r=this.handlers;r&&r.stop(!1)}return this}_ease(n,i,o){!1===o.animate||0===o.duration?(n(1),i()):(this._easeStart=r.exported.now(),this._easeOptions=o,this._onEaseFrame=n,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){let n=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1),i=this._onEaseFrame;i&&i(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,i){n=r.wrap(n,-180,180);let o=Math.abs(n-i);return Math.abs(n-360-i)<o&&(n-=360),Math.abs(n+360-i)<o&&(n+=360),n}_normalizeCenter(r){let n=this.transform;if(!n.renderWorldCopies||n.maxBounds)return;let i=r.lng-n.center.lng;r.lng+=i>180?-360:i<-180?360:0}_prefersReducedMotion(n){return this._respectPrefersReducedMotion&&r.exported.prefersReducedMotion&&!(n&&n.essential)}_emulate(r,n,i){let o=Math.ceil(15*n/1e3),a=[],s=r(i.clone());for(let r=0;r<=o;r++){let n=s(r/o);a.push(n.clone())}return a}}class nV{constructor(n={}){this.options=n,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){let n=this.options&&this.options.compact;return this._map=r,this._container=u("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=u("button","mapboxgl-ctrl-attrib-button",this._container),u("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=u("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),n&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===n&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(r,n){let i=this._map._getUIString(`AttributionControl.${n}`);r.setAttribute("aria-label",i),r.removeAttribute("title"),r.firstElementChild&&r.firstElementChild.setAttribute("title",i)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));let i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(n){let o=i.reduce((r,n,o)=>(n.value&&(r+=`${n.key}=${n.value}${o<i.length-1?"&":""}`),r),"?");n.href=`${r.config.FEEDBACK_URL}/${o}#${r2(this._map,!0)}`,n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}}_updateData(r){r&&("metadata"===r.sourceDataType||"visibility"===r.sourceDataType||"style"===r.dataType)&&(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let r=[];if(this._map.style.stylesheet){let r=this._map.style.stylesheet;this.styleOwner=r.owner,this.styleId=r.id}let n=this._map.style._sourceCaches;for(let i in n){let o=n[i];if(o.used){let n=o.getSource();n.attribution&&0>r.indexOf(n.attribution)&&r.push(n.attribution)}}r.sort((r,n)=>r.length-n.length),r=r.filter((n,i)=>{for(let o=i+1;o<r.length;o++)if(r[o].indexOf(n)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=[...this.options.customAttribution,...r]:r.unshift(this.options.customAttribution));let i=r.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,r.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class nU{constructor(){r.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(r){this._map=r,this._container=u("div","mapboxgl-ctrl");let n=u("a","mapboxgl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://www.mapbox.com/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(r){r&&"metadata"!==r.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;let r=this._map.style._sourceCaches;if(0===Object.entries(r).length)return!0;for(let n in r){let i=r[n].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}_updateCompact(){let r=this._container.children;if(r.length){let n=r[0];this._map.getCanvasContainer().offsetWidth<250?n.classList.add("mapboxgl-compact"):n.classList.remove("mapboxgl-compact")}}}class nq{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let n=++this._id;return this._queue.push({callback:r,id:n,cancelled:!1}),n}remove(r){let n=this._currentlyRunning,i=n?this._queue.concat(n):this._queue;for(let n of i)if(n.id===r)return void(n.cancelled=!0)}run(r=0){let n=this._currentlyRunning=this._queue;for(let i of(this._queue=[],n))if(!i.cancelled&&(i.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function n$(n,i,o){if(n=new r.LngLat(n.lng,n.lat),i){let a=new r.LngLat(n.lng-360,n.lat),s=new r.LngLat(n.lng+360,n.lat),l=360*Math.ceil(Math.abs(n.lng-o.center.lng)/360),u=o.locationPoint(n).distSqr(i),c=i.x<0||i.y<0||i.x>o.width||i.y>o.height;o.locationPoint(a).distSqr(i)<u&&(c||Math.abs(a.lng-o.center.lng)<l)?n=a:o.locationPoint(s).distSqr(i)<u&&(c||Math.abs(s.lng-o.center.lng)<l)&&(n=s)}for(;Math.abs(n.lng-o.center.lng)>180;){let r=o.locationPoint(n);if(r.x>=0&&r.y>=0&&r.x<=o.width&&r.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}let nH={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class nZ extends r.Evented{constructor(n,i){if(super(),(n instanceof r.window.HTMLElement||i)&&(n=r.extend({element:n},i)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=n&&n.occludedOpacity||.2,n&&n.element)this._element=n.element,this._offset=r.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=u("div");let i=c("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},this._element),o=c("radialGradient",{id:"shadowGradient"},c("defs",{},i));c("stop",{offset:"10%","stop-opacity":.4},o),c("stop",{offset:"100%","stop-opacity":.05},o),c("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),c("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),c("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),c("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=r.Point.convert(n&&n.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",r=>{r.preventDefault()}),this._element.addEventListener("mousedown",r=>{r.preventDefault()});let o=this._element.classList;for(let r in nH)o.remove(`mapboxgl-marker-anchor-${r}`);o.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(r){return r===this._map||(this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._updateMoving),r.on("moveend",this._update),r.on("remove",this._clearFadeTimer),r._addMarker(this),this.setDraggable(this._draggable),this._update(),r.on("click",this._onMapClick)),this}remove(){let r=this._map;return r&&(r.off("click",this._onMapClick),r.off("move",this._updateMoving),r.off("moveend",this._update),r.off("mousedown",this._addDragHandler),r.off("touchstart",this._addDragHandler),r.off("mouseup",this._onUp),r.off("touchend",this._onUp),r.off("mousemove",this._onMove),r.off("touchmove",this._onMove),r.off("remove",this._clearFadeTimer),r._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=r.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let n=Math.sqrt(91.125);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[n,-1*(24.6+n)],"bottom-right":[-n,-1*(24.6+n)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,r._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(r){let n=r.code,i=r.charCode||r.keyCode;"Space"!==n&&"Enter"!==n&&32!==i&&13!==i||this.togglePopup()}_onMapClick(r){let n=r.originalEvent.target,i=this._element;this._popup&&(n===i||i.contains(n))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){let r=this._popup;return r&&(r.isOpen()?(r.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(r.addTo(this._map),this._element.setAttribute("aria-expanded","true"))),this}_behindTerrain(){let r=this._map,n=this._pos;if(!r||!n)return!1;let i=r.unproject(n),o=r.getFreeCameraOptions();if(!o.position)return!1;let a=o.position.toLngLat();return a.distanceTo(i)<.9*a.distanceTo(this._lngLat)}_evaluateOpacity(){let n;let i=this._map;if(!i)return;let o=this._pos;if(!o||o.x<0||o.x>i.transform.width||o.y<0||o.y>i.transform.height)return void this._clearFadeTimer();let a=i.unproject(o);i._showingGlobe()&&r.isLngLatBehindGlobe(i.transform,this._lngLat)?n=0:(n=1-i._queryFogOpacity(a),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(n*=this._occludedOpacity)),this._element.style.opacity=`${n}`,this._element.style.pointerEvents=n>0?"auto":"none",this._popup&&this._popup._setOpacity(n),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){let r=this._pos;if(!r||!this._map)return;let n=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${r.x}px,${r.y}px)
            ${nH[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${n.x}px,${n.y}px)
        `}_calculateXYTransform(){let n=this._pos,i=this._map,o=this.getPitchAlignment();if(!i||!n||"map"!==o)return"";if(!i._showingGlobe()){let r=i.getPitch();return r?`rotateX(${r}deg)`:""}let a=r.radToDeg(r.globeTiltAtLngLat(i.transform,this._lngLat)),s=n.sub(r.globeCenterToScreenPoint(i.transform)),l=Math.abs(s.x)+Math.abs(s.y);if(0===l)return"";let u=a/l;return`rotateX(${-s.y*u}deg) rotateY(${s.x*u}deg)`}_calculateZTransform(){let n=this._pos,i=this._map;if(!i||!n)return"";let o=0,a=this.getRotationAlignment();if("map"===a){if(i._showingGlobe()){let n=i.project(new r.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),a=i.project(new r.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(n);o=r.radToDeg(Math.atan2(a.y,a.x))-90}else o=-i.getBearing()}else if("horizon"===a){let a=r.smoothstep(4,6,i.getZoom()),s=r.globeCenterToScreenPoint(i.transform);s.y+=a*i.transform.height;let l=n.sub(s),u=r.radToDeg(Math.atan2(l.y,l.x));o=(u>90?u-270:u+90)*(1-a)}return(o+=this._rotation)?`rotateZ(${o}deg)`:""}_update(n){r.window.cancelAnimationFrame(this._updateFrameId);let i=this._map;i&&(i.transform.renderWorldCopies&&(this._lngLat=n$(this._lngLat,this._pos,i.transform)),this._pos=i.project(this._lngLat),!0===n?this._updateFrameId=r.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),i._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(i._showingGlobe()||i.getTerrain()||i.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(n){return this._offset=r.Point.convert(n),this._update(),this}_onMove(n){let i=this._map;if(!i)return;let o=this._pointerdownPos,a=this._positionDelta;if(o&&a){if(!this._isDragging){let r=this._clickTolerance||i._clickTolerance;if(n.point.dist(o)<r)return;this._isDragging=!0}this._pos=n.point.sub(a),this._lngLat=i.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;let n=this._map;n&&(n.off("mousemove",this._onMove),n.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(r){let n=this._map,i=this._pos;n&&i&&this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(i),this._pointerdownPos=r.point,this._state="pending",n.on("mousemove",this._onMove),n.on("touchmove",this._onMove),n.once("mouseup",this._onUp),n.once("touchend",this._onUp))}setDraggable(r){this._draggable=!!r;let n=this._map;return n&&(r?(n.on("mousedown",this._addDragHandler),n.on("touchstart",this._addDragHandler)):(n.off("mousedown",this._addDragHandler),n.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(r){return this._occludedOpacity=r||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}let nG={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"};function nW(n=new r.Point(0,0),i="bottom"){if("number"==typeof n){let o=Math.round(Math.sqrt(.5*Math.pow(n,2)));switch(i){case"top":return new r.Point(0,n);case"top-left":return new r.Point(o,o);case"top-right":return new r.Point(-o,o);case"bottom":return new r.Point(0,-n);case"bottom-left":return new r.Point(o,-o);case"bottom-right":return new r.Point(-o,-o);case"left":return new r.Point(n,0);case"right":return new r.Point(-n,0)}return new r.Point(0,0)}return n instanceof r.Point||Array.isArray(n)?r.Point.convert(n):r.Point.convert(n[i]||[0,0])}class nX{constructor(r){this.jumpTo(r)}getValue(n){if(n<=this._startTime)return this._start;if(n>=this._endTime)return this._end;let i=r.easeCubicInOut((n-this._startTime)/(this._endTime-this._startTime));return this._start*(1-i)+this._end*i}isEasing(r){return r>=this._startTime&&r<=this._endTime}jumpTo(r){this._startTime=-1/0,this._endTime=-1/0,this._start=r,this._end=r}easeTo(r,n,i){this._start=this.getValue(n),this._end=r,this._startTime=n,this._endTime=n+i}}let nY={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},nK={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},nJ={showCompass:!0,showZoom:!0,visualizePitch:!1};class nQ{constructor(n,i,o=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new np({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new nm({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener("mousedown",this.mousedown),i.addEventListener("touchstart",this.touchstart,{passive:!1}),i.addEventListener("touchmove",this.touchmove),i.addEventListener("touchend",this.touchend),i.addEventListener("touchcancel",this.reset)}down(r,n){this.mouseRotate.mousedown(r,n),this.mousePitch&&this.mousePitch.mousedown(r,n),f()}move(r,n){let i=this.map,o=this.mouseRotate.mousemoveWindow(r,n),a=o&&o.bearingDelta;if(a&&i.setBearing(i.getBearing()+a),this.mousePitch){let o=this.mousePitch.mousemoveWindow(r,n),a=o&&o.pitchDelta;a&&i.setPitch(i.getPitch()+a)}}off(){let r=this.element;r.removeEventListener("mousedown",this.mousedown),r.removeEventListener("touchstart",this.touchstart,{passive:!1}),r.removeEventListener("touchmove",this.touchmove),r.removeEventListener("touchend",this.touchend),r.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){p(),r.window.removeEventListener("mousemove",this.mousemove),r.window.removeEventListener("mouseup",this.mouseup)}mousedown(n){this.down(r.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),y(this.element,n)),r.window.addEventListener("mousemove",this.mousemove),r.window.addEventListener("mouseup",this.mouseup)}mousemove(r){this.move(r,y(this.element,r))}mouseup(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()}touchstart(r){1!==r.targetTouches.length?this.reset():(this._startPos=this._lastPos=_(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>r.preventDefault()},this._startPos))}touchmove(r){1!==r.targetTouches.length?this.reset():(this._lastPos=_(this.element,r.targetTouches)[0],this.move({preventDefault:()=>r.preventDefault()},this._lastPos))}touchend(r){0===r.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let n0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},n1={maxWidth:100,unit:"metric"},n2={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},n4={version:r.version,supported:s,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends nj{constructor(n){if(r.LivePerformanceUtils.mark(r.PerformanceMarkers.create),null!=(n=r.extend({},nK,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>85)throw Error("maxPitch must be less than or equal to 85");if(n.antialias&&r.isSafariWithAntialiasingBug(r.window)&&(n.antialias=!1,r.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new rQ(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),n),this._interactive=n.interactive,this._minTileCacheSize=n.minTileCacheSize,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._antialias=n.antialias,this._useWebGL2=n.useWebGL2,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=n.crossSourceCollisions,this._collectResourceTiming=n.collectResourceTiming,this._optimizeForTerrain=n.optimizeForTerrain,this._language=this._parseLanguage(n.language),this._worldview=n.worldview,this._renderTaskQueue=new nq,this._domRenderTaskQueue=new nq,this._controls=[],this._markers=[],this._popups=[],this._mapId=r.uniqueId(),this._locale=r.extend({},nY,n.locale),this._clickTolerance=n.clickTolerance,this._cooperativeGestures=n.cooperativeGestures,this._performanceMetricsCollection=n.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new nX(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new r.RequestManager(n.transformRequest,n.accessToken,n.testMode),this._silenceAuthErrors=!!n.testMode,"string"==typeof n.container){if(this._container=r.window.document.getElementById(n.container),!this._container)throw Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof r.window.HTMLElement))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(this._container.childNodes.length>0&&r.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),n.maxBounds&&this.setMaxBounds(n.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==r.window&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1),r.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),r.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new nB(this,n),this._localFontFamily=n.localFontFamily,this._localIdeographFontFamily=n.localIdeographFontFamily,n.style&&this.setStyle(n.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),n.projection&&this.setProjection(n.projection),this._hash=n.hash&&new r1("string"==typeof n.hash&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,r.extend({},n.fitBoundsOptions,{duration:0})))),this.resize(),n.attributionControl&&this.addControl(new nV({customAttribution:n.customAttribution})),this._logoControl=new nU,this.addControl(this._logoControl,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",n=>{this._update("style"===n.dataType),this.fire(new r.Event(`${n.dataType}data`,n))}),this.on("dataloading",n=>{this.fire(new r.Event(`${n.dataType}dataloading`,n))})}_getMapId(){return this._mapId}addControl(n,i){if(void 0===i&&(i=n.getDefaultPosition?n.getDefaultPosition():"top-right"),!n||!n.onAdd)return this.fire(new r.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let o=n.onAdd(this);this._controls.push(n);let a=this._controlPositions[i];return -1!==i.indexOf("bottom")?a.insertBefore(o,a.firstChild):a.appendChild(o),this}removeControl(n){if(!n||!n.onRemove)return this.fire(new r.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let i=this._controls.indexOf(n);return i>-1&&this._controls.splice(i,1),n.onRemove(this),this}hasControl(r){return this._controls.indexOf(r)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(n){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));let i=!this._moving;return i&&this.fire(new r.Event("movestart",n)).fire(new r.Event("move",n)),this.fire(new r.Event("resize",n)),i&&this.fire(new r.Event("moveend",n)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(n){return this.transform.setMaxBounds(r.LngLatBounds.convert(n)),this._update()}setMinZoom(n){if((n=null==n?-2:n)>=-2&&n<=this.transform.maxZoom)return this.transform.minZoom=n,this._update(),this.getZoom()<n?this.setZoom(n):this.fire(new r.Event("zoomstart")).fire(new r.Event("zoom")).fire(new r.Event("zoomend")),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(n){if((n=null==n?22:n)>=this.transform.minZoom)return this.transform.maxZoom=n,this._update(),this.getZoom()>n?this.setZoom(n):this.fire(new r.Event("zoomstart")).fire(new r.Event("zoom")).fire(new r.Event("zoomend")),this;throw Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(n){if((n=null==n?0:n)<0)throw Error("minPitch must be greater than or equal to 0");if(n>=0&&n<=this.transform.maxPitch)return this.transform.minPitch=n,this._update(),this.getPitch()<n?this.setPitch(n):this.fire(new r.Event("pitchstart")).fire(new r.Event("pitch")).fire(new r.Event("pitchend")),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(n){if((n=null==n?85:n)>85)throw Error("maxPitch must be less than or equal to 85");if(n>=this.transform.minPitch)return this.transform.maxPitch=n,this._update(),this.getPitch()>n?this.setPitch(n):this.fire(new r.Event("pitchstart")).fire(new r.Event("pitch")).fire(new r.Event("pitchend")),this;throw Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(r){return this.transform.renderWorldCopies=r,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(n){return"auto"===n?r.window.navigator.language:Array.isArray(n)?0===n.length?void 0:n.map(n=>"auto"===n?r.window.navigator.language:n):n}setLanguage(r){let n=this._parseLanguage(r);if(!this.style||n===this._language)return this;for(let r of(this._language=n,this.style._reloadSources(),this._controls))r._setLanguage&&r._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(r){return this.style&&r!==this._worldview&&(this._worldview=r,this.style._reloadSources()),this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(r){return this._lazyInitEmptyStyle(),r?"string"==typeof r&&(r={name:r}):r=null,this._useExplicitProjection=!!r,this._prioritizeAndUpdateProjection(r,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){let n;if("globe"!==this.getProjection().name)return;let i=this.transform,o=i.projection.name;"globe"===o&&i.zoom>=r.GLOBE_ZOOM_THRESHOLD_MAX?(i.setMercatorFromTransition(),n=!0):"mercator"===o&&i.zoom<r.GLOBE_ZOOM_THRESHOLD_MAX&&(i.setProjection({name:"globe"}),n=!0),n&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(r,n){return this._updateProjection(r||n||{name:"mercator"})}_updateProjection(n){let i;if(i="globe"===n.name&&this.transform.zoom>=r.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(n),this.style.applyProjectionUpdate(),i){for(let r in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[r].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(n){return this.transform.locationPoint3D(r.LngLat.convert(n))}unproject(n){return this.transform.pointLocation3D(r.Point.convert(n))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(r,n,i){if("mouseenter"===r||"mouseover"===r){let o=!1;return{layers:new Set(n),listener:i,delegates:{mousemove:a=>{let s=n.filter(r=>this.getLayer(r)),l=s.length?this.queryRenderedFeatures(a.point,{layers:s}):[];l.length?o||(o=!0,i.call(this,new nt(r,this,a.originalEvent,{features:l}))):o=!1},mouseout:()=>{o=!1}}}}if("mouseleave"===r||"mouseout"===r){let o=!1;return{layers:new Set(n),listener:i,delegates:{mousemove:a=>{let s=n.filter(r=>this.getLayer(r));(s.length?this.queryRenderedFeatures(a.point,{layers:s}):[]).length?o=!0:o&&(o=!1,i.call(this,new nt(r,this,a.originalEvent)))},mouseout:n=>{o&&(o=!1,i.call(this,new nt(r,this,n.originalEvent)))}}}}return{layers:new Set(n),listener:i,delegates:{[r]:r=>{let o=n.filter(r=>this.getLayer(r)),a=o.length?this.queryRenderedFeatures(r.point,{layers:o}):[];a.length&&(r.features=a,i.call(this,r),delete r.features)}}}}on(r,n,i){if(void 0===i)return super.on(r,n);Array.isArray(n)||(n=[n]);let o=this._createDelegatedListener(r,n,i);for(let n in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[r]=this._delegatedListeners[r]||[],this._delegatedListeners[r].push(o),o.delegates)this.on(n,o.delegates[n]);return this}once(r,n,i){if(void 0===i)return super.once(r,n);Array.isArray(n)||(n=[n]);let o=this._createDelegatedListener(r,n,i);for(let r in o.delegates)this.once(r,o.delegates[r]);return this}off(r,n,i){if(void 0===i)return super.off(r,n);n=new Set(Array.isArray(n)?n:[n]);let o=(r,n)=>{if(r.size!==n.size)return!1;for(let i of r)if(!n.has(i))return!1;return!0},a=this._delegatedListeners?this._delegatedListeners[r]:void 0;return a&&(r=>{for(let a=0;a<r.length;a++){let s=r[a];if(s.listener===i&&o(s.layers,n)){for(let r in s.delegates)this.off(r,s.delegates[r]);return r.splice(a,1),this}}})(a),this}queryRenderedFeatures(n,i){return this.style?(void 0!==i||void 0===n||n instanceof r.Point||Array.isArray(n)||(i=n,n=void 0),this.style.queryRenderedFeatures(n=n||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(r,n){return this.style.querySourceFeatures(r,n)}isPointOnSurface(n){let{name:i}=this.transform.projection;return"globe"!==i&&"mercator"!==i&&r.warnOnce(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(r.Point.convert(n))}setStyle(n,i){return!1!==(i=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&n?(this._diffStyle(n,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(n,i))}_getUIString(r){let n=this._locale[r];if(null==n)throw Error(`Missing UI string '${r}'`);return n}_updateStyle(r,n){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),r&&(this.style=new tC(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof r?this.style.loadURL(r):this.style.loadJSON(r)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new tC(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(n,i){if("string"==typeof n){let o=this._requestManager.normalizeStyleURL(n),a=this._requestManager.transformRequest(o,r.ResourceType.Style);r.getJSON(a,(n,o)=>{n?this.fire(new r.ErrorEvent(n)):o&&this._updateDiff(o,i)})}else"object"==typeof n&&this._updateDiff(n,i)}_updateDiff(n,i){try{this.style.setState(n)&&this._update(!0)}catch(o){r.warnOnce(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(n,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(r.warnOnce("There is no style added to the map."),!1)}addSource(r,n){return this._lazyInitEmptyStyle(),this.style.addSource(r,n),this._update(!0)}isSourceLoaded(r){return!!this.style&&this.style._isSourceCacheLoaded(r)}areTilesLoaded(){let r=this.style&&this.style._sourceCaches;for(let n in r){let i=r[n]._tiles;for(let r in i){let n=i[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0}addSourceType(r,n,i){this._lazyInitEmptyStyle(),this.style.addSourceType(r,n,i)}removeSource(r){return this.style.removeSource(r),this._updateTerrain(),this._update(!0)}getSource(r){return this.style.getSource(r)}addImage(n,i,{pixelRatio:o=1,sdf:a=!1,stretchX:s,stretchY:l,content:u}={}){if(this._lazyInitEmptyStyle(),i instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&i instanceof r.window.ImageBitmap){let{width:c,height:h,data:d}=r.exported.getImageData(i);this.style.addImage(n,{data:new r.RGBAImage({width:c,height:h},d),pixelRatio:o,stretchX:s,stretchY:l,content:u,sdf:a,version:0})}else if(void 0===i.width||void 0===i.height)this.fire(new r.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{let{width:c,height:h}=i;this.style.addImage(n,{data:new r.RGBAImage({width:c,height:h},new Uint8Array(i.data)),pixelRatio:o,stretchX:s,stretchY:l,content:u,sdf:a,version:0,userImage:i}),i.onAdd&&i.onAdd(this,n)}}updateImage(n,i){let o=this.style.getImage(n);if(!o)return void this.fire(new r.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let a=i instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&i instanceof r.window.ImageBitmap?r.exported.getImageData(i):i,{width:s,height:l}=a;void 0!==s&&void 0!==l?s===o.data.width&&l===o.data.height?(o.data.replace(a.data,!(i instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&i instanceof r.window.ImageBitmap)),this.style.updateImage(n,o)):this.fire(new r.ErrorEvent(Error(`The width and height of the updated image (${s}, ${l})
                must be that same as the previous version of the image
                (${o.data.width}, ${o.data.height})`))):this.fire(new r.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(n){return n?!!this.style.getImage(n):(this.fire(new r.ErrorEvent(Error("Missing required image id"))),!1)}removeImage(r){this.style.removeImage(r)}loadImage(n,i){r.getImage(this._requestManager.transformRequest(n,r.ResourceType.Image),(n,o)=>{i(n,o instanceof r.window.HTMLImageElement?r.exported.getImageData(o):o)})}listImages(){return this.style.listImages()}addLayer(r,n){return this._lazyInitEmptyStyle(),this.style.addLayer(r,n),this._update(!0)}moveLayer(r,n){return this.style.moveLayer(r,n),this._update(!0)}removeLayer(r){return this.style.removeLayer(r),this._update(!0)}getLayer(r){return this.style.getLayer(r)}setLayerZoomRange(r,n,i){return this.style.setLayerZoomRange(r,n,i),this._update(!0)}setFilter(r,n,i={}){return this.style.setFilter(r,n,i),this._update(!0)}getFilter(r){return this.style.getFilter(r)}setPaintProperty(r,n,i,o={}){return this.style.setPaintProperty(r,n,i,o),this._update(!0)}getPaintProperty(r,n){return this.style.getPaintProperty(r,n)}setLayoutProperty(r,n,i,o={}){return this.style.setLayoutProperty(r,n,i,o),this._update(!0)}getLayoutProperty(r,n){return this.style.getLayoutProperty(r,n)}setLight(r,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(r,n),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(r){return this._lazyInitEmptyStyle(),!r&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(r),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(r){return this._lazyInitEmptyStyle(),this.style.setFog(r),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(n){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(r.LngLat.convert(n),this.transform):0}setFeatureState(r,n){return this.style.setFeatureState(r,n),this._update()}removeFeatureState(r,n){return this.style.removeFeatureState(r,n),this._update()}getFeatureState(r){return this.style.getFeatureState(r)}_updateContainerDimensions(){if(!this._container)return;let n=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300,o,a,s,l=this._container;for(;l&&(!a||!s);){let n=r.window.getComputedStyle(l).transform;n&&"none"!==n&&((o=n.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==o[0]&&"1"!==o[0]&&(a=o[0]),o[3]&&"0"!==o[3]&&"1"!==o[3]&&(s=o[3])),l=l.parentElement}this._containerWidth=a?Math.abs(n/a):n,this._containerHeight=s?Math.abs(i/s):i}_detectMissingCSS(){"rgb(250, 128, 114)"!==r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){let r=this._container;r.classList.add("mapboxgl-map"),(this._missingCSSCanary=u("div","mapboxgl-canary",r)).style.visibility="hidden",this._detectMissingCSS();let n=this._canvasContainer=u("div","mapboxgl-canvas-container",r);this._interactive&&n.classList.add("mapboxgl-interactive"),this._canvas=u("canvas","mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);let i=this._controlContainer=u("div","mapboxgl-control-container",r),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(r=>{o[r]=u("div",`mapboxgl-ctrl-${r}`,i)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(n,i){let o=r.exported.devicePixelRatio||1;this._canvas.width=o*Math.ceil(n),this._canvas.height=o*Math.ceil(i),this._canvas.style.width=`${n}px`,this._canvas.style.height=`${i}px`}_addMarker(r){this._markers.push(r)}_removeMarker(r){let n=this._markers.indexOf(r);-1!==n&&this._markers.splice(n,1)}_addPopup(r){this._popups.push(r)}_removePopup(r){let n=this._popups.indexOf(r);-1!==n&&this._popups.splice(n,1)}_setupPainter(){let n=r.extend({},s.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",n),o=i||this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);o?(this._useWebGL2&&!i&&r.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),r.storeAuthState(o,!0),this.painter=new rj(o,this.transform,!!i),this.on("data",r=>{"source"===r.dataType&&this.painter.setTileLoadedFlag(!0)}),r.exported$1.testSupport(o)):this.fire(new r.ErrorEvent(Error("Failed to initialize WebGL")))}_contextLost(n){n.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:n}))}_contextRestored(n){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:n}))}_onMapScroll(r){if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(r){return this.style&&(this._styleDirty=this._styleDirty||r,this._sourcesDirty=!0,this.triggerRepaint()),this}_requestRenderFrame(r){return this._update(),this._renderTaskQueue.add(r)}_cancelRenderFrame(r){this._renderTaskQueue.remove(r)}_requestDomTask(r){!this.loaded()||this.loaded()&&!this.isMoving()?r():this._domRenderTaskQueue.add(r)}_render(n){let i;let o=this.painter.context.extTimerQuery,a=r.exported.now();if(this.listens("gpu-timing-frame")&&(i=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],r.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],r.window.performance.now())),this._renderTaskQueue.run(n),this._domRenderTaskQueue.run(n),this._removed)return;this._updateProjectionTransition();let s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;let n=this.transform.zoom,i=this.transform.pitch,o=r.exported.now(),a=new r.EvaluationParameters(n,{now:o,fadeDuration:s,pitch:i,transition:this.style.getTransition()});this.style.update(a)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let l=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),l=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):l=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){let n=r.exported.now()-a;o.endQueryEXT(o.TIME_ELAPSED_EXT,i),setTimeout(()=>{let s=o.getQueryObjectEXT(i,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i),this.fire(new r.Event("gpu-timing-frame",{cpuTime:n,gpuTime:s})),r.window.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:s}})},50)}if(this.listens("gpu-timing-layer")){let n=this.painter.collectGpuTimers();setTimeout(()=>{let i=this.painter.queryGpuTimers(n);this.fire(new r.Event("gpu-timing-layer",{layerTimes:i}))},50)}if(this.listens("gpu-timing-deferred-render")){let n=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{let i=this.painter.queryGpuTimeDeferredRender(n);this.fire(new r.Event("gpu-timing-deferred-render",{gpuTime:i}))},50)}let u=this._sourcesDirty||this._styleDirty||this._placementDirty||l;if(u||this._repaint)this.triggerRepaint();else{let n=!this.isMoving()&&this.loaded();if(n&&(l=this._updateAverageElevation(a,!0)),l)this.triggerRepaint();else if(this._triggerFrame(!1),n&&(this.fire(new r.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){let n=this._calculateSpeedIndex();this.fire(new r.Event("speedindexcompleted",{speedIndex:n})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||u||(this._fullyLoaded=!0,r.LivePerformanceUtils.mark(r.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&r.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(r){for(let n of this._markers)r&&!this.getRenderWorldCopies()&&(n._lngLat=n._lngLat.wrap()),n._update();for(let n of this._popups)!r||this.getRenderWorldCopies()||n._trackPointer||(n._lngLat=n._lngLat.wrap()),n._update()}_updateAverageElevation(r,n=!1){let i=r=>(this.transform.averageElevation=r,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&i(0);if((n||r-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(r)){let n=this.transform.averageElevation,o=this.transform.sampleAverageElevation(),a=!1;this.transform.elevation&&(a=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(o)?o=0:this._averageElevationLastSampledAt=r;let s=Math.abs(n-o);if(s>1){if(this._isInitialLoad||a)return this._averageElevation.jumpTo(o),i(o);this._averageElevation.easeTo(o,r,300)}else if(s>1e-4)return this._averageElevation.jumpTo(o),i(o)}return!!this._averageElevation.isEasing(r)&&i(this._averageElevation.getValue(r))}_authenticate(){r.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,n=>{if(n&&(n.message===r.AUTH_ERR_MSG||401===n.status)){let n=this.painter.context.gl;r.storeAuthState(n,!1),this._logoControl instanceof nU&&this._logoControl._updateLogo(),n&&n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT|n.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new r.ErrorEvent(Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),r.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){let r=this._isDragging();this.painter.updateTerrain(this.style,r)}_calculateSpeedIndex(){let r=this.painter.canvasCopy(),n=this.painter.getCanvasCopiesAndTimestamps();n.timeStamps.push(performance.now());let i=this.painter.context.gl,o=i.createFramebuffer();function a(r){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,r,0);let n=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,n),n}return i.bindFramebuffer(i.FRAMEBUFFER,o),this._canvasPixelComparison(a(r),n.canvasCopies.map(a),n.timeStamps)}_canvasPixelComparison(r,n,i){let o=i[1]-i[0],a=r.length/4;for(let s=0;s<n.length;s++){let l=n[s],u=0;for(let n=0;n<l.length;n+=4)l[n]===r[n]&&l[n+1]===r[n+1]&&l[n+2]===r[n+2]&&l[n+3]===r[n+3]&&(u+=1);o+=(i[s+2]-i[s+1])*(1-u/a)}return o}remove(){for(let r of(this._hash&&this._hash.remove(),this._controls))r.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==r.window&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1),r.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));let n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),r.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(n){this._renderNextFrame=this._renderNextFrame||n,this.style&&!this._frame&&(this._frame=r.exported.frame(r=>{let n=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,n&&this._render(r)}))}_preloadTiles(n){let i=this.style?Object.values(this.style._sourceCaches):[];return r.asyncAll(i,(r,i)=>r._preloadTiles(n,i),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(r){this._trackResize&&this.resize({originalEvent:r})._update()}_onVisibilityChange(){"hidden"===r.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(r){this._showTileBoundaries!==r&&(this._showTileBoundaries=r,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(r){this._showTerrainWireframe!==r&&(this._showTerrainWireframe=r,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(r){this._speedIndexTiming!==r&&(this._speedIndexTiming=r,this._update())}get showPadding(){return!!this._showPadding}set showPadding(r){this._showPadding!==r&&(this._showPadding=r,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(r){this._showCollisionBoxes!==r&&(this._showCollisionBoxes=r,r?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(r){this._showOverdrawInspector!==r&&(this._showOverdrawInspector=r,this._update())}get repaint(){return!!this._repaint}set repaint(r){this._repaint!==r&&(this._repaint=r,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(r){this._vertices=r,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(r){this._showTileAABBs!==r&&(this._showTileAABBs=r,r&&this._update())}_setCacheLimits(n,i){r.setCacheLimits(n,i)}get version(){return r.version}},NavigationControl:class{constructor(n){this.options=r.extend({},nJ,n),this._container=u("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",r=>{this._map&&this._map.zoomIn({},{originalEvent:r})}),u("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",r=>{this._map&&this._map.zoomOut({},{originalEvent:r})}),u("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",r=>{let n=this._map;n&&(this.options.visualizePitch?n.resetNorthPitch({},{originalEvent:r}):n.resetNorth({},{originalEvent:r}))}),this._compassIcon=u("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){let r=this._map;if(!r)return;let n=r.getZoom(),i=n===r.getMaxZoom(),o=n===r.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())}_rotateCompassArrow(){let r=this._map;if(!r)return;let n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(r.transform.pitch*(Math.PI/180)),.5)}) rotateX(${r.transform.pitch}deg) rotateZ(${r.transform.angle*(180/Math.PI)}deg)`:`rotate(${r.transform.angle*(180/Math.PI)}deg)`;r._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=n)})}onAdd(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),r.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&r.on("pitch",this._rotateCompassArrow),r.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nQ(r,this._compass,this.options.visualizePitch)),this._container}onRemove(){let r=this._map;r&&(this._container.remove(),this.options.showZoom&&r.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&r.off("pitch",this._rotateCompassArrow),r.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(r,n){let i=u("button",r,this._container);return i.type="button",i.addEventListener("click",n),i}_setButtonTitle(r,n){if(!this._map)return;let i=this._map._getUIString(`NavigationControl.${n}`);r.setAttribute("aria-label",i),r.firstElementChild&&r.firstElementChild.setAttribute("title",i)}},GeolocateControl:class extends r.Evented{constructor(n){super(),this.options=r.extend({geolocation:r.window.navigator.geolocation},n0,n),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=r0(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(r){return this._map=r,this._container=u("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(n){let i=(r=!!this.options.geolocation)=>{this._supportsGeolocation=r,n(r)};void 0!==this._supportsGeolocation?n(this._supportsGeolocation):void 0!==r.window.navigator.permissions?r.window.navigator.permissions.query({name:"geolocation"}).then(r=>i("denied"!==r.state)).catch(()=>i()):i()}_isOutOfMapMaxBounds(r){let n=this._map.getMaxBounds(),i=r.coords;return!!n&&(i.longitude<n.getWest()||i.longitude>n.getEast()||i.latitude<n.getSouth()||i.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(n){if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(n),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",n)),this._finish()}}_updateCamera(n){let i=new r.LngLat(n.coords.longitude,n.coords.latitude),o=n.coords.accuracy,a=this._map.getBearing(),s=r.extend({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(o),s,{geolocateSource:!0})}_updateMarker(n){if(n){let i=new r.LngLat(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){let n=this._map.transform,i=r.mercatorZfromAltitude(1,n._center.lat)*n.worldSize,o=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(n){if(this._map){if(this.options.trackUserLocation){if(1===n.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===n.code&&this._noTimeout)return;this._setErrorState()}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",n)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(n){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=u("button","mapboxgl-ctrl-geolocate",this._container),u("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===n){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");let n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n)}else{let r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=u("div","mapboxgl-user-location"),this._dotElement.appendChild(u("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(u("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new nZ({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=u("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new nZ({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||"ACTIVE_LOCK"!==this._watchState||n.originalEvent&&"resize"===n.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}}_onDeviceOrientation(r){this._userLocationDotMarker&&(r.webkitCompassHeading?this._heading=r.webkitCompassHeading:!0===r.absolute&&(this._heading=-1*r.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let r;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(r={maximumAge:6e5,timeout:0},this._noTimeout=!0):(r=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,r),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){let n=()=>{r.window.addEventListener("ondeviceorientationabsolute"in r.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==r.window.DeviceMotionEvent&&"function"==typeof r.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(r=>{"granted"===r&&n()}).catch(console.error):n()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),r.window.removeEventListener("deviceorientation",this._onDeviceOrientation),r.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:nV,ScaleControl:class{constructor(n){this.options=r.extend({},n1,n),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(r){return!1}}(),r.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){let r=this.options.maxWidth||100,n=this._map,i=n._containerHeight/2,o=n._containerWidth/2-r/2,a=n.unproject([o,i]),s=n.unproject([o+r,i]),l=a.distanceTo(s);if("imperial"===this.options.unit){let n=3.2808*l;n>5280?this._setScale(r,n/5280,"mile"):this._setScale(r,n,"foot")}else"nautical"===this.options.unit?this._setScale(r,l/1852,"nautical-mile"):l>=1e3?this._setScale(r,l/1e3,"kilometer"):this._setScale(r,l,"meter")}_setScale(r,n,i){this._map._requestDomTask(()=>{let o=function(r){let n=Math.pow(10,`${Math.floor(r)}`.length-1),i=r/n;return n*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(r){let n=Math.pow(10,Math.ceil(-Math.log(r)/Math.LN10));return Math.round(r*n)/n}(i))}(n),a=o/n;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==i?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:i}).format(o):`${o}&nbsp;${n2[i]}`,this._container.style.width=r*a+"px"})}onAdd(r){return this._map=r,this._language=r.getLanguage(),this._container=u("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(r){this._language=r,this._update()}setUnit(r){this.options.unit=r,this._update()}},FullscreenControl:class{constructor(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof r.window.HTMLElement?this._container=n.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in r.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=u("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!r.window.document.fullscreenEnabled&&!r.window.document.webkitFullscreenEnabled)}_setupUI(){let n=this._fullscreenButton=u("button","mapboxgl-ctrl-fullscreen",this._controlContainer);u("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden","true"),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){let r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",r)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(r.window.document.fullscreenElement||r.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends r.Evented{constructor(n){super(),this.options=r.extend(Object.create(nG),n),r.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(n&&n.className?n.className.trim().split(/\s+/):[])}addTo(n){return this._map&&this.remove(),this._map=n,this.options.closeOnClick&&n.on("preclick",this._onClose),this.options.closeOnMove&&n.on("move",this._onClose),n.on("remove",this.remove),this._update(),n._addPopup(this),this._focusFirstElement(),this._trackPointer?(n.on("mousemove",this._onMouseEvent),n.on("mouseup",this._onMouseEvent),n._canvasContainer.classList.add("mapboxgl-track-pointer")):n.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);let n=this._map;return n&&(n.off("move",this._update),n.off("move",this._onClose),n.off("preclick",this._onClose),n.off("click",this._onClose),n.off("remove",this.remove),n.off("mousemove",this._onMouseEvent),n.off("mouseup",this._onMouseEvent),n.off("drag",this._onMouseEvent),n._canvasContainer&&n._canvasContainer.classList.remove("mapboxgl-track-pointer"),n._removePopup(this),this._map=void 0),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(n){this._lngLat=r.LngLat.convert(n),this._pos=null,this._trackPointer=!1,this._update();let i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();let r=this._map;return r&&(r.off("move",this._update),r.on("mousemove",this._onMouseEvent),r.on("drag",this._onMouseEvent),r._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(n){return this.setDOMContent(r.window.document.createTextNode(n))}setHTML(n){let i;let o=r.window.document.createDocumentFragment(),a=r.window.document.createElement("body");for(a.innerHTML=n;i=a.firstChild;)o.appendChild(i);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(r){return this.options.maxWidth=r,this._update(),this}setDOMContent(r){let n=this._content;if(n)for(;n.hasChildNodes();)n.firstChild&&n.removeChild(n.firstChild);else n=this._content=u("div","mapboxgl-popup-content",this._container||void 0);if(n.appendChild(r),this.options.closeButton){let r=this._closeButton=u("button","mapboxgl-popup-close-button",n);r.type="button",r.setAttribute("aria-label","Close popup"),r.setAttribute("aria-hidden","true"),r.innerHTML="&#215;",r.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(r){return this._classList.add(r),this._updateClassList(),this}removeClassName(r){return this._classList.delete(r),this._updateClassList(),this}setOffset(r){return this.options.offset=r,this._update(),this}toggleClassName(r){let n;return this._classList.delete(r)?n=!1:(this._classList.add(r),n=!0),this._updateClassList(),n}_onMouseEvent(r){this._update(r.point)}_getAnchor(r){if(this.options.anchor)return this.options.anchor;let n=this._map,i=this._container,o=this._pos;if(!n||!i||!o)return"bottom";let a=i.offsetWidth,s=i.offsetHeight,l=o.x<a/2,u=o.x>n.transform.width-a/2;if(o.y+r<s)return l?"top-left":u?"top-right":"top";if(o.y>n.transform.height-s){if(l)return"bottom-left";if(u)return"bottom-right"}return l?"left":u?"right":"bottom"}_updateClassList(){let r=this._container;if(!r)return;let n=[...this._classList];n.push("mapboxgl-popup"),this._anchor&&n.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&n.push("mapboxgl-popup-track-pointer"),r.className=n.join(" ")}_update(n){let i=this._map,o=this._content;if(!i||!this._lngLat&&!this._trackPointer||!o)return;let a=this._container;if(a||(a=this._container=u("div","mapboxgl-popup",i.getContainer()),this._tip=u("div","mapboxgl-popup-tip",a),a.appendChild(o)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=n$(this._lngLat,this._pos,i.transform)),!this._trackPointer||n){let r=this._pos=this._trackPointer&&n?n:i.project(this._lngLat),o=nW(this.options.offset),a=this._anchor=this._getAnchor(o.y),s=nW(this.options.offset,a),l=r.add(s).round();i._requestDomTask(()=>{this._container&&a&&(this._container.style.transform=`${nH[a]} translate(${l.x}px,${l.y}px)`)})}if(!this._marker&&i._showingGlobe()){let n=r.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(n)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let r=this._container.querySelector("a[href], [tabindex]:not([tabindex='-1']), [contenteditable]:not([contenteditable='false']), button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled])");r&&r.focus()}_onClose(){this.remove()}_setOpacity(r){this._container&&(this._container.style.opacity=`${r}`),this._content&&(this._content.style.pointerEvents=r?"auto":"none")}},Marker:nZ,Style:tC,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,FreeCameraOptions:rH,Evented:r.Evented,config:r.config,prewarm:function(){eR().acquire(eO)},clearPrewarmedResources:function(){let r=i;r&&(r.isPreloaded()&&1===r.numActive()?(r.release(eO),i=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(t){r.config.ACCESS_TOKEN=t},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(t){r.config.API_URL=t},get workerCount(){return eD.workerCount},set workerCount(e){eD.workerCount=e},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){r.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(n){r.clearTileCache(n)},workerUrl:"",workerClass:null,setNow:r.exported.setNow,restoreNow:r.exported.restoreNow};return n4}),i}();var eI=(eT("exYeM"),eT("exYeM"),eT("exYeM"),eT("exYeM"),eT("exYeM")),rM=/*#__PURE__*/function(){// Using Node instead of HTMLElement since container may be a ShadowRoot
function r(r){var n=this;this._insertTag=function(r){var i;i=0===n.tags.length?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(r,i),n.tags.push(r)},this.isSpeedy=void 0===r.speedy||r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var n=r.prototype;return n.hydrate=function(r){r.forEach(this._insertTag)},n.insert=function(r){// the max length is how many rules we have per style tag, it's 65000 in speedy mode
// it's 1 in dev because we insert source maps that map a single rule to a location
// and you can only have one source map per style tag
if(this.ctr%(this.isSpeedy?65e3:1)==0){var n;this._insertTag(((n=document.createElement("style")).setAttribute("data-emotion",this.key),void 0!==this.nonce&&n.setAttribute("nonce",this.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n))}var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=/*

Based off glamor's StyleSheet, thanks Sunil 

high performance StyleSheet for css-in-js systems

- uses multiple style tags behind the scenes for millions of rules
- uses `insertRule` for appending in production for *much* faster performance

// usage

import { StyleSheet } from '@emotion/sheet'

let styleSheet = new StyleSheet({ key: '', container: document.head })

styleSheet.insert('#box { border: 1px solid red; }')
- appends a css rule into the stylesheet

styleSheet.flush()
- empties the stylesheet of all its contents

*/// $FlowFixMe
function(r){if(r.sheet)return r.sheet;// this weirdness brought to you by firefox
/* istanbul ignore next */for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===r)return document.styleSheets[n]}(i);try{// this is the ultrafast version, works across browsers
// the big drawback is that the css won't be editable in devtools
o.insertRule(r,o.cssRules.length)}catch(r){}}else i.appendChild(document.createTextNode(r));this.ctr++},n.flush=function(){// $FlowFixMe
this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},r}(),rk="-ms-",rI="-moz-",rL="-webkit-",rA="comm",rz="rule",rP="decl",rO="@keyframes",rD=Math.abs,rR=String.fromCharCode,rF=Object.assign;function rB(r,n,i){return r.replace(n,i)}function rN(r,n){return r.indexOf(n)}function rj(r,n){return 0|r.charCodeAt(n)}function rV(r,n,i){return r.slice(n,i)}function rU(r){return r.length}function rq(r,n){return n.push(r),r}var r$=1,rH=1,rZ=0,rG=0,rW=0,rX="";function rY(r,n,i,o,a,s,l){return{value:r,root:n,parent:i,type:o,props:a,children:s,line:r$,column:rH,length:l,return:""}}function rK(r,n){return rF(rY("",null,null,"",null,null,0),r,{length:-r.length},n)}function rJ(){return rW=rG<rZ?rj(rX,rG++):0,rH++,10===rW&&(rH=1,r$++),rW}function rQ(){return rj(rX,rG)}function r0(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function r1(r){return r$=rH=1,rZ=rU(rX=r),rG=0,[]}function r2(r){var n,i;return(n=rG-1,i=function r(n){for(;rJ();)switch(rW){case n:return rG;case 34:case 39:34!==n&&39!==n&&r(rW);break;case 40:41===n&&r(n);break;case 92:rJ()}return rG}(91===r?r+2:40===r?r+1:r),rV(rX,n,i)).trim()}function r4(r,n,i,o,a,s,l,u,c,h,d){for(var f=a-1,p=0===a?s:[""],m=p.length,g=0,y=0,_=0;g<o;++g)for(var v=0,b=rV(r,f+1,f=rD(y=l[g])),x=r;v<m;++v)(x=(y>0?p[v]+" "+b:rB(b,/&\f/g,p[v])).trim())&&(c[_++]=x);return rY(r,n,i,0===a?rz:u,c,h,d)}function r3(r,n,i,o){return rY(r,n,i,rP,rV(r,0,o),rV(r,o+1,-1),o)}function r5(r,n){for(var i="",o=r.length,a=0;a<o;a++)i+=n(r[a],a,r,n)||"";return i}function r6(r,n,i,o){switch(r.type){case"@layer":if(r.children.length)break;case"@import":case rP:return r.return=r.return||r.value;case rA:return"";case rO:return r.return=r.value+"{"+r5(r.children,o)+"}";case rz:r.value=r.props.join(",")}return rU(i=r5(r.children,o))?r.return=r.value+"{"+i+"}":""}var r8=function(r,n,i){for(var o=0,a=0;o=a,a=rQ(),38===o&&12===a&&(n[i]=1),!r0(a);)rJ();return rV(rX,r,rG)},r9=function(r,n){// pretend we've started with a comma
var i=-1,o=44;do switch(r0(o)){case 0:38===o&&12===rQ()&&// stylis inserts \f after & to know when & where it should replace this sequence with the context selector
// and when it should just concatenate the outer and inner selectors
// it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here
(n[i]=1),r[i]+=r8(rG-1,n,i);break;case 2:r[i]+=r2(o);break;case 4:// comma
if(44===o){// colon
r[++i]=58===rQ()?"&\f":"",n[i]=r[i].length;break}// fallthrough
default:r[i]+=rR(o)}while(o=rJ())return r},r7=function(r,n){var i;return i=r9(r1(r),n),rX="",i},ne=/* #__PURE__ */new WeakMap,nt=function(r){if("rule"===r.type&&r.parent&&!// positive .length indicates that this rule contains pseudo
// negative .length indicates that this rule has been already prefixed
(r.length<1)){for(var n=r.value,i=r.parent,o=r.column===i.column&&r.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;// short-circuit for the simplest case
if((1!==r.props.length||58===n.charCodeAt(0)||ne.get(i))&&!o){ne.set(r,!0);for(var a=[],s=r7(n,a),l=i.props,u=0,c=0;u<s.length;u++)for(var h=0;h<l.length;h++,c++)r.props[c]=a[u]?s[u].replace(/&\f/g,l[h]):l[h]+" "+s[u]}}},nr=function(r){if("decl"===r.type){var n=r.value;108===n.charCodeAt(0)&&// charcode for b
98===n.charCodeAt(2)&&(// this ignores label
r.return="",r.value="")}},nn=[function(r,n,i,o){if(r.length>-1&&!r.return)switch(r.type){case rP:r.return=/* eslint-disable no-fallthrough */function r(n,i){switch(45^rj(n,0)?(((i<<2^rj(n,0))<<2^rj(n,1))<<2^rj(n,2))<<2^rj(n,3):0){// color-adjust
case 5103:return rL+"print-"+n+n;// animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)
case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rL+n+n;// appearance, user-select, transform, hyphens, text-size-adjust
case 5349:case 4246:case 4810:case 6968:case 2756:return rL+n+rI+n+rk+n+n;// flex, flex-direction
case 6828:case 4268:return rL+n+rk+n+n;// order
case 6165:return rL+n+rk+"flex-"+n+n;// align-items
case 5187:return rL+n+rB(n,/(\w+).+(:[^]+)/,rL+"box-$1$2"+rk+"flex-$1$2")+n;// align-self
case 5443:return rL+n+rk+"flex-item-"+rB(n,/flex-|-self/,"")+n;// align-content
case 4675:return rL+n+rk+"flex-line-pack"+rB(n,/align-content|flex-|-self/,"")+n;// flex-shrink
case 5548:return rL+n+rk+rB(n,"shrink","negative")+n;// flex-basis
case 5292:return rL+n+rk+rB(n,"basis","preferred-size")+n;// flex-grow
case 6060:return rL+"box-"+rB(n,"-grow","")+rL+n+rk+rB(n,"grow","positive")+n;// transition
case 4554:return rL+rB(n,/([^-])(transform)/g,"$1"+rL+"$2")+n;// cursor
case 6187:return rB(rB(rB(n,/(zoom-|grab)/,rL+"$1"),/(image-set)/,rL+"$1"),n,"")+n;// background, background-image
case 5495:case 3959:return rB(n,/(image-set\([^]*)/,rL+"$1$`$1");// justify-content
case 4968:return rB(rB(n,/(.+:)(flex-)?(.*)/,rL+"box-pack:$3"+rk+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rL+n+n;// (margin|padding)-inline-(start|end)
case 4095:case 3583:case 4068:case 2532:return rB(n,/(.+)-inline(.+)/,rL+"$1$2")+n;// (min|max)?(width|height|inline-size|block-size)
case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:// stretch, max-content, min-content, fill-available
if(rU(n)-1-i>6)switch(rj(n,i+1)){// (m)ax-content, (m)in-content
case 109:// -
if(45!==rj(n,i+4))break;// (f)ill-available, (f)it-content
case 102:return rB(n,/(.+:)(.+)-([^]+)/,"$1"+rL+"$2-$3$1"+rI+(108==rj(n,i+3)?"$3":"$2-$3"))+n;// (s)tretch
case 115:return~rN(n,"stretch")?r(rB(n,"stretch","fill-available"),i)+n:n}break;// position: sticky
case 4949:// (s)ticky?
if(115!==rj(n,i+1))break;// display: (flex|inline-flex)
case 6444:switch(rj(n,rU(n)-3-(~rN(n,"!important")&&10))){// stic(k)y
case 107:return rB(n,":",":"+rL)+n;// (inline-)?fl(e)x
case 101:return rB(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rL+(45===rj(n,14)?"inline-":"")+"box$3$1"+rL+"$2$3$1"+rk+"$2box$3")+n}break;// writing-mode
case 5936:switch(rj(n,i+11)){// vertical-l(r)
case 114:return rL+n+rk+rB(n,/[svh]\w+-[tblr]{2}/,"tb")+n;// vertical-r(l)
case 108:return rL+n+rk+rB(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;// horizontal(-)tb
case 45:return rL+n+rk+rB(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return rL+n+rk+n+n}return n}(r.value,r.length);break;case rO:return r5([rK(r,{value:rB(r.value,"@","@"+rL)})],o);case rz:if(r.length)return r.props.map(function(n){var i;switch(i=n,(i=/(::plac\w+|:read-\w+)/.exec(i))?i[0]:i){// :read-(only|write)
case":read-only":case":read-write":return r5([rK(r,{props:[rB(n,/:(read-\w+)/,":"+rI+"$1")]})],o);// :placeholder
case"::placeholder":return r5([rK(r,{props:[rB(n,/:(plac\w+)/,":"+rL+"input-$1")]}),rK(r,{props:[rB(n,/:(plac\w+)/,":"+rI+"$1")]}),rK(r,{props:[rB(n,/:(plac\w+)/,rk+"input-$1")]})],o)}return""}).join("")}}],ni=function(r,n,i){var o=r.key+"-"+n.name;!1===// the tree but if it's a string tag, we know it won't
// so we don't have to add it to registered cache.
// this improves memory usage since we can avoid storing the whole style string
i&&void 0===r.registered[o]&&(r.registered[o]=n.styles)},no=function(r,n,i){ni(r,n,i);var o=r.key+"-"+n.name;if(void 0===r.inserted[n.name]){var a=n;do r.insert(n===a?"."+o:"",a,r.sheet,!0),a=a.next;while(void 0!==a)}},na={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,// SVG-related properties
fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ns=/[A-Z]|^ms/g,nl=/_EMO_([^_]+?)_([^]*?)_EMO_/g,nu=function(r){return 45===r.charCodeAt(1)},nc=function(r){return null!=r&&"boolean"!=typeof r},nh=e1(function(r){return nu(r)?r:r.replace(ns,"-$&").toLowerCase()}),nd=function(r,n){switch(r){case"animation":case"animationName":if("string"==typeof n)return n.replace(nl,function(r,n,i){return b={name:n,styles:i,next:b},n})}return 1===na[r]||nu(r)||"number"!=typeof n||0===n?n:n+"px"};function nf(r,n,i){if(null==i)return"";if(void 0!==i.__emotion_styles)return i;switch(typeof i){case"boolean":return"";case"object":if(1===i.anim)return b={name:i.name,styles:i.styles,next:b},i.name;if(void 0!==i.styles){var o=i.next;if(void 0!==o)// and there will be very few iterations of this generally
for(;void 0!==o;)b={name:o.name,styles:o.styles,next:b},o=o.next;return i.styles+";"}return function(r,n,i){var o="";if(Array.isArray(i))for(var a=0;a<i.length;a++)o+=nf(r,n,i[a])+";";else for(var s in i){var l=i[s];if("object"!=typeof l)null!=n&&void 0!==n[l]?o+=s+"{"+n[l]+"}":nc(l)&&(o+=nh(s)+":"+nd(s,l)+";");else if(Array.isArray(l)&&"string"==typeof l[0]&&(null==n||void 0===n[l[0]]))for(var u=0;u<l.length;u++)nc(l[u])&&(o+=nh(s)+":"+nd(s,l[u])+";");else{var c=nf(r,n,l);switch(s){case"animation":case"animationName":o+=nh(s)+":"+c+";";break;default:o+=s+"{"+c+"}"}}}return o}(r,n,i);case"function":if(void 0!==r){var a=b,s=i(r);return b=a,nf(r,n,s)}}// finalize string values (regular strings and functions interpolated into css calls)
if(null==n)return i;var l=n[i];return void 0!==l?l:i}var np=/label:\s*([^\s;\n{]+)\s*(;|$)/g,nm=function(r,n,i){if(1===r.length&&"object"==typeof r[0]&&null!==r[0]&&void 0!==r[0].styles)return r[0];var o,a=!0,s="";b=void 0;var l=r[0];null==l||void 0===l.raw?(a=!1,s+=nf(i,n,l)):s+=l[0];// we start at 1 since we've already handled the first arg
for(var u=1;u<r.length;u++)s+=nf(i,n,r[u]),a&&(s+=l[u]);np.lastIndex=0;for(var c="";null!==(o=np.exec(s));)c+="-"+// $FlowFixMe we know it's not null
o[1];return{name:/* eslint-disable */// Inspired by https://github.com/garycourt/murmurhash-js
// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86
function(r){for(// 'm' and 'r' are mixing constants generated offline.
// They're not really 'magic', they just happen to work well.
// const m = 0x5bd1e995;
// const r = 24;
// Initialize the hash
var n,i=0,o=0,a=r.length;a>=4;++o,a-=4)n=/* Math.imul(k, m): */(65535&(n=255&r.charCodeAt(o)|(255&r.charCodeAt(++o))<<8|(255&r.charCodeAt(++o))<<16|(255&r.charCodeAt(++o))<<24))*1540483477+((n>>>16)*59797<<16),n^=/* k >>> r: */n>>>24,i=/* Math.imul(k, m): */(65535&n)*1540483477+((n>>>16)*59797<<16)^/* Math.imul(h, m): */(65535&i)*1540483477+((i>>>16)*59797<<16);// Handle the last few bytes of the input array
switch(a){case 3:i^=(255&r.charCodeAt(o+2))<<16;case 2:i^=(255&r.charCodeAt(o+1))<<8;case 1:i^=255&r.charCodeAt(o),i=/* Math.imul(h, m): */(65535&i)*1540483477+((i>>>16)*59797<<16)}// Do a few final mixes of the hash to ensure the last few
return(// bytes are well-incorporated.
i^=i>>>13,(((i=/* Math.imul(h, m): */(65535&i)*1540483477+((i>>>16)*59797<<16))^i>>>15)>>>0).toString(36))}(s)+c,styles:s,next:b}},eI=eT("exYeM"),ng=!!eI.useInsertionEffect&&eI.useInsertionEffect,ny=ng||function(r){return r()};ng||eI.useLayoutEffect;var n_={}.hasOwnProperty,nv=/* #__PURE__ */eI.createContext(// but it's also required in react native and similar environments sometimes
// and we could have a special build just for that
// but this is much easier and the native packages
// might use a different theme context in the future anyway
"undefined"!=typeof HTMLElement?function(r){var n,i,o,a,s,l=r.key;if("css"===l){var u=document.querySelectorAll("style[data-emotion]:not([data-s])");// get SSRed styles out of the way of React's hydration
// document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)
// note this very very intentionally targets all style elements regardless of the key to ensure
// that creating a cache works inside of render of a React component
Array.prototype.forEach.call(u,function(r){-1!==r.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(r),r.setAttribute("data-s",""))})}var c=r.stylisPlugins||nn,h={},d=[];a=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+l+' "]'),function(r){for(var n=r.getAttribute("data-emotion").split(" "),i=1;i<n.length;i++)h[n[i]]=!0;d.push(r)});var f=(i=(n=[nt,nr].concat(c,[r6,(o=function(r){s.insert(r)},function(r){!r.root&&(r=r.return)&&o(r)})])).length,function(r,o,a,s){for(var l="",u=0;u<i;u++)l+=n[u](r,o,a,s)||"";return l}),p=function(r){var n,i;return r5((i=function r(n,i,o,a,s,l,u,c,h){for(var d,f=0,p=0,m=u,g=0,y=0,_=0,v=1,b=1,x=1,w=0,E="",C=s,S=l,T=a,M=E;b;)switch(_=w,w=rJ()){case 40:if(108!=_&&58==rj(M,m-1)){-1!=rN(M+=rB(r2(w),"&","&\f"),"&\f")&&(x=-1);break}case 34:case 39:case 91:M+=r2(w);break;case 9:case 10:case 13:case 32:M+=function(r){for(;rW=rQ();)if(rW<33)rJ();else break;return r0(r)>2||r0(rW)>3?"":" "}(_);break;case 92:M+=function(r,n){for(var i;--n&&rJ()&&!(rW<48)&&!(rW>102)&&(!(rW>57)||!(rW<65))&&(!(rW>70)||!(rW<97)););return i=rG+(n<6&&32==rQ()&&32==rJ()),rV(rX,r,i)}(rG-1,7);continue;case 47:switch(rQ()){case 42:case 47:rq(rY(d=function(r,n){for(;rJ();)if(r+rW===57)break;else if(r+rW===84&&47===rQ())break;return"/*"+rV(rX,n,rG-1)+"*"+rR(47===r?r:rJ())}(rJ(),rG),i,o,rA,rR(rW),rV(d,2,-2),0),h);break;default:M+="/"}break;case 123*v:c[f++]=rU(M)*x;case 125*v:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+p:-1==x&&(M=rB(M,/\f/g,"")),y>0&&rU(M)-m&&rq(y>32?r3(M+";",a,o,m-1):r3(rB(M," ","")+";",a,o,m-2),h);break;case 59:M+=";";default:if(rq(T=r4(M,i,o,f,p,s,c,E,C=[],S=[],m),l),123===w){if(0===p)r(M,i,T,T,C,l,m,c,S);else switch(99===g&&110===rj(M,3)?100:g){case 100:case 108:case 109:case 115:r(n,T,T,a&&rq(r4(n,T,T,0,0,s,c,E,s,C=[],m),S),s,S,m,c,a?C:S);break;default:r(M,T,T,T,[""],S,0,c,S)}}}f=p=y=0,v=x=1,E=M="",m=u;break;case 58:m=1+rU(M),y=_;default:if(v<1){if(123==w)--v;else if(125==w&&0==v++&&125==(rW=rG>0?rj(rX,--rG):0,rH--,10===rW&&(rH=1,r$--),rW))continue}switch(M+=rR(w),w*v){case 38:x=p>0?1:(M+="\f",-1);break;case 44:c[f++]=(rU(M)-1)*x,x=1;break;case 64:45===rQ()&&(M+=r2(rJ())),g=rQ(),p=m=rU(E=M+=function(r){for(;!r0(rQ());)rJ();return rV(rX,r,rG)}(rG)),w++;break;case 45:45===_&&2==rU(M)&&(v=0)}}return l}("",null,null,null,[""],n=r1(n=r),0,[0],n),rX="",i),f)},m={key:l,sheet:new rM({key:l,container:a,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:h,registered:{},insert:function(r,n,i,o){s=i,p(r?r+"{"+n.styles+"}":n.styles),o&&(m.inserted[n.name]=!0)}};return m.sheet.hydrate(d),m}({key:"css"}):null);nv.Provider;var nb=/* #__PURE__ */eI.createContext({}),nx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",nw=function(r,n){var i={};for(var o in n)n_.call(n,o)&&(i[o]=n[o]);return i[nx]=r,i},nE=function(r){var n=r.cache,i=r.serialized,o=r.isStringTag;return ni(n,i,o),ny(function(){return no(n,i,o)}),null},nC=(n=function(r,n,i){var o,a,s,l=r.css;// so that using `css` from `emotion` and passing the result to the css prop works
"string"==typeof l&&void 0!==n.registered[l]&&(l=n.registered[l]);var u=r[nx],c=[l],h="";"string"==typeof r.className?(o=n.registered,a=r.className,s="",a.split(" ").forEach(function(r){void 0!==o[r]?c.push(o[r]+";"):s+=r+" "}),h=s):null!=r.className&&(h=r.className+" ");var d=nm(c,void 0,eI.useContext(nb));h+=n.key+"-"+d.name;var f={};for(var p in r)n_.call(r,p)&&"css"!==p&&p!==nx&&(f[p]=r[p]);return f.ref=i,f.className=h,/*#__PURE__*/eI.createElement(eI.Fragment,null,/*#__PURE__*/eI.createElement(nE,{cache:n,serialized:d,isStringTag:"string"==typeof u}),/*#__PURE__*/eI.createElement(u,f))},/*#__PURE__*/(0,eI.forwardRef)(function(r,i){return n(r,(0,eI.useContext)(nv),i)})),eI=eT("exYeM"),nS={};function nT(){return(nS=nT=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).__esModule=!0,nS.default=nS,nT.apply(this,arguments)}(nS=nT).__esModule=!0,nS.default=nS;var nM=function(r,n){var i=arguments;if(null==n||!n_.call(n,"css"))return eI.createElement.apply(void 0,i);var o=i.length,a=Array(o);a[0]=nC,a[1]=nw(r,n);for(var s=2;s<o;s++)a[s]=i[s];// $FlowFixMe
return eI.createElement.apply(null,a)};function nk(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return nm(n)}function nI(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var i=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=i){var o,a,s,l,u=[],c=!0,h=!1;try{if(s=(i=i.call(r)).next,0===n){if(Object(i)!==i)return;c=!1}else for(;!(c=(o=s.call(i)).done)&&(u.push(o.value),u.length!==n);c=!0);}catch(r){h=!0,a=r}finally{try{if(!c&&null!=i.return&&(l=i.return(),Object(l)!==l))return}finally{if(h)throw a}}return u}}(r,n)||rS(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nL(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}var eI=eT("exYeM");let nA=Math.min,nz=Math.max,nP=Math.round,nO=Math.floor,nD=r=>({x:r,y:r});function nR(r){return nN(r)?(r.nodeName||"").toLowerCase():"#document"}function nF(r){var n;return(null==r?void 0:null==(n=r.ownerDocument)?void 0:n.defaultView)||window}function nB(r){var n;return null==(n=(nN(r)?r.ownerDocument:r.document)||window.document)?void 0:n.documentElement}function nN(r){return r instanceof Node||r instanceof nF(r).Node}function nj(r){return r instanceof Element||r instanceof nF(r).Element}function nV(r){return r instanceof HTMLElement||r instanceof nF(r).HTMLElement}function nU(r){return(// Browsers without `ShadowRoot` support.
"undefined"!=typeof ShadowRoot&&(r instanceof ShadowRoot||r instanceof nF(r).ShadowRoot))}function nq(r){let{overflow:n,overflowX:i,overflowY:o,display:a}=n$(r);return/auto|scroll|overlay|hidden|clip/.test(n+o+i)&&!["inline","contents"].includes(a)}function n$(r){return nF(r).getComputedStyle(r)}function nH(r,n){var i;void 0===n&&(n=[]);let o=function r(n){let i=function(r){if("html"===nR(r))return r;let n=r.assignedSlot||// DOM Element detected.
r.parentNode||// ShadowRoot detected.
nU(r)&&r.host||// Fallback.
nB(r);return nU(n)?n.host:n}(n);return["html","body","#document"].includes(nR(i))?n.ownerDocument?n.ownerDocument.body:n.body:nV(i)&&nq(i)?i:r(i)}(r),a=o===(null==(i=r.ownerDocument)?void 0:i.body),s=nF(o);return a?n.concat(s,s.visualViewport||[],nq(o)?o:[]):n.concat(o,nH(o))}function nZ(r){return nj(r)?r:r.contextElement}function nG(r){let n=nZ(r);if(!nV(n))return nD(1);let i=n.getBoundingClientRect(),{width:o,height:a,$:s}=function(r){let n=n$(r),i=parseFloat(n.width)||0,o=parseFloat(n.height)||0,a=nV(r),s=a?r.offsetWidth:i,l=a?r.offsetHeight:o,u=nP(i)!==s||nP(o)!==l;return u&&(i=s,o=l),{width:i,height:o,$:u}}(n),l=(s?nP(i.width):i.width)/o,u=(s?nP(i.height):i.height)/a;return l&&Number.isFinite(l)||(l=1),u&&Number.isFinite(u)||(u=1),{x:l,y:u}}let nW=nD(0);function nX(r,n,i,o){var a,s;void 0===n&&(n=!1),void 0===i&&(i=!1);let l=r.getBoundingClientRect(),u=nZ(r),c=nD(1);n&&(o?nj(o)&&(c=nG(o)):c=nG(r));let h=(void 0===(a=i)&&(a=!1),o&&(!a||o===nF(u))&&a)?function(r){let n=nF(r);return"undefined"!=typeof CSS&&CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")&&n.visualViewport?{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}:nW}(u):nD(0),d=(l.left+h.x)/c.x,f=(l.top+h.y)/c.y,p=l.width/c.x,m=l.height/c.y;if(u){let r=nF(u),n=o&&nj(o)?nF(o):o,i=r.frameElement;for(;i&&o&&n!==r;){let r=nG(i),n=i.getBoundingClientRect(),o=n$(i),a=n.left+(i.clientLeft+parseFloat(o.paddingLeft))*r.x,s=n.top+(i.clientTop+parseFloat(o.paddingTop))*r.y;d*=r.x,f*=r.y,p*=r.x,m*=r.y,d+=a,f+=s,i=nF(i).frameElement}}return{...s={width:p,height:m,x:d,y:f},top:s.y,left:s.x,right:s.x+s.width,bottom:s.y+s.height}}var eI=eT("exYeM"),nY=eI.useLayoutEffect,nK=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],nJ=function(){};function nQ(r,n){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];var s=[].concat(o);if(n&&r)for(var l in n)n.hasOwnProperty(l)&&n[l]&&s.push("".concat(l?"-"===l[0]?r+l:r+"__"+l:r));return s.filter(function(r){return r}).map(function(r){return String(r).trim()}).join(" ")}// ==============================
// Clean Value
// ==============================
var n0=function(r){return Array.isArray(r)?r.filter(Boolean):"object"===rg(r)&&null!==r?[r]:[]},n1=function(r){return(//className
r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme,rb({},nL(r,nK)))},n2=function(r,n,i){var o=r.cx,a=r.getStyles,s=r.getClassNames,l=r.className;return{css:a(n,r),className:o(null!=i?i:{},s(n,r),l)}};// ==============================
// Scroll Helpers
// ==============================
function n4(r){return[document.documentElement,document.body,window].indexOf(r)>-1}// Normalized scrollTo & scrollTop
// ------------------------------
function n3(r){return n4(r)?window.pageYOffset:r.scrollTop}function n5(r,n){// with a scroll distance, we perform scroll on the element
if(n4(r)){window.scrollTo(0,n);return}r.scrollTop=n}function n6(r,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nJ,a=n3(r),s=n-a,l=0;!function n(){var u;l+=10,n5(r,s*((u=(u=l)/i-1)*u*u+1)+a),l<i?window.requestAnimationFrame(n):o(r)}()}// Scroll Into View
// ------------------------------
function n8(r,n){var i=r.getBoundingClientRect(),o=n.getBoundingClientRect(),a=n.offsetHeight/3;o.bottom+a>i.bottom?n5(r,Math.min(n.offsetTop+n.clientHeight-r.offsetHeight+a,r.scrollHeight)):o.top-a<i.top&&n5(r,Math.max(n.offsetTop-a,0))}// ==============================
// Touch Capability Detector
// ==============================
function n9(){try{return document.createEvent("TouchEvent"),!0}catch(r){return!1}}// ==============================
// Passive Event Detector
// ==============================
// https://github.com/rafgraph/detect-it/blob/main/src/index.ts#L19-L36
var n7=!1,ie="undefined"!=typeof window?window:{};ie.addEventListener&&ie.removeEventListener&&(ie.addEventListener("p",nJ,{get passive(){return n7=!0}}),ie.removeEventListener("p",nJ,!1));var it=n7;function ir(r){return null!=r}var ii=function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return Object.entries(r).filter(function(r){var n=nI(r,1)[0];return!i.includes(n)}).reduce(function(r,n){var i=nI(n,2),o=i[0],a=i[1];return r[o]=a,r},{})},io=["children","innerProps"],ia=["children","innerProps"],is=function(r){return"auto"===r?"bottom":r},il=/*#__PURE__*/(0,eI.createContext)(null),iu=function(r){var n=r.children,i=r.minMenuHeight,o=r.maxMenuHeight,a=r.menuPlacement,s=r.menuPosition,l=r.menuShouldScrollIntoView,u=r.theme,c=((0,eI.useContext)(il)||{}).setPortalPlacement,h=(0,eI.useRef)(null),d=nI((0,eI.useState)(o),2),f=d[0],p=d[1],m=nI((0,eI.useState)(null),2),g=m[0],y=m[1],_=u.spacing.controlHeight;return nY(function(){var r=h.current;if(r){// DO NOT scroll if position is fixed
var n="fixed"===s,u=function(r){var n=r.maxHeight,i=r.menuEl,o=r.minHeight,a=r.placement,s=r.shouldScroll,l=r.isFixedPosition,u=r.controlHeight,c=// Get Scroll Parent
// ------------------------------
function(r){var n=getComputedStyle(r),i="absolute"===n.position,o=/(auto|scroll)/;if("fixed"===n.position)return document.documentElement;for(var a=r;a=a.parentElement;)if(n=getComputedStyle(a),(!i||"static"!==n.position)&&o.test(n.overflow+n.overflowY+n.overflowX))return a;return document.documentElement}(i),h={placement:"bottom",maxHeight:n};// something went wrong, return default state
if(!i||!i.offsetParent)return h;// we can't trust `scrollParent.scrollHeight` --> it may increase when
// the menu is rendered
var d=c.getBoundingClientRect().height,f=i.getBoundingClientRect(),p=f.bottom,m=f.height,g=f.top,y=i.offsetParent.getBoundingClientRect().top,_=l?window.innerHeight:n4(c)?window.innerHeight:c.clientHeight,v=n3(c),b=parseInt(getComputedStyle(i).marginBottom,10),x=parseInt(getComputedStyle(i).marginTop,10),w=y-x,E=_-g,C=w+v,S=d-v-g,T=p-_+v+b,M=v+g-x;switch(a){case"auto":case"bottom":// 1: the menu will fit, do nothing
if(E>=m)return{placement:"bottom",maxHeight:n};// 2: the menu will fit, if scrolled
if(S>=m&&!l)return s&&n6(c,T,160),{placement:"bottom",maxHeight:n};// 3: the menu will fit, if constrained
if(!l&&S>=o||l&&E>=o)return s&&n6(c,T,160),{placement:"bottom",maxHeight:l?E-b:S-b};// 4. Forked beviour when there isn't enough space below
// AUTO: flip the menu, render above
if("auto"===a||l){// may need to be constrained after flipping
var k=n,I=l?w:C;return I>=o&&(k=Math.min(I-b-u,n)),{placement:"top",maxHeight:k}}// BOTTOM: allow browser to increase scrollable area and immediately set scroll
if("bottom"===a)return s&&n5(c,T),{placement:"bottom",maxHeight:n};break;case"top":// 1: the menu will fit, do nothing
if(w>=m)return{placement:"top",maxHeight:n};// 2: the menu will fit, if scrolled
if(C>=m&&!l)return s&&n6(c,M,160),{placement:"top",maxHeight:n};// 3: the menu will fit, if constrained
if(!l&&C>=o||l&&w>=o){var L=n;return(!l&&C>=o||l&&w>=o)&&(L=l?w-x:C-x),s&&n6(c,M,160),{placement:"top",maxHeight:L}}// 4. not enough space, the browser WILL NOT increase scrollable area when
// absolutely positioned element rendered above the viewport (only below).
// Flip the menu, render below
return{placement:"bottom",maxHeight:n};default:throw Error('Invalid placement provided "'.concat(a,'".'))}return h}({maxHeight:o,menuEl:r,minHeight:i,placement:a,shouldScroll:l&&!n,isFixedPosition:n,controlHeight:_});p(u.maxHeight),y(u.placement),null==c||c(u.placement)}},[o,a,s,l,i,c,_]),n({ref:h,placerProps:rb(rb({},r),{},{placement:g||is(a),maxHeight:f})})},ic=function(r,n){var i=r.theme,o=i.spacing.baseUnit,a=i.colors;return rb({textAlign:"center"},n?{}:{color:a.neutral40,padding:"".concat(2*o,"px ").concat(3*o,"px")})},ih=["size"],id=["innerProps","isRtl","size"],ip={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},im=function(r){var n=r.size,i=nL(r,ih);return nM("svg",rm({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:ip},i))},ig=function(r){return nM(im,rm({size:20},r),nM("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},iy=function(r){return nM(im,rm({size:20},r),nM("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},i_=function(r,n){var i=r.isFocused,o=r.theme,a=o.spacing.baseUnit,s=o.colors;return rb({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?s.neutral60:s.neutral20,padding:2*a,":hover":{color:i?s.neutral80:s.neutral40}})},iv=function(){var r=nk.apply(void 0,arguments),n="animation-"+r.name;return{name:n,styles:"@keyframes "+n+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(x||(o=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],a||(a=o.slice(0)),x=Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(a)}})))),ib=function(r){var n=r.delay,i=r.offset;return nM("span",{css:nk({animation:"".concat(iv," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ix=["data"],iw=["innerRef","isDisabled","isHidden","inputClassName"],iE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},iC={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":rb({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},iE)},iS=function(r){var n=r.children;return nM("div",r.innerProps,n)},iT={ClearIndicator:function(r){var n=r.children,i=r.innerProps;return nM("div",rm({},n2(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||nM(ig,null))},Control:function(r){var n=r.children,i=r.isDisabled,o=r.isFocused,a=r.innerRef,s=r.innerProps,l=r.menuIsOpen;return nM("div",rm({ref:a},n2(r,"control",{control:!0,"control--is-disabled":i,"control--is-focused":o,"control--menu-is-open":l}),s),n)},DropdownIndicator:function(r){var n=r.children,i=r.innerProps;return nM("div",rm({},n2(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||nM(iy,null))},DownChevron:iy,CrossIcon:ig,Group:function(r){var n=r.children,i=r.cx,o=r.getStyles,a=r.getClassNames,s=r.Heading,l=r.headingProps,u=r.innerProps,c=r.label,h=r.theme,d=r.selectProps;return nM("div",rm({},n2(r,"group",{group:!0}),u),nM(s,rm({},l,{selectProps:d,theme:h,getStyles:o,getClassNames:a,cx:i}),c),nM("div",null,n))},GroupHeading:function(r){var n=n1(r);n.data;var i=nL(n,ix);return nM("div",rm({},n2(r,"groupHeading",{"group-heading":!0}),i))},IndicatorsContainer:function(r){var n=r.children,i=r.innerProps;return nM("div",rm({},n2(r,"indicatorsContainer",{indicators:!0}),i),n)},IndicatorSeparator:function(r){var n=r.innerProps;return nM("span",rm({},n,n2(r,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(r){var n=r.cx,i=r.value,o=n1(r),a=o.innerRef,s=o.isDisabled,l=o.isHidden,u=o.inputClassName,c=nL(o,iw);return nM("div",rm({},n2(r,"input",{"input-container":!0}),{"data-value":i||""}),nM("input",rm({className:n({input:!0},u),ref:a,style:rb({label:"input",color:"inherit",background:0,opacity:l?0:1,width:"100%"},iE),disabled:s},c)))},LoadingIndicator:function(r){var n=r.innerProps,i=r.isRtl,o=r.size,a=nL(r,id);return nM("div",rm({},n2(rb(rb({},a),{},{innerProps:n,isRtl:i,size:void 0===o?4:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),nM(ib,{delay:0,offset:i}),nM(ib,{delay:160,offset:!0}),nM(ib,{delay:320,offset:!i}))},Menu:function(r){var n=r.children,i=r.innerRef,o=r.innerProps;return nM("div",rm({},n2(r,"menu",{menu:!0}),{ref:i},o),n)},MenuList:function(r){var n=r.children,i=r.innerProps,o=r.innerRef,a=r.isMulti;return nM("div",rm({},n2(r,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:o},i),n)},MenuPortal:function(r){var n=r.appendTo,i=r.children,o=r.controlElement,a=r.innerProps,s=r.menuPlacement,l=r.menuPosition,u=(0,eI.useRef)(null),c=(0,eI.useRef)(null),h=nI((0,eI.useState)(is(s)),2),d=h[0],f=h[1],p=(0,eI.useMemo)(function(){return{setPortalPlacement:f}},[]),m=nI((0,eI.useState)(null),2),g=m[0],y=m[1],_=(0,eI.useCallback)(function(){if(o){var r,n={bottom:(r=o.getBoundingClientRect()).bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width},i="fixed"===l?0:window.pageYOffset,a=n[d]+i;(a!==(null==g?void 0:g.offset)||n.left!==(null==g?void 0:g.rect.left)||n.width!==(null==g?void 0:g.rect.width))&&y({offset:a,rect:n})}},[o,l,d,null==g?void 0:g.offset,null==g?void 0:g.rect.left,null==g?void 0:g.rect.width]);nY(function(){_()},[_]);var v=(0,eI.useCallback)(function(){"function"==typeof c.current&&(c.current(),c.current=null),o&&u.current&&(c.current=/**
 * Automatically updates the position of the floating element when necessary.
 * Should only be called when the floating element is mounted on the DOM or
 * visible on the screen.
 * @returns cleanup function that should be invoked when the floating element is
 * removed from the DOM or hidden from the screen.
 * @see https://floating-ui.com/docs/autoUpdate
 */function(r,n,i,o){let a;void 0===o&&(o={});let{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:u="function"==typeof ResizeObserver,layoutShift:c="function"==typeof IntersectionObserver,animationFrame:h=!1}=o,d=nZ(r),f=s||l?[...d?nH(d):[],...nH(n)]:[];f.forEach(r=>{s&&r.addEventListener("scroll",i,{passive:!0}),l&&r.addEventListener("resize",i)});let p=d&&c?// https://samthor.au/2021/observing-dom/
function(r,n){let i,o=null,a=nB(r);function s(){clearTimeout(i),o&&o.disconnect(),o=null}return function l(u,c){void 0===u&&(u=!1),void 0===c&&(c=1),s();let{left:h,top:d,width:f,height:p}=r.getBoundingClientRect();if(u||n(),!f||!p)return;let m=nO(d),g=nO(a.clientWidth-(h+f)),y=nO(a.clientHeight-(d+p)),_=nO(h),v={rootMargin:-m+"px "+-g+"px "+-y+"px "+-_+"px",threshold:nz(0,nA(1,c))||1},b=!0;function x(r){let n=r[0].intersectionRatio;if(n!==c){if(!b)return l();n?l(!1,n):i=setTimeout(()=>{l(!1,1e-7)},100)}b=!1}// Older browsers don't support a `document` as the root and will throw an
// error.
try{o=new IntersectionObserver(x,{...v,// Handle <iframe>s
root:a.ownerDocument})}catch(r){o=new IntersectionObserver(x,v)}o.observe(r)}(!0),s}(d,i):null,m=-1,g=null;u&&(g=new ResizeObserver(r=>{let[o]=r;o&&o.target===d&&g&&(// Prevent update loops when using the `size` middleware.
// https://github.com/floating-ui/floating-ui/issues/1740
g.unobserve(n),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{g&&g.observe(n)})),i()}),d&&!h&&g.observe(d),g.observe(n));let y=h?nX(r):null;return h&&function n(){let o=nX(r);y&&(o.x!==y.x||o.y!==y.y||o.width!==y.width||o.height!==y.height)&&i(),y=o,a=requestAnimationFrame(n)}(),i(),()=>{f.forEach(r=>{s&&r.removeEventListener("scroll",i),l&&r.removeEventListener("resize",i)}),p&&p(),g&&g.disconnect(),g=null,h&&cancelAnimationFrame(a)}}(o,u.current,_,{elementResize:"ResizeObserver"in window}))},[o,_]);nY(function(){v()},[v]);var b=(0,eI.useCallback)(function(r){u.current=r,v()},[v]);// bail early if required elements aren't present
if(!n&&"fixed"!==l||!g)return null;// same wrapper element whether fixed or portalled
var x=nM("div",rm({ref:b},n2(rb(rb({},r),{},{offset:g.offset,position:l,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),i);return nM(il.Provider,{value:p},n?/*#__PURE__*/(0,ek.createPortal)(x,n):x)},LoadingMessage:function(r){var n=r.children,i=void 0===n?"Loading...":n,o=r.innerProps,a=nL(r,ia);return nM("div",rm({},n2(rb(rb({},a),{},{children:i,innerProps:o}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),o),i)},NoOptionsMessage:function(r){var n=r.children,i=void 0===n?"No options":n,o=r.innerProps,a=nL(r,io);return nM("div",rm({},n2(rb(rb({},a),{},{children:i,innerProps:o}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),o),i)},MultiValue:function(r){var n=r.children,i=r.components,o=r.data,a=r.innerProps,s=r.isDisabled,l=r.removeProps,u=r.selectProps,c=i.Container,h=i.Label,d=i.Remove;return nM(c,{data:o,innerProps:rb(rb({},n2(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:u},nM(h,{data:o,innerProps:rb({},n2(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:u},n),nM(d,{data:o,innerProps:rb(rb({},n2(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:u}))},MultiValueContainer:iS,MultiValueLabel:iS,MultiValueRemove:function(r){var n=r.children,i=r.innerProps;return nM("div",rm({role:"button"},i),n||nM(ig,{size:14}))},Option:function(r){var n=r.children,i=r.isDisabled,o=r.isFocused,a=r.isSelected,s=r.innerRef,l=r.innerProps;return nM("div",rm({},n2(r,"option",{option:!0,"option--is-disabled":i,"option--is-focused":o,"option--is-selected":a}),{ref:s,"aria-disabled":i},l),n)},Placeholder:function(r){var n=r.children,i=r.innerProps;return nM("div",rm({},n2(r,"placeholder",{placeholder:!0}),i),n)},SelectContainer:function(r){var n=r.children,i=r.innerProps,o=r.isDisabled,a=r.isRtl;return nM("div",rm({},n2(r,"container",{"--is-disabled":o,"--is-rtl":a}),i),n)},SingleValue:function(r){var n=r.children,i=r.isDisabled,o=r.innerProps;return nM("div",rm({},n2(r,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),o),n)},ValueContainer:function(r){var n=r.children,i=r.innerProps,o=r.isMulti,a=r.hasValue;return nM("div",rm({},n2(r,"valueContainer",{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":a}),i),n)}},iM=Number.isNaN||function(r){return"number"==typeof r&&r!=r};function ik(r,n){if(r.length!==n.length)return!1;for(var i,o,a=0;a<r.length;a++)if(!((i=r[a])===(o=n[a])||iM(i)&&iM(o)))return!1;return!0}for(var iI={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},iL=function(r){return nM("span",rm({css:iI},r))},iA={guidance:function(r){var n=r.isSearchable,i=r.isMulti,o=r.isDisabled,a=r.tabSelectsValue;switch(r.context){case"menu":return"Use Up and Down to choose options".concat(o?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(r["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var n=r.action,i=r.label,o=void 0===i?"":i,a=r.labels,s=r.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(o,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return s?"option ".concat(o," is disabled. Select another option."):"option ".concat(o,", selected.");default:return""}},onFocus:function(r){var n=r.context,i=r.focused,o=r.options,a=r.label,s=void 0===a?"":a,l=r.selectValue,u=r.isDisabled,c=r.isSelected,h=function(r,n){return r&&r.length?"".concat(r.indexOf(n)+1," of ").concat(r.length):""};if("value"===n&&l)return"value ".concat(s," focused, ").concat(h(l,i),".");if("menu"===n){var d="".concat(c?"selected":"focused").concat(u?" disabled":"");return"option ".concat(s," ").concat(d,", ").concat(h(o,i),".")}return""},onFilter:function(r){var n=r.inputValue,i=r.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},iz=function(r){var n=r.ariaSelection,i=r.focusedOption,o=r.focusedValue,a=r.focusableOptions,s=r.isFocused,l=r.selectValue,u=r.selectProps,c=r.id,h=u.ariaLiveMessages,d=u.getOptionLabel,f=u.inputValue,p=u.isMulti,m=u.isOptionDisabled,g=u.isSearchable,y=u.menuIsOpen,_=u.options,v=u.screenReaderStatus,b=u.tabSelectsValue,x=u["aria-label"],w=u["aria-live"],E=(0,eI.useMemo)(function(){return rb(rb({},iA),h||{})},[h]),C=(0,eI.useMemo)(function(){var r="";if(n&&E.onChange){var i=n.option,o=n.options,a=n.removedValue,s=n.removedValues,u=n.value,c=a||i||(Array.isArray(u)?null:u),h=c?d(c):"",f=o||s||void 0,p=f?f.map(d):[],g=rb({// multiSelected items are usually items that have already been selected
// or set by the user as a default value so we assume they are not disabled
isDisabled:c&&m(c,l),label:h,labels:p},n);r=E.onChange(g)}return r},[n,E,m,l,d]),S=(0,eI.useMemo)(function(){var r="",n=i||o,s=!!(i&&l&&l.includes(i));if(n&&E.onFocus){var u={focused:n,label:d(n),isDisabled:m(n,l),isSelected:s,options:a,context:n===i?"menu":"value",selectValue:l};r=E.onFocus(u)}return r},[i,o,d,m,E,a,l]),T=(0,eI.useMemo)(function(){var r="";if(y&&_.length&&E.onFilter){var n=v({count:a.length});r=E.onFilter({inputValue:f,resultsMessage:n})}return r},[a,f,y,E,_,v]),M=(0,eI.useMemo)(function(){var r="";if(E.guidance){var n=o?"value":y?"menu":"input";r=E.guidance({"aria-label":x,context:n,isDisabled:i&&m(i,l),isMulti:p,isSearchable:g,tabSelectsValue:b})}return r},[x,i,o,p,m,g,y,E,l,b]),k="".concat(S," ").concat(T," ").concat(M),I=nM(eI.Fragment,null,nM("span",{id:"aria-selection"},C),nM("span",{id:"aria-context"},k)),L=(null==n?void 0:n.action)==="initial-input-focus";return nM(eI.Fragment,null,nM(iL,{id:c},L&&I),nM(iL,{"aria-live":w,"aria-atomic":"false","aria-relevant":"additions text"},s&&!L&&I))},iP=[{base:"A",letters:"A\xc0\xc1\xc2\xc3\xc4\xc5"},{base:"AA",letters:""},{base:"AE",letters:"\xc6"},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C\xc7"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E\xc8\xc9\xca\xcb"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I\xcc\xcd\xce\xcf"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N\xd1"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O\xd2\xd3\xd4\xd5\xd6\xd8"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U\xd9\xda\xdb\xdc"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y\xdd"},{base:"Z",letters:"Z"},{base:"a",letters:"a\xe0\xe1\xe2\xe3\xe4\xe5"},{base:"aa",letters:""},{base:"ae",letters:"\xe6"},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c\xe7"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e\xe8\xe9\xea\xeb"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i\xec\xed\xee\xef"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n\xf1"},{base:"nj",letters:""},{base:"o",letters:"o\xf2\xf3\xf4\xf5\xf6\xf8"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s\xdf"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u\xf9\xfa\xfb\xfc"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y\xfd\xff"},{base:"z",letters:"z"}],iO=RegExp("["+iP.map(function(r){return r.letters}).join("")+"]","g"),iD={},iR=0;iR<iP.length;iR++)for(var iF=iP[iR],iB=0;iB<iF.letters.length;iB++)iD[iF.letters[iB]]=iF.base;// Assistive text to describe visual elements. Hidden for sighted users.
var iN=function(r){return r.replace(iO,function(r){return iD[r]})},ij=function(r,n){void 0===n&&(n=ik);var i=null;function o(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(i&&i.lastThis===this&&n(o,i.lastArgs))return i.lastResult;var s=r.apply(this,o);return i={lastResult:s,lastArgs:o,lastThis:this},s}return o.clear=function(){i=null},o}(iN),iV=function(r){return r.replace(/^\s+|\s+$/g,"")},iU=function(r){return"".concat(r.label," ").concat(r.value)},iq=["innerRef"];function i$(r){var n=r.innerRef,i=ii(nL(r,iq),"onExited","in","enter","exit","appear");return nM("input",rm({ref:n},i,{css:nk({label:"dummyInput",// get rid of any default styles
background:0,border:0,// important! this hides the flashing cursor
caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,// important! without `width` browsers won't allow focus
width:1,// remove cursor on desktop
color:"transparent",// remove cursor on mobile whilst maintaining "scroll into view" behaviour
left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var iH=function(r){r.preventDefault(),r.stopPropagation()},iZ=["boxSizing","height","overflow","paddingRight","position"],iG={boxSizing:"border-box",// account for possible declaration `width: 100%;` on body
overflow:"hidden",position:"relative",height:"100%"};function iW(r){r.preventDefault()}function iX(r){r.stopPropagation()}function iY(){var r=this.scrollTop,n=this.scrollHeight,i=r+this.offsetHeight;0===r?this.scrollTop=1:i===n&&(this.scrollTop=r-1)}// `ontouchstart` check works on most browsers
// `maxTouchPoints` works on IE10/11 and Surface
function iK(){return"ontouchstart"in window||navigator.maxTouchPoints}var iJ=!!("undefined"!=typeof window&&window.document&&window.document.createElement),iQ=0,i0={capture:!1,passive:!1},i1=function(){return document.activeElement&&document.activeElement.blur()},i2={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function i4(r){var n,i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M=r.children,k=r.lockEnabled,I=r.captureEnabled,L=(i=(n={isEnabled:void 0===I||I,onBottomArrive:r.onBottomArrive,onBottomLeave:r.onBottomLeave,onTopArrive:r.onTopArrive,onTopLeave:r.onTopLeave}).isEnabled,o=n.onBottomArrive,a=n.onBottomLeave,s=n.onTopArrive,l=n.onTopLeave,u=(0,eI.useRef)(!1),c=(0,eI.useRef)(!1),h=(0,eI.useRef)(0),d=(0,eI.useRef)(null),f=(0,eI.useCallback)(function(r,n){if(null!==d.current){var i=d.current,h=i.scrollTop,f=i.scrollHeight,p=i.clientHeight,m=d.current,g=n>0,y=f-p-h,_=!1;y>n&&u.current&&(a&&a(r),u.current=!1),g&&c.current&&(l&&l(r),c.current=!1),g&&n>y?(o&&!u.current&&o(r),m.scrollTop=f,_=!0,u.current=!0):!g&&-n>h&&(s&&!c.current&&s(r),m.scrollTop=0,_=!0,c.current=!0),_&&iH(r)}},[o,a,s,l]),p=(0,eI.useCallback)(function(r){f(r,r.deltaY)},[f]),m=(0,eI.useCallback)(function(r){// set touch start so we can calculate touchmove delta
h.current=r.changedTouches[0].clientY},[]),g=(0,eI.useCallback)(function(r){var n=h.current-r.changedTouches[0].clientY;f(r,n)},[f]),y=(0,eI.useCallback)(function(r){// bail early if no element is available to attach to
if(r){var n=!!it&&{passive:!1};r.addEventListener("wheel",p,n),r.addEventListener("touchstart",m,n),r.addEventListener("touchmove",g,n)}},[g,m,p]),_=(0,eI.useCallback)(function(r){r&&(r.removeEventListener("wheel",p,!1),r.removeEventListener("touchstart",m,!1),r.removeEventListener("touchmove",g,!1))},[g,m,p]),(0,eI.useEffect)(function(){if(i){var r=d.current;return y(r),function(){_(r)}}},[i,y,_]),function(r){d.current=r}),A=(b=(v={isEnabled:k}).isEnabled,w=void 0===(x=v.accountForScrollbars)||x,E=(0,eI.useRef)({}),C=(0,eI.useRef)(null),S=(0,eI.useCallback)(function(r){if(iJ){var n=document.body,i=n&&n.style;// apply the lock styles and padding if this is the first scroll lock
if(w&&iZ.forEach(function(r){var n=i&&i[r];E.current[r]=n}),w&&iQ<1){var o=parseInt(E.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,s=window.innerWidth-a+o||0;Object.keys(iG).forEach(function(r){var n=iG[r];i&&(i[r]=n)}),i&&(i.paddingRight="".concat(s,"px"))}n&&iK()&&(// Mobile Safari ignores { overflow: hidden } declaration on the body.
n.addEventListener("touchmove",iW,i0),r&&(r.addEventListener("touchstart",iY,i0),r.addEventListener("touchmove",iX,i0))),// increment active scroll locks
iQ+=1}},[w]),T=(0,eI.useCallback)(function(r){if(iJ){var n=document.body,i=n&&n.style;// safely decrement active scroll locks
iQ=Math.max(iQ-1,0),w&&iQ<1&&iZ.forEach(function(r){var n=E.current[r];i&&(i[r]=n)}),n&&iK()&&(n.removeEventListener("touchmove",iW,i0),r&&(r.removeEventListener("touchstart",iY,i0),r.removeEventListener("touchmove",iX,i0)))}},[w]),(0,eI.useEffect)(function(){if(b){var r=C.current;return S(r),function(){T(r)}}},[b,S,T]),function(r){C.current=r});return nM(eI.Fragment,null,k&&nM("div",{onClick:i1,css:i2}),M(function(r){L(r),A(r)}))}var i3={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},i5=function(r){return nM("input",{required:!0,name:r.name,tabIndex:-1,"aria-hidden":"true",onFocus:r.onFocus,css:i3,value:"",onChange:function(){}})},i6=function(r){return r.label},i8=function(r){return r.value},i9={clearIndicator:i_,container:function(r){var n=r.isDisabled;return{label:"container",direction:r.isRtl?"rtl":void 0,pointerEvents:n?"none":void 0,// cancel mouse events when disabled
position:"relative"}},control:function(r,n){var i=r.isDisabled,o=r.isFocused,a=r.theme,s=a.colors,l=a.borderRadius;return rb({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?s.neutral5:s.neutral0,borderColor:i?s.neutral10:o?s.primary:s.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:o?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:o?s.primary:s.neutral30}})},dropdownIndicator:i_,group:function(r,n){var i=r.theme.spacing;return n?{}:{paddingBottom:2*i.baseUnit,paddingTop:2*i.baseUnit}},groupHeading:function(r,n){var i=r.theme,o=i.colors,a=i.spacing;return rb({label:"group",cursor:"default",display:"block"},n?{}:{color:o.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(r,n){var i=r.isDisabled,o=r.theme,a=o.spacing.baseUnit,s=o.colors;return rb({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(r,n){var i=r.isDisabled,o=r.value,a=r.theme,s=a.spacing,l=a.colors;return rb(rb({visibility:i?"hidden":"visible",// force css to recompute when value change due to @emotion bug.
// We can remove it whenever the bug is fixed.
transform:o?"translateZ(0)":""},iC),n?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:l.neutral80})},loadingIndicator:function(r,n){var i=r.isFocused,o=r.size,a=r.theme,s=a.colors,l=a.spacing.baseUnit;return rb({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:o,lineHeight:1,marginRight:o,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?s.neutral60:s.neutral20,padding:2*l})},loadingMessage:ic,menu:function(r,n){var i,o=r.placement,a=r.theme,s=a.borderRadius,l=a.spacing,u=a.colors;return rb((r_(i={label:"menu"},o?({bottom:"top",top:"bottom"})[o]:"bottom","100%"),r_(i,"position","absolute"),r_(i,"width","100%"),r_(i,"zIndex",1),i),n?{}:{backgroundColor:u.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},menuList:function(r,n){var i=r.maxHeight,o=r.theme.spacing.baseUnit;return rb({maxHeight:i,overflowY:"auto",position:"relative",// required for offset[Height, Top] > keyboard scroll
WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:o,paddingTop:o})},menuPortal:function(r){var n=r.rect,i=r.offset,o=r.position;return{left:n.left,position:o,top:i,width:n.width,zIndex:1}},multiValue:function(r,n){var i=r.theme,o=i.spacing,a=i.borderRadius,s=i.colors;return rb({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:o.baseUnit/2})},multiValueLabel:function(r,n){var i=r.theme,o=i.borderRadius,a=i.colors,s=r.cropWithEllipsis;return rb({overflow:"hidden",textOverflow:s||void 0===s?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:o/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(r,n){var i=r.theme,o=i.spacing,a=i.borderRadius,s=i.colors,l=r.isFocused;return rb({alignItems:"center",display:"flex"},n?{}:{borderRadius:a/2,backgroundColor:l?s.dangerLight:void 0,paddingLeft:o.baseUnit,paddingRight:o.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:ic,option:function(r,n){var i=r.isDisabled,o=r.isFocused,a=r.isSelected,s=r.theme,l=s.spacing,u=s.colors;return rb({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:a?u.primary:o?u.primary25:"transparent",color:i?u.neutral20:a?u.neutral0:"inherit",padding:"".concat(2*l.baseUnit,"px ").concat(3*l.baseUnit,"px"),// provide some affordance on touch devices
":active":{backgroundColor:i?void 0:a?u.primary:u.primary50}})},placeholder:function(r,n){var i=r.theme,o=i.spacing,a=i.colors;return rb({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:a.neutral50,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},singleValue:function(r,n){var i=r.isDisabled,o=r.theme,a=o.spacing,s=o.colors;return rb({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(r,n){var i=r.theme.spacing,o=r.isMulti,a=r.hasValue,s=r.selectProps.controlShouldRenderValue;return rb({alignItems:"center",display:o&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(2*i.baseUnit,"px")})}},i7={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},oe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:n9(),captureMenuScroll:!n9(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(r,n){// eslint-disable-next-line no-underscore-dangle
if(r.data.__isNew__)return!0;var i=rb({ignoreCase:!0,ignoreAccents:!0,stringify:iU,trim:!0,matchFrom:"any"},void 0),o=i.ignoreCase,a=i.ignoreAccents,s=i.stringify,l=i.trim,u=i.matchFrom,c=l?iV(n):n,h=l?iV(s(r)):s(r);return o&&(c=c.toLowerCase(),h=h.toLowerCase()),a&&(c=ij(c),h=iN(h)),"start"===u?h.substr(0,c.length)===c:h.indexOf(c)>-1},formatGroupLabel:function(r){return r.label},getOptionLabel:i6,getOptionValue:i8,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(r){return!!r.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!// ==============================
// Mobile Device Detector
// ==============================
function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(r){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var n=r.count;return"".concat(n," result").concat(1!==n?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function ot(r,n,i,o){var a=os(r,n,i),s=ol(r,n,i),l=oo(r,n),u=oa(r,n);return{type:"option",data:n,isDisabled:a,isSelected:s,label:l,value:u,index:o}}function or(r,n){return r.options.map(function(i,o){if("options"in i){var a=i.options.map(function(i,o){return ot(r,i,n,o)}).filter(function(n){return oi(r,n)});return a.length>0?{type:"group",data:i,options:a,index:o}:void 0}var s=ot(r,i,n,o);return oi(r,s)?s:void 0}).filter(ir)}function on(r){return r.reduce(function(r,n){return"group"===n.type?r.push.apply(r,rT(n.options.map(function(r){return r.data}))):r.push(n.data),r},[])}function oi(r,n){var i=r.inputValue,o=void 0===i?"":i,a=n.data,s=n.isSelected,l=n.label,u=n.value;return(!oc(r)||!s)&&ou(r,{label:l,value:u,data:a},o)}var oo=function(r,n){return r.getOptionLabel(n)},oa=function(r,n){return r.getOptionValue(n)};function os(r,n,i){return"function"==typeof r.isOptionDisabled&&r.isOptionDisabled(n,i)}function ol(r,n,i){if(i.indexOf(n)>-1)return!0;if("function"==typeof r.isOptionSelected)return r.isOptionSelected(n,i);var o=oa(r,n);return i.some(function(n){return oa(r,n)===o})}function ou(r,n,i){return!r.filterOption||r.filterOption(n,i)}var oc=function(r){var n=r.hideSelectedOptions,i=r.isMulti;return void 0===n?i:n},oh=1,od=/*#__PURE__*/function(r){!function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&rw(r,n)}(s,r);var n,i,o,a=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}(),function(){var r,i=rE(s);if(n){var o=rE(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(r,n){if(n&&("object"===rg(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r)}(this,r)});// Misc. Instance Properties
// ------------------------------
// TODO
// Refs
// ------------------------------
// Lifecycle
// ------------------------------
function s(r){var n;// Set focusedOption if menuIsOpen is set on init (e.g. defaultMenuIsOpen)
if(!function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,s),(n=a.call(this,r)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},n.blockOptionHover=!1,n.isComposing=!1,n.commonProps=void 0,n.initialTouchX=0,n.initialTouchY=0,n.instancePrefix="",n.openAfterFocus=!1,n.scrollToFocusedOptionOnUpdate=!1,n.userIsDragging=void 0,n.controlRef=null,n.getControlRef=function(r){n.controlRef=r},n.focusedOptionRef=null,n.getFocusedOptionRef=function(r){n.focusedOptionRef=r},n.menuListRef=null,n.getMenuListRef=function(r){n.menuListRef=r},n.inputRef=null,n.getInputRef=function(r){n.inputRef=r},n.focus=n.focusInput,n.blur=n.blurInput,n.onChange=function(r,i){var o=n.props,a=o.onChange,s=o.name;i.name=s,n.ariaOnChange(r,i),a(r,i)},n.setValue=function(r,i,o){var a=n.props,s=a.closeMenuOnSelect,l=a.isMulti,u=a.inputValue;n.onInputChange("",{action:"set-value",prevInputValue:u}),s&&(n.setState({inputIsHiddenAfterUpdate:!l}),n.onMenuClose()),// when the select value should change, we should reset focusedValue
n.setState({clearFocusValueOnUpdate:!0}),n.onChange(r,{action:i,option:o})},n.selectOption=function(r){var i=n.props,o=i.blurInputOnSelect,a=i.isMulti,s=i.name,l=n.state.selectValue,u=a&&n.isOptionSelected(r,l),c=n.isOptionDisabled(r,l);if(u){var h=n.getOptionValue(r);n.setValue(l.filter(function(r){return n.getOptionValue(r)!==h}),"deselect-option",r)}else if(c){n.ariaOnChange(r,{action:"select-option",option:r,name:s});return}else a?n.setValue([].concat(rT(l),[r]),"select-option",r):n.setValue(r,"select-option");o&&n.blurInput()},n.removeValue=function(r){var i,o=n.props.isMulti,a=n.state.selectValue,s=n.getOptionValue(r),l=a.filter(function(r){return n.getOptionValue(r)!==s}),u=(i=l[0]||null,o?l:i);n.onChange(u,{action:"remove-value",removedValue:r}),n.focusInput()},n.clearValue=function(){var r=n.state.selectValue;n.onChange(n.props.isMulti?[]:null,{action:"clear",removedValues:r})},n.popValue=function(){var r,i=n.props.isMulti,o=n.state.selectValue,a=o[o.length-1],s=o.slice(0,o.length-1),l=(r=s[0]||null,i?s:r);n.onChange(l,{action:"pop-value",removedValue:a})},n.getValue=function(){return n.state.selectValue},n.cx=function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return nQ.apply(void 0,[n.props.classNamePrefix].concat(i))},n.getOptionLabel=function(r){return oo(n.props,r)},n.getOptionValue=function(r){return oa(n.props,r)},n.getStyles=function(r,i){var o=n.props.unstyled,a=i9[r](i,o);a.boxSizing="border-box";var s=n.props.styles[r];return s?s(a,i):a},n.getClassNames=function(r,i){var o,a;return null===(o=(a=n.props.classNames)[r])||void 0===o?void 0:o.call(a,i)},n.getElementId=function(r){return"".concat(n.instancePrefix,"-").concat(r)},n.getComponents=function(){var r;return r=n.props,rb(rb({},iT),r.components)},n.buildCategorizedOptions=function(){return or(n.props,n.state.selectValue)},n.getCategorizedOptions=function(){return n.props.menuIsOpen?n.buildCategorizedOptions():[]},n.buildFocusableOptions=function(){return on(n.buildCategorizedOptions())},n.getFocusableOptions=function(){return n.props.menuIsOpen?n.buildFocusableOptions():[]},n.ariaOnChange=function(r,i){n.setState({ariaSelection:rb({value:r},i)})},n.onMenuMouseDown=function(r){0===r.button&&(r.stopPropagation(),r.preventDefault(),n.focusInput())},n.onMenuMouseMove=function(r){n.blockOptionHover=!1},n.onControlMouseDown=function(r){// Event captured by dropdown indicator
if(!r.defaultPrevented){var i=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==r.target.tagName&&"TEXTAREA"!==r.target.tagName&&n.onMenuClose():i&&n.openMenu("first"):(i&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==r.target.tagName&&"TEXTAREA"!==r.target.tagName&&r.preventDefault()}},n.onDropdownIndicatorMouseDown=function(r){// ignore mouse events that weren't triggered by the primary button
if((!r||"mousedown"!==r.type||0===r.button)&&!n.props.isDisabled){var i=n.props,o=i.isMulti,a=i.menuIsOpen;n.focusInput(),a?(n.setState({inputIsHiddenAfterUpdate:!o}),n.onMenuClose()):n.openMenu("first"),r.preventDefault()}},n.onClearIndicatorMouseDown=function(r){r&&"mousedown"===r.type&&0!==r.button||(n.clearValue(),r.preventDefault(),n.openAfterFocus=!1,"touchend"===r.type?n.focusInput():setTimeout(function(){return n.focusInput()}))},n.onScroll=function(r){"boolean"==typeof n.props.closeMenuOnScroll?r.target instanceof HTMLElement&&n4(r.target)&&n.props.onMenuClose():"function"==typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(r)&&n.props.onMenuClose()},n.onCompositionStart=function(){n.isComposing=!0},n.onCompositionEnd=function(){n.isComposing=!1},n.onTouchStart=function(r){var i=r.touches,o=i&&i.item(0);o&&(n.initialTouchX=o.clientX,n.initialTouchY=o.clientY,n.userIsDragging=!1)},n.onTouchMove=function(r){var i=r.touches,o=i&&i.item(0);if(o){var a=Math.abs(o.clientX-n.initialTouchX),s=Math.abs(o.clientY-n.initialTouchY);n.userIsDragging=a>5||s>5}},n.onTouchEnd=function(r){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(r.target)&&n.menuListRef&&!n.menuListRef.contains(r.target)&&n.blurInput(),// reset move vars
n.initialTouchX=0,n.initialTouchY=0)},n.onControlTouchEnd=function(r){n.userIsDragging||n.onControlMouseDown(r)},n.onClearIndicatorTouchEnd=function(r){n.userIsDragging||n.onClearIndicatorMouseDown(r)},n.onDropdownIndicatorTouchEnd=function(r){n.userIsDragging||n.onDropdownIndicatorMouseDown(r)},n.handleInputChange=function(r){var i=n.props.inputValue,o=r.currentTarget.value;n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange(o,{action:"input-change",prevInputValue:i}),n.props.menuIsOpen||n.onMenuOpen()},n.onInputFocus=function(r){n.props.onFocus&&n.props.onFocus(r),n.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1},n.onInputBlur=function(r){var i=n.props.inputValue;if(n.menuListRef&&n.menuListRef.contains(document.activeElement)){n.inputRef.focus();return}n.props.onBlur&&n.props.onBlur(r),n.onInputChange("",{action:"input-blur",prevInputValue:i}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1})},n.onOptionHover=function(r){n.blockOptionHover||n.state.focusedOption===r||n.setState({focusedOption:r})},n.shouldHideSelectedOptions=function(){return oc(n.props)},n.onValueInputFocus=function(r){r.preventDefault(),r.stopPropagation(),n.focus()},n.onKeyDown=function(r){var i=n.props,o=i.isMulti,a=i.backspaceRemovesValue,s=i.escapeClearsValue,l=i.inputValue,u=i.isClearable,c=i.isDisabled,h=i.menuIsOpen,d=i.onKeyDown,f=i.tabSelectsValue,p=i.openMenuOnFocus,m=n.state,g=m.focusedOption,y=m.focusedValue,_=m.selectValue;if(!c){if("function"==typeof d&&(d(r),r.defaultPrevented))return;switch(// Block option hover events when the user has just pressed a key
n.blockOptionHover=!0,r.key){case"ArrowLeft":if(!o||l)return;n.focusValue("previous");break;case"ArrowRight":if(!o||l)return;n.focusValue("next");break;case"Delete":case"Backspace":if(l)return;if(y)n.removeValue(y);else{if(!a)return;o?n.popValue():u&&n.clearValue()}break;case"Tab":if(n.isComposing||r.shiftKey||!h||!f||!g||// don't capture the event if the menu opens on focus and the focused
// option is already selected; it breaks the flow of navigation
p&&n.isOptionSelected(g,_))return;n.selectOption(g);break;case"Enter":if(229===r.keyCode)break;if(h){if(!g||n.isComposing)return;n.selectOption(g);break}return;case"Escape":h?(n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange("",{action:"menu-close",prevInputValue:l}),n.onMenuClose()):u&&s&&n.clearValue();break;case" ":// space
if(l)return;if(!h){n.openMenu("first");break}if(!g)return;n.selectOption(g);break;case"ArrowUp":h?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":h?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!h)return;n.focusOption("pageup");break;case"PageDown":if(!h)return;n.focusOption("pagedown");break;case"Home":if(!h)return;n.focusOption("first");break;case"End":if(!h)return;n.focusOption("last");break;default:return}r.preventDefault()}},n.instancePrefix="react-select-"+(n.props.instanceId||++oh),n.state.selectValue=n0(r.value),r.menuIsOpen&&n.state.selectValue.length){var i=n.buildFocusableOptions(),o=i.indexOf(n.state.selectValue[0]);n.state.focusedOption=i[o]}return n}return i=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&n8(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var n=this.props,i=n.isDisabled,o=n.menuIsOpen,a=this.state.isFocused;(a&&!i&&r.isDisabled||// ensure focus is on the Input when the menu opens
a&&o&&!r.menuIsOpen)&&this.focusInput(),a&&i&&!r.isDisabled?// eslint-disable-next-line react/no-did-update-set-state
this.setState({isFocused:!1},this.onMenuClose):a||i||!r.isDisabled||this.inputRef!==document.activeElement||// eslint-disable-next-line react/no-did-update-set-state
this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(n8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,n){this.props.onInputChange(r,n)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var n=this,i=this.state,o=i.selectValue,a=i.isFocused,s=this.buildFocusableOptions(),l="first"===r?0:s.length-1;if(!this.props.isMulti){var u=s.indexOf(o[0]);u>-1&&(l=u)}// only scroll if the menu isn't already open
this.scrollToFocusedOptionOnUpdate=!(a&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:s[l]},function(){return n.onMenuOpen()})}},{key:"focusValue",value:function(r){var n=this.state,i=n.selectValue,o=n.focusedValue;// Only multiselects support value focusing
if(this.props.isMulti){this.setState({focusedOption:null});var a=i.indexOf(o);o||(a=-1);var s=i.length-1,l=-1;if(i.length){switch(r){case"previous":l=0===a?0:-1===a?s:a-1;break;case"next":a>-1&&a<s&&(l=a+1)}this.setState({inputIsHidden:-1!==l,focusedValue:i[l]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",n=this.props.pageSize,i=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var a=0,s=o.indexOf(i);// handles 'first'
i||(s=-1),"up"===r?a=s>0?s-1:o.length-1:"down"===r?a=(s+1)%o.length:"pageup"===r?(a=s-n)<0&&(a=0):"pagedown"===r?(a=s+n)>o.length-1&&(a=o.length-1):"last"===r&&(a=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[a],focusedValue:null})}}},{key:"getTheme",value:// Getters
// ==============================
function(){return(// Use the default theme if there are no customisations.
this.props.theme?"function"==typeof this.props.theme?this.props.theme(i7):rb(rb({},i7),this.props.theme):i7)}},{key:"getCommonProps",value:function(){var r=this.clearValue,n=this.cx,i=this.getStyles,o=this.getClassNames,a=this.getValue,s=this.selectOption,l=this.setValue,u=this.props,c=u.isMulti,h=u.isRtl,d=u.options;return{clearValue:r,cx:n,getStyles:i,getClassNames:o,getValue:a,hasValue:this.hasValue(),isMulti:c,isRtl:h,options:d,selectOption:s,selectProps:u,setValue:l,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,n=r.isClearable,i=r.isMulti;return(// single select, by default, IS NOT clearable
// multi select, by default, IS clearable
void 0===n?i:n)}},{key:"isOptionDisabled",value:function(r,n){return os(this.props,r,n)}},{key:"isOptionSelected",value:function(r,n){return ol(this.props,r,n)}},{key:"filterOption",value:function(r,n){return ou(this.props,r,n)}},{key:"formatOptionLabel",value:function(r,n){if("function"!=typeof this.props.formatOptionLabel)return this.getOptionLabel(r);var i=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(r,{context:n,inputValue:i,selectValue:o})}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:// Composition Handlers
// ==============================
function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:// Touch Handlers
// ==============================
function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:// Renderers
// ==============================
function(){var r=this.props,n=r.isDisabled,i=r.isSearchable,o=r.inputId,a=r.inputValue,s=r.tabIndex,l=r.form,u=r.menuIsOpen,c=r.required,h=this.getComponents().Input,d=this.state,f=d.inputIsHidden,p=d.ariaSelection,m=this.commonProps,g=o||this.getElementId("input"),y=rb(rb(rb({"aria-autocomplete":"list","aria-expanded":u,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox"},u&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!i&&{"aria-readonly":!0}),this.hasValue()?(null==p?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return i?/*#__PURE__*/eI.createElement(h,rm({},m,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:g,innerRef:this.getInputRef,isDisabled:n,isHidden:f,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:l,type:"text",value:a},y)):/*#__PURE__*/eI.createElement(i$,rm({id:g,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:nJ,onFocus:this.onInputFocus,disabled:n,tabIndex:s,inputMode:"none",form:l,value:""},y))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,n=this.getComponents(),i=n.MultiValue,o=n.MultiValueContainer,a=n.MultiValueLabel,s=n.MultiValueRemove,l=n.SingleValue,u=n.Placeholder,c=this.commonProps,h=this.props,d=h.controlShouldRenderValue,f=h.isDisabled,p=h.isMulti,m=h.inputValue,g=h.placeholder,y=this.state,_=y.selectValue,v=y.focusedValue,b=y.isFocused;if(!this.hasValue()||!d)return m?null:/*#__PURE__*/eI.createElement(u,rm({},c,{key:"placeholder",isDisabled:f,isFocused:b,innerProps:{id:this.getElementId("placeholder")}}),g);if(p)return _.map(function(n,l){var u=n===v,h="".concat(r.getOptionLabel(n),"-").concat(r.getOptionValue(n));return /*#__PURE__*/eI.createElement(i,rm({},c,{components:{Container:o,Label:a,Remove:s},isFocused:u,isDisabled:f,key:h,index:l,removeProps:{onClick:function(){return r.removeValue(n)},onTouchEnd:function(){return r.removeValue(n)},onMouseDown:function(r){r.preventDefault()}},data:n}),r.formatOptionLabel(n,"value"))});if(m)return null;var x=_[0];return /*#__PURE__*/eI.createElement(l,rm({},c,{data:x,isDisabled:f}),this.formatOptionLabel(x,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents().ClearIndicator,n=this.commonProps,i=this.props,o=i.isDisabled,a=i.isLoading,s=this.state.isFocused;if(!this.isClearable()||!r||o||!this.hasValue()||a)return null;var l={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return /*#__PURE__*/eI.createElement(r,rm({},n,{innerProps:l,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents().LoadingIndicator,n=this.commonProps,i=this.props,o=i.isDisabled,a=i.isLoading,s=this.state.isFocused;return r&&a?/*#__PURE__*/eI.createElement(r,rm({},n,{innerProps:{"aria-hidden":"true"},isDisabled:o,isFocused:s})):null}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),n=r.DropdownIndicator,i=r.IndicatorSeparator;// separator doesn't make sense without the dropdown indicator
if(!n||!i)return null;var o=this.commonProps,a=this.props.isDisabled,s=this.state.isFocused;return /*#__PURE__*/eI.createElement(i,rm({},o,{isDisabled:a,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents().DropdownIndicator;if(!r)return null;var n=this.commonProps,i=this.props.isDisabled,o=this.state.isFocused,a={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return /*#__PURE__*/eI.createElement(r,rm({},n,{innerProps:a,isDisabled:i,isFocused:o}))}},{key:"renderMenu",value:function(){var r,n=this,i=this.getComponents(),o=i.Group,a=i.GroupHeading,s=i.Menu,l=i.MenuList,u=i.MenuPortal,c=i.LoadingMessage,h=i.NoOptionsMessage,d=i.Option,f=this.commonProps,p=this.state.focusedOption,m=this.props,g=m.captureMenuScroll,y=m.inputValue,_=m.isLoading,v=m.loadingMessage,b=m.minMenuHeight,x=m.maxMenuHeight,w=m.menuIsOpen,E=m.menuPlacement,C=m.menuPosition,S=m.menuPortalTarget,T=m.menuShouldBlockScroll,M=m.menuShouldScrollIntoView,k=m.noOptionsMessage,I=m.onMenuScrollToTop,L=m.onMenuScrollToBottom;if(!w)return null;// TODO: Internal Option Type here
var A=function(r,i){var o=r.type,a=r.data,s=r.isDisabled,l=r.isSelected,u=r.label,c=r.value,h=p===a,m=s?void 0:function(){return n.onOptionHover(a)},g=s?void 0:function(){return n.selectOption(a)},y="".concat(n.getElementId("option"),"-").concat(i);return /*#__PURE__*/eI.createElement(d,rm({},f,{innerProps:{id:y,onClick:g,onMouseMove:m,onMouseOver:m,tabIndex:-1},data:a,isDisabled:s,isSelected:l,key:y,label:u,type:o,value:c,isFocused:h,innerRef:h?n.getFocusedOptionRef:void 0}),n.formatOptionLabel(r.data,"menu"))};if(this.hasOptions())r=this.getCategorizedOptions().map(function(r){if("group"===r.type){var i=r.data,s=r.options,l=r.index,u="".concat(n.getElementId("group"),"-").concat(l);return /*#__PURE__*/eI.createElement(o,rm({},f,{key:u,data:i,options:s,Heading:a,headingProps:{id:"".concat(u,"-heading"),data:r.data},label:n.formatGroupLabel(r.data)}),r.options.map(function(r){return A(r,"".concat(l,"-").concat(r.index))}))}if("option"===r.type)return A(r,"".concat(r.index))});else if(_){var z=v({inputValue:y});if(null===z)return null;r=/*#__PURE__*/eI.createElement(c,f,z)}else{var P=k({inputValue:y});if(null===P)return null;r=/*#__PURE__*/eI.createElement(h,f,P)}var O={minMenuHeight:b,maxMenuHeight:x,menuPlacement:E,menuPosition:C,menuShouldScrollIntoView:M},D=/*#__PURE__*/eI.createElement(iu,rm({},f,O),function(i){var o=i.ref,a=i.placerProps,u=a.placement,c=a.maxHeight;return /*#__PURE__*/eI.createElement(s,rm({},f,O,{innerRef:o,innerProps:{onMouseDown:n.onMenuMouseDown,onMouseMove:n.onMenuMouseMove,id:n.getElementId("listbox")},isLoading:_,placement:u}),/*#__PURE__*/eI.createElement(i4,{captureEnabled:g,onTopArrive:I,onBottomArrive:L,lockEnabled:T},function(i){return /*#__PURE__*/eI.createElement(l,rm({},f,{innerRef:function(r){n.getMenuListRef(r),i(r)},isLoading:_,maxHeight:c,focusedOption:p}),r)}))});// positioning behaviour is almost identical for portalled and fixed,
// so we use the same component. the actual portalling logic is forked
// within the component based on `menuPosition`
return S||"fixed"===C?/*#__PURE__*/eI.createElement(u,rm({},f,{appendTo:S,controlElement:this.controlRef,menuPlacement:E,menuPosition:C}),D):D}},{key:"renderFormField",value:function(){var r=this,n=this.props,i=n.delimiter,o=n.isDisabled,a=n.isMulti,s=n.name,l=n.required,u=this.state.selectValue;if(l&&!this.hasValue()&&!o)return /*#__PURE__*/eI.createElement(i5,{name:s,onFocus:this.onValueInputFocus});if(s&&!o){if(a){if(i){var c=u.map(function(n){return r.getOptionValue(n)}).join(i);return /*#__PURE__*/eI.createElement("input",{name:s,type:"hidden",value:c})}var h=u.length>0?u.map(function(n,i){return /*#__PURE__*/eI.createElement("input",{key:"i-".concat(i),name:s,type:"hidden",value:r.getOptionValue(n)})}):/*#__PURE__*/eI.createElement("input",{name:s,type:"hidden",value:""});return /*#__PURE__*/eI.createElement("div",null,h)}var d=u[0]?this.getOptionValue(u[0]):"";return /*#__PURE__*/eI.createElement("input",{name:s,type:"hidden",value:d})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,n=this.state,i=n.ariaSelection,o=n.focusedOption,a=n.focusedValue,s=n.isFocused,l=n.selectValue,u=this.getFocusableOptions();return /*#__PURE__*/eI.createElement(iz,rm({},r,{id:this.getElementId("live-region"),ariaSelection:i,focusedOption:o,focusedValue:a,isFocused:s,selectValue:l,focusableOptions:u}))}},{key:"render",value:function(){var r=this.getComponents(),n=r.Control,i=r.IndicatorsContainer,o=r.SelectContainer,a=r.ValueContainer,s=this.props,l=s.className,u=s.id,c=s.isDisabled,h=s.menuIsOpen,d=this.state.isFocused,f=this.commonProps=this.getCommonProps();return /*#__PURE__*/eI.createElement(o,rm({},f,{className:l,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:d}),this.renderLiveRegion(),/*#__PURE__*/eI.createElement(n,rm({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:d,menuIsOpen:h}),/*#__PURE__*/eI.createElement(a,rm({},f,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),/*#__PURE__*/eI.createElement(i,rm({},f,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],o=[{key:"getDerivedStateFromProps",value:function(r,n){var i,o=n.prevProps,a=n.clearFocusValueOnUpdate,s=n.inputIsHiddenAfterUpdate,l=n.ariaSelection,u=n.isFocused,c=n.prevWasFocused,h=r.options,d=r.value,f=r.menuIsOpen,p=r.inputValue,m=r.isMulti,g=n0(d),y={};if(o&&(d!==o.value||h!==o.options||f!==o.menuIsOpen||p!==o.inputValue)){var _,v=f?on(or(r,g)):[],b=a?function(r,n){var i=r.focusedValue,o=r.selectValue.indexOf(i);if(o>-1){if(n.indexOf(i)>-1)return i;if(o<n.length)// reference, so return the new value at the same index
return n[o]}return null}(n,g):null;y={selectValue:g,focusedOption:(_=n.focusedOption)&&v.indexOf(_)>-1?_:v[0],focusedValue:b,clearFocusValueOnUpdate:!1}}// some updates should toggle the state of the input visibility
var x=null!=s&&r!==o?{inputIsHidden:s,inputIsHiddenAfterUpdate:void 0}:{},w=l,E=u&&c;return u&&!E&&(// If `value` or `defaultValue` props are not empty then announce them
// when the Select is initially focused
w={value:(i=g[0]||null,m?g:i),options:g,action:"initial-input-focus"},E=!c),(null==l?void 0:l.action)==="initial-input-focus"&&(w=null),rb(rb(rb({},y),x),{},{prevProps:r,ariaSelection:w,prevWasFocused:E})}}],i&&rx(s.prototype,i),o&&rx(s,o),Object.defineProperty(s,"prototype",{writable:!1}),s}(eI.Component);od.defaultProps=oe;var eI=eT("exYeM"),of=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],eI=eT("exYeM"),op=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],om=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=String(r).toLowerCase(),a=String(i.getOptionValue(n)).toLowerCase(),s=String(i.getOptionLabel(n)).toLowerCase();return a===o||s===o},og={formatCreateLabel:function(r){return'Create "'.concat(r,'"')},isValidNewOption:function(r,n,i,o){return!(!r||n.some(function(n){return om(r,n,o)})||i.some(function(n){return om(r,n,o)}))},getNewOptionData:function(r,n){return{label:n,value:r,__isNew__:!0}}},oy={},o_={},ov={},ob={};function ox(r){return(ob=ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}).__esModule=!0,ob.default=ob,ox(r)}(ob=ox).__esModule=!0,ob.default=ob;var ow=ob.default,oE={},oC=ob.default;function oS(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}(oE=function(r,n){if("object"!==oC(r)||null===r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var o=i.call(r,n||"default");if("object"!==oC(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(r)}).__esModule=!0,oE.default=oE,(ov=function(r){var n=oE(r,"string");return"symbol"===ow(n)?n:String(n)}).__esModule=!0,ov.default=ov,(o_=function(r,n,i){return(n=ov(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}).__esModule=!0,o_.default=o_,(oy=function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?oS(Object(i),!0).forEach(function(n){o_(r,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):oS(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}).__esModule=!0,oy.default=oy;var oT={};(oT=function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}).__esModule=!0,oT.default=oT;var oM={};function ok(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,ov(o.key),o)}}(oM=function(r,n,i){return n&&ok(r.prototype,n),i&&ok(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}).__esModule=!0,oM.default=oM;var oI={},oL={};function oA(r,n){return(oL=oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r}).__esModule=!0,oL.default=oL,oA(r,n)}(oL=oA).__esModule=!0,oL.default=oL,(oI=function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&oL(r,n)}).__esModule=!0,oI.default=oI;var oz={},oP={};function oO(r){return(oP=oO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)}).__esModule=!0,oP.default=oP,oO(r)}(oP=oO).__esModule=!0,oP.default=oP;var oD={};(oD=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}).__esModule=!0,oD.default=oD;var oR={},oF=ob.default,oB={};(oB=function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}).__esModule=!0,oB.default=oB,(oR=function(r,n){if(n&&("object"===oF(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return oB(r)}).__esModule=!0,oR.default=oR,(oz=function(r){var n=oD();return function(){var i,o=oP(r);if(n){var a=oP(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return oR(this,i)}}).__esModule=!0,oz.default=oz;var oN={},oj={},oV={};(oV=function(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,o=Array(n);i<n;i++)o[i]=r[i];return o}).__esModule=!0,oV.default=oV,(oj=function(r){if(Array.isArray(r))return oV(r)}).__esModule=!0,oj.default=oj;var oU={};(oU=function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}).__esModule=!0,oU.default=oU;var oq={};(oq=function(r,n){if(r){if("string"==typeof r)return oV(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if("Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i)return Array.from(r);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return oV(r,n)}}).__esModule=!0,oq.default=oq;var o$={};(o$=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}).__esModule=!0,o$.default=o$,(oN=function(r){return oj(r)||oU(r)||oq(r)||o$()}).__esModule=!0,oN.default=oN;var oH={},oZ={};(oZ=function(r){if(Array.isArray(r))return r}).__esModule=!0,oZ.default=oZ;var oG={};(oG=function(r,n){var i=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=i){var o,a,s,l,u=[],c=!0,h=!1;try{if(s=(i=i.call(r)).next,0===n){if(Object(i)!==i)return;c=!1}else for(;!(c=(o=s.call(i)).done)&&(u.push(o.value),u.length!==n);c=!0);}catch(r){h=!0,a=r}finally{try{if(!c&&null!=i.return&&(l=i.return(),Object(l)!==l))return}finally{if(h)throw a}}return u}}).__esModule=!0,oG.default=oG;var oW={};(oW=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}).__esModule=!0,oW.default=oW,(oH=function(r,n){return oZ(r)||oG(r,n)||oq(r,n)||oW()}).__esModule=!0,oH.default=oH;var oX={},oY={};(oY=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}).__esModule=!0,oY.default=oY,(oX=function(r,n){if(null==r)return{};var i,o,a=oY(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}).__esModule=!0,oX.default=oX;var oK={};(oK=function(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}).__esModule=!0,oK.default=oK;var oJ=/*#__PURE__*/(0,eI.forwardRef)(function(r,n){var i,o,a,s,l,u,c,h,d,f,p,m,g,y,_,v,b,x,w,E,C,S,T,M,k,I,L,A,z,P,O,D,R,F,B,N,j,V,U,q,$,H,Z,G,W,X,Y,K,J,Q,ee,et,er,en,ei,eo,ea,es,el=(R=void 0!==(D=(o=void 0===(i=r.defaultInputValue)?"":i,s=void 0!==(a=r.defaultMenuIsOpen)&&a,u=void 0===(l=r.defaultValue)?null:l,c=r.inputValue,h=r.menuIsOpen,d=r.onChange,f=r.onInputChange,p=r.onMenuClose,m=r.onMenuOpen,g=r.value,y=nL(r,of),v=(_=nI((0,eI.useState)(void 0!==c?c:o),2))[0],b=_[1],w=(x=nI((0,eI.useState)(void 0!==h?h:s),2))[0],E=x[1],S=(C=nI((0,eI.useState)(void 0!==g?g:u),2))[0],T=C[1],M=(0,eI.useCallback)(function(r,n){"function"==typeof d&&d(r,n),T(r)},[d]),k=(0,eI.useCallback)(function(r,n){var i;"function"==typeof f&&(i=f(r,n)),b(void 0!==i?i:r)},[f]),I=(0,eI.useCallback)(function(){"function"==typeof m&&m(),E(!0)},[m]),L=(0,eI.useCallback)(function(){"function"==typeof p&&p(),E(!1)},[p]),A=void 0!==c?c:v,z=void 0!==h?h:w,P=void 0!==g?g:S,O=rb(rb({},y),{},{inputValue:A,menuIsOpen:z,onChange:M,onInputChange:k,onMenuClose:L,onMenuOpen:I,value:P})).allowCreateWhileLoading)&&D,B=void 0===(F=O.createOptionPosition)?"last":F,j=void 0===(N=O.formatCreateLabel)?og.formatCreateLabel:N,U=void 0===(V=O.isValidNewOption)?og.isValidNewOption:V,$=void 0===(q=O.getNewOptionData)?og.getNewOptionData:q,H=O.onCreateOption,G=void 0===(Z=O.options)?[]:Z,W=O.onChange,K=void 0===(Y=(X=nL(O,op)).getOptionValue)?i8:Y,Q=void 0===(J=X.getOptionLabel)?i6:J,ee=X.inputValue,et=X.isLoading,er=X.isMulti,en=X.value,ei=X.name,eo=(0,eI.useMemo)(function(){return U(ee,n0(en),G,{getOptionValue:K,getOptionLabel:Q})?$(ee,j(ee)):void 0},[j,$,Q,K,ee,U,G,en]),ea=(0,eI.useMemo)(function(){return(R||!et)&&eo?"first"===B?[eo].concat(rT(G)):[].concat(rT(G),[eo]):G},[R,B,et,eo,G]),es=(0,eI.useCallback)(function(r,n){if("select-option"!==n.action)return W(r,n);var i=Array.isArray(r)?r:[r];if(i[i.length-1]===eo){if(H)H(ee);else{var o,a=$(ee,ee);W((o=[].concat(rT(n0(en)),[a]),er?o:a),{action:"create-option",name:ei,option:a})}return}W(r,n)},[$,ee,er,ei,eo,H,W,en]),rb(rb({},X),{},{options:ea,onChange:es}));return /*#__PURE__*/eI.createElement(od,rm({ref:n},el))}),oQ={centimeters:637100880,centimetres:637100880,degrees:6371008.8/111325,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:6371008.8/1852,radians:1,yards:6967335.223679999};function o0(r,n){void 0===n&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=r,i}function o1(r){return r%360*Math.PI/180}/**
 * Takes a set of features, calculates the bbox of all input features, and returns a bounding box.
 *
 * @name bbox
 * @param {GeoJSON} geojson any GeoJSON object
 * @returns {BBox} bbox extent in [minX, minY, maxX, maxY] order
 * @example
 * var line = turf.lineString([[-74, 40], [-78, 42], [-82, 35]]);
 * var bbox = turf.bbox(line);
 * var bboxPolygon = turf.bboxPolygon(bbox);
 *
 * //addToMap
 * var addToMap = [line, bboxPolygon]
 */function o2(r){var n=[1/0,1/0,-1/0,-1/0];return!/**
 * Callback for coordEach
 *
 * @callback coordEachCallback
 * @param {Array<number>} currentCoord The current coordinate being processed.
 * @param {number} coordIndex The current index of the coordinate being processed.
 * @param {number} featureIndex The current index of the Feature being processed.
 * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.
 * @param {number} geometryIndex The current index of the Geometry being processed.
 *//**
 * Iterate over coordinates in any GeoJSON object, similar to Array.forEach()
 *
 * @name coordEach
 * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object
 * @param {Function} callback a method that takes (currentCoord, coordIndex, featureIndex, multiFeatureIndex)
 * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.
 * @returns {void}
 * @example
 * var features = turf.featureCollection([
 *   turf.point([26, 37], {"foo": "bar"}),
 *   turf.point([36, 53], {"hello": "world"})
 * ]);
 *
 * turf.coordEach(features, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {
 *   //=currentCoord
 *   //=coordIndex
 *   //=featureIndex
 *   //=multiFeatureIndex
 *   //=geometryIndex
 * });
 */function r(n,i,o){// Handles null Geometry -- Skips this GeoJSON
if(null!==n)// This logic may look a little weird. The reason why it is that way
// is because it's trying to be fast. GeoJSON supports multiple kinds
// of objects at its root: FeatureCollection, Features, Geometries.
// This function has the responsibility of handling all of them, and that
// means that some of the `for` loops you see below actually just don't apply
// to certain inputs. For instance, if you give this just a
// Point geometry, then both loops are short-circuited and all we do
// is gradually rename the input until it's called 'geometry'.
//
// This also aims to allocate as few resources as possible: just a
// few numbers and booleans, rather than any temporary arrays as would
// be required with the normalization approach.
for(var a,s,l,u,c,h,d,f,p=0,m=0,g=n.type,y="FeatureCollection"===g,_="Feature"===g,v=y?n.features.length:1,b=0;b<v;b++){c=(f=!!(d=y?n.features[b].geometry:_?n.geometry:n)&&"GeometryCollection"===d.type)?d.geometries.length:1;for(var x=0;x<c;x++){var w=0,E=0;// Handles null Geometry -- Skips this geometry
if(null!==(u=f?d.geometries[x]:d)){h=u.coordinates;var C=u.type;switch(p=o&&("Polygon"===C||"MultiPolygon"===C)?1:0,C){case null:break;case"Point":if(!1===i(h,m,b,w,E))return!1;m++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<h.length;a++){if(!1===i(h[a],m,b,w,E))return!1;m++,"MultiPoint"===C&&w++}"LineString"===C&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<h.length;a++){for(s=0;s<h[a].length-p;s++){if(!1===i(h[a][s],m,b,w,E))return!1;m++}"MultiLineString"===C&&w++,"Polygon"===C&&E++}"Polygon"===C&&w++;break;case"MultiPolygon":for(a=0;a<h.length;a++){for(s=0,E=0;s<h[a].length;s++){for(l=0;l<h[a][s].length-p;l++){if(!1===i(h[a][s][l],m,b,w,E))return!1;m++}E++}w++}break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===r(u.geometries[a],i,o))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}(r,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function o4(r){if(!r)throw Error("coord is required");if(!Array.isArray(r)){if("Feature"===r.type&&null!==r.geometry&&"Point"===r.geometry.type)return r.geometry.coordinates;if("Point"===r.type)return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw Error("coord must be GeoJSON Point or an Array of numbers")}o2.default=o2;var o3=//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html
/**
 * Calculates the distance between two {@link Point|points} in degrees, radians, miles, or kilometers.
 * This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.
 *
 * @name distance
 * @param {Coord | Point} from origin point or coordinate
 * @param {Coord | Point} to destination point or coordinate
 * @param {Object} [options={}] Optional parameters
 * @param {string} [options.units='kilometers'] can be degrees, radians, miles, or kilometers
 * @returns {number} distance between the two points
 * @example
 * var from = turf.point([-75.343, 39.984]);
 * var to = turf.point([-75.534, 39.123]);
 * var options = {units: 'miles'};
 *
 * var distance = turf.distance(from, to, options);
 *
 * //addToMap
 * var addToMap = [from, to];
 * from.properties.distance = distance;
 * to.properties.distance = distance;
 */function(r,n,i){void 0===i&&(i={});var o=o4(r),a=o4(n),s=Math.pow(Math.sin(o1(a[1]-o[1])/2),2)+Math.pow(Math.sin(o1(a[0]-o[0])/2),2)*Math.cos(o1(o[1]))*Math.cos(o1(a[1]));return function(r,n){void 0===n&&(n="kilometers");var i=oQ[n];if(!i)throw Error(n+" units is invalid");return r*i}(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),i.units)},o5=Math.PI/180,o6=180/Math.PI,o8=function(r,n){this.lon=r,this.lat=n,this.x=o5*r,this.y=o5*n};o8.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},o8.prototype.antipode=function(){var r=-1*this.lat,n=this.lon<0?180+this.lon:-((180-this.lon)*1);return new o8(n,r)};var o9=function(){this.coords=[],this.length=0};o9.prototype.move_to=function(r){this.length++,this.coords.push(r)};var o7=function(r){this.properties=r||{},this.geometries=[]};o7.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var r=[],n=0;n<this.geometries.length;n++)r.push(this.geometries[n].coords);return{geometry:{type:"MultiLineString",coordinates:r},type:"Feature",properties:this.properties}},// TODO - output proper multilinestring
o7.prototype.wkt=function(){for(var r="",n="LINESTRING(",i=function(r){n+=r[0]+" "+r[1]+","},o=0;o<this.geometries.length;o++){if(0===this.geometries[o].coords.length)return"LINESTRING(empty)";this.geometries[o].coords.forEach(i),r+=n.substring(0,n.length-1)+")"}return r};/*
 * http://en.wikipedia.org/wiki/Great-circle_distance
 *
 */var ae=function(r,n,i){if(!r||void 0===r.x||void 0===r.y||!n||void 0===n.x||void 0===n.y)throw Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new o8(r.x,r.y),this.end=new o8(n.x,n.y),this.properties=i||{};var o=this.start.x-this.end.x,a=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(o/2),2);if(this.g=2*Math.asin(Math.sqrt(a)),this.g===Math.PI)throw Error("it appears "+r.view()+" and "+n.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw Error("could not calculate great circle between "+r+" and "+n)};/*
 * http://williams.best.vwh.net/avform.htm#Intermediate
 */ae.prototype.interpolate=function(r){var n=Math.sin((1-r)*this.g)/Math.sin(this.g),i=Math.sin(r*this.g)/Math.sin(this.g),o=n*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),a=n*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),s=o6*Math.atan2(n*Math.sin(this.start.y)+i*Math.sin(this.end.y),Math.sqrt(Math.pow(o,2)+Math.pow(a,2)));return[o6*Math.atan2(a,o),s]},/*
 * Generate points along the great circle
 */ae.prototype.Arc=function(r,n){var i=[];if(!r||r<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var o=1/(r-1),a=0;a<r;++a){var s=o*a,l=this.interpolate(s);i.push(l)}// https://github.com/OSGeo/gdal/blob/7bfb9c452a59aac958bff0c8386b891edf8154ca/gdal/ogr/ogrgeometryfactory.cpp#L2342
for(var u=!1,c=0,h=n&&n.offset?n.offset:10,d=180-h,f=-180+h,p=360-h,m=1;m<i.length;++m){var g=i[m-1][0],y=i[m][0],_=Math.abs(y-g);_>p&&(y>d&&g<f||g>d&&y<f)?u=!0:_>c&&(c=_)}/* partial port of dateline handling from:
      gdal/ogr/ogrgeometryfactory.cpp

      TODO - does not handle all wrapping scenarios yet
    */var v=[];if(u&&c<h){var b=[];v.push(b);for(var x=0;x<i.length;++x){var w=parseFloat(i[x][0]);if(x>0&&Math.abs(w-i[x-1][0])>p){var E=parseFloat(i[x-1][0]),C=parseFloat(i[x-1][1]),S=parseFloat(i[x][0]),T=parseFloat(i[x][1]);if(E>-180&&E<f&&180===S&&x+1<i.length&&i[x-1][0]>-180&&i[x-1][0]<f){b.push([-180,i[x][1]]),x++,b.push([i[x][0],i[x][1]]);continue}if(E>d&&E<180&&-180===S&&x+1<i.length&&i[x-1][0]>d&&i[x-1][0]<180){b.push([180,i[x][1]]),x++,b.push([i[x][0],i[x][1]]);continue}if(E<f&&S>d){// swap dfX1, dfX2
var M=E;E=S,S=M;// swap dfY1, dfY2
var k=C;C=T,T=k}if(E>d&&S<f&&(S+=360),E<=180&&S>=180&&E<S){var I=(180-E)/(S-E),L=I*T+(1-I)*C;b.push([i[x-1][0]>d?180:-180,L]),(b=[]).push([i[x-1][0]>d?-180:180,L]),v.push(b)}else b=[],v.push(b);b.push([w,i[x][1]])}else b.push([i[x][0],i[x][1]])}}else{// add normally
var A=[];v.push(A);for(var z=0;z<i.length;++z)A.push([i[z][0],i[z][1]])}for(var P=new o7(this.properties),O=0;O<v.length;++O){var D=new o9;P.geometries.push(D);for(var R=v[O],F=0;F<R.length;++F)D.move_to(R[F])}return P};var at=/**
 * Calculate great circles routes as {@link LineString} or {@link MultiLineString}.
 * If the `start` and `end` points span the antimeridian, the resulting feature will
 * be split into a `MultiLineString`.
 *
 * @name greatCircle
 * @param {Coord} start source point feature
 * @param {Coord} end destination point feature
 * @param {Object} [options={}] Optional parameters
 * @param {Object} [options.properties={}] line feature properties
 * @param {number} [options.npoints=100] number of points
 * @param {number} [options.offset=10] offset controls the likelyhood that lines will
 * be split which cross the dateline. The higher the number the more likely.
 * @returns {Feature<LineString | MultiLineString>} great circle line feature
 * @example
 * var start = turf.point([-122, 48]);
 * var end = turf.point([-77, 39]);
 *
 * var greatCircle = turf.greatCircle(start, end, {properties: {name: 'Seattle to DC'}});
 *
 * //addToMap
 * var addToMap = [start, end, greatCircle]
 */function(r,n,i){if("object"!=typeof// Optional parameters
(i=i||{}))throw Error("options is invalid");var o=i.properties,a=i.npoints,s=i.offset;return r=o4(r),n=o4(n),o=o||{},a=a||100,s=s||10,new ae({x:r[0],y:r[1]},{x:n[0],y:n[1]},o).Arc(a,{offset:s}).json()},ar={};function an(r){return[(r/1e3).toFixed(2),"t CO"].join("")}!function(r){function n(r){if(0===r.length)return 0;var n,i=r[0],o=0;if("number"!=typeof i)return NaN;for(var a=1;a<r.length;a++){if("number"!=typeof r[a])return NaN;n=i+r[a],Math.abs(i)>=Math.abs(r[a])?o+=i-n+r[a]:o+=r[a]-n+i,i=n}return i+o}function i(r){if(0===r.length)throw Error("mean requires at least one data point");return n(r)/r.length}function o(r,n){var o,a,s=i(r),l=0;if(2===n)for(a=0;a<r.length;a++)l+=(o=r[a]-s)*o;else for(a=0;a<r.length;a++)l+=Math.pow(r[a]-s,n);return l}function a(r){if(0===r.length)throw Error("variance requires at least one data point");return o(r,2)/r.length}function s(r){return 1===r.length?0:Math.sqrt(a(r))}function l(r){if(0===r.length)throw Error("mode requires at least one data point");if(1===r.length)return r[0];for(var n=r[0],i=NaN,o=0,a=1,s=1;s<r.length+1;s++)r[s]!==n?(a>o&&(o=a,i=n),a=1,n=r[s]):a++;return i}function u(r){return r.slice().sort(function(r,n){return r-n})}function c(r){if(0===r.length)throw Error("min requires at least one data point");for(var n=r[0],i=1;i<r.length;i++)r[i]<n&&(n=r[i]);return n}function h(r){if(0===r.length)throw Error("max requires at least one data point");for(var n=r[0],i=1;i<r.length;i++)r[i]>n&&(n=r[i]);return n}function d(r){for(var n=0,i=0;i<r.length;i++){if("number"!=typeof r[i])return NaN;n+=r[i]}return n}function f(r,n){var i=r.length*n;if(0===r.length)throw Error("quantile requires at least one data point.");if(n<0||n>1)throw Error("quantiles must be between 0 and 1");return 1===n?r[r.length-1]:0===n?r[0]:i%1!=0?r[Math.ceil(i)-1]:r.length%2==0?(r[i-1]+r[i])/2:r[i]}function p(r,n,i,o){for(i=i||0,o=o||r.length-1;o>i;){if(o-i>600){var a=o-i+1,s=n-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a);s-a/2<0&&(c*=-1),p(r,n,Math.max(i,Math.floor(n-s*u/a+c)),Math.min(o,Math.floor(n+(a-s)*u/a+c)))}var h=r[n],d=i,f=o;for(m(r,i,n),r[o]>h&&m(r,i,o);d<f;){for(m(r,d,f),d++,f--;r[d]<h;)d++;for(;r[f]>h;)f--}r[i]===h?m(r,i,f):m(r,++f,o),f<=n&&(i=f+1),n<=f&&(o=f-1)}}function m(r,n,i){var o=r[n];r[n]=r[i],r[i]=o}function g(r,n){var i=r.slice();if(Array.isArray(n)){!function(r,n){for(var i=[0],o=0;o<n.length;o++)i.push(v(r.length,n[o]));i.push(r.length-1),i.sort(_);for(var a=[0,i.length-1];a.length;){var s=Math.ceil(a.pop()),l=Math.floor(a.pop());if(!(s-l<=1)){var u=Math.floor((l+s)/2);y(r,i[u],Math.floor(i[l]),Math.ceil(i[s])),a.push(l,u,u,s)}}}(i,n);for(var o=[],a=0;a<n.length;a++)o[a]=f(i,n[a]);return o}return y(i,v(i.length,n),0,i.length-1),f(i,n)}function y(r,n,i,o){n%1==0?p(r,n,i,o):(p(r,n=Math.floor(n),i,o),p(r,n+1,n+1,o))}function _(r,n){return r-n}function v(r,n){var i=r*n;return 1===n?r-1:0===n?0:i%1!=0?Math.ceil(i)-1:r%2==0?i-.5:i}function b(r,n){if(n<r[0])return 0;if(n>r[r.length-1])return 1;var i=function(r,n){for(var i=0,o=0,a=r.length;o<a;)n<=r[i=o+a>>>1]?a=i:o=-~i;return o}(r,n);if(r[i]!==n)return i/r.length;i++;var o=function(r,n){for(var i=0,o=0,a=r.length;o<a;)n>=r[i=o+a>>>1]?o=-~i:a=i;return o}(r,n);if(o===i)return i/r.length;var a=o-i+1;return a*(o+i)/2/a/r.length}function x(r){var n=g(r,.75),i=g(r,.25);if("number"==typeof n&&"number"==typeof i)return n-i}function w(r){return+g(r,.5)}function E(r){for(var n=w(r),i=[],o=0;o<r.length;o++)i.push(Math.abs(r[o]-n));return w(i)}function C(r,n){n=n||Math.random;for(var i,o,a=r.length;a>0;)o=Math.floor(n()*a--),i=r[a],r[a]=r[o],r[o]=i;return r}function S(r,n){return C(r.slice(),n)}function T(r,n,i){return S(r,i).slice(0,n)}function M(r,n){for(var i=[],o=0;o<r;o++){for(var a=[],s=0;s<n;s++)a.push(0);i.push(a)}return i}function k(r){for(var n,i=0,o=0;o<r.length;o++)0!==o&&r[o]===n||(n=r[o],i++);return i}function I(r,n,i,o){var a;if(r>0){var s=(i[n]-i[r-1])/(n-r+1);a=o[n]-o[r-1]-(n-r+1)*s*s}else a=o[n]-i[n]*i[n]/(n+1);return a<0?0:a}function L(r,n){if(r.length!==n.length)throw Error("sampleCovariance requires samples with equal lengths");if(r.length<2)throw Error("sampleCovariance requires at least two data points in each sample");for(var o=i(r),a=i(n),s=0,l=0;l<r.length;l++)s+=(r[l]-o)*(n[l]-a);return s/(r.length-1)}function A(r){if(r.length<2)throw Error("sampleVariance requires at least two data points");return o(r,2)/(r.length-1)}function z(r){return Math.sqrt(A(r))}function P(r,n){return L(r,n)/z(r)/z(n)}function O(r,n,i,o){return(r*n+i*o)/(n+o)}function D(r){if(0===r.length)throw Error("meanSimple requires at least one data point");return d(r)/r.length}function R(r){if(0===r.length)throw Error("rootMeanSquare requires at least one data point");for(var n=0,i=0;i<r.length;i++)n+=Math.pow(r[i],2);return Math.sqrt(n/r.length)}var F=function(){this.totalCount=0,this.data={}};F.prototype.train=function(r,n){for(var i in this.data[n]||(this.data[n]={}),r){var o=r[i];void 0===this.data[n][i]&&(this.data[n][i]={}),void 0===this.data[n][i][o]&&(this.data[n][i][o]=0),this.data[n][i][o]++}this.totalCount++},F.prototype.score=function(r){var n,i={};for(var o in r){var a=r[o];for(n in this.data)i[n]={},this.data[n][o]?i[n][o+"_"+a]=(this.data[n][o][a]||0)/this.totalCount:i[n][o+"_"+a]=0}var s={};for(n in i)for(var l in s[n]=0,i[n])s[n]+=i[n][l];return s};var B=function(){this.weights=[],this.bias=0};function N(r){if(r<0)throw Error("factorial requires a non-negative value");if(Math.floor(r)!==r)throw Error("factorial requires an integer input");for(var n=1,i=2;i<=r;i++)n*=i;return n}B.prototype.predict=function(r){if(r.length!==this.weights.length)return null;for(var n=0,i=0;i<this.weights.length;i++)n+=this.weights[i]*r[i];return(n+=this.bias)>0?1:0},B.prototype.train=function(r,n){if(0!==n&&1!==n)return null;r.length!==this.weights.length&&(this.weights=r,this.bias=1);var i=this.predict(r);if("number"==typeof i&&i!==n){for(var o=n-i,a=0;a<this.weights.length;a++)this.weights[a]+=o*r[a];this.bias+=o}return this};var j=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-.00009837447530487956,1580887032249125e-19,-.00021026444172410488,21743961811521265e-20,-.0001643181065367639,8441822398385275e-20,-.000026190838401581408,36899182659531625e-22],V=Math.log(Math.sqrt(2*Math.PI)),U={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},q=Math.sqrt(2*Math.PI),$={gaussian:function(r){return Math.exp(-.5*r*r)/q}},H={nrd:function(r){var n=z(r),i=x(r);return"number"==typeof i&&(n=Math.min(n,i/1.34)),1.06*n*Math.pow(r.length,-.2)}};function Z(r,n,i){var o,a;if(void 0===n)o=$.gaussian;else if("string"==typeof n){if(!$[n])throw Error('Unknown kernel "'+n+'"');o=$[n]}else o=n;if(void 0===i)a=H.nrd(r);else if("string"==typeof i){if(!H[i])throw Error('Unknown bandwidth method "'+i+'"');a=H[i](r)}else a=i;return function(n){var i=0,s=0;for(i=0;i<r.length;i++)s+=o((n-r[i])/a);return s/a/r.length}}for(var G=Math.sqrt(2*Math.PI),W=[],X=0;X<=3.09;X+=.01)W.push(function(r){for(var n=r,i=r,o=1;o<15;o++)n+=i*=r*r/(2*o+1);return Math.round(1e4*(.5+n/G*Math.exp(-r*r/2)))/1e4}(X));function Y(r){var n=1/(1+.5*Math.abs(r)),i=n*Math.exp(-r*r+((((((((.17087277*n-.82215223)*n+1.48851587)*n-1.13520398)*n+.27886807)*n-.18628806)*n+.09678418)*n+.37409196)*n+1.00002368)*n-1.26551223);return r>=0?1-i:i-1}function K(r){var n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),i=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*n)+Math.log(1-r*r)/2,2)-Math.log(1-r*r)/n)-(2/(Math.PI*n)+Math.log(1-r*r)/2));return r>=0?i:-i}function J(r){if("number"==typeof r)return r<0?-1:0===r?0:1;throw TypeError("not a number")}function Q(r,n){for(var i=0,o=0;o<r.length;o++){var a=r[o]-n[o];i+=a*a}return Math.sqrt(i)}function ee(r,n){if(r.length!==n.length)throw Error("must have exactly as many labels as points");for(var i=function(r){for(var n=1+h(r),i=Array(n),o=0;o<r.length;o++){var a=r[o];void 0===i[a]&&(i[a]=[]),i[a].push(o)}return i}(n),o=function(r){for(var n=r.length,i=M(n,n),o=0;o<n;o++)for(var a=0;a<o;a++)i[o][a]=Q(r[o],r[a]),i[a][o]=i[o][a];return i}(r),a=[],s=0;s<r.length;s++){var l=0;if(i[n[s]].length>1){var u=et(s,i[n[s]],o),c=function(r,n,i,o){for(var a=n[r],s=Number.MAX_VALUE,l=0;l<i.length;l++)if(l!==a){var u=et(r,i[l],o);u<s&&(s=u)}return s}(s,n,i,o);l=(c-u)/Math.max(u,c)}a.push(l)}return a}function et(r,n,i){for(var o=0,a=0;a<n.length;a++)o+=i[r][n[a]];return o/n.length}function er(r,n){return 0===r&&0===n?0:Math.abs((r-n)/n)}r.BayesianClassifier=F,r.PerceptronModel=B,r.addToMean=function(r,n,i){return r+(i-r)/(n+1)},r.approxEqual=function(r,n,i){return void 0===i&&(i=1e-4),er(r,n)<=i},r.average=i,r.averageSimple=D,r.bayesian=F,r.bernoulliDistribution=function(r){if(r<0||r>1)throw Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-r,r]},r.binomialDistribution=function(r,n){if(!(n<0||n>1||r<=0||r%1!=0)){var i=0,o=0,a=[],s=1;do a[i]=s*Math.pow(n,i)*Math.pow(1-n,r-i),o+=a[i],s=s*(r-++i+1)/i;while(o<.9999)return a}},r.bisect=function(r,n,i,o,a){if("function"!=typeof r)throw TypeError("func must be a function");for(var s=0;s<o;s++){var l=(n+i)/2;if(0===r(l)||Math.abs((i-n)/2)<a)return l;J(r(l))===J(r(n))?n=l:i=l}throw Error("maximum number of iterations exceeded")},r.chiSquaredDistributionTable=U,r.chiSquaredGoodnessOfFit=function(r,n,o){for(var a=0,s=n(i(r)),l=[],u=[],c=0;c<r.length;c++)void 0===l[r[c]]&&(l[r[c]]=0),l[r[c]]++;for(var h=0;h<l.length;h++)void 0===l[h]&&(l[h]=0);for(var d in s)d in l&&(u[+d]=s[d]*r.length);for(var f=u.length-1;f>=0;f--)u[f]<3&&(u[f-1]+=u[f],u.pop(),l[f-1]+=l[f],l.pop());for(var p=0;p<l.length;p++)a+=Math.pow(l[p]-u[p],2)/u[p];return U[l.length-1-1][o]<a},r.chunk=function(r,n){var i=[];if(n<1)throw Error("chunk size must be a positive number");if(Math.floor(n)!==n)throw Error("chunk size must be an integer");for(var o=0;o<r.length;o+=n)i.push(r.slice(o,o+n));return i},r.ckmeans=function(r,n){if(n>r.length)throw Error("cannot generate more classes than there are data values");var i=u(r);if(1===k(i))return[i];var o=M(n,i.length),a=M(n,i.length);!function(r,n,i){for(var o=n[0].length,a=r[Math.floor(o/2)],s=[],l=[],u=0,c=void 0;u<o;++u)c=r[u]-a,0===u?(s.push(c),l.push(c*c)):(s.push(s[u-1]+c),l.push(l[u-1]+c*c)),n[0][u]=I(0,u,s,l),i[0][u]=0;for(var h=1;h<n.length;++h)(function r(n,i,o,a,s,l,u){if(!(n>i)){var c=Math.floor((n+i)/2);a[o][c]=a[o-1][c-1],s[o][c]=c;var h=o;n>o&&(h=Math.max(h,s[o][n-1]||0)),h=Math.max(h,s[o-1][c]||0);var d,f,p,m=c-1;i<a[0].length-1&&(m=Math.min(m,s[o][i+1]||0));for(var g=m;g>=h&&!((d=I(g,c,l,u))+a[o-1][h-1]>=a[o][c]);--g)(f=I(h,c,l,u)+a[o-1][h-1])<a[o][c]&&(a[o][c]=f,s[o][c]=h),h++,(p=d+a[o-1][g-1])<a[o][c]&&(a[o][c]=p,s[o][c]=g);r(n,c-1,o,a,s,l,u),r(c+1,i,o,a,s,l,u)}})(h<n.length-1?h:o-1,o-1,h,n,i,s,l)}(i,o,a);for(var s=[],l=a[0].length-1,c=a.length-1;c>=0;c--){var h=a[c][l];s[c]=i.slice(h,l+1),c>0&&(l=h-1)}return s},r.coefficientOfVariation=function(r){return z(r)/i(r)},r.combinations=function r(n,i){var o,a,s,l,u=[];for(o=0;o<n.length;o++)if(1===i)u.push([n[o]]);else for(s=r(n.slice(o+1,n.length),i-1),a=0;a<s.length;a++)(l=s[a]).unshift(n[o]),u.push(l);return u},r.combinationsReplacement=function r(n,i){for(var o=[],a=0;a<n.length;a++)if(1===i)o.push([n[a]]);else for(var s=r(n.slice(a,n.length),i-1),l=0;l<s.length;l++)o.push([n[a]].concat(s[l]));return o},r.combineMeans=O,r.combineVariances=function(r,n,i,o,a,s){var l=O(n,i,a,s);return(i*(r+Math.pow(n-l,2))+s*(o+Math.pow(a-l,2)))/(i+s)},r.cumulativeStdLogisticProbability=function(r){return 1/(Math.exp(-r)+1)},r.cumulativeStdNormalProbability=function(r){var n=Math.min(Math.round(100*Math.abs(r)),W.length-1);return r>=0?W[n]:+(1-W[n]).toFixed(4)},r.epsilon=1e-4,r.equalIntervalBreaks=function(r,n){if(r.length<2)return r;for(var i=c(r),o=h(r),a=[i],s=(o-i)/n,l=1;l<n;l++)a.push(a[0]+s*l);return a.push(o),a},r.erf=Y,r.errorFunction=Y,r.extent=function(r){if(0===r.length)throw Error("extent requires at least one data point");for(var n=r[0],i=r[0],o=1;o<r.length;o++)r[o]>i&&(i=r[o]),r[o]<n&&(n=r[o]);return[n,i]},r.extentSorted=function(r){return[r[0],r[r.length-1]]},r.factorial=N,r.gamma=function r(n){if(Number.isInteger(n))return n<=0?NaN:N(n-1);if(--n<0)return Math.PI/(Math.sin(-(Math.PI*n))*r(-n));var i=n+1/4;return Math.pow(n/Math.E,n)*Math.sqrt(2*Math.PI*(n+1/6))*(1+1/144/Math.pow(i,2)-1/12960/Math.pow(i,3)-257/207360/Math.pow(i,4)-52/2612736/Math.pow(i,5)+5741173/9405849600/Math.pow(i,6)+37529/18811699200/Math.pow(i,7))},r.gammaln=function(r){if(r<=0)return 1/0;r--;for(var n=.9999999999999971,i=1;i<15;i++)n+=j[i]/(r+i);var o=5.2421875+r;return V+Math.log(n)-o+(r+.5)*Math.log(o)},r.geometricMean=function(r){if(0===r.length)throw Error("geometricMean requires at least one data point");for(var n=1,i=0;i<r.length;i++){if(r[i]<0)throw Error("geometricMean requires only non-negative numbers as input");n*=r[i]}return Math.pow(n,1/r.length)},r.harmonicMean=function(r){if(0===r.length)throw Error("harmonicMean requires at least one data point");for(var n=0,i=0;i<r.length;i++){if(r[i]<=0)throw Error("harmonicMean requires only positive numbers as input");n+=1/r[i]}return r.length/n},r.interquartileRange=x,r.inverseErrorFunction=K,r.iqr=x,r.jenks=function(r,n){if(n>r.length)return null;var i=function(r,n){var i,o,a=[],s=[],l=0;for(i=0;i<r.length+1;i++){var u=[],c=[];for(o=0;o<n+1;o++)u.push(0),c.push(0);a.push(u),s.push(c)}for(i=1;i<n+1;i++)for(a[1][i]=1,s[1][i]=0,o=2;o<r.length+1;o++)s[o][i]=1/0;for(var h=2;h<r.length+1;h++){for(var d=0,f=0,p=0,m=0,g=1;g<h+1;g++){var y=h-g+1,_=r[y-1];if(l=(f+=_*_)-(d+=_)*d/++p,0!=(m=y-1))for(o=2;o<n+1;o++)s[h][o]>=l+s[m][o-1]&&(a[h][o]=y,s[h][o]=l+s[m][o-1])}a[h][1]=1,s[h][1]=l}return{lowerClassLimits:a,varianceCombinations:s}}(r=r.slice().sort(function(r,n){return r-n}),n);return function(r,n,i){var o=r.length,a=[],s=i;for(a[i]=r[r.length-1];s>0;)a[s-1]=r[n[o][s]-1],o=n[o][s]-1,s--;return a}(r,i.lowerClassLimits,n)},r.kMeansCluster=function(r,n,i){void 0===i&&(i=Math.random);for(var o=null,a=T(r,n,i),s=null,l=Number.MAX_VALUE;0!==l;)o=a,l=function(r,n){for(var i=0,o=0;o<r.length;o++)i+=Q(r[o],n[o]);return i}(a=function(r,n,i){for(var o=r[0].length,a=M(i,o),s=Array(i).fill(0),l=r.length,u=0;u<l;u++){for(var c=r[u],h=n[u],d=a[h],f=0;f<o;f++)d[f]+=c[f];s[h]+=1}for(var p=0;p<i;p++){if(0===s[p])throw Error("Centroid "+p+" has no friends");for(var m=a[p],g=0;g<o;g++)m[g]/=s[p]}return a}(r,s=function(r,n){return r.map(function(r){for(var i=Number.MAX_VALUE,o=-1,a=0;a<n.length;a++){var s=Q(r,n[a]);s<i&&(i=s,o=a)}return o})}(r,a),n),o);return{labels:s,centroids:a}},r.kde=Z,r.kernelDensityEstimation=Z,r.linearRegression=function(r){var n,i,o=r.length;if(1===o)n=0,i=r[0][1];else{for(var a,s,l,u=0,c=0,h=0,d=0,f=0;f<o;f++)u+=s=(a=r[f])[0],c+=l=a[1],h+=s*s,d+=s*l;i=c/o-(n=(o*d-u*c)/(o*h-u*u))*u/o}return{m:n,b:i}},r.linearRegressionLine=function(r){return function(n){return r.b+r.m*n}},r.logAverage=function(r){if(0===r.length)throw Error("logAverage requires at least one data point");for(var n=0,i=0;i<r.length;i++){if(r[i]<0)throw Error("logAverage requires only non-negative numbers as input");n+=Math.log(r[i])}return Math.exp(n/r.length)},r.logit=function(r){if(r<=0||r>=1)throw Error("p must be strictly between zero and one");return Math.log(r/(1-r))},r.mad=E,r.max=h,r.maxSorted=function(r){return r[r.length-1]},r.mean=i,r.meanSimple=D,r.median=w,r.medianAbsoluteDeviation=E,r.medianSorted=function(r){return f(r,.5)},r.min=c,r.minSorted=function(r){return r[0]},r.mode=function(r){return l(u(r))},r.modeFast=function(r){for(var n,i=new Map,o=0,a=0;a<r.length;a++){var s=i.get(r[a]);void 0===s?s=1:s++,s>o&&(n=r[a],o=s),i.set(r[a],s)}if(0===o)throw Error("mode requires at last one data point");return n},r.modeSorted=l,r.numericSort=u,r.perceptron=B,r.permutationTest=function(r,n,o,a,s){if(void 0===a&&(a=1e4),void 0===o&&(o="two_side"),"two_side"!==o&&"greater"!==o&&"less"!==o)throw Error("`alternative` must be either 'two_side', 'greater', or 'less'.");for(var l=i(r)-i(n),u=Array(a),c=r.concat(n),h=Math.floor(c.length/2),d=0;d<a;d++){C(c,s);var f=c.slice(0,h),p=c.slice(h,c.length),m=i(f)-i(p);u[d]=m}var g=0;if("two_side"===o)for(var y=0;y<=a;y++)Math.abs(u[y])>=Math.abs(l)&&(g+=1);else if("greater"===o)for(var _=0;_<=a;_++)u[_]>=l&&(g+=1);else for(var v=0;v<=a;v++)u[v]<=l&&(g+=1);return g/a},r.permutationsHeap=function(r){for(var n=Array(r.length),i=[r.slice()],o=0;o<r.length;o++)n[o]=0;for(var a=0;a<r.length;)if(n[a]<a){var s=0;a%2!=0&&(s=n[a]);var l=r[s];r[s]=r[a],r[a]=l,i.push(r.slice()),n[a]++,a=0}else n[a]=0,a++;return i},r.poissonDistribution=function(r){if(!(r<=0)){var n=0,i=0,o=[],a=1;do o[n]=Math.exp(-r)*Math.pow(r,n)/a,i+=o[n],a*=++n;while(i<.9999)return o}},r.probit=function(r){return 0===r?r=1e-4:r>=1&&(r=.9999),Math.sqrt(2)*K(2*r-1)},r.product=function(r){for(var n=1,i=0;i<r.length;i++)n*=r[i];return n},r.quantile=g,r.quantileRank=function(r,n){return b(u(r),n)},r.quantileRankSorted=b,r.quantileSorted=f,r.quickselect=p,r.rSquared=function(r,n){if(r.length<2)return 1;for(var i=0,o=0;o<r.length;o++)i+=r[o][1];for(var a=i/r.length,s=0,l=0;l<r.length;l++)s+=Math.pow(a-r[l][1],2);for(var u=0,c=0;c<r.length;c++)u+=Math.pow(r[c][1]-n(r[c][0]),2);return 1-u/s},r.relativeError=er,r.rms=R,r.rootMeanSquare=R,r.sample=T,r.sampleCorrelation=P,r.sampleCovariance=L,r.sampleKurtosis=function(r){var n=r.length;if(n<4)throw Error("sampleKurtosis requires at least four data points");for(var o,a=i(r),s=0,l=0,u=0;u<n;u++)s+=(o=r[u]-a)*o,l+=o*o*o*o;return(n-1)/((n-2)*(n-3))*(n*(n+1)*l/(s*s)-3*(n-1))},r.sampleRankCorrelation=function(r,n){for(var i=r.map(function(r,n){return[r,n]}).sort(function(r,n){return r[0]-n[0]}).map(function(r){return r[1]}),o=n.map(function(r,n){return[r,n]}).sort(function(r,n){return r[0]-n[0]}).map(function(r){return r[1]}),a=Array(i.length),s=Array(i.length),l=0;l<i.length;l++)a[i[l]]=l,s[o[l]]=l;return P(a,s)},r.sampleSkewness=function(r){if(r.length<3)throw Error("sampleSkewness requires at least three data points");for(var n,o=i(r),a=0,s=0,l=0;l<r.length;l++)a+=(n=r[l]-o)*n,s+=n*n*n;var u=Math.sqrt(a/(r.length-1)),c=r.length;return c*s/((c-1)*(c-2)*Math.pow(u,3))},r.sampleStandardDeviation=z,r.sampleVariance=A,r.sampleWithReplacement=function(r,n,i){if(0===r.length)return[];i=i||Math.random;for(var o=r.length,a=[],s=0;s<n;s++){var l=Math.floor(i()*o);a.push(r[l])}return a},r.shuffle=S,r.shuffleInPlace=C,r.sign=J,r.silhouette=ee,r.silhouetteMetric=function(r,n){return h(ee(r,n))},r.standardDeviation=s,r.standardNormalTable=W,r.subtractFromMean=function(r,n,i){return(r*n-i)/(n-1)},r.sum=n,r.sumNthPowerDeviations=o,r.sumSimple=d,r.tTest=function(r,n){return(i(r)-n)/(s(r)/Math.sqrt(r.length))},r.tTestTwoSample=function(r,n,o){var a=r.length,s=n.length;if(!a||!s)return null;o||(o=0);var l=i(r),u=i(n),c=A(r),h=A(n);if("number"==typeof l&&"number"==typeof u&&"number"==typeof c&&"number"==typeof h)return(l-u-o)/Math.sqrt(((a-1)*c+(s-1)*h)/(a+s-2)*(1/a+1/s))},r.uniqueCountSorted=k,r.variance=a,r.wilcoxonRankSum=function(r,n){if(!r.length||!n.length)throw Error("Neither sample can be empty");for(var i=r.map(function(r){return{label:"x",value:r}}).concat(n.map(function(r){return{label:"y",value:r}})).sort(function(r,n){return r.value-n.value}),o=0;o<i.length;o++)i[o].rank=o;for(var a=[i[0].rank],s=1;s<i.length;s++)i[s].value===i[s-1].value?(a.push(i[s].rank),s===i.length-1&&l(i,a)):a.length>1?l(i,a):a=[i[s].rank];function l(r,n){for(var i=(n[0]+n[n.length-1])/2,o=0;o<n.length;o++)r[n[o]].rank=i}for(var u=0,c=0;c<i.length;c++){var h=i[c];"x"===h.label&&(u+=h.rank+1)}return u},r.zScore=function(r,n,i){return(r-n)/i}}(ar);let ai=[{maxAbsoluteCO2:1e4},{maxAbsoluteCO2:2e4},{maxAbsoluteCO2:3e4},{},{}],ao=(0,eL.atom)(null),aa=(0,eL.atom)(""),as=(0,eL.atom)([]),al=(0,eL.atom)([]),au=(0,eL.atom)([]),ac=(0,eL.atom)(r=>{let n=r(al),i=r(au);return n&&i?[...n,...i]:[]}),ah=(0,eL.atom)(r=>{let n=r(as),i=r(al),o=r(au);if(!n||!i||!o)return null;let a=i.filter(r=>n.includes(r.properties.name)),s=o.filter(r=>n.includes(r.properties.name));return[...a,...s]}),ad=(0,eL.atom)(r=>{let n=r(ac);if(!n)return[];let i=n.reduce((r,n)=>(n.properties.group&&!r.includes(n.properties.group)&&r.push(n.properties.group),r),[]);return i}),af=(0,eL.atom)(r=>{let n=r(ao),i=r(ah);if(!n||!i)return null;// Make sure all home airports are present + 5 potentially better candidates, with an overall minimum of 15
let o=Math.max(15,i.length+10);return function(r,n,i=10,o=!0){if(r.length<2)return[];let a=[...n],[s,l,u,c]=o2(o0(r)),h=r.map(r=>{let[n,i]=r.geometry.coordinates;if(0===n||0===i)return{...r,noCoords:!0,homeAirportCode:null};// Cheap bbox filter first
let o=a.filter(r=>{let[o,a]=r.geometry.coordinates;// Cheap distance
return n>o-5&&n<o+5&&i>a-5&&i<a+5}),s=o.map(n=>({...n,distance:o3(n,r)})).filter(r=>r.distance<200);s.sort((r,n)=>r.distance-n.distance);// If only 1 large airport within 200km, pick it. Otherwise use closest
let l=s.filter(r=>"large_airport"===r.properties.type),u=1===l.length?l[0]:s[0];return{...r,noCoords:!1,homeAirportCode:u?.properties.iata_code}}),d=a.flatMap(r=>{// Get relationship of this airport with every member
let n=h.map(n=>{// Multiply by two for round trip
let i=n.noCoords?null:2*o3(r,n);return{...n,distance:i,co2:null===i?null:// Under that threshold consider team member will use train
// TODO obviously only works in Europe/NW corridor/some parts of Asia, filter with country code?
// TODO make it configureable
i<200?0:i*(i<800?.255:i<4e3?.156:.15)}}),i=n.filter(n=>n.homeAirportCode===r.properties.iata_code).length,o=n.reduce((r,n)=>r+(n.distance?n.distance:0),0),a=n.reduce((r,n)=>r+(n.co2?n.co2:0),0);return[{...r,properties:{...r.properties,airportTeamMembers:n,totalKm:o,totalCO2:a,homeAirportCount:i}}]}),f=d.filter(r=>r.properties.homeAirportCount||"large_airport"===r.properties.type);f.sort((r,n)=>r.properties.totalCO2-n.properties.totalCO2);let p=f.filter(r=>r.properties.homeAirportCount),m=f.filter(r=>!r.properties.homeAirportCount),g=[];o&&g.push(...p.slice(0,i)),g.push(...m.slice(0,i-g.length)),g.sort((r,n)=>r.properties.totalCO2-n.properties.totalCO2);let y=function(r,n=ai){let i=r[0].properties.totalCO2,o=0;for(let r=0;r<n.length;r++)if(i<n[r].maxAbsoluteCO2||void 0===n[r].maxAbsoluteCO2){o=r;break}let a=n.length-o,s=r.map(r=>r.properties.totalCO2),l=(0,ar.ckmeans)(s,a),u=r.map(r=>{let n=l.findIndex(n=>n.includes(r.properties.totalCO2))+o;return{...r,properties:{...r.properties,score:n}}});return u}(g);return y}(i,n.features,o,!0)}),ap=(0,eL.atom)(r=>{let n=r(aa),i=r(af);return n&&i?i.find(r=>r.properties.iata_code===n):null});function am({onSubmit:r}){let[n,i]=(0,eI.useState)(""),o=(0,eL.useAtomValue)(ad),a=o.map(r=>({label:r,value:r})),[s,l]=(0,eI.useState)(null);return/*#__PURE__*/(0,eM.jsxs)("div",{children:[/*#__PURE__*/(0,eM.jsx)("h1",{children:"Add team member"}),/*#__PURE__*/(0,eM.jsxs)("div",{children:["Name:",/*#__PURE__*/(0,eM.jsx)("input",{type:"text",value:n,onChange:r=>i(r.target.value)})]}),/*#__PURE__*/(0,eM.jsxs)("div",{children:["Group (optional):",/*#__PURE__*/(0,eM.jsx)(oJ,{isClearable:!0,options:a,onChange:r=>{l(r)},value:s})]}),/*#__PURE__*/(0,eM.jsx)("button",{onClick:()=>r(n,s?.value),disabled:""===n,children:"Submit"})]})}var eI=eT("exYeM");let ag=["#FFED61","#F3BB52","#E78842","#DB5633","#CF2323"],ay="airports-icon-all",a_="airports-bg-all",av=r=>({type:"circle",source:"results",paint:{"circle-radius":["case",["==",["get","iata_code"],r.properties.iata_code],10,8],"circle-color":["step",["get","score"],"#FFED61",1,"#F3BB52",2,"#E78842",3,"#DB5633",4,"#CF2323"],"circle-stroke-color":["case",["==",["get","iata_code"],r.properties.iata_code],"#666","#fff"],"circle-stroke-width":1},layout:{"circle-sort-key":["case",[">",["get","homeAirportCount"],0],1,0]}}),ab=r=>({id:"airports-home-icon",type:"symbol",source:"results",layout:{"icon-image":"house","icon-allow-overlap":!0,"icon-size":["case",[">",["get","homeAirportCount"],0],.5,0]},paint:{"icon-color":["case",["==",["get","iata_code"],r.properties.iata_code],"#666","#fff"]}}),ax=rd.div`
  height: 100%;
  flex: 0 0 40vw;
`;function aw({}){let r=(0,eI.useRef)(),n=(0,eI.useRef)(),[i,o]=(0,eI.useState)(!1),a=(0,eL.useSetAtom)(aa),[s,l]=(0,eI.useState)(null),u=(0,eL.useAtomValue)(ap),h=(0,eL.useAtomValue)(af),d=(0,eL.useAtomValue)(ah),[f,p]=(0,eL.useAtom)(as),[m,g]=(0,eL.useAtom)(au),y=(0,eI.useCallback)((r,n)=>{l(null);let i={...s,properties:{name:r,isCustom:!0}};n&&(i.properties.group=n),x.current.remove(),g([...m,i]),p([...f,r])},[s]),[_,v]=(0,eI.useState)(null);(0,eI.useEffect)(()=>{fetch("https://api.mapbox.com/styles/v1/nerik8000/clfwi16xw000s01o877itsawz?access_token=pk.eyJ1IjoibmVyaWs4MDAwIiwiYSI6ImNsbWc0Y3I4cDEwMDkza3J5bjg5bnhwNGoifQ.xeAlkrERmrruAvy1Uq4swA").then(r=>r.json()).then(r=>{v(r)})},[]),(0,eI.useEffect)(()=>{if(!_)return;/*@__PURE__*/eE(rp).accessToken="pk.eyJ1IjoibmVyaWs4MDAwIiwiYSI6ImNsbWc0Y3I4cDEwMDkza3J5bjg5bnhwNGoifQ.xeAlkrERmrruAvy1Uq4swA";let i=new/*@__PURE__*/(eE(rp)).Map({container:r.current,style:_,logoPosition:"bottom-left",pitchWithRotate:!1,dragRotate:!1,zoom:.25,maxZoom:14});n.current=i;let s=r=>{let n=i.queryRenderedFeatures(r.point),o=n.find(r=>[ay,a_].includes(r.layer.id));return o};i.on("click",r=>{let n=s(r);if(n){a(n.properties.iata_code);return}let i={type:"Feature",geometry:{type:"Point",coordinates:[r.lngLat.lng,r.lngLat.lat]}};l(i)}),i.on("mousemove",r=>{let n=s(r);if(n){i.getCanvas().style.cursor="pointer";return}i.getCanvas().style.cursor="crosshair"}),i.on("load",()=>{i.loadImage("./house.png",function(r,n){if(r)throw r;i.addImage("house",n,{sdf:!0})}),i.loadImage("./user.png",function(r,n){if(r)throw r;i.addImage("user",n,{sdf:!0})}),o(!0)})},[l,_]);let b=function(r,n,i,o){let a=(0,eI.useMemo)(()=>{if(!o)return null;let a={...o};if(!r)return o;let s=o0(r.properties.airportTeamMembers.filter(r=>null!==r.distance).map(n=>at(r.geometry.coordinates,n.geometry.coordinates))),l={...a.sources,greatCircles:{type:"geojson",data:s},results:{type:"geojson",data:o0(n)},teamMembers:{type:"geojson",data:o0(i)}},u=[...a.layers,{id:"greatCircles",type:"line",source:"greatCircles",paint:{"line-color":"#ccc","line-width":1}},{id:"teamMembers",type:"symbol",source:"teamMembers",layout:{"icon-image":"user","icon-size":.8,"icon-allow-overlap":!0},minzoom:3},{...av(r),id:a_,filter:["!=",["get","iata_code"],r.properties.iata_code]},{...ab(r),id:ay,filter:["!=",["get","iata_code"],r.properties.iata_code]},{...av(r),id:"airports-bg-selected",filter:["==",["get","iata_code"],r.properties.iata_code]},{...ab(r),id:"airports-icon-selected",filter:["==",["get","iata_code"],r.properties.iata_code]}];return{...a,sources:l,layers:u}},[r]);return a}(u,h,d,_);(0,eI.useEffect)(()=>{let r=n.current;i&&r&&b&&r.setStyle(b)},[i,b]),(0,eI.useEffect)(()=>{let r=n.current;if(i&&r&&s){x.current||(x.current=new/*@__PURE__*/(eE(rp)).Popup({closeButton:!0,closeOnClick:!1}));let n=document.createElement("div"),i=c(n);i.render(/*#__PURE__*/(0,eM.jsx)(am,{onSubmit:y})),x.current.setLngLat(s?.geometry.coordinates).setDOMContent(n),x.current.addTo(r)}},[i,s]),(0,eI.useEffect)(()=>{if(!d||d.length<2)return;let r=n.current,o=d.reduce((r,n)=>{let[i,o]=n.geometry.coordinates;return[Math.min(r[0],i),Math.min(r[1],o),Math.max(r[2],i),Math.max(r[3],o)]},[1/0,1/0,-1/0,-1/0]);i&&r&&r.fitBounds(o,{padding:{top:50,right:50,bottom:50,left:550}})},[i,d]);let x=(0,eI.useRef)();return/*#__PURE__*/(0,eM.jsx)(ax,{ref:r})}// country code regex
let aE=/^[a-z]{2}$/i;var aC=function(r){if(!aE.test(r)){let n=typeof r;throw TypeError(`cc argument must be an ISO 3166-1 alpha-2 string, but got '${"string"===n?r:n}' instead.`)}let n=[...r.toUpperCase()].map(r=>r.codePointAt()+127397);return String.fromCodePoint(...n)},eI=eT("exYeM");let aS=rd.table`
  width: 100%;
  tr > th {
    text-align: left;
  }
`,aT=rd.div`
  margin-bottom: 1rem;
`,aM=rd.div`
  flex: 1;
`,ak=rd.tr`
  cursor: pointer;
  background: ${({selected:r})=>r?"#999":"transparent"};
  color: ${({selected:r})=>r?"white":"inherit"};
  :hover {
    background: #ddd;
  }
`,aI=rd.p`
  margin: 0.5rem 0;
`,aL=rd.div`
  margin-top: 2rem;
`,aA=rd.span`
  background: ${({color:r})=>r};
  color: 'black';
  padding: 0.1rem 0.5rem;
  border-radius: 99rem;
`,az=rd.div`
  color: white;
  font-weight: bold;
  & a {
    color: white !important;
    text-decoration: underline;
  }
`,aP=rd.img`
  float: left;
  margin-right: 0.2rem;
`;function aO(){let r=(0,eL.useAtomValue)(af),n=(0,eL.useAtomValue)(ap),[i,o]=(0,eL.useAtom)(aa),a=(0,eI.useMemo)(()=>{if(!n)return null;let r=(r,n)=>(r.properties.totalCO2/n).toFixed(2),i=[[` approx. ${r(n,1930)} 
  times what an average Indian citizen emits per year`,"https://ourworldindata.org/grapher/co-emissions-per-capita"],[` equivalent to approx. ${r(n,1e3/3)}  square meters of Arctic sea ice loss`,"https://science.sciencemag.org/content/354/6313/747"],[` equivalent to the emissions of approx. ${r(n,1.8)} cheese burgers`,"https://www.sixdegreesnews.org/archives/10261/the-carbon-footprint-of-a-cheeseburger"],[` equivalent to approx. ${r(n,.15)} kilometers travelled with a small car`,"https://ourworldindata.org/travel-carbon-footprint"]][Math.floor(4*Math.random())];return i},[n]),s=n?.properties.totalCO2>ai[0].maxAbsoluteCO2;return/*#__PURE__*/(0,eM.jsx)(eM.Fragment,{children:!!r?.length&&/*#__PURE__*/(0,eM.jsxs)(eM.Fragment,{children:[/*#__PURE__*/(0,eM.jsxs)(aM,{children:[n&&/*#__PURE__*/(0,eM.jsxs)(aT,{children:[/*#__PURE__*/(0,eM.jsxs)("h2",{children:["Travelling to ",n.properties.municipality,":"," ",n.properties.airportTeamMembers.length," people -"," ",/*#__PURE__*/(0,eM.jsx)(aA,{color:ag[n.properties.score],children:an(n.properties.totalCO2)})]}),a&&/*#__PURE__*/(0,eM.jsxs)(aI,{children:[a[0]," (",/*#__PURE__*/(0,eM.jsx)("a",{href:a[1],children:"source"}),")"]})," ",s&&/*#__PURE__*/(0,eM.jsx)(az,{children:/*#__PURE__*/(0,eM.jsxs)(aA,{color:ag[n.properties.score],children:["Warning: this is a high-emission trip."," ",/*#__PURE__*/(0,eM.jsx)("a",{href:"https://hbr.org/2022/07/how-to-lead-better-virtual-meetings",children:"Virtual meetings don't have to be bad."})," ","Have you (re)considered this?"]})})]}),/*#__PURE__*/(0,eM.jsx)(aS,{children:/*#__PURE__*/(0,eM.jsxs)("tbody",{children:[/*#__PURE__*/(0,eM.jsxs)("tr",{children:[/*#__PURE__*/(0,eM.jsx)("th",{children:"Name/IATA code"}),/*#__PURE__*/(0,eM.jsx)("th",{children:"Country"}),/*#__PURE__*/(0,eM.jsx)("th",{children:"Total CO"}),/*#__PURE__*/(0,eM.jsx)("th",{children:"Total dist"}),/*#__PURE__*/(0,eM.jsx)("th",{children:"Home?"})]}),r?.map(r=>eM.jsxs(ak,{onClick:()=>o(r.properties.iata_code),selected:r.properties.iata_code===i,children:[eM.jsxs("td",{children:[r.properties.municipality," (",r.properties.iata_code,")"]}),eM.jsxs("td",{children:[r.properties.iso_country," ",aC(r.properties.iso_country)," "]}),eM.jsx("td",{children:eM.jsx(aA,{color:ag[r.properties.score],children:an(r.properties.totalCO2)})}),eM.jsxs("td",{children:[Math.round(r.properties.totalKm)," km"]}),eM.jsx("td",{children:[...Array(r.properties.homeAirportCount)].map((r,n)=>eM.jsx(aP,{src:"./house.png"}))})]},r.properties.iata_code))]})})]}),/*#__PURE__*/(0,eM.jsxs)(aL,{children:[" Those numbers are estimates based on kg CO/km averages, which may be less accurate than the industry-standard based on other factors such as payload, carrier type, layovers, etc.",/*#__PURE__*/(0,eM.jsx)("br",{}),/*#__PURE__*/(0,eM.jsx)("a",{href:"https://github.com/developmentseed/co2ordinate",children:"Discuss this prototype on the Github repo"})]})]})})}var eI=eT("exYeM"),aD={};function aR(r,n,i,o){return new(i||(i=Promise))(function(a,s){function l(r){try{c(o.next(r))}catch(r){s(r)}}function u(r){try{c(o.throw(r))}catch(r){s(r)}}function c(r){var n;r.done?a(r.value):((n=r.value)instanceof i?n:new i(function(r){r(n)})).then(l,u)}c((o=o.apply(r,n||[])).next())})}function aF(r,n){var i,o,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(u){return function(c){return function(u){if(i)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(l=0)),l;)try{if(i=1,o&&(a=2&u[0]?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return l.label++,{value:u[1],done:!1};case 5:l.label++,o=u[1],u=[0];continue;case 7:u=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){l=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){l.label=u[1];break}if(6===u[0]&&l.label<a[1]){l.label=a[1],a=u;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(u);break}a[2]&&l.ops.pop(),l.trys.pop();continue}u=n.call(r,l)}catch(r){u=[6,r],o=0}finally{i=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function aB(r,n){var i="function"==typeof Symbol&&r[Symbol.iterator];if(!i)return r;var o,a,s=i.call(r),l=[];try{for(;(void 0===n||n-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(r){a={error:r}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return l}function aN(r,n,i){if(i||2==arguments.length)for(var o,a=0,s=n.length;a<s;a++)!o&&a in n||(o||(o=Array.prototype.slice.call(n,0,a)),o[a]=n[a]);return r.concat(o||Array.prototype.slice.call(n))}// By explicitly using `prop-types` you are opting into new production behavior.
// http://fb.me/prop-types-in-prod
aD=eT("jpdgm")(),"function"==typeof SuppressedError&&SuppressedError;var aj=new Map([// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types
["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],// Others
["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function aV(r,n){var i=function(r){var n=r.name;if(n&&-1!==n.lastIndexOf(".")&&!r.type){var i=n.split(".").pop().toLowerCase(),o=aj.get(i);o&&Object.defineProperty(r,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return r}(r);if("string"!=typeof i.path){var o=r.webkitRelativePath;Object.defineProperty(i,"path",{value:"string"==typeof n?n:"string"==typeof o&&o.length>0?o:r.name,writable:!1,configurable:!1,enumerable:!0})}return i}var aU=[// Thumbnail cache files for macOS and Windows
".DS_Store","Thumbs.db"// Windows
];function aq(r){return"object"==typeof r&&null!==r}function a$(r){return r.filter(function(r){return -1===aU.indexOf(r.name)})}// IE11 does not support Array.from()
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Browser_compatibility
// https://developer.mozilla.org/en-US/docs/Web/API/FileList
// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItemList
function aH(r){if(null===r)return[];// tslint:disable: prefer-for-of
for(var n=[],i=0;i<r.length;i++){var o=r[i];n.push(o)}return n}// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem
function aZ(r){if("function"!=typeof r.webkitGetAsEntry)return aG(r);var n=r.webkitGetAsEntry();return(// Safari supports dropping an image node from a different window and can be retrieved using
// the DataTransferItem.getAsFile() API
// NOTE: FileSystemEntry.file() throws if trying to get the file
n&&n.isDirectory?aX(n):aG(r))}function aG(r){var n=r.getAsFile();return n?Promise.resolve(aV(n)):Promise.reject("".concat(r," is not a File"))}// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemEntry
function aW(r){return aR(this,void 0,void 0,function(){return aF(this,function(n){return[2/*return*/,r.isDirectory?aX(r):// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileEntry
function(r){return aR(this,void 0,void 0,function(){return aF(this,function(n){return[2/*return*/,new Promise(function(n,i){r.file(function(i){n(aV(i,r.fullPath))},function(r){i(r)})})]})})}(r)]})})}// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry
function aX(r){var n=r.createReader();return new Promise(function(r,i){var o=[];!function a(){var s=this;// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry/createReader
// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryReader/readEntries
n.readEntries(function(n){return aR(s,void 0,void 0,function(){var s;return aF(this,function(l){switch(l.label){case 0:if(n.length)return[3/*break*/,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4/*yield*/,Promise.all(o)];case 2:return r(l.sent()),[3/*break*/,4];case 3:return i(l.sent()),[3/*break*/,4];case 4:return[3/*break*/,6];case 5:s=Promise.all(n.map(aW)),o.push(s),// Continue reading
a(),l.label=6;case 6:return[2/*return*/]}})})},function(r){i(r)})}()})}function aY(r){return function(r){if(Array.isArray(r))return a2(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||a1(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aK(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}function aJ(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?aK(Object(i),!0).forEach(function(n){aQ(r,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):aK(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}function aQ(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}function a0(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var i,o,a=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=a){var s=[],l=!0,u=!1;try{for(a=a.call(r);!(l=(i=a.next()).done)&&(s.push(i.value),!n||s.length!==n);l=!0);}catch(r){u=!0,o=r}finally{try{l||null==a.return||a.return()}finally{if(u)throw o}}return s}}(r,n)||a1(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a1(r,n){if(r){if("string"==typeof r)return a2(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if("Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i)return Array.from(r);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a2(r,n)}}function a2(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,o=Array(n);i<n;i++)o[i]=r[i];return o}w=function(r,n){if(r&&n){var i=Array.isArray(n)?n:n.split(","),o=r.name||"",a=(r.type||"").toLowerCase(),s=a.replace(/\/.*$/,"");return i.some(function(r){var n=r.trim().toLowerCase();return"."===n.charAt(0)?o.toLowerCase().endsWith(n):n.endsWith("/*")?s===n.replace(/\/.*$/,""):a===n})}return!0};var a4=function(r){var n=Array.isArray(r=Array.isArray(r)&&1===r.length?r[0]:r)?"one of ".concat(r.join(", ")):r;return{code:"file-invalid-type",message:"File type must be ".concat(n)}},a3=function(r){return{code:"file-too-large",message:"File is larger than ".concat(r," ").concat(1===r?"byte":"bytes")}},a5=function(r){return{code:"file-too-small",message:"File is smaller than ".concat(r," ").concat(1===r?"byte":"bytes")}},a6={code:"too-many-files",message:"Too many files"};function a8(r,n){var i="application/x-moz-file"===r.type||w(r,n);return[i,i?null:a4(n)]}function a9(r,n,i){if(a7(r.size)){if(a7(n)&&a7(i)){if(r.size>i)return[!1,a3(i)];if(r.size<n)return[!1,a5(n)]}else if(a7(n)&&r.size<n)return[!1,a5(n)];else if(a7(i)&&r.size>i)return[!1,a3(i)]}return[!0,null]}function a7(r){return null!=r}function se(r){return"function"==typeof r.isPropagationStopped?r.isPropagationStopped():void 0!==r.cancelBubble&&r.cancelBubble}function st(r){return r.dataTransfer?Array.prototype.some.call(r.dataTransfer.types,function(r){return"Files"===r||"application/x-moz-file"===r}):!!r.target&&!!r.target.files}function sr(r){r.preventDefault()}function sn(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(r){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return n.some(function(n){return!se(r)&&n&&n.apply(void 0,[r].concat(o)),se(r)})}}function si(r){return"audio/*"===r||"video/*"===r||"image/*"===r||"text/*"===r||/\w+\/[-+.\w]+/g.test(r)}function so(r){return/^.*\.[\w]+$/.test(r)}/**
 * @typedef {Object.<string, string[]>} AcceptProp
 *//**
 * @typedef {object} FileError
 * @property {string} message
 * @property {ErrorCode|string} code
 *//**
 * @typedef {"file-invalid-type"|"file-too-large"|"file-too-small"|"too-many-files"} ErrorCode
 */var sa=["children"],ss=["open"],sl=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],su=["refKey","onChange","onClick"];function sc(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var i,o,a=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=a){var s=[],l=!0,u=!1;try{for(a=a.call(r);!(l=(i=a.next()).done)&&(s.push(i.value),!n||s.length!==n);l=!0);}catch(r){u=!0,o=r}finally{try{l||null==a.return||a.return()}finally{if(u)throw o}}return s}}(r,n)||sh(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sh(r,n){if(r){if("string"==typeof r)return sd(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if("Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i)return Array.from(r);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sd(r,n)}}function sd(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,o=Array(n);i<n;i++)o[i]=r[i];return o}function sf(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}function sp(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?sf(Object(i),!0).forEach(function(n){sm(r,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):sf(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}function sm(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}function sg(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}/**
 * Convenience wrapper component for the `useDropzone` hook
 *
 * ```jsx
 * <Dropzone>
 *   {({getRootProps, getInputProps}) => (
 *     <div {...getRootProps()}>
 *       <input {...getInputProps()} />
 *       <p>Drag 'n' drop some files here, or click to select files</p>
 *     </div>
 *   )}
 * </Dropzone>
 * ```
 */var sy=/*#__PURE__*/(0,eI.forwardRef)(function(r,n){var i=r.children,o=sb(sg(r,sa)),a=o.open,s=sg(o,ss);return(0,eI.useImperativeHandle)(n,function(){return{open:a}},[a]),/*@__PURE__*/eE(eI).createElement(eI.Fragment,null,i(sp(sp({},s),{},{open:a})))});sy.displayName="Dropzone";var s_={disabled:!1,getFilesFromEvent:function(r){return aR(this,void 0,void 0,function(){return aF(this,function(n){return aq(r)&&aq(r.dataTransfer)?[2/*return*/,function(r,n){return aR(this,void 0,void 0,function(){var i;return aF(this,function(o){switch(o.label){case 0:if(!r.items)return[3/*break*/,2];// According to https://html.spec.whatwg.org/multipage/dnd.html#dndevents,
// only 'dragstart' and 'drop' has access to the data (source node)
if(i=aH(r.items).filter(function(r){return"file"===r.kind}),"drop"!==n)return[2/*return*/,i];return[4/*yield*/,Promise.all(i.map(aZ))];case 1:return[2/*return*/,a$(function r(n){return n.reduce(function(n,i){return aN(aN([],aB(n),!1),aB(Array.isArray(i)?r(i):[i]),!1)},[])}(o.sent()))];case 2:return[2/*return*/,a$(aH(r.files).map(function(r){return aV(r)}))]}})})}(r.dataTransfer,r.type)]:aq(r)&&aq(r.target)?[2/*return*/,aH(r.target.files).map(function(r){return aV(r)})]:Array.isArray(r)&&r.every(function(r){return"getFile"in r&&"function"==typeof r.getFile})?[2/*return*/,// Ee expect each handle to be https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileHandle
function(r){return aR(this,void 0,void 0,function(){return aF(this,function(n){switch(n.label){case 0:return[4/*yield*/,Promise.all(r.map(function(r){return r.getFile()}))];case 1:return[2/*return*/,n.sent().map(function(r){return aV(r)})]}})})}(r)]:[2/*return*/,[]]})})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};sy.defaultProps=s_,sy.propTypes={/**
   * Render function that exposes the dropzone state and prop getter fns
   *
   * @param {object} params
   * @param {Function} params.getRootProps Returns the props you should apply to the root drop container you render
   * @param {Function} params.getInputProps Returns the props you should apply to hidden file input you render
   * @param {Function} params.open Open the native file selection dialog
   * @param {boolean} params.isFocused Dropzone area is in focus
   * @param {boolean} params.isFileDialogActive File dialog is opened
   * @param {boolean} params.isDragActive Active drag is in progress
   * @param {boolean} params.isDragAccept Dragged files are accepted
   * @param {boolean} params.isDragReject Some dragged files are rejected
   * @param {File[]} params.acceptedFiles Accepted files
   * @param {FileRejection[]} params.fileRejections Rejected files and why they were rejected
   */children:/*@__PURE__*/eE(aD).func,/**
   * Set accepted file types.
   * Checkout https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker types option for more information.
   * Keep in mind that mime type determination is not reliable across platforms. CSV files,
   * for example, are reported as text/plain under macOS but as application/vnd.ms-excel under
   * Windows. In some cases there might not be a mime type set at all (https://github.com/react-dropzone/react-dropzone/issues/276).
   */accept:/*@__PURE__*/eE(aD).objectOf(/*@__PURE__*/eE(aD).arrayOf(/*@__PURE__*/eE(aD).string)),/**
   * Allow drag 'n' drop (or selection from the file dialog) of multiple files
   */multiple:/*@__PURE__*/eE(aD).bool,/**
   * If false, allow dropped items to take over the current browser window
   */preventDropOnDocument:/*@__PURE__*/eE(aD).bool,/**
   * If true, disables click to open the native file selection dialog
   */noClick:/*@__PURE__*/eE(aD).bool,/**
   * If true, disables SPACE/ENTER to open the native file selection dialog.
   * Note that it also stops tracking the focus state.
   */noKeyboard:/*@__PURE__*/eE(aD).bool,/**
   * If true, disables drag 'n' drop
   */noDrag:/*@__PURE__*/eE(aD).bool,/**
   * If true, stops drag event propagation to parents
   */noDragEventsBubbling:/*@__PURE__*/eE(aD).bool,/**
   * Minimum file size (in bytes)
   */minSize:/*@__PURE__*/eE(aD).number,/**
   * Maximum file size (in bytes)
   */maxSize:/*@__PURE__*/eE(aD).number,/**
   * Maximum accepted number of files
   * The default value is 0 which means there is no limitation to how many files are accepted.
   */maxFiles:/*@__PURE__*/eE(aD).number,/**
   * Enable/disable the dropzone
   */disabled:/*@__PURE__*/eE(aD).bool,/**
   * Use this to provide a custom file aggregator
   *
   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)
   */getFilesFromEvent:/*@__PURE__*/eE(aD).func,/**
   * Cb for when closing the file dialog with no selection
   */onFileDialogCancel:/*@__PURE__*/eE(aD).func,/**
   * Cb for when opening the file dialog
   */onFileDialogOpen:/*@__PURE__*/eE(aD).func,/**
   * Set to true to use the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API
   * to open the file picker instead of using an `<input type="file">` click event.
   */useFsAccessApi:/*@__PURE__*/eE(aD).bool,/**
   * Set to true to focus the root element on render
   */autoFocus:/*@__PURE__*/eE(aD).bool,/**
   * Cb for when the `dragenter` event occurs.
   *
   * @param {DragEvent} event
   */onDragEnter:/*@__PURE__*/eE(aD).func,/**
   * Cb for when the `dragleave` event occurs
   *
   * @param {DragEvent} event
   */onDragLeave:/*@__PURE__*/eE(aD).func,/**
   * Cb for when the `dragover` event occurs
   *
   * @param {DragEvent} event
   */onDragOver:/*@__PURE__*/eE(aD).func,/**
   * Cb for when the `drop` event occurs.
   * Note that this callback is invoked after the `getFilesFromEvent` callback is done.
   *
   * Files are accepted or rejected based on the `accept`, `multiple`, `minSize` and `maxSize` props.
   * `accept` must be a valid [MIME type](http://www.iana.org/assignments/media-types/media-types.xhtml) according to [input element specification](https://www.w3.org/wiki/HTML/Elements/input/file) or a valid file extension.
   * If `multiple` is set to false and additional files are dropped,
   * all files besides the first will be rejected.
   * Any file which does not have a size in the [`minSize`, `maxSize`] range, will be rejected as well.
   *
   * Note that the `onDrop` callback will always be invoked regardless if the dropped files were accepted or rejected.
   * If you'd like to react to a specific scenario, use the `onDropAccepted`/`onDropRejected` props.
   *
   * `onDrop` will provide you with an array of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) objects which you can then process and send to a server.
   * For example, with [SuperAgent](https://github.com/visionmedia/superagent) as a http/ajax library:
   *
   * ```js
   * function onDrop(acceptedFiles) {
   *   const req = request.post('/upload')
   *   acceptedFiles.forEach(file => {
   *     req.attach(file.name, file)
   *   })
   *   req.end(callback)
   * }
   * ```
   *
   * @param {File[]} acceptedFiles
   * @param {FileRejection[]} fileRejections
   * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)
   */onDrop:/*@__PURE__*/eE(aD).func,/**
   * Cb for when the `drop` event occurs.
   * Note that if no files are accepted, this callback is not invoked.
   *
   * @param {File[]} files
   * @param {(DragEvent|Event)} event
   */onDropAccepted:/*@__PURE__*/eE(aD).func,/**
   * Cb for when the `drop` event occurs.
   * Note that if no files are rejected, this callback is not invoked.
   *
   * @param {FileRejection[]} fileRejections
   * @param {(DragEvent|Event)} event
   */onDropRejected:/*@__PURE__*/eE(aD).func,/**
   * Cb for when there's some error from any of the promises.
   *
   * @param {Error} error
   */onError:/*@__PURE__*/eE(aD).func,/**
   * Custom validation function. It must return null if there's no errors.
   * @param {File} file
   * @returns {FileError|FileError[]|null}
   */validator:/*@__PURE__*/eE(aD).func};/**
 * A function that is invoked for the `dragenter`,
 * `dragover` and `dragleave` events.
 * It is not invoked if the items are not files (such as link, text, etc.).
 *
 * @callback dragCb
 * @param {DragEvent} event
 *//**
 * A function that is invoked for the `drop` or input change event.
 * It is not invoked if the items are not files (such as link, text, etc.).
 *
 * @callback dropCb
 * @param {File[]} acceptedFiles List of accepted files
 * @param {FileRejection[]} fileRejections List of rejected files and why they were rejected
 * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)
 *//**
 * A function that is invoked for the `drop` or input change event.
 * It is not invoked if the items are files (such as link, text, etc.).
 *
 * @callback dropAcceptedCb
 * @param {File[]} files List of accepted files that meet the given criteria
 * (`accept`, `multiple`, `minSize`, `maxSize`)
 * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)
 *//**
 * A function that is invoked for the `drop` or input change event.
 *
 * @callback dropRejectedCb
 * @param {File[]} files List of rejected files that do not meet the given criteria
 * (`accept`, `multiple`, `minSize`, `maxSize`)
 * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)
 *//**
 * A function that is used aggregate files,
 * in a asynchronous fashion, from drag or input change events.
 *
 * @callback getFilesFromEvent
 * @param {(DragEvent|Event)} event A drag event or input change event (if files were selected via the file dialog)
 * @returns {(File[]|Promise<File[]>)}
 *//**
 * An object with the current dropzone state.
 *
 * @typedef {object} DropzoneState
 * @property {boolean} isFocused Dropzone area is in focus
 * @property {boolean} isFileDialogActive File dialog is opened
 * @property {boolean} isDragActive Active drag is in progress
 * @property {boolean} isDragAccept Dragged files are accepted
 * @property {boolean} isDragReject Some dragged files are rejected
 * @property {File[]} acceptedFiles Accepted files
 * @property {FileRejection[]} fileRejections Rejected files and why they were rejected
 *//**
 * An object with the dropzone methods.
 *
 * @typedef {object} DropzoneMethods
 * @property {Function} getRootProps Returns the props you should apply to the root drop container you render
 * @property {Function} getInputProps Returns the props you should apply to hidden file input you render
 * @property {Function} open Open the native file selection dialog
 */var sv={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function sb(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=sp(sp({},s_),r),i=n.accept,o=n.disabled,a=n.getFilesFromEvent,s=n.maxSize,l=n.minSize,u=n.multiple,c=n.maxFiles,h=n.onDragEnter,d=n.onDragLeave,f=n.onDragOver,p=n.onDrop,m=n.onDropAccepted,g=n.onDropRejected,y=n.onFileDialogCancel,_=n.onFileDialogOpen,v=n.useFsAccessApi,b=n.autoFocus,x=n.preventDropOnDocument,w=n.noClick,E=n.noKeyboard,C=n.noDrag,S=n.noDragEventsBubbling,T=n.onError,M=n.validator,k=(0,eI.useMemo)(function(){return function(r){if(a7(r))return Object.entries(r).reduce(function(r,n){var i=a0(n,2),o=i[0],a=i[1];return[].concat(aY(r),[o],aY(a))},[])// Silently discard invalid entries as pickerOptionsFromAccept warns about these
.filter(function(r){return si(r)||so(r)}).join(",")}(i)},[i]),I=(0,eI.useMemo)(function(){return a7(i)?[{// description is required due to https://crbug.com/1264708
description:"Files",accept:Object.entries(i).filter(function(r){var n=a0(r,2),i=n[0],o=n[1],a=!0;return si(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(o)&&o.every(so)||(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(r,n){var i=a0(n,2),o=i[0],a=i[1];return aJ(aJ({},r),{},aQ({},o,a))},{})}]:i},[i]),L=(0,eI.useMemo)(function(){return"function"==typeof _?_:sw},[_]),A=(0,eI.useMemo)(function(){return"function"==typeof y?y:sw},[y]),z=(0,eI.useRef)(null),P=(0,eI.useRef)(null),O=sc((0,eI.useReducer)(sx,sv),2),D=O[0],R=O[1],F=D.isFocused,B=D.isFileDialogActive,N=(0,eI.useRef)("undefined"!=typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),j=function(){!N.current&&B&&setTimeout(function(){P.current&&!P.current.files.length&&(R({type:"closeDialog"}),A())},300)};(0,eI.useEffect)(function(){return window.addEventListener("focus",j,!1),function(){window.removeEventListener("focus",j,!1)}},[P,B,A,N]);var V=(0,eI.useRef)([]),U=function(r){z.current&&z.current.contains(r.target)||(r.preventDefault(),V.current=[])};(0,eI.useEffect)(function(){return x&&(document.addEventListener("dragover",sr,!1),document.addEventListener("drop",U,!1)),function(){x&&(document.removeEventListener("dragover",sr),document.removeEventListener("drop",U))}},[z,x]),(0,eI.useEffect)(function(){return!o&&b&&z.current&&z.current.focus(),function(){}},[z,b,o]);var q=(0,eI.useCallback)(function(r){T?T(r):console.error(r)},[T]),$=(0,eI.useCallback)(function(r){var n;r.preventDefault(),r.persist(),en(r),V.current=[].concat(function(r){if(Array.isArray(r))return sd(r)}(n=V.current)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(n)||sh(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[r.target]),st(r)&&Promise.resolve(a(r)).then(function(n){if(!se(r)||S){var i,o,a,d,f,p,m,g,y=n.length,_=y>0&&(o=(i={files:n,accept:k,minSize:l,maxSize:s,multiple:u,maxFiles:c,validator:M}).files,a=i.accept,d=i.minSize,f=i.maxSize,p=i.multiple,m=i.maxFiles,g=i.validator,(!!p||!(o.length>1))&&(!p||!(m>=1)||!(o.length>m))&&o.every(function(r){var n=a0(a8(r,a),1)[0],i=a0(a9(r,d,f),1)[0],o=g?g(r):null;return n&&i&&!o}));R({isDragAccept:_,isDragReject:y>0&&!_,isDragActive:!0,type:"setDraggedFiles"}),h&&h(r)}}).catch(function(r){return q(r)})},[a,h,q,S,k,l,s,u,c,M]),H=(0,eI.useCallback)(function(r){r.preventDefault(),r.persist(),en(r);var n=st(r);if(n&&r.dataTransfer)try{r.dataTransfer.dropEffect="copy"}catch(r){}return n&&f&&f(r),!1},[f,S]),Z=(0,eI.useCallback)(function(r){r.preventDefault(),r.persist(),en(r);var n=V.current.filter(function(r){return z.current&&z.current.contains(r)}),i=n.indexOf(r.target);// Make sure to remove a target present multiple times only once
-1!==i&&n.splice(i,1),V.current=n,!(n.length>0)&&(R({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),st(r)&&d&&d(r))},[z,d,S]),G=(0,eI.useCallback)(function(r,n){var i=[],o=[];r.forEach(function(r){var n=sc(a8(r,k),2),a=n[0],u=n[1],c=sc(a9(r,l,s),2),h=c[0],d=c[1],f=M?M(r):null;if(a&&h&&!f)i.push(r);else{var p=[u,d];f&&(p=p.concat(f)),o.push({file:r,errors:p.filter(function(r){return r})})}}),(!u&&i.length>1||u&&c>=1&&i.length>c)&&(// Reject everything and empty accepted files
i.forEach(function(r){o.push({file:r,errors:[a6]})}),i.splice(0)),R({acceptedFiles:i,fileRejections:o,type:"setFiles"}),p&&p(i,o,n),o.length>0&&g&&g(o,n),i.length>0&&m&&m(i,n)},[R,u,k,l,s,c,p,m,g,M]),W=(0,eI.useCallback)(function(r){r.preventDefault(),r.persist(),en(r),V.current=[],st(r)&&Promise.resolve(a(r)).then(function(n){(!se(r)||S)&&G(n,r)}).catch(function(r){return q(r)}),R({type:"reset"})},[a,G,q,S]),X=(0,eI.useCallback)(function(){// No point to use FS access APIs if context is not secure
// https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts#feature_detection
if(N.current){R({type:"openDialog"}),L(),window.showOpenFilePicker({multiple:u,types:I}).then(function(r){return a(r)}).then(function(r){G(r,null),R({type:"closeDialog"})}).catch(function(r){r instanceof DOMException&&("AbortError"===r.name||r.code===r.ABORT_ERR)?(A(r),R({type:"closeDialog"})):r instanceof DOMException&&("SecurityError"===r.name||r.code===r.SECURITY_ERR)?(N.current=!1,P.current?(P.current.value=null,P.current.click()):q(Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):q(r)});return}P.current&&(R({type:"openDialog"}),L(),P.current.value=null,P.current.click())},[R,L,A,v,G,q,I,u]),Y=(0,eI.useCallback)(function(r){z.current&&z.current.isEqualNode(r.target)&&(" "===r.key||"Enter"===r.key||32===r.keyCode||13===r.keyCode)&&(r.preventDefault(),X())},[z,X]),K=(0,eI.useCallback)(function(){R({type:"focus"})},[]),J=(0,eI.useCallback)(function(){R({type:"blur"})},[]),Q=(0,eI.useCallback)(function(){w||(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return -1!==r.indexOf("MSIE")||-1!==r.indexOf("Trident/")||-1!==r.indexOf("Edge/")}()?setTimeout(X,0):X())},[w,X]),ee=function(r){return o?null:r},et=function(r){return E?null:ee(r)},er=function(r){return C?null:ee(r)},en=function(r){S&&r.stopPropagation()},ei=(0,eI.useMemo)(function(){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.refKey,i=void 0===n?"ref":n,a=r.role,s=r.onKeyDown,l=r.onFocus,u=r.onBlur,c=r.onClick,h=r.onDragEnter,d=r.onDragOver,f=r.onDragLeave,p=r.onDrop,m=sg(r,sl);return sp(sp(sm({onKeyDown:et(sn(s,Y)),onFocus:et(sn(l,K)),onBlur:et(sn(u,J)),onClick:ee(sn(c,Q)),onDragEnter:er(sn(h,$)),onDragOver:er(sn(d,H)),onDragLeave:er(sn(f,Z)),onDrop:er(sn(p,W)),role:"string"==typeof a&&""!==a?a:"presentation"},i,z),o||E?{}:{tabIndex:0}),m)}},[z,Y,K,J,Q,$,H,Z,W,E,C,o]),eo=(0,eI.useCallback)(function(r){r.stopPropagation()},[]),ea=(0,eI.useMemo)(function(){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.refKey,i=void 0===n?"ref":n,o=r.onChange,a=r.onClick,s=sg(r,su);return sp(sp({},sm({accept:k,multiple:u,type:"file",style:{display:"none"},onChange:ee(sn(o,W)),onClick:ee(sn(a,eo)),tabIndex:-1},i,P)),s)}},[P,i,u,W,o]);return sp(sp({},D),{},{isFocused:F&&!o,getRootProps:ei,getInputProps:ea,rootRef:z,inputRef:P,open:ee(X)})}/**
 * @param {DropzoneState} state
 * @param {{type: string} & DropzoneState} action
 * @returns {DropzoneState}
 */function sx(r,n){/* istanbul ignore next */switch(n.type){case"focus":return sp(sp({},r),{},{isFocused:!0});case"blur":return sp(sp({},r),{},{isFocused:!1});case"openDialog":return sp(sp({},sv),{},{isFileDialogActive:!0});case"closeDialog":return sp(sp({},r),{},{isFileDialogActive:!1});case"setDraggedFiles":return sp(sp({},r),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return sp(sp({},r),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections});case"reset":return sp({},sv);default:return r}}function sw(){}var eI=eT("exYeM"),sE={};s=function r(){var n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},i=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},s=0,l={parse:function(i,o){var u,c=(o=o||{}).dynamicTyping||!1;if(E(c)&&(o.dynamicTypingFunction=c,c={}),o.dynamicTyping=c,o.transform=!!E(o.transform)&&o.transform,o.worker&&l.WORKERS_SUPPORTED){var m=function(){if(!l.WORKERS_SUPPORTED)return!1;var i,o,u=(i=n.URL||n.webkitURL||null,o=r.toString(),l.BLOB_URL||(l.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",o,")();"],{type:"text/javascript"})))),c=new n.Worker(u);return c.onmessage=_,c.id=s++,a[c.id]=c}();return m.userStep=o.step,m.userChunk=o.chunk,m.userComplete=o.complete,m.userError=o.error,o.step=E(o.step),o.chunk=E(o.chunk),o.complete=E(o.complete),o.error=E(o.error),delete o.worker,void m.postMessage({input:i,config:o,workerId:m.id})}var g=null;return l.NODE_STREAM_INPUT,"string"==typeof i?(i=65279===(u=i).charCodeAt(0)?u.slice(1):u,g=o.download?new h(o):new f(o)):!0===i.readable&&E(i.read)&&E(i.on)?g=new p(o):(n.File&&i instanceof File||i instanceof Object)&&(g=new d(o)),g.stream(i)},unparse:function(r,n){var i=!1,o=!0,a=",",s="\r\n",u='"',c=u+u,h=!1,d=null,f=!1;!function(){if("object"==typeof n){if("string"!=typeof n.delimiter||l.BAD_DELIMITERS.filter(function(r){return -1!==n.delimiter.indexOf(r)}).length||(a=n.delimiter),("boolean"==typeof n.quotes||"function"==typeof n.quotes||Array.isArray(n.quotes))&&(i=n.quotes),"boolean"!=typeof n.skipEmptyLines&&"string"!=typeof n.skipEmptyLines||(h=n.skipEmptyLines),"string"==typeof n.newline&&(s=n.newline),"string"==typeof n.quoteChar&&(u=n.quoteChar),"boolean"==typeof n.header&&(o=n.header),Array.isArray(n.columns)){if(0===n.columns.length)throw Error("Option columns is empty");d=n.columns}void 0!==n.escapeChar&&(c=n.escapeChar+u),("boolean"==typeof n.escapeFormulae||n.escapeFormulae instanceof RegExp)&&(f=n.escapeFormulae instanceof RegExp?n.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var p=RegExp(g(u),"g");if("string"==typeof r&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return m(null,r,h);if("object"==typeof r[0])return m(d||Object.keys(r[0]),r,h)}else if("object"==typeof r)return"string"==typeof r.data&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||d),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:"object"==typeof r.data[0]?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||"object"==typeof r.data[0]||(r.data=[r.data])),m(r.fields||[],r.data||[],h);throw Error("Unable to serialize unrecognized input");function m(r,n,i){var l="";"string"==typeof r&&(r=JSON.parse(r)),"string"==typeof n&&(n=JSON.parse(n));var u=Array.isArray(r)&&0<r.length,c=!Array.isArray(n[0]);if(u&&o){for(var h=0;h<r.length;h++)0<h&&(l+=a),l+=y(r[h],h);0<n.length&&(l+=s)}for(var d=0;d<n.length;d++){var f=u?r.length:n[d].length,p=!1,m=u?0===Object.keys(n[d]).length:0===n[d].length;if(i&&!u&&(p="greedy"===i?""===n[d].join("").trim():1===n[d].length&&0===n[d][0].length),"greedy"===i&&u){for(var g=[],_=0;_<f;_++){var v=c?r[_]:_;g.push(n[d][v])}p=""===g.join("").trim()}if(!p){for(var b=0;b<f;b++){0<b&&!m&&(l+=a);var x=u&&c?r[b]:b;l+=y(n[d][x],b)}d<n.length-1&&(!i||0<f&&!m)&&(l+=s)}}return l}function y(r,n){if(null==r)return"";if(r.constructor===Date)return JSON.stringify(r).slice(1,25);var o=!1;f&&"string"==typeof r&&f.test(r)&&(r="'"+r,o=!0);var s=r.toString().replace(p,c);return(o=o||!0===i||"function"==typeof i&&i(r,n)||Array.isArray(i)&&i[n]||function(r,n){for(var i=0;i<n.length;i++)if(-1<r.indexOf(n[i]))return!0;return!1}(s,l.BAD_DELIMITERS)||-1<s.indexOf(a)||" "===s.charAt(0)||" "===s.charAt(s.length-1))?u+s+u:s}}};if(l.RECORD_SEP="\x1e",l.UNIT_SEP="\x1f",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!i&&!!n.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=y,l.ParserHandle=m,l.NetworkStreamer=h,l.FileStreamer=d,l.StringStreamer=f,l.ReadableStreamStreamer=p,n.jQuery){var u=n.jQuery;u.fn.parse=function(r){var i=r.config||{},o=[];return this.each(function(r){if(!("INPUT"===u(this).prop("tagName").toUpperCase()&&"file"===u(this).attr("type").toLowerCase()&&n.FileReader)||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:u.extend({},i)})}),a(),this;function a(){if(0!==o.length){var n,i,a,c=o[0];if(E(r.before)){var h=r.before(c.file,c.inputElem);if("object"==typeof h){if("abort"===h.action)return n=c.file,i=c.inputElem,a=h.reason,void(E(r.error)&&r.error({name:"AbortError"},n,i,a));if("skip"===h.action)return void s();"object"==typeof h.config&&(c.instanceConfig=u.extend(c.instanceConfig,h.config))}else if("skip"===h)return void s()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(r){E(d)&&d(r,c.file,c.inputElem),s()},l.parse(c.file,c.instanceConfig)}else E(r.complete)&&r.complete()}function s(){o.splice(0,1),a()}}}function c(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(r){var n=x(r);n.chunkSize=parseInt(n.chunkSize),r.step||r.chunk||(n.chunkSize=null),this._handle=new m(n),(this._handle.streamer=this)._config=n}).call(this,r),this.parseChunk=function(r,i){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(r);void 0!==a&&(r=a)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+r;this._partialLine="";var u=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var c=u.meta.cursor;this._finished||(this._partialLine=s.substring(c-this._baseIndex),this._baseIndex=c),u&&u.data&&(this._rowCount+=u.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)n.postMessage({results:u,workerId:l.WORKER_ID,finished:h});else if(E(this._config.chunk)&&!i){if(this._config.chunk(u,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);u=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(u.data),this._completeResults.errors=this._completeResults.errors.concat(u.errors),this._completeResults.meta=u.meta),this._completed||!h||!E(this._config.complete)||u&&u.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||u&&u.meta.paused||this._nextChunk(),u}this._halted=!0},this._sendError=function(r){E(this._config.error)?this._config.error(r):o&&this._config.error&&n.postMessage({workerId:l.WORKER_ID,error:r,finished:!1})}}function h(r){var n;(r=r||{}).chunkSize||(r.chunkSize=l.RemoteChunkSize),c.call(this,r),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),i||(n.onload=w(this._chunkLoaded,this),n.onerror=w(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var r=this._config.downloadRequestHeaders;for(var o in r)n.setRequestHeader(o,r[o])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+a)}try{n.send(this._config.downloadRequestBody)}catch(r){this._chunkError(r.message)}i&&0===n.status&&this._chunkError()}},this._chunkLoaded=function(){var r;4===n.readyState&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:n.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(r=n.getResponseHeader("Content-Range"))?-1:parseInt(r.substring(r.lastIndexOf("/")+1))),this.parseChunk(n.responseText)))},this._chunkError=function(r){var i=n.statusText||r;this._sendError(Error(i))}}function d(r){(r=r||{}).chunkSize||(r.chunkSize=l.LocalChunkSize),c.call(this,r);var n,i,o="undefined"!=typeof FileReader;this.stream=function(r){this._input=r,i=r.slice||r.webkitSlice||r.mozSlice,o?((n=new FileReader).onload=w(this._chunkLoaded,this),n.onerror=w(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var r=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);r=i.call(r,this._start,a)}var s=n.readAsText(r,this._config.encoding);o||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(r){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(r.target.result)},this._chunkError=function(){this._sendError(n.error)}}function f(r){var n;c.call(this,r=r||{}),this.stream=function(r){return n=r,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var r,i=this._config.chunkSize;return i?(r=n.substring(0,i),n=n.substring(i)):(r=n,n=""),this._finished=!n,this.parseChunk(r)}}}function p(r){c.call(this,r=r||{});var n=[],i=!0,o=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(r){this._input=r,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){o&&1===n.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),n.length?this.parseChunk(n.shift()):i=!0},this._streamData=w(function(r){try{n.push("string"==typeof r?r:r.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(n.shift()))}catch(r){this._streamError(r)}},this),this._streamError=w(function(r){this._streamCleanUp(),this._sendError(r)},this),this._streamEnd=w(function(){this._streamCleanUp(),o=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(r){var n,i,o,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,s=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,c=0,h=0,d=!1,f=!1,p=[],m={data:[],errors:[],meta:{}};if(E(r.step)){var _=r.step;r.step=function(n){if(m=n,w())b();else{if(b(),0===m.data.length)return;c+=n.data.length,r.preview&&c>r.preview?i.abort():(m.data=m.data[0],_(m,u))}}}function v(n){return"greedy"===r.skipEmptyLines?""===n.join("").trim():1===n.length&&0===n[0].length}function b(){return m&&o&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),o=!1),r.skipEmptyLines&&(m.data=m.data.filter(function(r){return!v(r)})),w()&&function(){if(m){if(Array.isArray(m.data[0])){for(var n=0;w()&&n<m.data.length;n++)m.data[n].forEach(i);m.data.splice(0,1)}else m.data.forEach(i)}function i(n,i){E(r.transformHeader)&&(n=r.transformHeader(n,i)),p.push(n)}}(),function(){if(!m||!r.header&&!r.dynamicTyping&&!r.transform)return m;function n(n,i){var o,l=r.header?{}:[];for(o=0;o<n.length;o++){var u,c,d=o,f=n[o];r.header&&(d=o>=p.length?"__parsed_extra":p[o]),r.transform&&(f=r.transform(f,d)),u=d,c=f,r.dynamicTypingFunction&&void 0===r.dynamicTyping[u]&&(r.dynamicTyping[u]=r.dynamicTypingFunction(u)),f=!0===(r.dynamicTyping[u]||r.dynamicTyping)?"true"===c||"TRUE"===c||"false"!==c&&"FALSE"!==c&&(!function(r){if(a.test(r)){var n=parseFloat(r);if(-9007199254740992<n&&n<9007199254740992)return!0}return!1}(c)?s.test(c)?new Date(c):""===c?null:c:parseFloat(c)):c,"__parsed_extra"===d?(l[d]=l[d]||[],l[d].push(f)):l[d]=f}return r.header&&(o>p.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+o,h+i):o<p.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+o,h+i)),l}var i=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(n),i=m.data.length):m.data=n(m.data,0),r.header&&m.meta&&(m.meta.fields=p),h+=i,m}()}function w(){return r.header&&0===p.length}function C(r,n,i,o){var a={type:r,code:n,message:i};void 0!==o&&(a.row=o),m.errors.push(a)}this.parse=function(a,s,u){var c=r.quoteChar||'"';if(r.newline||(r.newline=function(r,n){r=r.substring(0,1048576);var i=RegExp(g(n)+"([^]*?)"+g(n),"gm"),o=(r=r.replace(i,"")).split("\r"),a=r.split("\n"),s=1<a.length&&a[0].length<o[0].length;if(1===o.length||s)return"\n";for(var l=0,u=0;u<o.length;u++)"\n"===o[u][0]&&l++;return l>=o.length/2?"\r\n":"\r"}(a,c)),o=!1,r.delimiter)E(r.delimiter)&&(r.delimiter=r.delimiter(a),m.meta.delimiter=r.delimiter);else{var h=function(n,i,o,a,s){var u,c,h,d;s=s||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var f=0;f<s.length;f++){var p=s[f],m=0,g=0,_=0;h=void 0;for(var b=new y({comments:a,delimiter:p,newline:i,preview:10}).parse(n),x=0;x<b.data.length;x++)if(o&&v(b.data[x]))_++;else{var w=b.data[x].length;g+=w,void 0!==h?0<w&&(m+=Math.abs(w-h),h=w):h=w}0<b.data.length&&(g/=b.data.length-_),(void 0===c||m<=c)&&(void 0===d||d<g)&&1.99<g&&(c=m,u=p,d=g)}return{successful:!!(r.delimiter=u),bestDelimiter:u}}(a,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess);h.successful?r.delimiter=h.bestDelimiter:(o=!0,r.delimiter=l.DefaultDelimiter),m.meta.delimiter=r.delimiter}var f=x(r);return r.preview&&r.header&&f.preview++,n=a,m=(i=new y(f)).parse(n,s,u),b(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,i.abort(),n=E(r.chunk)?"":n.substring(i.getCharIndex())},this.resume=function(){u.streamer._halted?(d=!1,u.streamer.parseChunk(n,!0)):setTimeout(u.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,i.abort(),m.meta.aborted=!0,E(r.complete)&&r.complete(m),n=""}}function g(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(r){var n,i=(r=r||{}).delimiter,o=r.newline,a=r.comments,s=r.step,u=r.preview,c=r.fastMode,h=n=void 0===r.quoteChar||null===r.quoteChar?'"':r.quoteChar;if(void 0!==r.escapeChar&&(h=r.escapeChar),("string"!=typeof i||-1<l.BAD_DELIMITERS.indexOf(i))&&(i=","),a===i)throw Error("Comment character same as delimiter");!0===a?a="#":("string"!=typeof a||-1<l.BAD_DELIMITERS.indexOf(a))&&(a=!1),"\n"!==o&&"\r"!==o&&"\r\n"!==o&&(o="\n");var d=0,f=!1;this.parse=function(l,p,m){if("string"!=typeof l)throw Error("Input must be a string");var y=l.length,_=i.length,v=o.length,b=a.length,x=E(s),w=[],C=[],S=[],T=d=0;if(!l)return W();if(r.header&&!p){var M=l.split(o)[0].split(i),k=[],I={},L=!1;for(var A in M){var z=M[A];E(r.transformHeader)&&(z=r.transformHeader(z,A));var P=z,O=I[z]||0;for(0<O&&(L=!0,P=z+"_"+O),I[z]=O+1;k.includes(P);)P=P+"_"+O;k.push(P)}if(L){var D=l.split(o);D[0]=k.join(i),l=D.join(o)}}if(c||!1!==c&&-1===l.indexOf(n)){for(var R=l.split(o),F=0;F<R.length;F++){if(S=R[F],d+=S.length,F!==R.length-1)d+=o.length;else if(m)break;if(!a||S.substring(0,b)!==a){if(x){if(w=[],$(S.split(i)),X(),f)return W()}else $(S.split(i));if(u&&u<=F)return w=w.slice(0,u),W(!0)}}return W()}for(var B=l.indexOf(i,d),N=l.indexOf(o,d),j=RegExp(g(h)+g(n),"g"),V=l.indexOf(n,d);;)if(l[d]!==n){if(a&&0===S.length&&l.substring(d,d+b)===a){if(-1===N)return W();d=N+v,N=l.indexOf(o,d),B=l.indexOf(i,d)}else if(-1!==B&&(B<N||-1===N))S.push(l.substring(d,B)),d=B+_,B=l.indexOf(i,d);else{if(-1===N)break;if(S.push(l.substring(d,N)),G(N+v),x&&(X(),f))return W();if(u&&w.length>=u)return W(!0)}}else for(V=d,d++;;){if(-1===(V=l.indexOf(n,V+1)))return m||C.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:d}),Z();if(V===y-1)return Z(l.substring(d,V).replace(j,n));if(n!==h||l[V+1]!==h){if(n===h||0===V||l[V-1]!==h){-1!==B&&B<V+1&&(B=l.indexOf(i,V+1)),-1!==N&&N<V+1&&(N=l.indexOf(o,V+1));var U=H(-1===N?B:Math.min(B,N));if(l.substr(V+1+U,_)===i){S.push(l.substring(d,V).replace(j,n)),l[d=V+1+U+_]!==n&&(V=l.indexOf(n,d)),B=l.indexOf(i,d),N=l.indexOf(o,d);break}var q=H(N);if(l.substring(V+1+q,V+1+q+v)===o){if(S.push(l.substring(d,V).replace(j,n)),G(V+1+q+v),B=l.indexOf(i,d),V=l.indexOf(n,d),x&&(X(),f))return W();if(u&&w.length>=u)return W(!0);break}C.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:d}),V++}}else V++}return Z();function $(r){w.push(r),T=d}function H(r){var n=0;if(-1!==r){var i=l.substring(V+1,r);i&&""===i.trim()&&(n=i.length)}return n}function Z(r){return m||(void 0===r&&(r=l.substring(d)),S.push(r),d=y,$(S),x&&X()),W()}function G(r){d=r,$(S),S=[],N=l.indexOf(o,d)}function W(r){return{data:w,errors:C,meta:{delimiter:i,linebreak:o,aborted:f,truncated:!!r,cursor:T+(p||0)}}}function X(){s(W()),w=[],C=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return d}}function _(r){var n=r.data,i=a[n.workerId],o=!1;if(n.error)i.userError(n.error,n.file);else if(n.results&&n.results.data){var s={abort:function(){o=!0,v(n.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(E(i.userStep)){for(var l=0;l<n.results.data.length&&(i.userStep({data:n.results.data[l],errors:n.results.errors,meta:n.results.meta},s),!o);l++);delete n.results}else E(i.userChunk)&&(i.userChunk(n.results,s,n.file),delete n.results)}n.finished&&!o&&v(n.workerId,n.results)}function v(r,n){var i=a[r];E(i.userComplete)&&i.userComplete(n),i.terminate(),delete a[r]}function b(){throw Error("Not implemented.")}function x(r){if("object"!=typeof r||null===r)return r;var n=Array.isArray(r)?[]:{};for(var i in r)n[i]=x(r[i]);return n}function w(r,n){return function(){r.apply(n,arguments)}}function E(r){return"function"==typeof r}return o&&(n.onmessage=function(r){var i=r.data;if(void 0===l.WORKER_ID&&i&&(l.WORKER_ID=i.workerId),"string"==typeof i.input)n.postMessage({workerId:l.WORKER_ID,results:l.parse(i.input,i.config),finished:!0});else if(n.File&&i.input instanceof File||i.input instanceof Object){var o=l.parse(i.input,i.config);o&&n.postMessage({workerId:l.WORKER_ID,results:o,finished:!0})}}),(h.prototype=Object.create(c.prototype)).constructor=h,(d.prototype=Object.create(c.prototype)).constructor=d,(f.prototype=Object.create(f.prototype)).constructor=f,(p.prototype=Object.create(c.prototype)).constructor=p,l},"function"==typeof define&&define.amd?define([],s):sE=s();var eI=eT("exYeM");function sC(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}function sS(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?sC(Object(i),!0).forEach(function(n){sT(r,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):sC(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}function sT(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}function sM(){return(sM=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}function sk(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}function sI(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}function sL(r){return function(r){if(Array.isArray(r))return sz(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||sA(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sA(r,n){if(r){if("string"==typeof r)return sz(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if("Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i)return Array.from(r);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sz(r,n)}}function sz(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,o=Array(n);i<n;i++)o[i]=r[i];return o}var sP="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==ew?ew:"undefined"!=typeof self?self:{},sO="__lodash_hash_undefined__",sD=1/0,sR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sF=/^\w*$/,sB=/^\./,sN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sj=/\\(\\)?/g,sV=/^\[object .+?Constructor\]$/,sU="object"==typeof sP&&sP&&sP.Object===Object&&sP,sq="object"==typeof self&&self&&self.Object===Object&&self,s$=sU||sq||Function("return this")(),sH=Array.prototype,sZ=Function.prototype,sG=Object.prototype,sW=s$["__core-js_shared__"],sX=(l=/[^.]+$/.exec(sW&&sW.keys&&sW.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",sY=sZ.toString,sK=sG.hasOwnProperty,sJ=sG.toString,sQ=RegExp("^"+sY.call(sK).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),s0=s$.Symbol,s1=sH.splice,s2=lt(s$,"Map"),s4=lt(Object,"create"),s3=s0?s0.prototype:void 0,s5=s3?s3.toString:void 0;/**
 * Creates a hash object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */function s6(r){var n=-1,i=r?r.length:0;for(this.clear();++n<i;){var o=r[n];this.set(o[0],o[1])}}/**
 * Creates an list cache object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */function s8(r){var n=-1,i=r?r.length:0;for(this.clear();++n<i;){var o=r[n];this.set(o[0],o[1])}}/**
 * Creates a map cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */function s9(r){var n=-1,i=r?r.length:0;for(this.clear();++n<i;){var o=r[n];this.set(o[0],o[1])}}/**
 * Gets the index at which the `key` is found in `array` of key-value pairs.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} key The key to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */function s7(r,n){for(var i,o=r.length;o--;)if((i=r[o][0])===n||i!=i&&n!=n)return o;return -1}/**
 * Gets the data for `map`.
 *
 * @private
 * @param {Object} map The map to query.
 * @param {string} key The reference key.
 * @returns {*} Returns the map data.
 */function le(r,n){var i,o=r.__data__;return("string"==(i=typeof n)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof n?"string":"hash"]:o.map}/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */function lt(r,n){var i,o=null==r?void 0:r[n];return!(!lo(o)||sX&&sX in o)&&("[object Function]"==(i=lo(o)?sJ.call(o):"")||"[object GeneratorFunction]"==i||/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */function(r){// Many host objects are `Object` objects that can coerce to strings
// despite having improperly defined `toString` methods.
var n=!1;if(null!=r&&"function"!=typeof r.toString)try{n=!!(r+"")}catch(r){}return n}(o)?sQ:sV).test(/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to process.
 * @returns {string} Returns the source code.
 */function(r){if(null!=r){try{return sY.call(r)}catch(r){}try{return r+""}catch(r){}}return""}(o))?o:void 0}// Add methods to `Hash`.
s6.prototype.clear=/**
 * Removes all key-value entries from the hash.
 *
 * @private
 * @name clear
 * @memberOf Hash
 */function(){this.__data__=s4?s4(null):{}},s6.prototype.delete=/**
 * Removes `key` and its value from the hash.
 *
 * @private
 * @name delete
 * @memberOf Hash
 * @param {Object} hash The hash to modify.
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */function(r){return this.has(r)&&delete this.__data__[r]},s6.prototype.get=/**
 * Gets the hash value for `key`.
 *
 * @private
 * @name get
 * @memberOf Hash
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */function(r){var n=this.__data__;if(s4){var i=n[r];return i===sO?void 0:i}return sK.call(n,r)?n[r]:void 0},s6.prototype.has=/**
 * Checks if a hash value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Hash
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */function(r){var n=this.__data__;return s4?void 0!==n[r]:sK.call(n,r)},s6.prototype.set=/**
 * Sets the hash `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Hash
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the hash instance.
 */function(r,n){return this.__data__[r]=s4&&void 0===n?sO:n,this},// Add methods to `ListCache`.
s8.prototype.clear=/**
 * Removes all key-value entries from the list cache.
 *
 * @private
 * @name clear
 * @memberOf ListCache
 */function(){this.__data__=[]},s8.prototype.delete=/**
 * Removes `key` and its value from the list cache.
 *
 * @private
 * @name delete
 * @memberOf ListCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */function(r){var n=this.__data__,i=s7(n,r);return!(i<0)&&(i==n.length-1?n.pop():s1.call(n,i,1),!0)},s8.prototype.get=/**
 * Gets the list cache value for `key`.
 *
 * @private
 * @name get
 * @memberOf ListCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */function(r){var n=this.__data__,i=s7(n,r);return i<0?void 0:n[i][1]},s8.prototype.has=/**
 * Checks if a list cache value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf ListCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */function(r){return s7(this.__data__,r)>-1},s8.prototype.set=/**
 * Sets the list cache `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf ListCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the list cache instance.
 */function(r,n){var i=this.__data__,o=s7(i,r);return o<0?i.push([r,n]):i[o][1]=n,this},// Add methods to `MapCache`.
s9.prototype.clear=/**
 * Removes all key-value entries from the map.
 *
 * @private
 * @name clear
 * @memberOf MapCache
 */function(){this.__data__={hash:new s6,map:new(s2||s8),string:new s6}},s9.prototype.delete=/**
 * Removes `key` and its value from the map.
 *
 * @private
 * @name delete
 * @memberOf MapCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */function(r){return le(this,r).delete(r)},s9.prototype.get=/**
 * Gets the map value for `key`.
 *
 * @private
 * @name get
 * @memberOf MapCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */function(r){return le(this,r).get(r)},s9.prototype.has=/**
 * Checks if a map value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf MapCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */function(r){return le(this,r).has(r)},s9.prototype.set=/**
 * Sets the map `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf MapCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the map cache instance.
 */function(r,n){return le(this,r).set(r,n),this};/**
 * Converts `string` to a property path array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the property path array.
 */var lr=ln(function(r){r=null==(n=r)?"":/**
 * The base implementation of `_.toString` which doesn't convert nullish
 * values to empty strings.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {string} Returns the string.
 */function(r){// Exit early for strings to avoid a performance hit in some environments.
if("string"==typeof r)return r;if(la(r))return s5?s5.call(r):"";var n=r+"";return"0"==n&&1/r==-sD?"-0":n}(n);var n,i=[];return sB.test(r)&&i.push(""),r.replace(sN,function(r,n,o,a){i.push(o?a.replace(sj,"$1"):n||r)}),i});/**
 * Creates a function that memoizes the result of `func`. If `resolver` is
 * provided, it determines the cache key for storing the result based on the
 * arguments provided to the memoized function. By default, the first argument
 * provided to the memoized function is used as the map cache key. The `func`
 * is invoked with the `this` binding of the memoized function.
 *
 * **Note:** The cache is exposed as the `cache` property on the memoized
 * function. Its creation may be customized by replacing the `_.memoize.Cache`
 * constructor with one whose instances implement the
 * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
 * method interface of `delete`, `get`, `has`, and `set`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to have its output memoized.
 * @param {Function} [resolver] The function to resolve the cache key.
 * @returns {Function} Returns the new memoized function.
 * @example
 *
 * var object = { 'a': 1, 'b': 2 };
 * var other = { 'c': 3, 'd': 4 };
 *
 * var values = _.memoize(_.values);
 * values(object);
 * // => [1, 2]
 *
 * values(other);
 * // => [3, 4]
 *
 * object.a = 2;
 * values(object);
 * // => [1, 2]
 *
 * // Modify the result cache.
 * values.cache.set(object, ['a', 'b']);
 * values(object);
 * // => ['a', 'b']
 *
 * // Replace `_.memoize.Cache`.
 * _.memoize.Cache = WeakMap;
 */function ln(r,n){if("function"!=typeof r||n&&"function"!=typeof n)throw TypeError("Expected a function");var i=function(){var o=arguments,a=n?n.apply(this,o):o[0],s=i.cache;if(s.has(a))return s.get(a);var l=r.apply(this,o);return i.cache=s.set(a,l),l};return i.cache=new(ln.Cache||s9),i}// Assign cache to `_.memoize`.
ln.Cache=s9;/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */var li=Array.isArray;/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */function lo(r){var n=typeof r;return!!r&&("object"==n||"function"==n)}/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */function la(r){return"symbol"==typeof r||!!r&&"object"==typeof r&&"[object Symbol]"==sJ.call(r)}var ls=/**
 * Gets the value at `path` of `object`. If the resolved value is
 * `undefined`, the `defaultValue` is returned in its place.
 *
 * @static
 * @memberOf _
 * @since 3.7.0
 * @category Object
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the property to get.
 * @param {*} [defaultValue] The value returned for `undefined` resolved values.
 * @returns {*} Returns the resolved value.
 * @example
 *
 * var object = { 'a': [{ 'b': { 'c': 3 } }] };
 *
 * _.get(object, 'a[0].b.c');
 * // => 3
 *
 * _.get(object, ['a', '0', 'b', 'c']);
 * // => 3
 *
 * _.get(object, 'a.b.c', 'default');
 * // => 'default'
 */function(r,n,i){var o=null==r?void 0:/**
 * The base implementation of `_.get` without support for default values.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the property to get.
 * @returns {*} Returns the resolved value.
 */function(r,n){var i;n=!/**
 * Checks if `value` is a property name and not a property path.
 *
 * @private
 * @param {*} value The value to check.
 * @param {Object} [object] The object to query keys on.
 * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
 */function(r,n){if(li(r))return!1;var i=typeof r;return!!("number"==i||"symbol"==i||"boolean"==i||null==r||la(r))||sF.test(r)||!sR.test(r)||null!=n&&r in Object(n)}(n,r)?li(i=n)?i:lr(i):[n];for(var o=0,a=n.length;null!=r&&o<a;)r=r[/**
 * Converts `value` to a string key if it's not a string or symbol.
 *
 * @private
 * @param {*} value The value to inspect.
 * @returns {string|symbol} Returns the key.
 */function(r){if("string"==typeof r||la(r))return r;var n=r+"";return"0"==n&&1/r==-sD?"-0":n}(n[o++])];return o&&o==a?r:void 0}(r,n);return void 0===o?i:o};function ll(){return(ll=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}function lu(r,n){return(lu=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}function lc(r){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function lh(r,n,i){return(lh=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}()?function(r,n,i){var o=[null];o.push.apply(o,n);var a=new(Function.bind.apply(r,o));return i&&lu(a,i.prototype),a}:Reflect.construct).apply(null,arguments)}function ld(r){var n="function"==typeof Map?new Map:void 0;return(ld=function(r){if(null===r||-1===Function.toString.call(r).indexOf("[native code]"))return r;if("function"!=typeof r)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return lh(r,arguments,lc(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),lu(i,r)})(r)}/**
 * Create an error file out of errors.md for development and a simple web link to the full errors
 * in production mode.
 * @private
 */var lf=/*#__PURE__*/function(r){function n(n){return function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this)}return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,lu(n,r),n}(/*#__PURE__*/ld(Error));function lp(r){return Math.round(255*r)}function lm(r,n,i){return lp(r)+","+lp(n)+","+lp(i)}function lg(r,n,i,o){if(void 0===o&&(o=lm),0===n)return o(i,i,i);// formulae from https://en.wikipedia.org/wiki/HSL_and_HSV
var a=(r%360+360)%360/60,s=(1-Math.abs(2*i-1))*n,l=s*(1-Math.abs(a%2-1)),u=0,c=0,h=0;a>=0&&a<1?(u=s,c=l):a>=1&&a<2?(u=l,c=s):a>=2&&a<3?(c=s,h=l):a>=3&&a<4?(c=l,h=s):a>=4&&a<5?(u=l,h=s):a>=5&&a<6&&(u=s,h=l);var d=i-s/2;return o(u+d,c+d,h+d)}var ly={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},l_=/^#[a-fA-F0-9]{6}$/,lv=/^#[a-fA-F0-9]{8}$/,lb=/^#[a-fA-F0-9]{3}$/,lx=/^#[a-fA-F0-9]{4}$/,lw=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,lE=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,lC=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,lS=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;/**
 * Returns an RgbColor or RgbaColor object. This utility function is only useful
 * if want to extract a color component. With the color util `toColorString` you
 * can convert a RgbColor or RgbaColor object back to a string.
 *
 * @example
 * // Assigns `{ red: 255, green: 0, blue: 0 }` to color1
 * const color1 = parseToRgb('rgb(255, 0, 0)');
 * // Assigns `{ red: 92, green: 102, blue: 112, alpha: 0.75 }` to color2
 * const color2 = parseToRgb('hsla(210, 10%, 40%, 0.75)');
 */function lT(r){if("string"!=typeof r)throw new lf(3);var n=/**
 * Checks if a string is a CSS named color and returns its equivalent hex value, otherwise returns the original color.
 * @private
 */function(r){if("string"!=typeof r)return r;var n=r.toLowerCase();return ly[n]?"#"+ly[n]:r}(r);if(n.match(l_))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(lv)){var i=parseFloat((parseInt(""+n[7]+n[8],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16),alpha:i}}if(n.match(lb))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};if(n.match(lx)){var o=parseFloat((parseInt(""+n[4]+n[4],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16),alpha:o}}var a=lw.exec(n);if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10)};var s=lE.exec(n.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])};var l=lC.exec(n);if(l){var u="rgb("+lg(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",c=lw.exec(u);if(!c)throw new lf(4,n,u);return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)}}var h=lS.exec(n.substring(0,50));if(h){var d="rgb("+lg(parseInt(""+h[1],10),parseInt(""+h[2],10)/100,parseInt(""+h[3],10)/100)+")",f=lw.exec(d);if(!f)throw new lf(4,n,d);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10),alpha:parseFloat(""+h[4])}}throw new lf(5)}/**
 * Reduces hex values if possible e.g. #ff8866 to #f86
 * @private
 */var lM=function(r){return 7===r.length&&r[1]===r[2]&&r[3]===r[4]&&r[5]===r[6]?"#"+r[1]+r[3]+r[5]:r};function lk(r){var n=r.toString(16);return 1===n.length?"0"+n:n}/**
 * Returns a string value for the color. The returned result is the smallest possible hex notation.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: rgb(255, 205, 100),
 *   background: rgb({ red: 255, green: 205, blue: 100 }),
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${rgb(255, 205, 100)};
 *   background: ${rgb({ red: 255, green: 205, blue: 100 })};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#ffcd64";
 *   background: "#ffcd64";
 * }
 */function lI(r,n,i){if("number"==typeof r&&"number"==typeof n&&"number"==typeof i)return lM("#"+lk(r)+lk(n)+lk(i));if("object"==typeof r&&void 0===n&&void 0===i)return lM("#"+lk(r.red)+lk(r.green)+lk(r.blue));throw new lf(6)}/**
 * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.
 *
 * Can also be used to fade a color by passing a hex value or named CSS color along with an alpha value.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: rgba(255, 205, 100, 0.7),
 *   background: rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 }),
 *   background: rgba(255, 205, 100, 1),
 *   background: rgba('#ffffff', 0.4),
 *   background: rgba('black', 0.7),
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${rgba(255, 205, 100, 0.7)};
 *   background: ${rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 })};
 *   background: ${rgba(255, 205, 100, 1)};
 *   background: ${rgba('#ffffff', 0.4)};
 *   background: ${rgba('black', 0.7)};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "rgba(255,205,100,0.7)";
 *   background: "rgba(255,205,100,0.7)";
 *   background: "#ffcd64";
 *   background: "rgba(255,255,255,0.4)";
 *   background: "rgba(0,0,0,0.7)";
 * }
 */function lL(r,n,i,o){if("string"==typeof r&&"number"==typeof n){var a=lT(r);return"rgba("+a.red+","+a.green+","+a.blue+","+n+")"}if("number"==typeof r&&"number"==typeof n&&"number"==typeof i&&"number"==typeof o)return o>=1?lI(r,n,i):"rgba("+r+","+n+","+i+","+o+")";if("object"==typeof r&&void 0===n&&void 0===i&&void 0===o)return r.alpha>=1?lI(r.red,r.green,r.blue):"rgba("+r.red+","+r.green+","+r.blue+","+r.alpha+")";throw new lf(7)}function lA(r){// eslint-disable-line no-redeclare
return(// Type definitions taken from https://github.com/gcanti/flow-static-land/blob/master/src/Fun.js
// eslint-disable-next-line no-unused-vars
// eslint-disable-next-line no-unused-vars
// eslint-disable-next-line no-redeclare
function r(n,i,o){return function(){// eslint-disable-next-line prefer-rest-params
var a=o.concat(Array.prototype.slice.call(arguments));return a.length>=i?n.apply(this,a):r(n,i,a)}}// eslint-disable-next-line no-redeclare
(r,r.length,[]))}var lz=/*#__PURE__*/lA(/**
 * Mixes the two provided colors together by calculating the average of each of the RGB components weighted to the first color by the provided weight.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: mix(0.5, '#f00', '#00f')
 *   background: mix(0.25, '#f00', '#00f')
 *   background: mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${mix(0.5, '#f00', '#00f')};
 *   background: ${mix(0.25, '#f00', '#00f')};
 *   background: ${mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#7f007f";
 *   background: "#3f00bf";
 *   background: "rgba(63, 0, 191, 0.75)";
 * }
 */function(r,n,i){if("transparent"===n)return i;if("transparent"===i)return n;if(0===r)return i;var o=lT(n),a=ll({},o,{alpha:"number"==typeof o.alpha?o.alpha:1}),s=lT(i),l=ll({},s,{alpha:"number"==typeof s.alpha?s.alpha:1}),u=a.alpha-l.alpha,c=2*parseFloat(r)-1,h=((c*u==-1?c:c+u)/(1+c*u)+1)/2,d=1-h;return lL({red:Math.floor(a.red*h+l.red*d),green:Math.floor(a.green*h+l.green*d),blue:Math.floor(a.blue*h+l.blue*d),alpha:a.alpha*(parseFloat(r)/1)+l.alpha*(1-parseFloat(r)/1)})}// prettier-ignore
),lP=/*#__PURE__*/lA(/**
 * Shades a color by mixing it with black. `shade` can produce
 * hue shifts, where as `darken` manipulates the luminance channel and therefore
 * doesn't produce hue shifts.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: shade(0.25, '#00f')
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${shade(0.25, '#00f')};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#00003f";
 * }
 */function(r,n){return"transparent"===n?n:lz(parseFloat(r),"rgb(0, 0, 0)",n)}// prettier-ignore
),lO=/*#__PURE__*/lA(/**
 * Tints a color by mixing it with white. `tint` can produce
 * hue shifts, where as `lighten` manipulates the luminance channel and therefore
 * doesn't produce hue shifts.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: tint(0.25, '#00f')
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${tint(0.25, '#00f')};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#bfbfff";
 * }
 */function(r,n){return"transparent"===n?n:lz(parseFloat(r),"rgb(255, 255, 255)",n)}// prettier-ignore
),lD=function(r){return function(n,i){return function(){n="function"==typeof n?n.apply(void 0,arguments):n,i="function"==typeof i?i.apply(void 0,arguments):i;var o=(n+"").match(/[0-9]*(?:.[0-9]+)?(.*)/)[1],a=parseFloat(n),s=parseFloat(i);return"+"===r?"".concat(a+s).concat(o):"-"===r?"".concat(a-s).concat(o):"/"===r?"".concat(a/s).concat(o):"*"===r?"".concat(a*s).concat(o):void 0}}};lD("+"),lD("-"),lD("/");/**
 * Creates a math function to multiply values. It takes into account
 * only the unit of the first value. Eg: 2rem * 2 = 4rem | 2 * 2rem = 4
 * This function is ready to work with styled-components so that any function
 * passed as an argument will receive the component props.
 *
 * @param {string} a First value
 * @param {string} b Second value
 */var lR=lD("*"),lF=function(r){return function(n,i){return function(){n="function"==typeof n?n.apply(void 0,arguments):n,i="function"==typeof i?i.apply(void 0,arguments):i;var o=/[0-9]*(?:.[0-9]+)?(.*)/,a=(n+"").match(o)[1],s=(i+"").match(o)[1],l=parseFloat(n),u=parseFloat(i),c="";return(a===s?c=a:a&&!s?c=a:!a&&s&&(c=s),"min"===r)?"".concat(Math.min(l,u)).concat(c):"max"===r?"".concat(Math.max(l,u)).concat(c):void 0}}};lF("min"),lF("max");/**
 * Return a function that when executed appends the `unit` to the value.
 *
 * @example
 * const percent = unitify('%');
 * percent(10) // -> 10%
 *
 * @param {string} unit The unit to use
 */var lB=function(r){return function(n){return"function"==typeof n?function(){return"".concat(n.apply(void 0,arguments)).concat(r)}:"".concat(n).concat(r)}},lN=lB("rem");lB("px");/**
 * Returns a function to be used with styled-components and gets a value from
 * the theme property.
 *
 * @param {string} path The path to get from theme
 */var lj=function(r){return function(n){var i=n.theme,o=ls(i,r,void 0);return void 0===o&&console.error("Theme Value Error: path [".concat(r,"] not found in theme."),i),o}},lV=function(r){return function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return function(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i.map(function(r){return"function"==typeof r?r.apply(void 0,o):r});return r.apply(void 0,sL(s))}}},lU=function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(n=n.length?n:[1]).map(function(r){return lR(lj("layout.space"),r)});// If the there's only one argument return in value format to be used by
// other methods that need this to resolve to a number.
if(1===o.length)return o[0];var a=Array(n.length-1).fill(" ");return rt.apply(void 0,[[""].concat(sL(a),[""])].concat(sL(o)))},lq=lV(lL),l$=function(r){return function(n){return lL(n,r)}},lH=[{code:"50",colorFn:lO(.96)},{code:"50a",colorFn:l$(.04)},{code:"100",colorFn:lO(.92)},{code:"100a",colorFn:l$(.08)},{code:"200",colorFn:lO(.84)},{code:"200a",colorFn:l$(.16)},{code:"300",colorFn:lO(.68)},{code:"300a",colorFn:l$(.32)},{code:"400",colorFn:lO(.36)},{code:"400a",colorFn:l$(.64)},{code:"500",colorFn:function(r){return r}},{code:"600",colorFn:lP(.16)},{code:"700",colorFn:lP(.32)},{code:"800",colorFn:lP(.48)},{code:"900",colorFn:lP(.64)}];/**
 * Creates a color palette base off of the provided base color including
 * lightened/darkened/transparent versions of that color.
 *
 * Uses a scale from 50 - 900 to indicate the color value. Values lower than 500
 * are lightened, above 500 are darkened and values ending with `a` have a alpha
 * channel.
 *
 * List of returned colors:
 * name-50      Lightened 96%
 * name-50a     Opacity 4%
 * name-100     Lightened 92%
 * name-100a    Opacity 8%
 * name-200     Lightened 84%
 * name-200a    Opacity 16%
 * name-300     Lightened 68%
 * name-300a    Opacity 32%
 * name-400     Lightened 36%
 * name-400a    Opacity 64%
 * name-500     Same as base color
 * name-600     Darkened 16%
 * name-700     Darkened 32%
 * name-800     Darkened 48%
 * name-900     Darkened 64%
 *
 * @param {string} name Name of the color variable
 * @param {string} baseColor Base color for the palette. Used as middle color
 * with value 500.
 *
 * @returns object
 */function lZ(r,n){return lH.reduce(function(i,o){return sS(sS({},i),{},sT({},"".concat(r,"-").concat(o.code),o.colorFn(n)))},{})}var lG=["color","type","shape","layout","button","boxShadow","mediaRanges"],lW=["surface","base","primary","secondary","danger","warning","success","info","background","link"],lX=["base","heading","overline"],lY=["size","line","color","family","style","settings","case","light","regular","medium","bold","weight","antialiasing"],lK=["family","style","settings","case","light","regular","medium","bold","weight","textTransform"],lJ=["family","style","settings","case","light","regular","medium","bold","weight","textTransform"],lQ=["rounded","ellipsoid"],l0=["space","border","min","max"],l1=["type","shape"],l2=["family","style","settings","case","weight"],l4=["border","rounded"],l3=["inset","input","elevationA","elevationB","elevationC","elevationD"];/**
 * Creates a UI theme by combining the provided options with the default ones.
 * When an override for a value is provided, it gets propagated to all the
 * variables that use that value. For example: The primary color will be used
 * for links unless a color for "link" is provided.
 *
 * @param {DevseedUITheme} definition The theme definition
 *
 * @returns DevseedUITheme
 */function l5(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.color,i=void 0===n?{}:n,o=r.type,a=void 0===o?{}:o,s=r.shape,l=void 0===s?{}:s,u=r.layout,c=void 0===u?{}:u,h=r.button,d=void 0===h?{}:h,f=r.boxShadow,p=void 0===f?{}:f,m=r.mediaRanges,g=void 0===m?{}:m,y=sk(r,lG),_=i.surface,v=void 0===_?"#FFFFFF":_,b=i.base,x=void 0===b?"#443F3F":b,w=i.primary,E=void 0===w?"#CF3F02":w,C=i.secondary,S=void 0===C?"#E2C044":C,T=i.danger,M=void 0===T?"#A71D31":T,k=i.warning,I=void 0===k?"#E2C044":k,L=i.success,A=void 0===L?"#4DA167":L,z=i.info,P=void 0===z?"#2E86AB":z,O=i.background,D=i.link,R=sk(i,lW),F=sS(sS(sS(sS(sS(sS(sS(sS({},lZ("base",x)),lZ("surface",v)),lZ("primary",E)),lZ("secondary",S)),lZ("danger",M)),lZ("warning",I)),lZ("success",A)),lZ("info",P)),B=a.base,N=void 0===B?{}:B,j=a.heading,V=void 0===j?{}:j,U=a.overline,q=void 0===U?{}:U,$=sk(a,lX),H=N.size,Z=void 0===H?"1rem":H,G=N.line,W=N.color,X=void 0===W?x:W,Y=N.family,K=void 0===Y?'"Open Sans", sans-serif':Y,J=N.style,Q=void 0===J?"normal":J,ee=N.settings,et=void 0===ee?"'pnum' 0":ee,er=N.case,en=void 0===er?"none":er,ei=N.light,eo=void 0===ei?300:ei,ea=N.regular,es=void 0===ea?400:ea,el=N.medium,eu=void 0===el?600:el,ec=N.bold,eh=void 0===ec?700:ec,ed=N.weight,ef=N.antialiasing,ep=sk(N,lY),em=N.leadSize,eg=V.family,ey=V.style,e_=V.settings,ev=V.case,eb=V.light,ex=V.regular,ew=V.medium,eE=V.bold,eC=V.weight,eS=V.textTransform,eT=sk(V,lK),eM=q.family,ek=q.style,eI=q.settings,eL=q.case,eA=q.light,ez=q.regular,eP=q.medium,eO=q.bold,eD=q.weight,eR=q.textTransform,eF=sk(q,lJ),eB=l.rounded,eN=void 0===eB?"0.25rem":eB,ej=l.ellipsoid,eV=sk(l,lQ),eU=c.space,eq=c.border,e$=void 0===eq?"1px":eq,eH=c.min,eZ=c.max,eG=sk(c,l0),eW=d.type,eX=void 0===eW?{}:eW,eY=d.shape,eK=void 0===eY?{}:eY,eJ=sk(d,l1),eQ=eX.family,e0=eX.style,e1=eX.settings,e2=eX.case,e4=eX.weight,e3=sk(eX,l2),e5=eK.border,e6=eK.rounded,e8=sk(eK,l4),e9=p.inset,e7=void 0===e9?"inset 0px 0px 3px 0px ".concat(F["base-50a"],";"):e9,te=p.input,tt=void 0===te?"0 -1px 1px 0 ".concat(F["base-100a"],", 0 2px 6px 0 ").concat(F["base-200a"],";"):te,tr=p.elevationA,tn=void 0===tr?"0 0 4px 0 ".concat(F["base-100a"],", 0 2px 2px 0 ").concat(F["base-100a"],";"):tr,ti=p.elevationB,to=void 0===ti?"0 0 4px 0 ".concat(F["base-100a"],", 0 4px 4px 0 ").concat(F["base-100a"],";"):ti,ta=p.elevationC,ts=void 0===ta?"0 0 4px 0 ".concat(F["base-100a"],", 0 8px 12px 0 ").concat(F["base-100a"],";"):ta,tl=p.elevationD,tu=void 0===tl?"0 0 4px 0 ".concat(F["base-100a"],", 0 12px 24px 0 ").concat(F["base-100a"],";"):tl,tc=sk(p,l3),th=g.xsmall,td=g.small,tf=g.medium,tp=g.large,tm=g.xlarge;// Theme object definition
return sS(sS({},y),{},{color:sS(sS({// base color for the site. Text and all elements that are not colored.
// required
base:x,// Background color for filled elements that sit on top of the body.
// (cards, panel, modal...)
// required
surface:v,// required
primary:E,// required
secondary:S,// States colors
// required
danger:M,// required
warning:I,// required
success:A,// required
info:P,// Only used for body color. Uses surface if not provided.
background:O||v,// Color for links. Uses primary if not defined
link:D||E},R),F),type:sS({base:sS({size:Z,leadSize:void 0===em?"calc(".concat(Z," * 1.5)"):em,line:void 0===G?"calc(0.5rem + 1em)":G,color:X,family:K,style:Q,settings:et,case:en,light:eo,regular:es,medium:eu,bold:eh,weight:void 0===ed?300:ed,antialiasing:void 0===ef||ef},ep),heading:sS({family:void 0===eg?K:eg,style:void 0===ey?Q:ey,settings:void 0===e_?'"wdth" 80, "wght" 780':e_,case:void 0===ev?en:ev,light:void 0===eb?eo:eb,regular:void 0===ex?es:ex,medium:void 0===ew?eu:ew,bold:void 0===eE?eh:eE,weight:void 0===eC?eh:eC,textTransform:void 0===eS?"none":eS},eT),overline:sS({family:void 0===eM?K:eM,style:void 0===ek?Q:ek,settings:void 0===eI?et:eI,case:void 0===eL?en:eL,light:void 0===eA?eo:eA,regular:void 0===ez?es:ez,medium:void 0===eP?eu:eP,bold:void 0===eO?eh:eO,weight:void 0===eD?eh:eD,textTransform:void 0===eR?"uppercase":eR},eF)},$),shape:sS({rounded:eN,ellipsoid:void 0===ej?"320rem":ej},eV),layout:sS({space:void 0===eU?"1rem":eU,border:e$,min:void 0===eH?"320px":eH,max:void 0===eZ?"1280px":eZ},eG),button:sS({type:sS({family:void 0===eQ?K:eQ,style:void 0===e0?Q:e0,settings:void 0===e1?et:e1,case:void 0===e2?en:e2,weight:void 0===e4?eh:e4},e3),shape:sS({border:void 0===e5?e$:e5,rounded:void 0===e6?eN:e6},e8)},eJ),boxShadow:sS({inset:e7,input:tt,elevationA:tn,elevationB:to,elevationC:ts,elevationD:tu},tc),mediaRanges:{xsmall:void 0===th?[null,543]:th,small:void 0===td?[544,767]:td,medium:void 0===tf?[768,991]:tf,large:void 0===tp?[992,1215]:tp,xlarge:void 0===tm?[1216,null]:tm}})}var l6={main:l5()},l8=function(){return rt(C||(C=sI(["\n  opacity: 0.48;\n  pointer-events: none;\n"])))},l9=["children","theme"],l7=rt(M||(M=sI(["\n  /**\n   * Based on\n   * https://hankchizljaw.com/wrote/a-modern-css-reset/\n   */\n\n  /* Box sizing rules */\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  /* Set core root defaults */\n  html:focus-within {\n    scroll-behavior: smooth;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  }\n\n  /* Set default line-height */\n  * {\n    line-height: ",";\n  }\n\n  /* Remove default margin */\n  body,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p,\n  ul,\n  ol,\n  li,\n  figure,\n  blockquote,\n  dl,\n  dd {\n    margin: 0;\n  }\n\n  /* Remove list styles on ul, ol elements with a list role, which suggests\n  default styling will be removed */\n  ul[role='list'],\n  ol[role='list'] {\n    list-style: none;\n    padding: 0;\n  }\n\n  /* Set core <body> defaults */\n  body {\n    background-color: ",";\n    color: ",";\n    font-size: ",";\n    /* stylelint-disable-next-line font-family-no-missing-generic-family-keyword */\n    font-family: ",";\n    text-transform: ",";\n    font-weight: ",";\n    font-style: ",";\n    font-variation-settings: ",";\n    min-width: ",";\n    min-height: 100vh;\n    text-rendering: optimizeSpeed;\n\n    ","\n  }\n\n  /* Apply some default styles to <a> elements without a class */\n  a:not([class]) {\n    cursor: pointer;\n    color: ",";\n    text-decoration: none;\n    transition: opacity 0.24s ease 0s;\n\n    &:visited {\n      color: ",";\n    }\n\n    &:hover {\n      opacity: 0.64;\n    }\n\n    &:active {\n      transform: translate(0, 1px);\n    }\n  }\n\n  /* Make images easier to work with */\n  img,\n  picture {\n    max-width: 100%;\n    display: block;\n  }\n\n  /* Inherit fonts for <input> and <button> */\n  input,\n  button,\n  textarea,\n  select {\n    font: inherit;\n  }\n\n  /* Text-level semantics */\n  b,\n  strong {\n    font-weight: ",";\n  }\n\n  /* Remove all animations and transitions for people that prefer not to see them */\n  @media (prefers-reduced-motion: reduce) {\n    html:focus-within {\n      scroll-behavior: auto;\n    }\n\n    *,\n    *::before,\n    *::after {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n      scroll-behavior: auto !important;\n    }\n  }\n\n  /* Misc */\n  ::selection {\n    background-color: ",";\n    color: ",";\n  }\n\n  .tether-element {\n    z-index: 1000;\n  }\n\n  .unscrollable-y {\n    ","\n  }\n\n  .unscrollable-x {\n    ","\n  }\n"])),lj("type.base.line"),lj("color.background"),lj("type.base.color"),lj("type.base.size"),lj("type.base.family"),lj("type.base.case"),lj("type.base.weight"),lj("type.base.style"),lj("type.base.settings"),lj("layout.min"),function(r){return r.theme.type.base.antialiasing&&rt(k||(k=sI(["\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      "])))},lj("color.link"),lj("color.link"),lj("type.base.bold"),lj("color.base-400a"),lj("color.surface"),rt(S||(S=sI(["\n  overflow-y: hidden;\n"]))),rt(T||(T=sI(["\n  overflow-x: hidden;\n"])))),ue=function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=rt.apply(void 0,[r].concat(i)),s="sc-global-"+ra(JSON.stringify(a)),l=new rf(a,s);function u(r){var n=tQ(),i=t0(),o=(0,eI.useContext)(ru),a=(0,eI.useRef)(n.allocateGSInstance(s)).current;return n.server&&c(a,r,n,o,i),(0,eI.useLayoutEffect)(function(){if(!n.server)return c(a,r,n,o,i),function(){return l.removeStyles(a,n)}},[a,r,n,o,i]),null}function c(r,n,i,o,a){if(l.isStatic)l.renderStyles(r,t_,i,a);else{var s=ts({},n,{theme:rr(n,o,u.defaultProps)});l.renderStyles(r,s,i,a)}}return /*@__PURE__*/eE(eI).memo(u)}(I||(I=sI(["\n  ","\n"])),l7),ut=function(r){var n=r.children,i=r.theme,o=sk(r,l9),a="function"==typeof i?i(l6.main):i||l6.main;return /*@__PURE__*/eE(eI).createElement(rc,sM({theme:a},o),/*@__PURE__*/eE(eI).createElement(ue,null),n)},ur=["Up","Only","Down"];["xsmall","small","medium","large","xlarge"].reduce(function(r,n){return sS(sS({},r),ur.reduce(function(r,i){return sS(sS({},r),{},sT({},"".concat(n).concat(i),function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return function(r){var a,s,l,u=ls(r.theme,["mediaRanges",n]);u||console.warn("Media query warning: Missing bounds for (".concat(n,") range.\nAdd them to the theme under (mediaRanges: { ").concat(n,": [upper, lower] })"));var c=u?(a=function(r,n){var i=function(r){if(Array.isArray(r))return r}(r)||function(r,n){var i,o,a=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=a){var s=[],l=!0,u=!1;try{for(a=a.call(r);!(l=(i=a.next()).done)&&(s.push(i.value),!n||s.length!==n);l=!0);}catch(r){u=!0,o=r}finally{try{l||null==a.return||a.return()}finally{if(u)throw o}}return s}}(r,2)||sA(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],a=i[1];switch(n){case"Up":// It makes no sense to have a media query "Up" from nothing.
// There's no need for a media query in that case.
if(null===o)return null;return"only screen and (min-width: ".concat(o,"px)");case"Only":// This only makes sense when there are both bounds.
// Otherwise the "Up" or "Down" can be used with the same result.
if(null===o||null===a)return null;return"only screen and (min-width: ".concat(o,"px and max-width: ").concat(a,"px)");case"Down":// It makes no sense to have a media query "Down" from infinity.
// There's no need for a media query in that case.
if(null===a)return null;return"only screen and (max-width: ".concat(a,"px)")}},s=null===u[0]?"lower":null===u[1]?"upper":null,null===(l=a(u,i))&&("Up"===i||"Down"===i)?(// eslint-disable-next-line
console.warn("Media query warning: The specified media query (".concat(n).concat(i,") has no ").concat(s," bound.\nThere's no need for a media query in this case;")),null):null===l?(// eslint-disable-next-line
console.warn("Media query warning: The specified media query (".concat(n).concat(i,") has no ").concat(s," bound.\nYou can use (").concat(n).concat(null===u[0]?"Down":"Up",") instead.")),a(u,null===u[0]?"Down":"Up")):l):null;return c?rt(L||(L=sI(["\n                @media "," {\n                  ","\n                }\n              "])),c,rt.apply(void 0,o)):rt.apply(void 0,o)}}))},{}))},{});var eI=eT("exYeM");function un(){return(un=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}function ui(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}function uo(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,o=Array(n);i<n;i++)o[i]=r[i];return o}function ua(r,n){return(ua=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}function us(r){return(us=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function ul(r,n,i){return(ul=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}()?function(r,n,i){var o=[null];o.push.apply(o,n);var a=new(Function.bind.apply(r,o));return i&&ua(a,i.prototype),a}:Reflect.construct).apply(null,arguments)}function uu(r){var n="function"==typeof Map?new Map:void 0;return(uu=function(r){if(null===r||-1===Function.toString.call(r).indexOf("[native code]"))return r;if("function"!=typeof r)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return ul(r,arguments,us(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ua(i,r)})(r)}/**
 * Create an error file out of errors.md for development and a simple web link to the full errors
 * in production mode.
 * @private
 */var uc=/*#__PURE__*/function(r){function n(n){return function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this)}return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,ua(n,r),n}(/*#__PURE__*/uu(Error));function uh(r){return Math.round(255*r)}function ud(r,n,i){return uh(r)+","+uh(n)+","+uh(i)}function uf(r,n,i,o){if(void 0===o&&(o=ud),0===n)return o(i,i,i);// formulae from https://en.wikipedia.org/wiki/HSL_and_HSV
var a=(r%360+360)%360/60,s=(1-Math.abs(2*i-1))*n,l=s*(1-Math.abs(a%2-1)),u=0,c=0,h=0;a>=0&&a<1?(u=s,c=l):a>=1&&a<2?(u=l,c=s):a>=2&&a<3?(c=s,h=l):a>=3&&a<4?(c=l,h=s):a>=4&&a<5?(u=l,h=s):a>=5&&a<6&&(u=s,h=l);var d=i-s/2;return o(u+d,c+d,h+d)}var up={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},um=/^#[a-fA-F0-9]{6}$/,ug=/^#[a-fA-F0-9]{8}$/,uy=/^#[a-fA-F0-9]{3}$/,u_=/^#[a-fA-F0-9]{4}$/,uv=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,ub=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ux=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,uw=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,uE=function(r){return 7===r.length&&r[1]===r[2]&&r[3]===r[4]&&r[5]===r[6]?"#"+r[1]+r[3]+r[5]:r};function uC(r){var n=r.toString(16);return 1===n.length?"0"+n:n}/**
 * Returns a string value for the color. The returned result is the smallest possible hex notation.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: rgb(255, 205, 100),
 *   background: rgb({ red: 255, green: 205, blue: 100 }),
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${rgb(255, 205, 100)};
 *   background: ${rgb({ red: 255, green: 205, blue: 100 })};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#ffcd64";
 *   background: "#ffcd64";
 * }
 */function uS(r,n,i){if("number"==typeof r&&"number"==typeof n&&"number"==typeof i)return uE("#"+uC(r)+uC(n)+uC(i));if("object"==typeof r&&void 0===n&&void 0===i)return uE("#"+uC(r.red)+uC(r.green)+uC(r.blue));throw new uc(6)}/**
 * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.
 *
 * Can also be used to fade a color by passing a hex value or named CSS color along with an alpha value.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: rgba(255, 205, 100, 0.7),
 *   background: rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 }),
 *   background: rgba(255, 205, 100, 1),
 *   background: rgba('#ffffff', 0.4),
 *   background: rgba('black', 0.7),
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${rgba(255, 205, 100, 0.7)};
 *   background: ${rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 })};
 *   background: ${rgba(255, 205, 100, 1)};
 *   background: ${rgba('#ffffff', 0.4)};
 *   background: ${rgba('black', 0.7)};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "rgba(255,205,100,0.7)";
 *   background: "rgba(255,205,100,0.7)";
 *   background: "#ffcd64";
 *   background: "rgba(255,255,255,0.4)";
 *   background: "rgba(0,0,0,0.7)";
 * }
 */function uT(r,n,i,o){if("string"==typeof r&&"number"==typeof n){var a=/**
 * Returns an RgbColor or RgbaColor object. This utility function is only useful
 * if want to extract a color component. With the color util `toColorString` you
 * can convert a RgbColor or RgbaColor object back to a string.
 *
 * @example
 * // Assigns `{ red: 255, green: 0, blue: 0 }` to color1
 * const color1 = parseToRgb('rgb(255, 0, 0)');
 * // Assigns `{ red: 92, green: 102, blue: 112, alpha: 0.75 }` to color2
 * const color2 = parseToRgb('hsla(210, 10%, 40%, 0.75)');
 */function(r){if("string"!=typeof r)throw new uc(3);var n=/**
 * Checks if a string is a CSS named color and returns its equivalent hex value, otherwise returns the original color.
 * @private
 */function(r){if("string"!=typeof r)return r;var n=r.toLowerCase();return up[n]?"#"+up[n]:r}(r);if(n.match(um))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(ug)){var i=parseFloat((parseInt(""+n[7]+n[8],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16),alpha:i}}if(n.match(uy))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};if(n.match(u_)){var o=parseFloat((parseInt(""+n[4]+n[4],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16),alpha:o}}var a=uv.exec(n);if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10)};var s=ub.exec(n.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])};var l=ux.exec(n);if(l){var u="rgb("+uf(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",c=uv.exec(u);if(!c)throw new uc(4,n,u);return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)}}var h=uw.exec(n.substring(0,50));if(h){var d="rgb("+uf(parseInt(""+h[1],10),parseInt(""+h[2],10)/100,parseInt(""+h[3],10)/100)+")",f=uv.exec(d);if(!f)throw new uc(4,n,d);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10),alpha:parseFloat(""+h[4])}}throw new uc(5)}(r);return"rgba("+a.red+","+a.green+","+a.blue+","+n+")"}if("number"==typeof r&&"number"==typeof n&&"number"==typeof i&&"number"==typeof o)return o>=1?uS(r,n,i):"rgba("+r+","+n+","+i+","+o+")";if("object"==typeof r&&void 0===n&&void 0===i&&void 0===o)return r.alpha>=1?uS(r.red,r.green,r.blue):"rgba("+r.red+","+r.green+","+r.blue+","+r.alpha+")";throw new uc(7)}// global button group props, like the size.
// Context
var uM=/*#__PURE__*/(0,eI.createContext)({inGroup:!1}),uk=function(r){var n=r.children,i=r.size,o=r.radius,a=r.variation,s=void 0===a?"base-fill":a,l=(0,eI.useMemo)(function(){return{inGroup:!0,size:i,radius:o,variation:s}},[i,o,s]);return /*@__PURE__*/eE(eI).createElement(uM.Provider,{value:l},n)};// Context provider
uk.propTypes={children:/*@__PURE__*/eE(aD).node,size:/*@__PURE__*/eE(aD).string,radius:/*@__PURE__*/eE(aD).string,variation:/*@__PURE__*/eE(aD).string};var uI=rd.button.attrs(function(r){return{"aria-pressed":String(!!r.active),type:r.type||(r.as?void 0:"button")}}).withConfig({displayName:"Button__StyledButton",componentId:"sc-1n019q7-0"})(["",""],function(r){return rt(A||(A=ui(["\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: ",";\n    user-select: none;\n    line-height: inherit;\n    border: "," solid transparent;\n    background: transparent;\n    font-family: ",";\n    font-weight: ",";\n    font-style: ",";\n    font-variation-settings: ",";\n    text-transform: ",";\n    outline: 0 solid transparent;\n    text-decoration: none;\n    transition: background-color 0.24s ease-in-out 0s,\n      outline-width 0.16s ease-in-out 0s;\n\n    &:focus-visible {\n      outline-width: 0.25rem;\n    }\n\n    &:focus:not(:focus-visible) {\n      outline: 0;\n    }\n\n    /* Disabled state based on prop. */\n    ","\n\n    &[disabled] {\n      ","\n    }\n\n    /* Size. */\n    ","\n\n    /* Variation. */\n    ","\n\n    /* Content Fit */\n    ","\n\n    /* Radius */\n    &,\n    &::after {\n      ","\n    }\n\n    &::after {\n      position: absolute;\n      z-index: 10;\n      top: -",";\n      right: -",";\n      bottom: -",";\n      left: -",";\n      content: '';\n      background: transparent;\n      pointer-events: none;\n    }\n  "])),lU(.25),lj("button.shape.border"),lj("button.type.family"),lj("button.type.weight"),lj("button.type.style"),lj("button.type.settings"),lj("button.type.case"),r.disabled?l8():rt(z||(z=ui(["\n        cursor: pointer;\n      "]))),l8(),/**
 * Renders the button size based on the props.
 *
 * @param {object} props The element props
 * @param {string} props.size The value for the box. One of
 *                 "small" | "medium" | "large" | "xlarge"
 */function(r){var n=r.size,i=void 0===n?"medium":n;switch(i){case"small":return rt(P||(P=ui(["\n        min-width: 1.5rem;\n        height: 1.5rem;\n        font-size: 0.875rem;\n        padding: 0 0.5rem;\n      "])));case"medium":return rt(O||(O=ui(["\n        min-width: 2rem;\n        height: 2rem;\n        font-size: 1rem;\n        padding: 0 0.75rem;\n      "])));case"large":return rt(D||(D=ui(["\n        min-width: 2.5rem;\n        height: 2.5rem;\n        font-size: 1rem;\n        padding: 0 1rem;\n      "])));case"xlarge":return rt(R||(R=ui(["\n        min-width: 3rem;\n        height: 3rem;\n        font-size: 1rem;\n        padding: 0 1.25rem;\n      "])));default:throw Error("Invalid button size (".concat(i,"). Must be one of [small, medium, large, xlarge]."))}}(r),function(r){var n,i,o=function(r){if(Array.isArray(r))return r}(n=(null===(i=r.variation)||void 0===i?void 0:i.split("-"))||["base","text"])||function(r,n){var i,o,a=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=a){var s=[],l=!0,u=!1;try{for(a=a.call(r);!(l=(i=a.next()).done)&&(s.push(i.value),!n||s.length!==n);l=!0);}catch(r){u=!0,o=r}finally{try{l||null==a.return||a.return()}finally{if(u)throw o}}return s}}(n,2)||function(r,n){if(r){if("string"==typeof r)return uo(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if("Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i)return Array.from(r);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uo(r,n)}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=o[0],s=o[1],l=function(r){return lj(["color",r])};// Function to get the color from the theme.
if(!["text","fill","outline"].includes(s))throw Error("Invalid button type (".concat(s,"). Must be one of [text, fill, outline]."));if("achromic"===a){if("fill"===s)throw Error("achromic-fill buttons do not exist.");switch(s){case"text":return rt(F||(F=ui(["\n          color: #fff;\n\n          &:hover {\n            background-color: ",";\n          }\n\n          /* Print & when prop is passed */\n          ","\n          &:active,\n          &.active {\n            background-color: ",";\n          }\n\n          &:focus-visible {\n            outline-color: ",";\n          }\n        "])),uT("#fff",.04),function(r){return r.active&&"&,"},uT("#fff",.08),uT("#fff",.16));case"outline":return rt(B||(B=ui(["\n          border-color: #fff;\n          color: #fff;\n\n          &:hover {\n            background-color: ",";\n          }\n\n          /* Print & when prop is passed */\n          ","\n          &:active,\n          &.active {\n            background-color: ",";\n          }\n\n          &:focus-visible {\n            outline-color: ",";\n          }\n        "])),uT("#fff",.04),function(r){return r.active&&"&,"},uT("#fff",.04),uT("#fff",.16))}}switch(s){case"text":return rt(N||(N=ui(["\n        color: ",";\n\n        &:hover {\n          background-color: ",";\n        }\n\n        /* Print & when prop is passed */\n        ","\n        &:active,\n        &.active {\n          background-color: ",";\n        }\n\n        &:focus-visible {\n          outline-color: ",";\n        }\n      "])),l(a),l("".concat(a,"-50a")),function(r){return r.active&&"&,"},l("".concat(a,"-100a")),l("".concat(a,"-200a")));case"outline":return rt(j||(j=ui(["\n        border-color: ",";\n        color: ",";\n\n        &:hover {\n          background-color: ",";\n        }\n\n        /* Print & when prop is passed */\n        ","\n        &:active,\n        &.active {\n          background-color: ",";\n        }\n\n        &:focus-visible {\n          outline-color: ",";\n        }\n      "])),l(a),l(a),l("".concat(a,"-50a")),function(r){return r.active&&"&,"},l("".concat(a,"-100a")),l("".concat(a,"-200a")));case"fill":return rt(V||(V=ui(["\n        border-color: ",";\n        background-color: ",";\n        color: #fff;\n\n        &:hover {\n          background-color: ",";\n        }\n\n        /* Print & when prop is passed */\n        ","\n        &:active,\n        &.active {\n          background-color: ",";\n        }\n\n        &:focus-visible {\n          outline-color: ",";\n        }\n\n        &::after {\n          box-shadow: ",";\n        }\n      "])),lj("color.base-200a"),l(a),l("".concat(a,"-600")),function(r){return r.active&&"&,"},l("".concat(a,"-700")),l("".concat(a,"-200a")),lj("boxShadow.elevationB"))}}(r),/**
 * Renders the content fit based on the props.
 *
 * @param {object} props The element props
 * @param {string} props.fitting The value for the content fit. One of
 *                 "skinny" | "regular" | "relaxed" | "baggy"
 */function(r){var n=r.fitting,i=void 0===n?"regular":n;switch(i){case"skinny":return rt(H||(H=ui(["\n        padding-left: 0;\n        padding-right: 0;\n      "])));case"regular":return"";case"relaxed":return rt(Z||(Z=ui(["\n        min-width: 12rem;\n      "])));case"baggy":return rt(G||(G=ui(["\n        width: 100%;\n      "])));default:throw Error("Invalid button fitting (".concat(i,"). Must be one of [skinny, regular, relaxed, baggy]."))}}(r),/**
 * Renders the border radius based on the props.
 *
 * @param {object} props The element props
 * @param {string} props.radius The value for the radius. One of
 *                 "ellipsoid" | "square" | "rounded"
 */function(r){var n=r.radius,i=void 0===n?"rounded":n;switch(i){case"rounded":return rt(U||(U=ui(["\n        border-radius: ",";\n      "])),lj("shape.rounded"));case"ellipsoid":return rt(q||(q=ui(["\n        border-radius: ",";\n      "])),lj("shape.ellipsoid"));case"square":return rt($||($=ui(["\n        border-radius: 0;\n      "])));default:throw Error("Invalid button radius (".concat(i,"). Must be one of [rounded, ellipsoid, square]."))}}(r),lj("button.shape.border"),lj("button.shape.border"),lj("button.shape.border"),lj("button.shape.border"))}),uL=rd(/*@__PURE__*/eE(eI).forwardRef(function(r,n){var i=(0,eI.useContext)(uM),o=i.size,a=i.variation,s=i.radius;return /*@__PURE__*/eE(eI).createElement(uI,un({size:o,variation:a,radius:s},r,{ref:n}))})).withConfig({displayName:"Button",componentId:"sc-1n019q7-1"})([""]);/* eslint-enable */uL.propTypes={children:/*@__PURE__*/eE(aD).node,variation:/*@__PURE__*/eE(aD).string,size:/*@__PURE__*/eE(aD).string,radius:/*@__PURE__*/eE(aD).string,fitting:/*@__PURE__*/eE(aD).string,active:/*@__PURE__*/eE(aD).bool,disabled:/*@__PURE__*/eE(aD).bool};var uA=["className","children","size","variation","radius","role"],uz=rd.div.withConfig({displayName:"ButtonGroup__StyledButtonGroup",componentId:"sc-tfq0db-0"})(["",""],function(r){return rt(Y||(Y=ui(["\n    position: relative;\n    display: inline-flex;\n\n    > "," {\n      position: relative;\n      flex: 1 1 auto;\n\n      &:focus {\n        z-index: 1;\n      }\n    }\n\n    /* Group orientation */\n    ","\n  "])),uL,/**
 * Renders the button group orientation based on the props.
 *
 * @param {object} props The element props
 * @param {string} props.orientation The value for the orientation. One of
 *                 "horizontal" | "vertical"
 */function(r){var n=r.orientation,i=void 0===n?"horizontal":n;switch(i){case"horizontal":return rt(W||(W=ui(["\n        flex-flow: row nowrap;\n        > ",":first-child:not(:last-child) {\n          &,\n          &::after {\n            border-top-right-radius: 0;\n            border-bottom-right-radius: 0;\n          }\n\n          &::after {\n            clip-path: inset(-100% 0 -100% -100%);\n          }\n        }\n        > ",":last-child:not(:first-child) {\n          &,\n          &::after {\n            border-top-left-radius: 0;\n            border-bottom-left-radius: 0;\n          }\n\n          &::after {\n            clip-path: inset(-100% -100% -100% 0);\n          }\n        }\n        > ",":not(:first-child):not(:last-child) {\n          &,\n          &::after {\n            border-radius: 0;\n          }\n\n          &::after {\n            clip-path: inset(-100% 0);\n          }\n        }\n        > "," + "," {\n          margin-left: -",";\n        }\n      "])),uL,uL,uL,uL,uL,lj("button.shape.border"));case"vertical":return rt(X||(X=ui(["\n        flex-flow: column;\n        > ",":first-child:not(:last-child) {\n          &,\n          &::after {\n            border-bottom-right-radius: 0;\n            border-bottom-left-radius: 0;\n          }\n\n          &::after {\n            clip-path: inset(-100% -100% 0 -100%);\n          }\n        }\n        > ",":last-child:not(:first-child) {\n          &,\n          &::after {\n            border-top-left-radius: 0;\n            border-top-right-radius: 0;\n          }\n\n          &::after {\n            clip-path: inset(0 -100% -100% -100%);\n          }\n        }\n        > ",":not(:first-child):not(:last-child) {\n          &,\n          &::after {\n            border-radius: 0;\n          }\n\n          &::after {\n            clip-path: inset(0 -100%);\n          }\n        }\n        > "," + "," {\n          margin-top: -",";\n        }\n      "])),uL,uL,uL,uL,uL,lj("button.shape.border"));default:throw Error("Invalid button group orientation (".concat(i,"). Must be one of [horizontal, vertical]."))}}(r))});function uP(){let[r,n]=(0,eL.useAtom)(au),i=(0,eI.useCallback)(i=>{i.forEach(i=>{let o=new FileReader;o.onabort=()=>console.log("file reading was aborted"),o.onerror=()=>console.log("file reading has failed"),o.onload=()=>{let i=o.result,{data:a}=(0,sE.parse)(i,{header:!0}),s=a[0],[l,u,c,h,d,f]=Array(6).fill(null),p=[];for(let r in s)r.toLowerCase().includes("lat")&&(l=r),(r.toLowerCase().includes("lon")||r.toLowerCase().includes("lng"))&&(u=r),r.toLowerCase().includes("city")&&(c=r),r.toLowerCase().includes("country")&&(h=r),r.toLowerCase().includes("group")&&(d=r),r.toLowerCase().includes("name")&&(f=r);l&&u?p=a.map(function(r){let n=parseFloat(r[l]),i=parseFloat(r[u]),o=r[f],a=r[d];return{type:"Feature",geometry:{type:"Point",coordinates:[i,n]},properties:{name:o,group:a}}}):c&&h?p=a.map(function(r){let n=r[c],i=r[h],o=r[f],a=r[d];// TODO: Geocode city/country
return{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{name:o,group:a,city:n,country:i}}}):console.error("Could not find lat/lon or city/country columns"),p.length>0&&n([...r,...p])},o.readAsText(i)})},[r,n]),{getRootProps:o,getInputProps:a}=sb({onDrop:i,accept:{"text/csv":[".csv"]}});return/*#__PURE__*/(0,eM.jsxs)(uL,{...o({className:"dropzone"}),radius:"rounded",size:"small",variation:"base-outline",fitting:"baggy",children:["Click or drag CSV here",/*#__PURE__*/(0,eM.jsx)("input",{...a()})]})}/* eslint-enable */rd(/*@__PURE__*/eE(eI).forwardRef(function(r,n){var i=r.className,o=r.children,a=r.size,s=r.variation,l=r.radius,u=r.role,c=function(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}(r,uA);return /*@__PURE__*/eE(eI).createElement(uk,{size:a,variation:s,radius:l},/*@__PURE__*/eE(eI).createElement(uz,un({className:i,role:void 0===u?"group":u,ref:n},c),o))})).withConfig({displayName:"ButtonGroup",componentId:"sc-tfq0db-1"})([""]).propTypes={children:/*@__PURE__*/eE(aD).node,className:/*@__PURE__*/eE(aD).string,size:/*@__PURE__*/eE(aD).string,variation:/*@__PURE__*/eE(aD).string,radius:/*@__PURE__*/eE(aD).string,role:/*@__PURE__*/eE(aD).string};let uO=rd.ul`
  list-style: none;
  padding: 0;
  margin: 1rem 0;
  & > li {
    margin-bottom: 0.5rem;
    font-w
  }

  & > li:not(:last-child):after {
    display: block;
    width: 100%;
    text-align: center;
    border-bottom: 1px solid #ccc;
    height: 12px;
    content: 'or';
  }

  & > li > input {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  & em {
    display: block;
  }
`;function uD(){return/*#__PURE__*/(0,eM.jsxs)(eM.Fragment,{children:[/*#__PURE__*/(0,eM.jsx)("h2",{children:"1. Add team members"}),/*#__PURE__*/(0,eM.jsxs)(uO,{children:[/*#__PURE__*/(0,eM.jsx)("li",{children:" Click on the map to set participant locations"}),/*#__PURE__*/(0,eM.jsx)("li",{children:/*#__PURE__*/(0,eM.jsx)("input",{disabled:!0,placeholder:"Search locations to set points (SOON)"})}),/*#__PURE__*/(0,eM.jsxs)("li",{children:["Add CSV file",/*#__PURE__*/(0,eM.jsx)("em",{children:"Must include name, lat, lon columns. Optional 'group' column."}),/*#__PURE__*/(0,eM.jsx)(uP,{})]})]})]})}var eI=(eT("exYeM"),eT("exYeM"));function uR(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}function uF(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?uR(Object(i),!0).forEach(function(n){var o;o=i[n],n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):uR(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}function uB(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}var uN=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.variation;return n?rt(J||(J=uB(["\n      color: ",";\n    "])),lj(["color",n])):rt(K||(K=uB(["\n      color: inherit;\n    "])))},uj={xxsmall:"0.75rem",xsmall:"1rem",small:"1.25rem",medium:"1.5rem",large:"1.75rem",xlarge:"2rem",xxlarge:"2.25rem",jumbo:"3rem"},uV=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.size,i=void 0===n?"medium":n;return rt(Q||(Q=uB(["\n    font-size: ",";\n    ","\n  "])),uj[i],"xxsmall"===i&&"line-height: 1rem;")},uU=function(r){return rt(ee||(ee=uB(["\n  font-family: ",";\n  text-transform: ",";\n  font-weight: ",";\n  font-style: ",";\n  font-variation-settings: ",";\n\n  /* Variation */\n  ","\n\n  /* Size */\n  ","\n"])),lj("type.heading.family"),lj("type.heading.case"),lj("type.heading.weight"),lj("type.heading.style"),lj("type.heading.settings"),uN(r),uV(r))},uq=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rt(et||(et=uB(["\n  font-size: 0.75rem;\n  line-height: 1rem;\n  font-family: ",";\n  font-weight: ",";\n  text-transform: ",";\n  font-feature-settings: ",";\n\n  /* Variation */\n  ","\n"])),lj("type.overline.family"),lj("type.overline.regular"),lj("type.overline.textTransform"),lj("type.overline.settings"),uN(uF(uF({},r),{},{variation:r.variation||"base-400"})))},u$=function(){return rt(er||(er=uB(["\n  font-size: 0.75rem;\n  line-height: 1rem;\n  color: ",";\n"])),lj("color.base-400"))};rd.h1.withConfig({displayName:"Heading",componentId:"sc-17hljlf-0"})(["",""],uU);var uH=rd.p.withConfig({displayName:"Heading__Overline",componentId:"sc-17hljlf-1"})(["",""],uq);rd.p.withConfig({displayName:"Heading__Lead",componentId:"sc-17hljlf-2"})(["font-size:",";color:",";"],lj("type.base.leadSize"),lj("color.base-400")),rd.p.withConfig({displayName:"Heading__Subtitle",componentId:"sc-17hljlf-3"})(["",""],u$),rd.div.withConfig({displayName:"Prose",componentId:"sc-1p4enbu-0"})(["",""],function(){return rt(en||(en=uB(["\n  sup,\n  sub {\n    font-size: 0.75em;\n  }\n\n  sup {\n    vertical-align: top;\n  }\n\n  sub {\n    vertical-align: bottom;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    ","\n    margin-bottom: ",";\n\n    &:not(:first-child) {\n      margin-top: ",";\n    }\n  }\n\n  h1 {\n    ","\n  }\n\n  h2 {\n    ","\n  }\n\n  h3 {\n    ","\n  }\n\n  h4 {\n    ","\n  }\n\n  h5 {\n    ","\n  }\n\n  h6 {\n    ","\n  }\n\n  dl {\n    padding: 0;\n  }\n\n  ol ol,\n  ol ul,\n  ul ol,\n  ul ul {\n    margin-bottom: 0;\n  }\n\n  dt {\n    font-weight: ",";\n  }\n\n  figure > figcaption {\n    ","\n    padding: ",";\n    text-align: center;\n    width: 100%;\n    max-width: 52rem;\n    margin: 0 auto;\n  }\n\n  figure img {\n    display: block;\n    margin: 0 auto;\n  }\n\n  > * {\n    margin-bottom: ",";\n  }\n\n  > *:last-child {\n    margin-bottom: 0;\n  }\n\n  table {\n    ","\n\n    &.table-zebra {\n      ","\n    }\n  }\n"])),uU,lU(),lU(3),uV({size:"xxlarge"}),uV({size:"xlarge"}),uV({size:"large"}),uV({size:"medium"}),uV({size:"small"}),uV({size:"xsmall"}),lj("type.base.bold"),u$,lU(),lN(1.5),uG,uZ({zebra:!0}))});var uZ=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.zebra&&rt(ei||(ei=uB(["\n    tbody tr:nth-of-type(odd) {\n      background: ",";\n    }\n  "])),lj("color.base-50a"))},uG=function(r){return rt(eo||(eo=uB(["\n  width: 100%;\n  max-width: 100%;\n  border-color: ",";\n  border-collapse: collapse;\n\n  tbody,\n  td,\n  tfoot,\n  th,\n  thead,\n  tr {\n    border-color: inherit;\n    border-bottom-color: inherit;\n    border-style: solid;\n    border-width: 0;\n    border-bottom-width: 0px;\n  }\n\n  & > *:not(caption) > * > * {\n    border-bottom-width: ",";\n  }\n\n  & > :not(:last-child) > :last-child > * {\n    border-bottom-width: ",";\n  }\n\n  th {\n    ","\n  }\n\n  td,\n  th {\n    padding: ",";\n    vertical-align: top;\n    text-align: left;\n  }\n\n  th:first-child,\n  td:first-child {\n    padding-left: ",";\n  }\n\n  th:last-child,\n  td:last-child {\n    padding-right: ",";\n  }\n\n  /* Table zebra */\n  ","\n\n  caption {\n    ","\n    caption-side: bottom;\n    padding: ",";\n    text-align: center;\n  }\n"])),lj("color.base-200a"),lj("layout.border"),lR(lj("layout.border"),2),uU({size:"xsmall"}),lU(1/4),lU(),lU(),uZ(r),u$,lU())};function uW(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}function uX(){return(uX=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}function uY(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}function uK(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}function uJ(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var i,o,a=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=a){var s=[],l=!0,u=!1;try{for(a=a.call(r);!(l=(i=a.next()).done)&&(s.push(i.value),!n||s.length!==n);l=!0);}catch(r){u=!0,o=r}finally{try{l||null==a.return||a.return()}finally{if(u)throw o}}return s}}(r,n)||function(r,n){if(r){if("string"==typeof r)return uQ(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if("Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i)return Array.from(r);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uQ(r,n)}}(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uQ(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,o=Array(n);i<n;i++)o[i]=r[i];return o}rd.table.withConfig({displayName:"Table",componentId:"sc-1f22pod-0"})(["",""],uG),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==ew||"undefined"!=typeof self&&self;var u0={},u1={},u2={exports:{}};u2.exports=function(){var r,n,i,o,a,s=function(){function r(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(n,i,o){return i&&r(n.prototype,i),o&&r(n,o),n}}();function l(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}var u=void 0;void 0===u&&(u={modules:[]});var c=null;// Same as native getBoundingClientRect, except it takes into account parent <frame> offsets
// if the element lies within a nested document (<frame> or <iframe>-like).
function h(r){var n=r.getBoundingClientRect(),i={};for(var o in n)i[o]=n[o];try{if(r.ownerDocument!==document){var a=r.ownerDocument.defaultView.frameElement;if(a){var s=h(a);i.top+=s.top,i.bottom+=s.top,i.left+=s.left,i.right+=s.left}}}catch(r){// Ignore "Access is denied" in IE11/Edge
}return i}function d(r){var n=(getComputedStyle(r)||{}).position,i=[];if("fixed"===n)return[r];for(var o=r;(o=o.parentNode)&&o&&1===o.nodeType;){var a=void 0;try{a=getComputedStyle(o)}catch(r){}if(null==a)return i.push(o),i;var s=a,l=s.overflow,u=s.overflowX,c=s.overflowY;/(auto|scroll|overlay)/.test(l+c+u)&&("absolute"!==n||["relative","absolute","fixed"].indexOf(a.position)>=0)&&i.push(o)}return i.push(r.ownerDocument.body),r.ownerDocument!==document&&i.push(r.ownerDocument.defaultView),i}var f=(r=0,function(){return++r}),p={},m=function(){// getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of
// jitter as the user scrolls that messes with our ability to detect if two positions
// are equivilant or not.  We place an element at the top left of the page that will
// get the same jitter, so we can cancel the two out.
var r=c;r&&document.body.contains(r)||((r=document.createElement("div")).setAttribute("data-tether-id",f()),x(r.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(r),c=r);var n=r.getAttribute("data-tether-id");return void 0===p[n]&&(p[n]=h(r),// Clear the cache when this position call is done
I(function(){delete p[n]})),p[n]};function g(){c&&document.body.removeChild(c),c=null}function y(r){var n=void 0;r===document?(n=document,r=document.documentElement):n=r.ownerDocument;var i=n.documentElement,o=h(r),a=m();return o.top-=a.top,o.left-=a.left,void 0===o.width&&(o.width=document.body.scrollWidth-o.left-o.right),void 0===o.height&&(o.height=document.body.scrollHeight-o.top-o.bottom),o.top=o.top-i.clientTop,o.left=o.left-i.clientLeft,o.right=n.body.clientWidth-o.width-o.left,o.bottom=n.body.clientHeight-o.height-o.top,o}function _(r){return r.offsetParent||document.documentElement}var v=null;function b(){if(v)return v;var r=document.createElement("div");r.style.width="100%",r.style.height="200px";var n=document.createElement("div");x(n.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;n.style.overflow="scroll";var o=r.offsetWidth;i===o&&(o=n.clientWidth),document.body.removeChild(n);var a=i-o;return v={width:a,height:a}}function x(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=[];return Array.prototype.push.apply(n,arguments),n.slice(1).forEach(function(n){if(n)for(var i in n)({}).hasOwnProperty.call(n,i)&&(r[i]=n[i])}),r}function w(r,n){if(void 0!==r.classList)n.split(" ").forEach(function(n){n.trim()&&r.classList.remove(n)});else{var i=RegExp("(^| )"+n.split(" ").join("|")+"( |$)","gi"),o=S(r).replace(i," ");T(r,o)}}function E(r,n){if(void 0!==r.classList)n.split(" ").forEach(function(n){n.trim()&&r.classList.add(n)});else{w(r,n);var i=S(r)+" "+n;T(r,i)}}function C(r,n){if(void 0!==r.classList)return r.classList.contains(n);var i=S(r);return RegExp("(^| )"+n+"( |$)","gi").test(i)}function S(r){return(// Can't use just SVGAnimatedString here since nodes within a Frame in IE have
// completely separately SVGAnimatedString base classes
r.className instanceof r.ownerDocument.defaultView.SVGAnimatedString?r.className.baseVal:r.className)}function T(r,n){r.setAttribute("class",n)}function M(r,n,i){// Of the set of 'all' classes, we need the 'add' classes, and only the
// 'add' classes to be set.
i.forEach(function(i){-1===n.indexOf(i)&&C(r,i)&&w(r,i)}),n.forEach(function(n){C(r,n)||E(r,n)})}var k=[],I=function(r){k.push(r)},L=function(){for(var r=void 0;r=k.pop();)r()},A=function(){function r(){l(this,r)}return s(r,[{key:"on",value:function(r,n,i){var o=!(arguments.length<=3)&&void 0!==arguments[3]&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[r]&&(this.bindings[r]=[]),this.bindings[r].push({handler:n,ctx:i,once:o})}},{key:"once",value:function(r,n,i){this.on(r,n,i,!0)}},{key:"off",value:function(r,n){if(void 0!==this.bindings&&void 0!==this.bindings[r]){if(void 0===n)delete this.bindings[r];else for(var i=0;i<this.bindings[r].length;)this.bindings[r][i].handler===n?this.bindings[r].splice(i,1):++i}}},{key:"trigger",value:function(r){if(void 0!==this.bindings&&this.bindings[r]){for(var n=0,i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(;n<this.bindings[r].length;){var s=this.bindings[r][n],l=s.handler,u=s.ctx,c=s.once,h=u;void 0===h&&(h=this),l.apply(h,o),c?this.bindings[r].splice(n,1):++n}}}}]),r}();u.Utils={getActualBoundingClientRect:h,getScrollParents:d,getBounds:y,getOffsetParent:_,extend:x,addClass:E,removeClass:w,hasClass:C,updateClasses:M,defer:I,flush:L,uniqueId:f,Evented:A,getScrollBarSize:b,removeUtilElements:g};var z=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,n){var i=[],o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done)&&(i.push(l.value),!n||i.length!==n);o=!0);}catch(r){a=!0,s=r}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return i}(r,n);throw TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function r(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(n,i,o){return i&&r(n.prototype,i),o&&r(n,o),n}}(),P=function(r,n,i){for(var o=!0;o;){var a=r,s=n,l=i;o=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,s);if(void 0===u){var c=Object.getPrototypeOf(a);if(null===c)return;r=c,n=s,i=l,o=!0,u=c=void 0;continue}if("value"in u)return u.value;var h=u.get;if(void 0===h)return;return h.call(l)}};function l(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}if(void 0===u)throw Error("You must include the utils.js file before tether.js");var O=u.Utils,d=O.getScrollParents,y=O.getBounds,_=O.getOffsetParent,x=O.extend,E=O.addClass,w=O.removeClass,M=O.updateClasses,I=O.defer,L=O.flush,b=O.getScrollBarSize,g=O.removeUtilElements,D=function(){if("undefined"==typeof document)return"";for(var r=document.createElement("div"),n=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<n.length;++i){var o=n[i];if(void 0!==r.style[o])return o}}(),R=[],F=function(){R.forEach(function(r){r.position(!1)}),L()};function B(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():+new Date}n=null,i=null,o=null,a=function r(){if(void 0!==i&&i>16){// We voluntarily throttle ourselves if we can't manage 60fps
i=Math.min(i-16,250),// Just in case this is the last event, remember to position just once more
o=setTimeout(r,250);return}void 0!==n&&B()-n<10||(null!=o&&(clearTimeout(o),o=null),n=B(),F(),i=B()-n)},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(r){window.addEventListener(r,a)});var N={center:"center",left:"right",right:"left"},j={middle:"middle",top:"bottom",bottom:"top"},V={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},U=function(r,n){var i=r.left,o=r.top;return"auto"===i&&(i=N[n.left]),"auto"===o&&(o=j[n.top]),{left:i,top:o}},q=function(r){var n=r.left,i=r.top;return void 0!==V[r.left]&&(n=V[r.left]),void 0!==V[r.top]&&(i=V[r.top]),{left:n,top:i}};function $(){for(var r={top:0,left:0},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach(function(n){var i=n.top,o=n.left;"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof o&&(o=parseFloat(o,10)),r.top+=i,r.left+=o}),r}function H(r,n){return"string"==typeof r.left&&-1!==r.left.indexOf("%")&&(r.left=parseFloat(r.left,10)/100*n.width),"string"==typeof r.top&&-1!==r.top.indexOf("%")&&(r.top=parseFloat(r.top,10)/100*n.height),r}var Z=function(r){var n=r.split(" "),i=z(n,2);return{top:i[0],left:i[1]}},G=function(r){function n(r){var i=this;l(this,n),P(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.position=this.position.bind(this),R.push(this),this.history=[],this.setOptions(r,!1),u.modules.forEach(function(r){void 0!==r.initialize&&r.initialize.call(i)}),this.position()}return function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function, not "+typeof n);r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}(n,r),s(n,[{key:"getClass",value:function(){var r=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=this.options.classes;return void 0!==n&&n[r]?this.options.classes[r]:this.options.classPrefix?this.options.classPrefix+"-"+r:r}},{key:"setOptions",value:function(r){var n=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=x({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},r);var o=this.options,a=o.element,s=o.target,l=o.targetModifier;if(this.element=a,this.target=s,this.targetModifier=l,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(r){if(void 0===n[r])throw Error("Tether Error: Both element and target must be defined");void 0!==n[r].jquery?n[r]=n[r][0]:"string"==typeof n[r]&&(n[r]=document.querySelector(n[r]))}),E(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&E(this.target,this.getClass("target")),!this.options.attachment)throw Error("Tether Error: You must provide an attachment");this.targetAttachment=Z(this.options.targetAttachment),this.attachment=Z(this.options.attachment),this.offset=Z(this.options.offset),this.targetOffset=Z(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=d(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return y(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var r=y(this.target),n={height:r.height,width:r.width,top:r.top,left:r.left};return n.height=Math.min(n.height,r.height-(pageYOffset-r.top)),n.height=Math.min(n.height,r.height-(r.top+r.height-(pageYOffset+innerHeight))),n.height=Math.min(innerHeight,n.height),n.height-=2,n.width=Math.min(n.width,r.width-(pageXOffset-r.left)),n.width=Math.min(n.width,r.width-(r.left+r.width-(pageXOffset+innerWidth))),n.width=Math.min(innerWidth,n.width),n.width-=2,n.top<pageYOffset&&(n.top=pageYOffset),n.left<pageXOffset&&(n.left=pageXOffset),n}if("scroll-handle"===this.targetModifier){var r=void 0,i=this.target;i===document.body?(i=document.documentElement,r={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):r=y(i);var o=getComputedStyle(i),a=i.scrollWidth>i.clientWidth||[o.overflow,o.overflowX].indexOf("scroll")>=0||this.target!==document.body,s=0;a&&(s=15);var l=r.height-parseFloat(o.borderTopWidth)-parseFloat(o.borderBottomWidth)-s,n={width:15,height:.975*l*(l/i.scrollHeight),left:r.left+r.width-parseFloat(o.borderLeftWidth)-15},u=0;l<408&&this.target===document.body&&(u=-.00011*Math.pow(l,2)-.00727*l+22.58),this.target!==document.body&&(n.height=Math.max(n.height,24));var c=this.target.scrollTop/(i.scrollHeight-l);return n.top=c*(l-n.height-u)+r.top+parseFloat(o.borderTopWidth),this.target===document.body&&(n.height=Math.max(n.height,24)),n}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(r,n){return void 0===this._cache&&(this._cache={}),void 0===this._cache[r]&&(this._cache[r]=n.call(this)),this._cache[r]}},{key:"enable",value:function(){var r=this,n=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&E(this.target,this.getClass("enabled")),E(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(n){n!==r.target.ownerDocument&&n.addEventListener("scroll",r.position)}),n&&this.position()}},{key:"disable",value:function(){var r=this;w(this.target,this.getClass("enabled")),w(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(n){n.removeEventListener("scroll",r.position)})}},{key:"destroy",value:function(){var r=this;this.disable(),R.forEach(function(n,i){n===r&&R.splice(i,1)}),0===R.length&&g()}},{key:"updateAttachClasses",value:function(r,n){var i=this;r=r||this.attachment,n=n||this.targetAttachment,void 0!==this._addAttachClasses&&this._addAttachClasses.length&&// we need to clean up after ourselves such that when the last defer gets
// ran it doesn't add any extra classes from previous calls.
this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var o=this._addAttachClasses;r.top&&o.push(this.getClass("element-attached")+"-"+r.top),r.left&&o.push(this.getClass("element-attached")+"-"+r.left),n.top&&o.push(this.getClass("target-attached")+"-"+n.top),n.left&&o.push(this.getClass("target-attached")+"-"+n.left);var a=[];["left","top","bottom","right","middle","center"].forEach(function(r){a.push(i.getClass("element-attached")+"-"+r),a.push(i.getClass("target-attached")+"-"+r)}),I(function(){void 0!==i._addAttachClasses&&(M(i.element,i._addAttachClasses,a),!1!==i.options.addTargetClasses&&M(i.target,i._addAttachClasses,a),delete i._addAttachClasses)})}},{key:"position",value:function(){var r=this,n=arguments.length<=0||void 0===arguments[0]||arguments[0];// flushChanges commits the changes immediately, leave true unless you are positioning multiple
// tethers (in which case call Tether.Utils.flush yourself when you're done)
if(this.enabled){this.clearCache();// Turn 'auto' attachments into the appropriate corner or edge
var i=U(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);var o=this.cache("element-bounds",function(){return y(r.element)}),a=o.width,s=o.height;if(0===a&&0===s&&void 0!==this.lastSize){var l=this.lastSize;// We cache the height and width to make it possible to position elements that are
// getting hidden.
a=l.width,s=l.height}else this.lastSize={width:a,height:s};var c=this.cache("target-bounds",function(){return r.getTargetBounds()}),h=H(q(this.attachment),{width:a,height:s}),d=H(q(i),c),f=H(this.offset,{width:a,height:s}),p=H(this.targetOffset,c);// Add the manually provided offset
h=$(h,f),d=$(d,p);for(var m=c.left+d.left-h.left,g=c.top+d.top-h.top,v=0;v<u.modules.length;++v){var x=u.modules[v].position.call(this,{left:m,top:g,targetAttachment:i,targetPos:c,elementPos:o,offset:h,targetOffset:d,manualOffset:f,manualTargetOffset:p,scrollbarSize:S,attachment:this.attachment});if(!1===x)return!1;void 0!==x&&"object"==typeof x&&(g=x.top,m=x.left)}// It's now our goal to make (element position + offset) == (target position + target offset)
var w={// It's position relative to the page (absolute positioning when
// the element is a child of the body)
page:{top:g,left:m},// It's position relative to the viewport (fixed positioning)
viewport:{top:g-pageYOffset,bottom:pageYOffset-g-s+innerHeight,left:m-pageXOffset,right:pageXOffset-m-a+innerWidth}},E=this.target.ownerDocument,C=E.defaultView,S=void 0;return C.innerHeight>E.documentElement.clientHeight&&(S=this.cache("scrollbar-size",b),w.viewport.bottom-=S.height),C.innerWidth>E.documentElement.clientWidth&&(S=this.cache("scrollbar-size",b),w.viewport.right-=S.width),(-1===["","static"].indexOf(E.body.style.position)||-1===["","static"].indexOf(E.body.parentElement.style.position))&&(// Absolute positioning in the body will be relative to the page, not the 'initial containing block'
w.page.bottom=E.body.scrollHeight-g-s,w.page.right=E.body.scrollWidth-m-a),void 0===this.options.optimizations||!1===this.options.optimizations.moveElement||void 0!==this.targetModifier||function(){var n=r.cache("target-offsetparent",function(){return _(r.target)}),i=r.cache("target-offsetparent-bounds",function(){return y(n)}),o=getComputedStyle(n),a={};if(["Top","Left","Bottom","Right"].forEach(function(r){a[r.toLowerCase()]=parseFloat(o["border"+r+"Width"])}),i.right=E.body.scrollWidth-i.left-i.width+a.right,i.bottom=E.body.scrollHeight-i.top-i.height+a.bottom,w.page.top>=i.top+a.top&&w.page.bottom>=i.bottom&&w.page.left>=i.left+a.left&&w.page.right>=i.right){// We're within the visible part of the target's scroll parent
var s=n.scrollTop,l=n.scrollLeft;// It's position relative to the target's offset parent (absolute positioning when
// the element is moved to be a child of the target's offset parent).
w.offset={top:w.page.top-i.top+s-a.top,left:w.page.left-i.left+l-a.left}}}(),// We could also travel up the DOM and try each containing context, rather than only
// looking at the body, but we're gonna get diminishing returns.
this.move(w),this.history.unshift(w),this.history.length>3&&this.history.pop(),n&&L(),!0}}},{key:"move",value:function(r){var n=this;if(void 0!==this.element.parentNode){var i={};for(var o in r)for(var a in i[o]={},r[o]){for(var s=!1,l=0;l<this.history.length;++l){var u=this.history[l];if(void 0!==u[o]&&!function(r,n){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return r+i>=n&&n>=r-i}(u[o][a],r[o][a])){s=!0;break}}s||(i[o][a]=!0)}var c={top:"",left:"",right:"",bottom:""},h=function(r,i){if(!1!==(void 0!==n.options.optimizations?n.options.optimizations.gpu:null)){var o=void 0,a=void 0;r.top?(c.top=0,o=i.top):(c.bottom=0,o=-i.bottom),r.left?(c.left=0,a=i.left):(c.right=0,a=-i.right),"number"==typeof window.devicePixelRatio&&devicePixelRatio%1==0&&(a=Math.round(a*devicePixelRatio)/devicePixelRatio,o=Math.round(o*devicePixelRatio)/devicePixelRatio),c[D]="translateX("+a+"px) translateY("+o+"px)","msTransform"!==D&&// but IE9 doesn't support 3d transforms and will choke.
(c[D]+=" translateZ(0)")}else r.top?c.top=i.top+"px":c.bottom=i.bottom+"px",r.left?c.left=i.left+"px":c.right=i.right+"px"},d=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(c.position="absolute",h(i.page,r.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(c.position="fixed",h(i.viewport,r.viewport)):void 0!==i.offset&&i.offset.top&&i.offset.left?(c.position="absolute",f=n.cache("target-offsetparent",function(){return _(n.target)}),_(n.element)!==f&&I(function(){n.element.parentNode.removeChild(n.element),f.appendChild(n.element)}),h(i.offset,r.offset),d=!0):(c.position="absolute",h({top:!0,left:!0},r.page)),!d){if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var f,p,m,g=!0,y=this.element.parentNode;y&&1===y.nodeType&&"BODY"!==y.tagName&&((m=(p=y).ownerDocument).fullscreenElement||m.webkitFullscreenElement||m.mozFullScreenElement||m.msFullscreenElement)!==p;){if("static"!==getComputedStyle(y).position){g=!1;break}y=y.parentNode}g||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}}// Any css change will trigger a repaint, so let's avoid one if nothing changed
var v={},b=!1;for(var a in c){var w=c[a];this.element.style[a]!==w&&(b=!0,v[a]=w)}b&&I(function(){x(n.element.style,v),n.trigger("repositioned")})}}}]),n}(A);G.modules=[],u.position=F;var W=x(G,u),z=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,n){var i=[],o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done)&&(i.push(l.value),!n||i.length!==n);o=!0);}catch(r){a=!0,s=r}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return i}(r,n);throw TypeError("Invalid attempt to destructure non-iterable instance")},O=u.Utils,y=O.getBounds,x=O.extend,M=O.updateClasses,I=O.defer,X=["left","top","right","bottom"];u.modules.push({position:function(r){var n=this,i=r.top,o=r.left,a=r.targetAttachment;if(!this.options.constraints)return!0;var s=this.cache("element-bounds",function(){return y(n.element)}),l=s.height,u=s.width;if(0===u&&0===l&&void 0!==this.lastSize){var c=this.lastSize;// Handle the item getting hidden as a result of our positioning without glitching
// the classes in and out
u=c.width,l=c.height}var h=this.cache("target-bounds",function(){return n.getTargetBounds()}),d=h.height,f=h.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(r){var n=r.outOfBoundsClass,i=r.pinnedClass;n&&p.push(n),i&&p.push(i)}),p.forEach(function(r){["left","top","right","bottom"].forEach(function(n){p.push(r+"-"+n)})});var m=[],g=x({},a),_=x({},this.attachment);return this.options.constraints.forEach(function(r){var s,c,h,p=r.to,v=r.attachment,b=r.pin;void 0===v&&(v="");var x=void 0,w=void 0;if(v.indexOf(" ")>=0){var E=v.split(" "),C=z(E,2);w=C[0],x=C[1]}else x=w=v;var S=("scrollParent"===(s=p)?s=n.scrollParents[0]:"window"===s&&(s=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),s===document&&(s=s.documentElement),void 0!==s.nodeType&&function(){var r=s,n=y(s),i=getComputedStyle(s);// Account any parent Frames scroll offset
if(s=[n.left,n.top,n.width+n.left,n.height+n.top],r.ownerDocument!==document){var o=r.ownerDocument.defaultView;s[0]+=o.pageXOffset,s[1]+=o.pageYOffset,s[2]+=o.pageXOffset,s[3]+=o.pageYOffset}X.forEach(function(r,n){"Top"===(r=r[0].toUpperCase()+r.substr(1))||"Left"===r?s[n]+=parseFloat(i["border"+r+"Width"]):s[n]-=parseFloat(i["border"+r+"Width"])})}(),s);("target"===w||"both"===w)&&(i<S[1]&&"top"===g.top&&(i+=d,g.top="bottom"),i+l>S[3]&&"bottom"===g.top&&(i-=d,g.top="top")),"together"===w&&("top"===g.top&&("bottom"===_.top&&i<S[1]?(i+=d,g.top="bottom",i+=l,_.top="top"):"top"===_.top&&i+l>S[3]&&i-(l-d)>=S[1]&&(i-=l-d,g.top="bottom",_.top="bottom")),"bottom"===g.top&&("top"===_.top&&i+l>S[3]?(i-=d,g.top="top",i-=l,_.top="bottom"):"bottom"===_.top&&i<S[1]&&i+(2*l-d)<=S[3]&&(i+=l-d,g.top="top",_.top="top")),"middle"===g.top&&(i+l>S[3]&&"top"===_.top?(i-=l,_.top="bottom"):i<S[1]&&"bottom"===_.top&&(i+=l,_.top="top"))),("target"===x||"both"===x)&&(o<S[0]&&"left"===g.left&&(o+=f,g.left="right"),o+u>S[2]&&"right"===g.left&&(o-=f,g.left="left")),"together"===x&&(o<S[0]&&"left"===g.left?"right"===_.left?(o+=f,g.left="right",o+=u,_.left="left"):"left"===_.left&&(o+=f,g.left="right",o-=u,_.left="right"):o+u>S[2]&&"right"===g.left?"left"===_.left?(o-=f,g.left="left",o-=u,_.left="right"):"right"===_.left&&(o-=f,g.left="left",o+=u,_.left="left"):"center"===g.left&&(o+u>S[2]&&"left"===_.left?(o-=u,_.left="right"):o<S[0]&&"right"===_.left&&(o+=u,_.left="left"))),("element"===w||"both"===w)&&(i<S[1]&&"bottom"===_.top&&(i+=l,_.top="top"),i+l>S[3]&&"top"===_.top&&(i-=l,_.top="bottom")),("element"===x||"both"===x)&&(o<S[0]&&("right"===_.left?(o+=u,_.left="left"):"center"===_.left&&(o+=u/2,_.left="left")),o+u>S[2]&&("left"===_.left?(o-=u,_.left="right"):"center"===_.left&&(o-=u/2,_.left="right"))),"string"==typeof b?b=b.split(",").map(function(r){return r.trim()}):!0===b&&(b=["top","left","right","bottom"]),b=b||[];var T=[],M=[];i<S[1]&&(b.indexOf("top")>=0?(i=S[1],T.push("top")):M.push("top")),i+l>S[3]&&(b.indexOf("bottom")>=0?(i=S[3]-l,T.push("bottom")):M.push("bottom")),o<S[0]&&(b.indexOf("left")>=0?(o=S[0],T.push("left")):M.push("left")),o+u>S[2]&&(b.indexOf("right")>=0?(o=S[2]-u,T.push("right")):M.push("right")),T.length&&(c=void 0,c=void 0!==n.options.pinnedClass?n.options.pinnedClass:n.getClass("pinned"),m.push(c),T.forEach(function(r){m.push(c+"-"+r)})),M.length&&(h=void 0,h=void 0!==n.options.outOfBoundsClass?n.options.outOfBoundsClass:n.getClass("out-of-bounds"),m.push(h),M.forEach(function(r){m.push(h+"-"+r)})),(T.indexOf("left")>=0||T.indexOf("right")>=0)&&(_.left=g.left=!1),(T.indexOf("top")>=0||T.indexOf("bottom")>=0)&&(_.top=g.top=!1),(g.top!==a.top||g.left!==a.left||_.top!==n.attachment.top||_.left!==n.attachment.left)&&(n.updateAttachClasses(_,g),n.trigger("update",{attachment:_,targetAttachment:g}))}),I(function(){!1!==n.options.addTargetClasses&&M(n.target,m,p),M(n.element,m,p)}),{top:i,left:o}}});var O=u.Utils,y=O.getBounds,M=O.updateClasses,I=O.defer;u.modules.push({position:function(r){var n=this,i=r.top,o=r.left,a=this.cache("element-bounds",function(){return y(n.element)}),s=a.height,l=a.width,u=this.getTargetBounds(),c=i+s,h=o+l,d=[];i<=u.bottom&&c>=u.top&&["left","right"].forEach(function(r){var n=u[r];(n===o||n===h)&&d.push(r)}),o<=u.right&&h>=u.left&&["top","bottom"].forEach(function(r){var n=u[r];(n===i||n===c)&&d.push(r)});var f=[],p=[];return f.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(r){f.push(n.getClass("abutted")+"-"+r)}),d.length&&p.push(this.getClass("abutted")),d.forEach(function(r){p.push(n.getClass("abutted")+"-"+r)}),I(function(){!1!==n.options.addTargetClasses&&M(n.target,p,f),M(n.element,p,f)}),!0}});var z=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,n){var i=[],o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done)&&(i.push(l.value),!n||i.length!==n);o=!0);}catch(r){a=!0,s=r}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return i}(r,n);throw TypeError("Invalid attempt to destructure non-iterable instance")};return u.modules.push({position:function(r){var n=r.top,i=r.left;if(this.options.shift){var o=this.options.shift;"function"==typeof this.options.shift&&(o=this.options.shift.call(this,{top:n,left:i}));var a=void 0,s=void 0;if("string"==typeof o){(o=o.split(" "))[1]=o[1]||o[0];var l=z(o,2);a=l[0],s=l[1],a=parseFloat(a,10),s=parseFloat(s,10)}else a=o.top,s=o.left;return{top:n+=a,left:i+=s}}}}),W}(),Object.defineProperty(u1,"__esModule",{value:!0}),u1.default=void 0;var u4=function(r){if(r&&r.__esModule)return r;var n={};if(null!=r){for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,i):{};o.get||o.set?Object.defineProperty(n,i,o):n[i]=r[i]}}return n.default=r,n}(/*@__PURE__*/eE(eI)),u3=u8(/*@__PURE__*/eE(aD)),u5=u8(/*@__PURE__*/eE(ek)),u6=u8(u2.exports);function u8(r){return r&&r.__esModule?r:{default:r}}function u9(r){return(u9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function u7(r){return function(r){if(Array.isArray(r)){for(var n=0,i=Array(r.length);n<r.length;n++)i[n]=r[n];return i}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}function ce(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function ct(r){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function cr(r,n){return(cr=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}function cn(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ci(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}u6.default||console.error("It looks like Tether has not been included. Please load this dependency first https://github.com/HubSpot/tether");var co=[u3.default.string,u3.default.shape({appendChild:u3.default.func.isRequired})],ca=["auto auto","top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],cs=/*#__PURE__*/function(r){var n,i;function o(){!function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,o);for(var r,n,i,a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=(r=(n=ct(o)).call.apply(n,[this].concat(s)))&&("object"===u9(r)||"function"==typeof r)?r:cn(this),ci(cn(cn(i)),"_targetNode",u4.default.createRef()),ci(cn(cn(i)),"_elementNode",u4.default.createRef()),ci(cn(cn(i)),"_elementParentNode",null),ci(cn(cn(i)),"_tetherInstance",null),i}return!function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&cr(r,n)}(o,r),n=[{key:"componentDidMount",value:function(){this._createContainer(),// so we need to force an update to
// enable tether
// Cannot move _createContainer into the constructor
// because of is a side effect: https://reactjs.org/docs/strict-mode.html#detecting-unexpected-side-effects
this.forceUpdate()}},{key:"componentDidUpdate",value:function(r){// Verify if className props have changed
if((r.renderElementTag!==this.props.renderElementTag||r.renderElementTo!==this.props.renderElementTo)&&this._createContainer(),this._elementParentNode&&r.className!==this.props.className){// Add a bunch of checks against weird classNames
var n,i,o=(r.className||"").split(" ").filter(function(r){return r.length>0}),a=(this.props.className||"").split(" ").filter(function(r){return r.length>0});(n=this._elementParentNode.classList).remove.apply(n,u7(o)),(i=this._elementParentNode.classList).add.apply(i,u7(a))}this._update()}},{key:"componentWillUnmount",value:function(){this._destroy()}},{key:"getTetherInstance",value:function(){return this._tetherInstance}},{key:"disable",value:function(){this._tetherInstance.disable()}},{key:"enable",value:function(){this._tetherInstance.enable()}},{key:"on",value:function(r,n,i){this._tetherInstance.on(r,n,i)}},{key:"once",value:function(r,n,i){this._tetherInstance.once(r,n,i)}},{key:"off",value:function(r,n){this._tetherInstance.off(r,n)}},{key:"position",value:function(){this._tetherInstance.position()}},{key:"_runRenders",value:function(){// To obtain the components, we run the render functions and pass in the ref
// Later, when the component is mounted, the ref functions will be called
// and trigger a tether update
var r="function"==typeof this.props.renderTarget?this.props.renderTarget(this._targetNode):null,n="function"==typeof this.props.renderElement?this.props.renderElement(this._elementNode):null;return(0,u4.isValidElement)(r)||(r=null),(0,u4.isValidElement)(n)||(n=null),{targetComponent:r,elementComponent:n}}},{key:"_createTetherInstance",value:function(r){this._tetherInstance&&this._destroy(),this._tetherInstance=new u6.default(r),this._registerEventListeners()}},{key:"_destroyTetherInstance",value:function(){this._tetherInstance&&(this._tetherInstance.destroy(),this._tetherInstance=null)}},{key:"_registerEventListeners",value:function(){var r=this;this.on("update",function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return r.props.onUpdate&&r.props.onUpdate.apply(r,i)}),this.on("repositioned",function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return r.props.onRepositioned&&r.props.onRepositioned.apply(r,i)})}},{key:"_destroy",value:function(){this._destroyTetherInstance(),this._removeContainer()}},{key:"_createContainer",value:function(){// Create element node container if it hasn't been yet
this._removeContainer();var r=this.props,n=r.renderElementTag,i=r.className;// Create a node that we can stick our content Component in
this._elementParentNode=document.createElement(n),this._elementParentNode.className=i||""}},{key:"_addContainerToDOM",value:function(){this._elementParentNode.parentNode!==this._renderNode&&this._renderNode.appendChild(this._elementParentNode)}},{key:"_removeContainer",value:function(){this._elementParentNode&&this._elementParentNode.parentNode&&this._elementParentNode.parentNode.removeChild(this._elementParentNode)}},{key:"_update",value:function(){if(!this._elementNode.current||!this._targetNode.current){// Destroy Tether element if it has been created
this._destroy();return}this._updateTether()}},{key:"_updateTether",value:function(){var r=this.props;r.children,r.renderElementTag,r.renderElementTo;var n=r.id;r.className;var i=r.style;r.renderTarget,r.renderElement;var o=function(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}(r,["children","renderElementTag","renderElementTo","id","className","style","renderTarget","renderElement"]),a=function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),o.forEach(function(n){ci(r,n,i[n])})}return r}({target:this._targetNode.current,element:this._elementParentNode},o),s=n||"";if(this._elementParentNode.id!==s&&(this._elementParentNode.id=s),i){var l=this._elementParentNode.style;Object.keys(i).forEach(function(r){l[r]!==i[r]&&(l[r]=i[r])})}this._addContainerToDOM(),this._tetherInstance?this._tetherInstance.setOptions(a):this._createTetherInstance(a),this._tetherInstance.position()}},{key:"render",value:function(){var r=this._runRenders(),n=r.targetComponent,i=r.elementComponent;return n?u4.default.createElement(u4.default.Fragment,null,n,i&&this._elementParentNode&&u5.default.createPortal(i,this._elementParentNode)):null}},{key:"_renderNode",get:function(){var r=this.props.renderElementTo;return"string"==typeof r?document.querySelector(r):r||document.body}}],ce(o.prototype,n),i&&ce(o,i),o}(u4.Component);ci(cs,"propTypes",{renderElementTag:u3.default.string,renderElementTo:u3.default.oneOfType(co),attachment:u3.default.oneOf(ca).isRequired,targetAttachment:u3.default.oneOf(ca),offset:u3.default.string,targetOffset:u3.default.string,targetModifier:u3.default.string,enabled:u3.default.bool,classes:u3.default.object,classPrefix:u3.default.string,optimizations:u3.default.object,constraints:u3.default.array,id:u3.default.string,className:u3.default.string,style:u3.default.object,onUpdate:u3.default.func,onRepositioned:u3.default.func,renderTarget:u3.default.func,renderElement:u3.default.func,children:function(r,n,i){var o=r.children;if(u4.Children.count(o)>0)return Error("".concat(i," no longer uses children to render components. Please use renderTarget and renderElement instead."))}}),ci(cs,"defaultProps",{renderElementTag:"div",renderElementTo:null}),u1.default=cs,Object.defineProperty(u0,"__esModule",{value:!0}),Object.defineProperty(u0,"default",{enumerable:!0,get:function(){return u.default}}),u=u1&&u1.__esModule?u1:{default:u1};var cl=u0&&u0.__esModule&&Object.prototype.hasOwnProperty.call(u0,"default")?u0.default:u0;function cu(){return(cu=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}function cc(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}function ch(r,n){return(ch=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}function cd(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,ch(r,n)}function cf(r,n){return r.replace(RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var cp={disabled:!1},cm=/*@__PURE__*/eE(eI).createContext(null),cg="unmounted",cy="exited",c_="entering",cv="entered",cb="exiting",cx=/*#__PURE__*/function(r){function n(n,i){o=r.call(this,n,i)||this;var o,a,s=i&&!i.isMounting?n.enter:n.appear;return o.appearStatus=null,n.in?s?(a=cy,o.appearStatus=c_):a=cv:a=n.unmountOnExit||n.mountOnEnter?cg:cy,o.state={status:a},o.nextCallback=null,o}cd(n,r),n.getDerivedStateFromProps=function(r,n){return r.in&&n.status===cg?{status:cy}:null}// getSnapshotBeforeUpdate(prevProps) {
;var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(r){var n=null;if(r!==this.props){var i=this.state.status;this.props.in?i!==c_&&i!==cv&&(n=c_):(i===c_||i===cv)&&(n=cb)}this.updateStatus(!1,n)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var r,n,i,o=this.props.timeout;return r=n=i=o,null!=o&&"number"!=typeof o&&(r=o.exit,n=o.enter,i=void 0!==o.appear?o.appear:n),{exit:r,enter:n,appear:i}},i.updateStatus=function(r,n){void 0===r&&(r=!1),null!==n?(// nextStatus will always be ENTERING or EXITING.
this.cancelNextCallback(),n===c_?this.performEnter(r):this.performExit()):this.props.unmountOnExit&&this.state.status===cy&&this.setState({status:cg})},i.performEnter=function(r){var n=this,i=this.props.enter,o=this.context?this.context.isMounting:r,a=this.props.nodeRef?[o]:[/*@__PURE__*/eE(ek).findDOMNode(this),o],s=a[0],l=a[1],u=this.getTimeouts(),c=o?u.appear:u.enter;// if we are mounting and running this it means appear _must_ be set
if(!r&&!i||cp.disabled){this.safeSetState({status:cv},function(){n.props.onEntered(s)});return}this.props.onEnter(s,l),this.safeSetState({status:c_},function(){n.props.onEntering(s,l),n.onTransitionEnd(c,function(){n.safeSetState({status:cv},function(){n.props.onEntered(s,l)})})})},i.performExit=function(){var r=this,n=this.props.exit,i=this.getTimeouts(),o=this.props.nodeRef?void 0:/*@__PURE__*/eE(ek).findDOMNode(this);if(!n||cp.disabled){this.safeSetState({status:cy},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:cb},function(){r.props.onExiting(o),r.onTransitionEnd(i.exit,function(){r.safeSetState({status:cy},function(){r.props.onExited(o)})})})},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(r,n){// This shouldn't be necessary, but there are weird race conditions with
// setState callbacks and unmounting in testing, so always make sure that
// we can cancel any pending setState callbacks after we unmount.
n=this.setNextCallback(n),this.setState(r,n)},i.setNextCallback=function(r){var n=this,i=!0;return this.nextCallback=function(o){i&&(i=!1,n.nextCallback=null,r(o))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(r,n){this.setNextCallback(n);var i=this.props.nodeRef?this.props.nodeRef.current:/*@__PURE__*/eE(ek).findDOMNode(this),o=null==r&&!this.props.addEndListener;if(!i||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],s=a[0],l=a[1];this.props.addEndListener(s,l)}null!=r&&setTimeout(this.nextCallback,r)},i.render=function(){var r=this.state.status;if(r===cg)return null;var n=this.props,i=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var o=cc(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return /*@__PURE__*/eE(eI).createElement(cm.Provider,{value:null},"function"==typeof i?i(r,o):/*@__PURE__*/eE(eI).cloneElement(/*@__PURE__*/eE(eI).Children.only(i),o))},n}(/*@__PURE__*/eE(eI).Component);function cw(){}cx.contextType=cm,cx.propTypes={},cx.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:cw,onEntering:cw,onEntered:cw,onExit:cw,onExiting:cw,onExited:cw},cx.UNMOUNTED=cg,cx.EXITED=cy,cx.ENTERING=c_,cx.ENTERED=cv,cx.EXITING=cb;var cE=function(r,n){return r&&n&&n.split(" ").forEach(function(n){r.classList?r.classList.remove(n):"string"==typeof r.className?r.className=cf(r.className,n):r.setAttribute("class",cf(r.className&&r.className.baseVal||"",n))})},cC=/*#__PURE__*/function(r){function n(){for(var n,i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=r.call.apply(r,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(r,i){var o=n.resolveArguments(r,i),a=o[0],s=o[1];n.removeClasses(a,"exit"),n.addClass(a,s?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(r,i)},n.onEntering=function(r,i){var o=n.resolveArguments(r,i),a=o[0],s=o[1];n.addClass(a,s?"appear":"enter","active"),n.props.onEntering&&n.props.onEntering(r,i)},n.onEntered=function(r,i){var o=n.resolveArguments(r,i),a=o[0],s=o[1]?"appear":"enter";n.removeClasses(a,s),n.addClass(a,s,"done"),n.props.onEntered&&n.props.onEntered(r,i)},n.onExit=function(r){var i=n.resolveArguments(r)[0];n.removeClasses(i,"appear"),n.removeClasses(i,"enter"),n.addClass(i,"exit","base"),n.props.onExit&&n.props.onExit(r)},n.onExiting=function(r){var i=n.resolveArguments(r)[0];n.addClass(i,"exit","active"),n.props.onExiting&&n.props.onExiting(r)},n.onExited=function(r){var i=n.resolveArguments(r)[0];n.removeClasses(i,"exit"),n.addClass(i,"exit","done"),n.props.onExited&&n.props.onExited(r)},n.resolveArguments=function(r,i){return n.props.nodeRef?[n.props.nodeRef.current,r]// here `maybeNode` is actually `appearing`
:[r,i]},n.getClassNames=function(r){var i=n.props.classNames,o="string"==typeof i,a=o?(o&&i?i+"-":"")+r:i[r],s=o?a+"-active":i[r+"Active"],l=o?a+"-done":i[r+"Done"];return{baseClassName:a,activeClassName:s,doneClassName:l}},n}cd(n,r);var i=n.prototype;return i.addClass=function(r,n,i){var o,a=this.getClassNames(n)[i+"ClassName"],s=this.getClassNames("enter").doneClassName;"appear"===n&&"done"===i&&s&&(a+=" "+s),"active"===i&&/* eslint-disable no-unused-expressions */r&&r.scrollTop,a&&(this.appliedClasses[n][i]=a,o=a,r&&o&&o.split(" ").forEach(function(n){var i,o;return i=r,o=n,void(i.classList?i.classList.add(o):(i.classList?o&&i.classList.contains(o):-1!==(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+o+" "))||("string"==typeof i.className?i.className=i.className+" "+o:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+o)))}))},i.removeClasses=function(r,n){var i=this.appliedClasses[n],o=i.base,a=i.active,s=i.done;this.appliedClasses[n]={},o&&cE(r,o),a&&cE(r,a),s&&cE(r,s)},i.render=function(){var r=this.props;r.classNames;var n=cc(r,["classNames"]);return /*@__PURE__*/eE(eI).createElement(cx,cu({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(/*@__PURE__*/eE(eI).Component);function cS(r){return(cS=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function cT(r,n,i){return(cT=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}()?function(r,n,i){var o=[null];o.push.apply(o,n);var a=new(Function.bind.apply(r,o));return i&&ch(a,i.prototype),a}:Reflect.construct).apply(null,arguments)}function cM(r){var n="function"==typeof Map?new Map:void 0;return(cM=function(r){if(null===r||-1===Function.toString.call(r).indexOf("[native code]"))return r;if("function"!=typeof r)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return cT(r,arguments,cS(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ch(i,r)})(r)}cC.defaultProps={classNames:""},cC.propTypes={};/**
 * Create an error file out of errors.md for development and a simple web link to the full errors
 * in production mode.
 * @private
 */var ck=/*#__PURE__*/function(r){function n(n){return function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this)}return cd(n,r),n}(/*#__PURE__*/cM(Error));function cI(r){return Math.round(255*r)}function cL(r,n,i){return cI(r)+","+cI(n)+","+cI(i)}function cA(r,n,i,o){if(void 0===o&&(o=cL),0===n)return o(i,i,i);// formulae from https://en.wikipedia.org/wiki/HSL_and_HSV
var a=(r%360+360)%360/60,s=(1-Math.abs(2*i-1))*n,l=s*(1-Math.abs(a%2-1)),u=0,c=0,h=0;a>=0&&a<1?(u=s,c=l):a>=1&&a<2?(u=l,c=s):a>=2&&a<3?(c=s,h=l):a>=3&&a<4?(c=l,h=s):a>=4&&a<5?(u=l,h=s):a>=5&&a<6&&(u=s,h=l);var d=i-s/2;return o(u+d,c+d,h+d)}var cz={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},cP=/^#[a-fA-F0-9]{6}$/,cO=/^#[a-fA-F0-9]{8}$/,cD=/^#[a-fA-F0-9]{3}$/,cR=/^#[a-fA-F0-9]{4}$/,cF=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,cB=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,cN=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,cj=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;/**
 * Returns an RgbColor or RgbaColor object. This utility function is only useful
 * if want to extract a color component. With the color util `toColorString` you
 * can convert a RgbColor or RgbaColor object back to a string.
 *
 * @example
 * // Assigns `{ red: 255, green: 0, blue: 0 }` to color1
 * const color1 = parseToRgb('rgb(255, 0, 0)');
 * // Assigns `{ red: 92, green: 102, blue: 112, alpha: 0.75 }` to color2
 * const color2 = parseToRgb('hsla(210, 10%, 40%, 0.75)');
 */function cV(r){if("string"!=typeof r)throw new ck(3);var n=/**
 * Checks if a string is a CSS named color and returns its equivalent hex value, otherwise returns the original color.
 * @private
 */function(r){if("string"!=typeof r)return r;var n=r.toLowerCase();return cz[n]?"#"+cz[n]:r}(r);if(n.match(cP))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(cO)){var i=parseFloat((parseInt(""+n[7]+n[8],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16),alpha:i}}if(n.match(cD))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};if(n.match(cR)){var o=parseFloat((parseInt(""+n[4]+n[4],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16),alpha:o}}var a=cF.exec(n);if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10)};var s=cB.exec(n.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])};var l=cN.exec(n);if(l){var u="rgb("+cA(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",c=cF.exec(u);if(!c)throw new ck(4,n,u);return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)}}var h=cj.exec(n.substring(0,50));if(h){var d="rgb("+cA(parseInt(""+h[1],10),parseInt(""+h[2],10)/100,parseInt(""+h[3],10)/100)+")",f=cF.exec(d);if(!f)throw new ck(4,n,d);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10),alpha:parseFloat(""+h[4])}}throw new ck(5)}/**
 * Reduces hex values if possible e.g. #ff8866 to #f86
 * @private
 */var cU=function(r){return 7===r.length&&r[1]===r[2]&&r[3]===r[4]&&r[5]===r[6]?"#"+r[1]+r[3]+r[5]:r};function cq(r){var n=r.toString(16);return 1===n.length?"0"+n:n}/**
 * Returns a string value for the color. The returned result is the smallest possible hex notation.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: rgb(255, 205, 100),
 *   background: rgb({ red: 255, green: 205, blue: 100 }),
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${rgb(255, 205, 100)};
 *   background: ${rgb({ red: 255, green: 205, blue: 100 })};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#ffcd64";
 *   background: "#ffcd64";
 * }
 */function c$(r,n,i){if("number"==typeof r&&"number"==typeof n&&"number"==typeof i)return cU("#"+cq(r)+cq(n)+cq(i));if("object"==typeof r&&void 0===n&&void 0===i)return cU("#"+cq(r.red)+cq(r.green)+cq(r.blue));throw new ck(6)}function cH(r){// eslint-disable-line no-redeclare
return(// Type definitions taken from https://github.com/gcanti/flow-static-land/blob/master/src/Fun.js
// eslint-disable-next-line no-unused-vars
// eslint-disable-next-line no-unused-vars
// eslint-disable-next-line no-redeclare
function r(n,i,o){return function(){// eslint-disable-next-line prefer-rest-params
var a=o.concat(Array.prototype.slice.call(arguments));return a.length>=i?n.apply(this,a):r(n,i,a)}}// eslint-disable-next-line no-redeclare
(r,r.length,[]))}var cZ=/*#__PURE__*/cH(/**
 * Mixes the two provided colors together by calculating the average of each of the RGB components weighted to the first color by the provided weight.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: mix(0.5, '#f00', '#00f')
 *   background: mix(0.25, '#f00', '#00f')
 *   background: mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${mix(0.5, '#f00', '#00f')};
 *   background: ${mix(0.25, '#f00', '#00f')};
 *   background: ${mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#7f007f";
 *   background: "#3f00bf";
 *   background: "rgba(63, 0, 191, 0.75)";
 * }
 */function(r,n,i){if("transparent"===n)return i;if("transparent"===i)return n;if(0===r)return i;var o=cV(n),a=cu({},o,{alpha:"number"==typeof o.alpha?o.alpha:1}),s=cV(i),l=cu({},s,{alpha:"number"==typeof s.alpha?s.alpha:1}),u=a.alpha-l.alpha,c=2*parseFloat(r)-1,h=((c*u==-1?c:c+u)/(1+c*u)+1)/2,d=1-h;return(/**
 * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.
 *
 * Can also be used to fade a color by passing a hex value or named CSS color along with an alpha value.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: rgba(255, 205, 100, 0.7),
 *   background: rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 }),
 *   background: rgba(255, 205, 100, 1),
 *   background: rgba('#ffffff', 0.4),
 *   background: rgba('black', 0.7),
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${rgba(255, 205, 100, 0.7)};
 *   background: ${rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 })};
 *   background: ${rgba(255, 205, 100, 1)};
 *   background: ${rgba('#ffffff', 0.4)};
 *   background: ${rgba('black', 0.7)};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "rgba(255,205,100,0.7)";
 *   background: "rgba(255,205,100,0.7)";
 *   background: "#ffcd64";
 *   background: "rgba(255,255,255,0.4)";
 *   background: "rgba(0,0,0,0.7)";
 * }
 */function(r,n,i,o){if("string"==typeof r&&"number"==typeof n){var a=cV(r);return"rgba("+a.red+","+a.green+","+a.blue+","+n+")"}if("number"==typeof r&&"number"==typeof n&&"number"==typeof i&&"number"==typeof o)return o>=1?c$(r,n,i):"rgba("+r+","+n+","+i+","+o+")";if("object"==typeof r&&void 0===n&&void 0===i&&void 0===o)return r.alpha>=1?c$(r.red,r.green,r.blue):"rgba("+r.red+","+r.green+","+r.blue+","+r.alpha+")";throw new ck(7)}({red:Math.floor(a.red*h+l.red*d),green:Math.floor(a.green*h+l.green*d),blue:Math.floor(a.blue*h+l.blue*d),alpha:a.alpha*(parseFloat(r)/1)+l.alpha*(1-parseFloat(r)/1)}))}// prettier-ignore
),cG=lV(/*#__PURE__*/cH(/**
 * Tints a color by mixing it with white. `tint` can produce
 * hue shifts, where as `lighten` manipulates the luminance channel and therefore
 * doesn't produce hue shifts.
 *
 * @example
 * // Styles as object usage
 * const styles = {
 *   background: tint(0.25, '#00f')
 * }
 *
 * // styled-components usage
 * const div = styled.div`
 *   background: ${tint(0.25, '#00f')};
 * `
 *
 * // CSS in JS Output
 *
 * element {
 *   background: "#bfbfff";
 * }
 */function(r,n){return"transparent"===n?n:cZ(parseFloat(r),"rgb(255, 255, 255)",n)}// prettier-ignore
)),cW={up:{start:function(){return rt(ea||(ea=uK(["\n      opacity: 0;\n      transform: translate(0, ",");\n    "])),lU())},end:function(){return rt(es||(es=uK(["\n      opacity: 1;\n      transform: translate(0, ",");\n    "])),lU(-1))}},down:{start:function(){return rt(el||(el=uK(["\n      opacity: 0;\n      transform: translate(0, ",");\n    "])),lU(-1))},end:function(){return rt(eu||(eu=uK(["\n      opacity: 1;\n      transform: translate(0, ",");\n    "])),lU())}},left:{start:function(){return rt(ec||(ec=uK(["\n      opacity: 0;\n      transform: translate(",", 0);\n    "])),lU())},end:function(){return rt(eh||(eh=uK(["\n      opacity: 1;\n      transform: translate(",", 0);\n    "])),lU(-1))}},right:{start:function(){return rt(ed||(ed=uK(["\n      opacity: 0;\n      transform: translate(",", 0);\n    "])),lU(-1))},end:function(){return rt(ef||(ef=uK(["\n      opacity: 1;\n      transform: translate(",", 0);\n    "])),lU())}}},cX=rd.div.withConfig({displayName:"styled__DropContent",componentId:"sc-cioebn-0"})(["background:",";border-radius:",";box-shadow:0 0 0 1px ",",",";position:relative;z-index:1000;width:100vw;max-width:14rem;padding:",";text-align:left;color:",";transition:opacity 0.16s ease,transform 0.16s ease;.tether-target-attached-top.tether-element-attached-bottom &{"," &.drop-trans-exit{","}&.drop-trans-exit-active{","}}.tether-target-attached-bottom.tether-element-attached-top &{"," &.drop-trans-exit{","}&.drop-trans-exit-active{","}}.tether-target-attached-right.tether-element-attached-left &{"," &.drop-trans-exit{","}&.drop-trans-exit-active{","}}.tether-target-attached-left.tether-element-attached-right &{"," &.drop-trans-exit{","}&.drop-trans-exit-active{","}}&&.drop-trans-appear,&&.drop-trans-enter{","}&&.drop-trans-enter-active,&&.drop-trans-appear-active{","}&&.drop-trans-exit{","}&&.drop-trans-exit-active{","}"],lj("color.surface"),lj("shape.rounded"),lj("color.base-100a"),lj("boxShadow.elevationD"),lU(),lj("type.base.color"),cW.up.end,cW.up.end,cW.up.start,cW.down.end,cW.down.end,cW.down.start,cW.right.end,cW.right.end,cW.right.start,cW.left.end,cW.left.end,cW.left.start,function(r){return cW[r.direction].start},function(r){return cW[r.direction].end},function(r){return cW[r.direction].end},function(r){return cW[r.direction].start});rd(uH).attrs(function(r){return{as:r.as||"h6"}}).withConfig({displayName:"styled__DropTitle",componentId:"sc-cioebn-1"})(["margin:",";"],lU(0,0,1,0));var cY=rd.ul.withConfig({displayName:"styled__DropMenu",componentId:"sc-cioebn-2"})(["list-style:none;margin:",";box-shadow:0 "," 0 0 ",";padding:",";min-width:12rem;font-family:",";font-weight:",";&:last-child{margin-bottom:",";box-shadow:none;}"],lU(-1,-1,1,-1),lj("layout.border"),lj("color.base-100a"),lU(.5,0),lj("type.base.family"),lj("type.base.bold"),lU(-1)),cK=rd.a.withConfig({displayName:"styled__DropMenuItem",componentId:"sc-cioebn-3"})(["position:relative;display:flex;gap:",";align-items:center;padding:",";color:",";text-decoration:none;transition:all 0.16s ease 0s;&:visited{color:inherit;}&:hover,&:focus{color:",";background-color:",";opacity:1;}"," ",""],lU(.5),lU(.25,1),lj("type.base.color"),lj("color.link"),lq(lj("color.link"),.12),function(r){return r.active&&rt(ep||(ep=uK(["\n      &,\n      &:visited {\n        background-color: ",";\n        color: ",";\n      }\n\n      &::before {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 0.25rem;\n        height: 100%;\n        background: ",";\n        content: '';\n        pointer-events: none;\n      }\n    "])),lq(lj("color.link"),.08),lj("color.link"),lj("color.link"))},function(r){return r.disabled&&rt(em||(em=uK(["\n      ",";\n    "])),l8())});rd.div.withConfig({displayName:"styled__DropInset",componentId:"sc-cioebn-4"})(["background:",";color:",";box-shadow:inset 0 "," 0 0 ",",inset 0 -"," 0 0 ",";margin:",";padding:",";&:first-child{box-shadow:inset 0 -"," 0 0 ",";}&:last-child{margin-bottom:",";box-shadow:inset 0 "," 0 0 ",";border-radius:0 0 "," ",";}&:only-child{box-shadow:none;}> *:first-child{margin-top:0;}> *:last-child{margin-bottom:0;}"],lj("color.base-50"),cG(.32,lj("type.base.color")),lj("layout.border"),lj("color.base-100a"),lj("layout.border"),lj("color.base-100a"),lU(-1,-1,1,-1),lU(),lj("layout.border"),lj("color.base-100a"),lU(-1),lj("layout.border"),lj("color.base-100a"),lj("shape.rounded"),lj("shape.rounded"));var cJ=["direction","alignment","id","className","onChange","triggerElement","children"],cQ=["onChange"],c0=function(r,n){var i;if("up"===r||"down"===r)i=["left","center","right"];else if("left"===r||"right"===r)i=["top","middle","bottom"];else throw Error('Dropdown: direction "'.concat(r,'" is not supported. Use one of: up, down, left, right'));if(-1===i.indexOf(n))throw Error('Dropdown: alignment "'.concat(n,'" is not supported when direction is ').concat(r,". Use one of: ").concat(i.join(", ")));// The attachments are returned as an array:
// [tetherAttachment, tetherTargetAttachment]
switch(r){case"up":return["bottom ".concat(n),"top ".concat(n)];case"down":return["top ".concat(n),"bottom ".concat(n)];case"right":return["".concat(n," left"),"".concat(n," right")];case"left":return["".concat(n," right"),"".concat(n," left")]}},c1=[],c2=function(r,n){do{// If the click is released outside the view port, the el will be
// HTMLDocument and won't have hasAttribute method.
if(r&&r.hasAttribute&&n(r))return r;r=r.parentNode;// eslint-disable-line
}while(r&&"BODY"!==r.tagName&&"HTML"!==r.tagName)return null},c4=function(r,n){(0,eI.useEffect)(function(){// Abort in case of SSR.
if("undefined"!=typeof window){var i=function(i){var o=i.target,a=c2(o,function(r){return"click.close"===r.getAttribute("data-dropdown")});// Closer as in an element that can close the dropdown.
if("BODY"===o.tagName||"HTML"===o.tagName||a)// closing the dropdown.
return n(!1);// The closest instance is the closest parent element with a
// [data-drop-instance] attribute. This attribute will have the uuid of the
// dropdown. This element will also have a [data-drop-el] attribute which
// will have a value of either "trigger" or "content" depending on which it
// refers to.
var s=c2(o,function(r){return r.hasAttribute("data-drop-instance")});if(!s)return n(!1);var l=s.getAttribute("data-drop-instance");("trigger"!==s.getAttribute("data-drop-el")||l!==r)&&("content"!==s.getAttribute("data-drop-el")||l!==r)&&// In all other cases close the dropdown.
n(!1)};return c1.push({uuid:r,setOpen:n}),window.addEventListener("click",i,!0),function(){c1=c1.filter(function(n){return n.uuid!==r}),window.removeEventListener("click",i,!0)};// setOpen is a hook and won't change.
}/* eslint-disable-next-line react-hooks/exhaustive-deps */},[r])},c3=/*@__PURE__*/eE(eI).forwardRef(function(r,n){var i=r.direction,o=r.alignment,a=r.id,s=r.className,l=r.onChange,u=r.triggerElement,c=r.children,h=uY(r,cJ),d=(0,eI.useRef)(c3.generateUUID()),f=(0,eI.useRef)(null),p=uJ((0,eI.useState)(!1),2),m=p[0],g=p[1];c4(d.current,g),(0,eI.useImperativeHandle)(n,function(){return{reposition:function(){return f.current.position()},open:function(){return g(!0)},close:function(){return g(!1)}}});var y=uJ(c0(i,o),2),_=y[0],v=y[1],b=function(r){r&&r.preventDefault(),g(!m)},x=function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?uW(Object(i),!0).forEach(function(n){var o;o=i[n],n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):uW(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}({id:a||void 0,className:[s,"drop__content","drop-trans","drop-trans--".concat(i)].filter(Boolean).join(" "),"data-drop-instance":d.current,"data-drop-el":"content",direction:i,onChange:l,children:c},h);return /*@__PURE__*/eE(eI).createElement(cl,{ref:f// attachment is the content.
,attachment:_// targetAttachment is the trigger
,targetAttachment:v,constraints:[{to:"window",attachment:"both",pin:!0}],renderTarget:function(r){return u({ref:r,// Ref from thether. Must be attached.
onClick:b,active:m,className:m?"active":"","data-drop-el":"trigger","data-drop-instance":d.current})},renderElement:function(r){return /*@__PURE__*/eE(eI).createElement(cC,{ref:r,in:m,unmountOnExit:!0,appear:!0,classNames:"drop-trans",timeout:{appear:300,enter:300,exit:300}},/*@__PURE__*/eE(eI).createElement(c5,x))}})});function c5(r){var n=r.onChange,i=uY(r,cQ);return(0,eI.useEffect)(function(){return n&&n(!0),function(){n&&n(!1)};// onChange will not change in between mounts because the whole purpose of
// TransitionItem is to be mounted/unmounted for animation.
/* eslint-disable-next-line react-hooks/exhaustive-deps */},[]),/*@__PURE__*/eE(eI).createElement(cX,i)}c3.displayName="Dropdown",c3.generateUUID=function(){return Math.random().toString(36).substr(2,5)},c3.closeAll=function(){return c1.forEach(function(r){return r.setOpen(!1)})},c3.defaultProps={/* eslint-disable-next-line react/display-name */triggerElement:function(r){return /*@__PURE__*/eE(eI).createElement("button",uX({type:"button"},r),"Dropdown")},direction:"down",alignment:"center"},c3.propTypes={id:/*@__PURE__*/eE(aD).string,onChange:/*@__PURE__*/eE(aD).func,triggerElement:/*@__PURE__*/eE(aD).func,direction:/*@__PURE__*/eE(aD).oneOf(["up","down","left","right"]),alignment:/*@__PURE__*/eE(aD).oneOf(["left","center","right","top","middle","bottom"]),className:/*@__PURE__*/eE(aD).string,children:/*@__PURE__*/eE(aD).node},c5.propTypes={onChange:/*@__PURE__*/eE(aD).func,props:/*@__PURE__*/eE(aD).shape({direction:/*@__PURE__*/eE(aD).string,className:/*@__PURE__*/eE(aD).string}),children:/*@__PURE__*/eE(aD).node};var eI=eT("exYeM");function c6(){return(c6=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}).apply(this,arguments)}function c8(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}rd.hr.withConfig({displayName:"vertical-divider__VerticalDivider",componentId:"sc-aok8iv-0"})(["display:inline-flex;border:0;width:",";height:",";margin:0;",""],lU(.5),lU(),function(r){return"light"===r.variation?rt(eg||(eg=c8(["\n      background: transparent\n        linear-gradient(\n          90deg,\n          ",",\n          ","\n        )\n        50% / "," auto no-repeat;\n    "])),lj("color.surface-100a"),lj("color.surface-100a"),lj("layout.border")):rt(ey||(ey=c8(["\n    background: transparent\n      linear-gradient(\n        90deg,\n        ",",\n        ","\n      )\n      50% / "," auto no-repeat;\n  "])),lj("color.base-200a"),lj("color.base-200a"),lj("layout.border"))});// global toolbar props, like the size.
// Context
var c9=/*#__PURE__*/(0,eI.createContext)({inToolbar:!1}),c7=function(r){var n=r.children,i=r.size,o=(0,eI.useMemo)(function(){return{inToolbar:!0,size:i}},[i]);return /*@__PURE__*/eE(eI).createElement(c9.Provider,{value:o},n)};// Context provider
c7.propTypes={children:/*@__PURE__*/eE(aD).node,size:/*@__PURE__*/eE(aD).oneOf(["small","medium","large"])};var he=/*@__PURE__*/eE(eI).forwardRef(function(r,n){var i=(0,eI.useContext)(c9).size;/* eslint-disable-next-line react/prop-types */return /*@__PURE__*/eE(eI).createElement(uL,c6({},r,{size:i||r.size,ref:n}))});he.displayName="ToolbarContextButton";var ht=["className","children","size"];function hr(r){var n=r.className,i=r.children,o=r.size,a=function(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}(r,ht);return /*@__PURE__*/eE(eI).createElement(c7,{size:o},/*@__PURE__*/eE(eI).createElement("div",c6({className:n,role:"toolbar"},a),i))}hr.propTypes={className:/*@__PURE__*/eE(aD).string,children:/*@__PURE__*/eE(aD).node,size:/*@__PURE__*/eE(aD).string},rd(hr).withConfig({displayName:"toolbar__Toolbar",componentId:"sc-1dvjpky-0"})(["display:flex;flex-flow:row nowrap;align-items:center;"," gap:var(--toolbar-spacing);"],function(r){switch(r.size){case"small":return rt(e_||(e_=c8(["\n        --toolbar-spacing: ",";\n      "])),lU(.125));case"large":return rt(ev||(ev=c8(["\n        --toolbar-spacing: ",";\n      "])),lU(.5));case"xlarge":return rt(eb||(eb=c8(["\n        --toolbar-spacing: ",";\n      "])),lU());// medium
default:return rt(ex||(ex=c8(["\n        --toolbar-spacing: ",";\n      "])),lU(.25))}}),rd.div.attrs(function(r){return{role:r.role||"group"}}).withConfig({displayName:"toolbar__ToolbarGroup",componentId:"sc-1dvjpky-1"})(["all:inherit;& + &{margin-left:calc(var(--toolbar-spacing) * 4);}"]),rd.span.withConfig({displayName:"toolbar__ToolbarLabel",componentId:"sc-1dvjpky-2"})([""," "," color:",";"],uq(),rt(E||(E=sI(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),function(r){return"light"===r.variation?lj("color.surface"):lj("color.base-400")});var hn=rd(he).withConfig({displayName:"toolbar__ToolbarButton",componentId:"sc-1dvjpky-3"})([""]),hi=rd(hn).attrs({fitting:"skinny"}).withConfig({displayName:"toolbar__ToolbarIconButton",componentId:"sc-1dvjpky-4"})([""]),eI=eT("exYeM"),ho={};// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
ho=hs;var ha=eT("dG33B").EventEmitter;// old-style streams.  Note that the pipe method (the only relevant
// part of this class) is overridden in the Readable class.
function hs(){ha.call(this)}function hl(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,o)}return i}eT("9M38k")(hs,ha),hs.Readable=eT("fTX3U"),hs.Writable=eT("kYljA"),hs.Duplex=eT("9ODku"),hs.Transform=eT("aurW9"),hs.PassThrough=eT("aGOT9"),hs.finished=eT("jR9FH"),hs.pipeline=eT("6tlF8"),// Backwards-compat with node 0.4.x
hs.Stream=hs,hs.prototype.pipe=function(r,n){var i=this;function o(n){r.writable&&!1===r.write(n)&&i.pause&&i.pause()}function a(){i.readable&&i.resume&&i.resume()}i.on("data",o),r.on("drain",a),r._isStdio||n&&!1===n.end||(i.on("end",l),i.on("close",u));var s=!1;function l(){s||(s=!0,r.end())}function u(){s||(s=!0,"function"==typeof r.destroy&&r.destroy())}// don't leave dangling pipes when there are errors.
function c(r){if(h(),0===ha.listenerCount(this,"error"))throw r;// Unhandled stream error in pipe.
}// remove all the event listeners that were added.
function h(){i.removeListener("data",o),r.removeListener("drain",a),i.removeListener("end",l),i.removeListener("close",u),i.removeListener("error",c),r.removeListener("error",c),i.removeListener("end",h),i.removeListener("close",h),r.removeListener("close",h)}// Allow for unix-like usage: A.pipe(B).pipe(C)
return i.on("error",c),r.on("error",c),i.on("end",h),i.on("close",h),r.on("close",h),r.emit("pipe",i),r};var hu={exports:{}},hc=Object.getOwnPropertySymbols,hh=Object.prototype.hasOwnProperty,hd=Object.prototype.propertyIsEnumerable,hf=!function(){try{if(!Object.assign)return!1;// Detect buggy property enumeration order in older V8 versions.
// https://bugs.chromium.org/p/v8/issues/detail?id=4118
var r=new String("abc");// eslint-disable-line no-new-wrappers
if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var o=Object.getOwnPropertyNames(n).map(function(r){return n[r]});if("0123456789"!==o.join(""))return!1;// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var a={};if("abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},a)).join(""))return!1;return!0}catch(r){// We don't expect any of the above to throw, but better to be safe.
return!1}}()?function(r,n){for(var i,o,a=function(r){if(null==r)throw TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(r),s=1;s<arguments.length;s++){for(var l in i=Object(arguments[s]))hh.call(i,l)&&(a[l]=i[l]);if(hc){o=hc(i);for(var u=0;u<o.length;u++)hd.call(i,o[u])&&(a[o[u]]=i[o[u]])}}return a}:Object.assign,hp=/*@__PURE__*/eE(eI),hm=/*@__PURE__*/eE(ho);function hg(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hy="function"==typeof Symbol&&Symbol.for,h_=hy?Symbol.for("react.portal"):60106,hv=hy?Symbol.for("react.fragment"):60107,hb=hy?Symbol.for("react.strict_mode"):60108,hx=hy?Symbol.for("react.profiler"):60114,hw=hy?Symbol.for("react.provider"):60109,hE=hy?Symbol.for("react.context"):60110,hC=hy?Symbol.for("react.concurrent_mode"):60111,hS=hy?Symbol.for("react.forward_ref"):60112,hT=hy?Symbol.for("react.suspense"):60113,hM=hy?Symbol.for("react.suspense_list"):60120,hk=hy?Symbol.for("react.memo"):60115,hI=hy?Symbol.for("react.lazy"):60116,hL=hy?Symbol.for("react.block"):60121,hA=hy?Symbol.for("react.fundamental"):60117,hz=hy?Symbol.for("react.scope"):60119;function hP(r){if(null==r)return null;if("function"==typeof r)return r.displayName||r.name||null;if("string"==typeof r)return r;switch(r){case hv:return"Fragment";case h_:return"Portal";case hx:return"Profiler";case hb:return"StrictMode";case hT:return"Suspense";case hM:return"SuspenseList"}if("object"==typeof r)switch(r.$$typeof){case hE:return"Context.Consumer";case hw:return"Context.Provider";case hS:var n=r.render;return n=n.displayName||n.name||"",r.displayName||(""!==n?"ForwardRef("+n+")":"ForwardRef");case hk:return hP(r.type);case hL:return hP(r.render);case hI:if(r=1===r._status?r._result:null)return hP(r)}return null}var hO=hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;hO.hasOwnProperty("ReactCurrentDispatcher")||(hO.ReactCurrentDispatcher={current:null}),hO.hasOwnProperty("ReactCurrentBatchConfig")||(hO.ReactCurrentBatchConfig={suspense:null});var hD={};function hR(r,n){for(var i=0|r._threadCount;i<=n;i++)r[i]=r._currentValue2,r._threadCount=i+1}for(var hF=new Uint16Array(16),hB=0;15>hB;hB++)hF[hB]=hB+1;hF[15]=0;var hN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hj=Object.prototype.hasOwnProperty,hV={},hU={};function hq(r){return!!hj.call(hU,r)||!hj.call(hV,r)&&(hN.test(r)?hU[r]=!0:(hV[r]=!0,!1))}function h$(r,n,i,o,a,s){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=r,this.type=n,this.sanitizeURL=s}var hH={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){hH[r]=new h$(r,0,!1,r,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];hH[n]=new h$(n,1,!1,r[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){hH[r]=new h$(r,2,!1,r.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){hH[r]=new h$(r,2,!1,r,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){hH[r]=new h$(r,3,!1,r.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(r){hH[r]=new h$(r,3,!0,r,null,!1)}),["capture","download"].forEach(function(r){hH[r]=new h$(r,4,!1,r,null,!1)}),["cols","rows","size","span"].forEach(function(r){hH[r]=new h$(r,6,!1,r,null,!1)}),["rowSpan","start"].forEach(function(r){hH[r]=new h$(r,5,!1,r.toLowerCase(),null,!1)});var hZ=/[\-:]([a-z])/g;function hG(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(hZ,hG);hH[n]=new h$(n,1,!1,r,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(hZ,hG);hH[n]=new h$(n,1,!1,r,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(hZ,hG);hH[n]=new h$(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(r){hH[r]=new h$(r,1,!1,r.toLowerCase(),null,!1)}),hH.xlinkHref=new h$("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(r){hH[r]=new h$(r,1,!1,r.toLowerCase(),null,!0)});var hW=/["'&<>]/;function hX(r){if("boolean"==typeof r||"number"==typeof r)return""+r;r=""+r;var n=hW.exec(r);if(n){var i,o="",a=0;for(i=n.index;i<r.length;i++){switch(r.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}a!==i&&(o+=r.substring(a,i)),a=i+1,o+=n}r=a!==i?o+r.substring(a,i):o}return r}var hY="function"==typeof Object.is?Object.is:function(r,n){return r===n&&(0!==r||1/r==1/n)||r!=r&&n!=n},hK=null,hJ=null,hQ=null,h0=!1,h1=!1,h2=null,h4=0;function h3(){if(null===hK)throw Error(hg(321));return hK}function h5(){if(0<h4)throw Error(hg(312));return{memoizedState:null,queue:null,next:null}}function h6(){return null===hQ?null===hJ?(h0=!1,hJ=hQ=h5()):(h0=!0,hQ=hJ):null===hQ.next?(h0=!1,hQ=hQ.next=h5()):(h0=!0,hQ=hQ.next),hQ}function h8(r,n,i,o){for(;h1;)h1=!1,h4+=1,hQ=null,i=r(n,o);return hJ=hK=null,h4=0,hQ=h2=null,i}function h9(r,n){return"function"==typeof n?n(r):n}function h7(r,n,i){if(hK=h3(),hQ=h6(),h0){var o=hQ.queue;if(n=o.dispatch,null!==h2&&void 0!==(i=h2.get(o))){h2.delete(o),o=hQ.memoizedState;do o=r(o,i.action),i=i.next;while(null!==i)return hQ.memoizedState=o,[o,n]}return[hQ.memoizedState,n]}return r=r===h9?"function"==typeof n?n():n:void 0!==i?i(n):n,hQ.memoizedState=r,r=(r=hQ.queue={last:null,dispatch:null}).dispatch=de.bind(null,hK,r),[hQ.memoizedState,r]}function de(r,n,i){if(!(25>h4))throw Error(hg(301));if(r===hK){if(h1=!0,r={action:i,next:null},null===h2&&(h2=new Map),void 0===(i=h2.get(n)))h2.set(n,r);else{for(n=i;null!==n.next;)n=n.next;n.next=r}}}function dt(){}var dr=0,dn={readContext:function(r){var n=dr;return hR(r,n),r[n]},useContext:function(r){h3();var n=dr;return hR(r,n),r[n]},useMemo:function(r,n){if(hK=h3(),hQ=h6(),n=void 0===n?null:n,null!==hQ){var i=hQ.memoizedState;if(null!==i&&null!==n){e:{var o=i[1];if(null===o)o=!1;else{for(var a=0;a<o.length&&a<n.length;a++)if(!hY(n[a],o[a])){o=!1;break e}o=!0}}if(o)return i[0]}}return r=r(),hQ.memoizedState=[r,n],r},useReducer:h7,useRef:function(r){hK=h3();var n=(hQ=h6()).memoizedState;return null===n?(r={current:r},hQ.memoizedState=r):n},useState:function(r){return h7(h9,r)},useLayoutEffect:function(){},useCallback:function(r){return r},useImperativeHandle:dt,useEffect:dt,useDebugValue:dt,useResponder:function(r,n){return{props:n,responder:r}},useDeferredValue:function(r){return h3(),r},useTransition:function(){return h3(),[function(r){r()},!1]}},di={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},da=hf({menuitem:!0},di),ds={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dl=["Webkit","ms","Moz","O"];Object.keys(ds).forEach(function(r){dl.forEach(function(n){ds[n=n+r.charAt(0).toUpperCase()+r.substring(1)]=ds[r]})});var du=/([A-Z])/g,dc=/^ms-/,dh=hp.Children.toArray,dd=hO.ReactCurrentDispatcher,df={listing:!0,pre:!0,textarea:!0},dp=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,dm={},dg={},dy=Object.prototype.hasOwnProperty,d_={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function dv(r,n){if(void 0===r)throw Error(hg(152,hP(n)||"Component"))}var db=function(){function r(r,n){hp.isValidElement(r)?r.type!==hv?r=[r]:(r=r.props.children,r=hp.isValidElement(r)?[r]:dh(r)):r=dh(r),r={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:r,childIndex:0,context:hD,footer:""};var i=hF[0];if(0===i){var o=hF,a=2*(i=o.length);if(!(65536>=a))throw Error(hg(304));var s=new Uint16Array(a);for(s.set(o),(hF=s)[0]=i+1,o=i;o<a-1;o++)hF[o]=o+1;hF[a-1]=0}else hF[0]=hF[i];this.threadID=i,this.stack=[r],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var n=r.prototype;return n.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var r=this.threadID;hF[r]=hF[0],hF[0]=r}},n.pushProvider=function(r){var n=++this.contextIndex,i=r.type._context,o=this.threadID;hR(i,o);var a=i[o];this.contextStack[n]=i,this.contextValueStack[n]=a,i[o]=r.props.value},n.popProvider=function(){var r=this.contextIndex,n=this.contextStack[r],i=this.contextValueStack[r];this.contextStack[r]=null,this.contextValueStack[r]=null,this.contextIndex--,n[this.threadID]=i},n.clearProviders=function(){for(var r=this.contextIndex;0<=r;r--)this.contextStack[r][this.threadID]=this.contextValueStack[r]},n.read=function(r){if(this.exhausted)return null;var n=dr;dr=this.threadID;var i=dd.current;dd.current=dn;try{for(var o=[""],a=!1;o[0].length<r;){if(0===this.stack.length){this.exhausted=!0;var s=this.threadID;hF[s]=hF[0],hF[0]=s;break}var l=this.stack[this.stack.length-1];if(a||l.childIndex>=l.children.length){var u=l.footer;if(""!==u&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===l.type)this.currentSelectValue=null;else if(null!=l.type&&null!=l.type.type&&l.type.type.$$typeof===hw)this.popProvider(l.type);else if(l.type===hT){this.suspenseDepth--;var c=o.pop();if(a){a=!1;var h=l.fallbackFrame;if(!h)throw Error(hg(303));this.stack.push(h),o[this.suspenseDepth]+="<!--$!-->";continue}o[this.suspenseDepth]+=c}o[this.suspenseDepth]+=u}else{var d=l.children[l.childIndex++],f="";try{f+=this.render(d,l.context,l.domNamespace)}catch(r){if(null!=r&&"function"==typeof r.then)throw Error(hg(294));throw r}finally{}o.length<=this.suspenseDepth&&o.push(""),o[this.suspenseDepth]+=f}}return o[0]}finally{dd.current=i,dr=n}},n.render=function(r,n,i){if("string"==typeof r||"number"==typeof r)return""==(i=""+r)?"":this.makeStaticMarkup?hX(i):this.previousWasTextNode?"<!-- -->"+hX(i):(this.previousWasTextNode=!0,hX(i));if(r=(n=function(r,n,i){for(;hp.isValidElement(r);){var o=r,a=o.type;if("function"!=typeof a)break;!function(o,a){var s=a.prototype&&a.prototype.isReactComponent,l=function(r,n,i,o){if(o&&"object"==typeof(o=r.contextType)&&null!==o)return hR(o,i),o[i];if(r=r.contextTypes){for(var a in i={},r)i[a]=n[a];n=i}else n=hD;return n}(a,n,i,s),u=[],c=!1,h={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===u)return null},enqueueReplaceState:function(r,n){c=!0,u=[n]},enqueueSetState:function(r,n){if(null===u)return null;u.push(n)}};if(s){if(s=new a(o.props,l,h),"function"==typeof a.getDerivedStateFromProps){var d=a.getDerivedStateFromProps.call(null,o.props,s.state);null!=d&&(s.state=hf({},s.state,d))}}else if(hK={},s=a(o.props,l,h),null==(s=h8(a,o.props,s,l))||null==s.render){dv(r=s,a);return}if(s.props=o.props,s.context=l,s.updater=h,void 0===(h=s.state)&&(s.state=h=null),"function"==typeof s.UNSAFE_componentWillMount||"function"==typeof s.componentWillMount){if("function"==typeof s.componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&s.UNSAFE_componentWillMount(),u.length){h=u;var f=c;if(u=null,c=!1,f&&1===h.length)s.state=h[0];else{d=f?h[0]:s.state;var p=!0;for(f=f?1:0;f<h.length;f++){var m=h[f];null!=(m="function"==typeof m?m.call(s,d,o.props,l):m)&&(p?(p=!1,d=hf({},d,m)):hf(d,m))}s.state=d}}else u=null}if(dv(r=s.render(),a),"function"==typeof s.getChildContext&&"object"==typeof(o=a.childContextTypes)){var g=s.getChildContext();for(var y in g)if(!(y in o))throw Error(hg(108,hP(a)||"Unknown",y))}g&&(n=hf({},n,g))}(o,a)}return{child:r,context:n}}(r,n,this.threadID)).child,n=n.context,null===r||!1===r)return"";if(!hp.isValidElement(r)){if(null!=r&&null!=r.$$typeof){if((i=r.$$typeof)===h_)throw Error(hg(257));throw Error(hg(258,i.toString()))}return r=dh(r),this.stack.push({type:null,domNamespace:i,children:r,childIndex:0,context:n,footer:""}),""}var o=r.type;if("string"==typeof o)return this.renderDOM(r,n,i);switch(o){case hb:case hC:case hx:case hM:case hv:return r=dh(r.props.children),this.stack.push({type:null,domNamespace:i,children:r,childIndex:0,context:n,footer:""}),"";case hT:throw Error(hg(294))}if("object"==typeof o&&null!==o)switch(o.$$typeof){case hS:hK={};var a=o.render(r.props,r.ref);return a=dh(a=h8(o.render,r.props,a,r.ref)),this.stack.push({type:null,domNamespace:i,children:a,childIndex:0,context:n,footer:""}),"";case hk:return r=[hp.createElement(o.type,hf({ref:r.ref},r.props))],this.stack.push({type:null,domNamespace:i,children:r,childIndex:0,context:n,footer:""}),"";case hw:return o=dh(r.props.children),i={type:r,domNamespace:i,children:o,childIndex:0,context:n,footer:""},this.pushProvider(r),this.stack.push(i),"";case hE:o=r.type,a=r.props;var s=this.threadID;return hR(o,s),o=dh(a.children(o[s])),this.stack.push({type:r,domNamespace:i,children:o,childIndex:0,context:n,footer:""}),"";case hA:throw Error(hg(338));case hI:switch(function(r){if(-1===r._status){r._status=0;var n=r._ctor;n=n(),r._result=n,n.then(function(n){0===r._status&&(n=n.default,r._status=1,r._result=n)},function(n){0===r._status&&(r._status=2,r._result=n)})}}(o=r.type),o._status){case 1:return r=[hp.createElement(o._result,hf({ref:r.ref},r.props))],this.stack.push({type:null,domNamespace:i,children:r,childIndex:0,context:n,footer:""}),"";case 2:throw o._result;default:throw Error(hg(295))}case hz:throw Error(hg(343))}throw Error(hg(130,null==o?o:typeof o,""))},n.renderDOM=function(r,n,i){var o=r.type.toLowerCase();if(!dm.hasOwnProperty(o)){if(!dp.test(o))throw Error(hg(65,o));dm[o]=!0}var a=r.props;if("input"===o)a=hf({type:void 0},a,{defaultChecked:void 0,defaultValue:void 0,value:null!=a.value?a.value:a.defaultValue,checked:null!=a.checked?a.checked:a.defaultChecked});else if("textarea"===o){var s=a.value;if(null==s){s=a.defaultValue;var l=a.children;if(null!=l){if(null!=s)throw Error(hg(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(hg(93));l=l[0]}s=""+l}null==s&&(s="")}a=hf({},a,{value:void 0,children:""+s})}else if("select"===o)this.currentSelectValue=null!=a.value?a.value:a.defaultValue,a=hf({},a,{value:void 0});else if("option"===o){l=this.currentSelectValue;var u=function(r){if(null==r)return r;var n="";return hp.Children.forEach(r,function(r){null!=r&&(n+=r)}),n}(a.children);if(null!=l){var c=null!=a.value?a.value+"":u;if(s=!1,Array.isArray(l)){for(var h=0;h<l.length;h++)if(""+l[h]===c){s=!0;break}}else s=""+l===c;a=hf({selected:void 0,children:void 0},a,{selected:s,children:u})}}if(s=a){if(da[o]&&(null!=s.children||null!=s.dangerouslySetInnerHTML))throw Error(hg(137,o,""));if(null!=s.dangerouslySetInnerHTML){if(null!=s.children)throw Error(hg(60));if(!("object"==typeof s.dangerouslySetInnerHTML&&"__html"in s.dangerouslySetInnerHTML))throw Error(hg(61))}if(null!=s.style&&"object"!=typeof s.style)throw Error(hg(62,""))}for(v in s=a,l=this.makeStaticMarkup,u=1===this.stack.length,c="<"+r.type,s)if(dy.call(s,v)){var d=s[v];if(null!=d){if("style"===v){h=void 0;var f="",p="";for(h in d)if(d.hasOwnProperty(h)){var m=0===h.indexOf("--"),g=d[h];if(null!=g){if(m)var y=h;else if(y=h,dg.hasOwnProperty(y))y=dg[y];else{var _=y.replace(du,"-$1").toLowerCase().replace(dc,"-ms-");y=dg[y]=_}f+=p+y+":",p=h,f+=m=null==g||"boolean"==typeof g||""===g?"":m||"number"!=typeof g||0===g||ds.hasOwnProperty(p)&&ds[p]?(""+g).trim():g+"px",p=";"}}d=f||null}h=null;t:if(m=o,g=s,-1===m.indexOf("-"))m="string"==typeof g.is;else switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":m=!1;break t;default:m=!0}m?d_.hasOwnProperty(v)||(h=hq(h=v)&&null!=d?h+'="'+hX(d)+'"':""):h=function(r,n){var i,o=hH.hasOwnProperty(r)?hH[r]:null;return((i="style"!==r)&&(i=null!==o?0===o.type:2<r.length&&("o"===r[0]||"O"===r[0])&&("n"===r[1]||"N"===r[1])),i||function(r,n,i,o){if(null==n||function(r,n,i,o){if(null!==i&&0===i.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":if(o)return!1;if(null!==i)return!i.acceptsBooleans;return"data-"!==(r=r.toLowerCase().slice(0,5))&&"aria-"!==r;default:return!1}}(r,n,i,o))return!0;if(o)return!1;if(null!==i)switch(i.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(r,n,o,!1))?"":null!==o?(r=o.attributeName,3===(i=o.type)||4===i&&!0===n)?r+'=""':(o.sanitizeURL&&(n=""+n),r+'="'+hX(n)+'"'):hq(r)?r+'="'+hX(n)+'"':""}(v,d),h&&(c+=" "+h)}}l||u&&(c+=' data-reactroot=""');var v=c;s="",di.hasOwnProperty(o)?v+="/>":(v+=">",s="</"+r.type+">");e:{if(null!=(l=a.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=a.children)||"number"==typeof l){l=hX(l);break e}l=null}return null!=l?(a=[],df.hasOwnProperty(o)&&"\n"===l.charAt(0)&&(v+="\n"),v+=l):a=dh(a.children),r=r.type,i=null==i||"http://www.w3.org/1999/xhtml"===i?function(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}(r):"http://www.w3.org/2000/svg"===i&&"foreignObject"===r?"http://www.w3.org/1999/xhtml":i,this.stack.push({domNamespace:i,type:o,children:a,childIndex:0,context:n,footer:s}),this.previousWasTextNode=!1,v},r}(),dx=function(r){function n(n,i){var o=r.call(this,{})||this;return o.partialRenderer=new db(n,i),o}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=n.prototype;return i._destroy=function(r,n){this.partialRenderer.destroy(),n(r)},i._read=function(r){try{this.push(this.partialRenderer.read(r))}catch(r){this.destroy(r)}},n}(hm.Readable),dw={renderToString:function(r){r=new db(r,!1);try{return r.read(1/0)}finally{r.destroy()}},renderToStaticMarkup:function(r){r=new db(r,!0);try{return r.read(1/0)}finally{r.destroy()}},renderToNodeStream:function(r){return new dx(r,!1)},renderToStaticNodeStream:function(r){return new dx(r,!0)},version:"16.14.0"},dE=dw.default||dw;hu.exports=dE,hu.exports;var dC=["color","size","meaningful"],dS={small:12,medium:16,large:24,xlarge:32,xxlarge:48};/**
 * Creates a collecticons component by passing default props to attach the
 * SVG.
 *
 * @param {function} creatorFn Function to create the collecticon. An SVG
 * should be returned.
 */function dT(r){var n=/*@__PURE__*/eE(eI).forwardRef(function(n,i){var o=n.color,a=n.size,s=n.meaningful,l=function(r,n){if(null==r)return{};var i,o,a=function(r,n){if(null==r)return{};var i,o,a={},s=Object.keys(r);for(o=0;o<s.length;o++)i=s[o],n.indexOf(i)>=0||(a[i]=r[i]);return a}(r,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}(n,dC),u=("string"==typeof a?dS[a]:a)||16;return r(function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?hl(Object(i),!0).forEach(function(n){var o;o=i[n],n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):hl(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}({width:u,height:u,fill:o||"currentColor",xmlns:"http://www.w3.org/2000/svg",role:"img",viewBox:"0 0 16 16",// By default icons are rendered decoratively (aria hidden true) Using
// "meaningful" prop (together with a descriptive title) will enable the
// icon to be understood by assistive technologies.
"aria-hidden":!s,ref:i},l))});return n.displayName="StyledCollecticon",n.propTypes={color:/*@__PURE__*/eE(aD).string,size:/*@__PURE__*/eE(aD).oneOfType([/*@__PURE__*/eE(aD).oneOf(["small","medium","large","xlarge","xxlarge"]),/*@__PURE__*/eE(aD).number]),meaningful:/*@__PURE__*/eE(aD).bool},n}rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"area icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,12L4,13L12,13L12,12L13,12L13,4L12,4L12,3L4,3L4,4L3,4L3,12L4,12ZM7,7L9,7L9,9L7,9L7,7ZM16,12L16,16L12,16L12,15L4,15L4,16L0,16L0,12L1,12L1,4L0,4L0,0L4,0L4,1L12,1L12,0L16,0L16,4L15,4L15,12L16,12Z"}))})).withConfig({displayName:"area__CollecticonArea",componentId:"sc-1hc4aeg-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow down left icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12,12L5.414,12L15.021,2.393L13.607,0.979L4,10.586L4,4L2,4L2,14L12,14L12,12Z"}))})).withConfig({displayName:"arrow-down-left__CollecticonArrowDownLeft",componentId:"sc-1f22cfq-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow down right icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12,4L12,10.586L2.393,0.979L0.979,2.393L10.586,12L4,12L4,14L14,14L14,4L12,4Z"}))})).withConfig({displayName:"arrow-down-right__CollecticonArrowDownRight",componentId:"sc-14aji5o-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow down icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"13.586,7.586 9,12.172 9,0 7,0 7,12.172 2.414,7.586 1,9 8,16 15,9"}))})).withConfig({displayName:"arrow-down__CollecticonArrowDown",componentId:"sc-1ou87kv-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow left icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"8.414,13.586 3.828,9 16,9 16,7 3.828,7 8.414,2.414 7,1 0,8 7,15"}))})).withConfig({displayName:"arrow-left__CollecticonArrowLeft",componentId:"sc-n1mnft-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow loop icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6,4H3.528c0.075-0.081,0.15-0.162,0.228-0.244C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756 C13.375,4.891,14,6.397,14,8h2c0-4.419-3.581-8-8-8C5.609,0,3.466,1.047,2,2.709V0H0v6h6V4z M10,12h2.472 c-0.075,0.081-0.15,0.163-0.228,0.244C11.109,13.375,9.603,14,8,14s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8H0 c0,4.419,3.581,8,8,8c2.391,0,4.534-1.047,6-2.709V16h2v-6h-6V12z"}))})).withConfig({displayName:"arrow-loop__CollecticonArrowLoop",componentId:"sc-1nzbdx-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow move icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7.5,1.924L5.773,3.651L5.061,2.939L8,0L10.939,2.939L10.227,3.651L8.5,1.924L8.5,7.5L14.076,7.5L12.349,5.773L13.061,5.061L16,8L13.061,10.939L12.349,10.227L14.076,8.5L8.5,8.5L8.5,14.076L10.227,12.349L10.939,13.061L8,16L5.061,13.061L5.773,12.349L7.5,14.076L7.5,8.5L1.924,8.5L3.651,10.227L2.939,10.939L0,8L2.939,5.061L3.651,5.773L1.924,7.5L7.5,7.5L7.5,1.924Z"}))})).withConfig({displayName:"arrow-move__CollecticonArrowMove",componentId:"sc-1nwao1f-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow reply icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,11c-0,-2.209 -1.791,-4 -4,-4c-3.548,0 -8.172,0 -8.172,0l2.586,-2.586l-1.414,-1.414l-5,5l5,5l1.414,-1.414l-2.586,-2.586l8.172,0c0.53,-0 1.039,0.211 1.414,0.586c0.375,0.375 0.586,0.884 0.586,1.414c0,1.392 0,3 0,3l2,0l0,-3Z"}))})).withConfig({displayName:"arrow-reply__CollecticonArrowReply",componentId:"sc-6s0wwi-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow return icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.238,5.762C13.102,4.626,11.597,4,10,4H3.828l2.586-2.586L5,0L0,5l5,5l1.414-1.414L3.828,6H10 c1.063,0,2.066,0.418,2.824,1.176C13.582,7.934,14,8.937,14,10s-0.418,2.066-1.176,2.824C12.066,13.582,11.063,14,10,14H6v2h4 c1.597,0,3.102-0.626,4.238-1.762S16,11.597,16,10S15.374,6.898,14.238,5.762z"}))})).withConfig({displayName:"arrow-return__CollecticonArrowReturn",componentId:"sc-1aahqvf-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow revert icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,0l2,0l0,2.709c1.466,-1.662 3.609,-2.709 6,-2.709c4.419,0 8,3.581 8,8c0,4.419 -3.581,8 -8,8c-4.419,0 -8,-3.581 -8,-8l2,0c0,1.603 0.624,3.11 1.756,4.244c1.132,1.134 2.641,1.756 4.244,1.756c1.603,0 3.109,-0.625 4.244,-1.756c1.131,-1.135 1.756,-2.641 1.756,-4.244c0,-1.603 -0.625,-3.109 -1.756,-4.244c-1.135,-1.131 -2.641,-1.756 -4.244,-1.756c-1.603,0 -3.109,0.625 -4.244,1.756c-0.078,0.078 -0.156,0.16 -0.228,0.244l2.472,0l0,2l-6,0l0,-6Zm10.784,4.916l1.485,1.337l-5.169,5.747l-3.244,-3.206l1.406,-1.422l1.754,1.731l3.768,-4.187Z"}))})).withConfig({displayName:"arrow-revert__CollecticonArrowRevert",componentId:"sc-19w5v2z-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow right icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"7.586,2.414 12.172,7 0,7 0,9 12.172,9 7.586,13.586 9,15 16,8 9,1"}))})).withConfig({displayName:"arrow-right__CollecticonArrowRight",componentId:"sc-1jnuo03-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow semi spin ccw icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,0l0,6h6V4H3.528C3.6,3.916,3.678,3.834,3.756,3.756C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756 C13.375,4.891,14,6.397,14,8s-0.625,3.109-1.756,4.244C11.109,13.375,9.603,14,8,14v2c4.419,0,8-3.581,8-8s-3.581-8-8-8 C5.609,0,3.466,1.047,2,2.709V0L0,0z"}))})).withConfig({displayName:"arrow-semi-spin-ccw__CollecticonArrowSemiSpinCcw",componentId:"sc-14rjf09-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow semi spin cw icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,0v2.709C12.534,1.047,10.391,0,8,0C3.581,0,0,3.581,0,8s3.581,8,8,8v-2c-1.603,0-3.109-0.625-4.244-1.756 C2.625,11.109,2,9.603,2,8s0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756 C12.322,3.834,12.4,3.916,12.472,4H10v2h6V0H14z"}))})).withConfig({displayName:"arrow-semi-spin-cw__CollecticonArrowSemiSpinCw",componentId:"sc-1or7835-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow spin ccw icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,0l0,6h6V4H3.528C3.6,3.916,3.678,3.834,3.756,3.756C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756 C13.375,4.891,14,6.397,14,8s-0.625,3.109-1.756,4.244C11.109,13.375,9.603,14,8,14s-3.112-0.622-4.244-1.756S2,9.603,2,8H0 c0,4.419,3.581,8,8,8s8-3.581,8-8s-3.581-8-8-8C5.609,0,3.466,1.047,2,2.709V0L0,0z"}))})).withConfig({displayName:"arrow-spin-ccw__CollecticonArrowSpinCcw",componentId:"sc-15g2usu-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow spin cw icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,0v2.709C12.534,1.047,10.391,0,8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8h-2c0,1.603-0.625,3.109-1.756,4.244 S9.603,14,8,14s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8s0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2 s3.109,0.625,4.244,1.756C12.322,3.834,12.4,3.916,12.472,4H10v2h6V0H14z"}))})).withConfig({displayName:"arrow-spin-cw__CollecticonArrowSpinCw",componentId:"sc-got6vy-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow up left icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,12L4,5.414L13.607,15.021L15.021,13.607L5.414,4L12,4L12,2L2,2L2,12L4,12Z"}))})).withConfig({displayName:"arrow-up-left__CollecticonArrowUpLeft",componentId:"sc-11tv0ac-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow up right icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,4L10.586,4L0.979,13.607L2.393,15.021L12,5.414L12,12L14,12L14,2L4,2L4,4Z"}))})).withConfig({displayName:"arrow-up-right__CollecticonArrowUpRight",componentId:"sc-1c0kio-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"arrow up icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"2.414,8.414 7,3.828 7,16 9,16 9,3.828 13.586,8.414 15,7 8,0 1,7"}))})).withConfig({displayName:"arrow-up__CollecticonArrowUp",componentId:"sc-ojud5m-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"bell icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13,9V6.5c0-2.306-1.759-4.222-4-4.472V1.5c0-0.553-0.447-1-1-1s-1,0.447-1,1v0.528C4.759,2.278,3,4.194,3,6.5V9 c0,1.103-0.897,2-2,2v2h14v-2C13.897,11,13,10.103,13,9z M8,15.5c0.931,0,1.716-0.638,1.938-1.5H6.062 C6.284,14.862,7.069,15.5,8,15.5z"}))})).withConfig({displayName:"bell__CollecticonBell",componentId:"sc-45f13-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"blow icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,3c0-1.656-1.344-3-3-3S2,1.344,2,3h2c0-0.55,0.45-1,1-1s1,0.45,1,1S5.55,4,5,4H0v2h5C6.656,6,8,4.656,8,3z M12,1 C9.791,1,8,2.791,8,5v1h2V5c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2H1v2h11.5V8.969C14.472,8.722,16,7.041,16,5 C16,2.791,14.209,1,12,1z M9,10H2v2h7c0.55,0,1,0.45,1,1s-0.45,1-1,1s-1-0.45-1-1H6c0,1.656,1.344,3,3,3s3-1.344,3-3S10.656,10,9,10z"}))})).withConfig({displayName:"blow__CollecticonBlow",componentId:"sc-1jrq390-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"bold icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"bold",d:"M9,1l-6,0l-0,14l6,0c2.208,0 4,-1.792 4,-4c0,-1.194 -0.524,-2.267 -1.355,-3c0.831,-0.733 1.355,-1.806 1.355,-3c-0,-2.208 -1.792,-4 -4,-4Zm-1,8c1.104,-0 2,0.896 2,2c0,1.104 -0.896,2 -2,2c-0,0 -2,0 -2,0l-0,-4l2,-0Zm0,-6c1.104,-0 2,0.896 2,2c0,1.104 -0.896,2 -2,2c-0,0 -2,0 -2,0l-0,-4l2,-0Z"}))})).withConfig({displayName:"bold__CollecticonBold",componentId:"sc-19g96dt-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"book bookmark icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M5,12h9V0H9v6L7,4L5,6V0H4C2.9,0,2,0.9,2,2v12c0,1.1,0.9,2,2,2h10v-2H5c-0.6,0-1-0.4-1-1S4.4,12,5,12z"}))})).withConfig({displayName:"book-bookmark__CollecticonBookBookmark",componentId:"sc-1xmlnah-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"book icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M5,12h9V0H4C2.9,0,2,0.9,2,2v12c0,1.1,0.9,2,2,2h10v-2H5c-0.6,0-1-0.4-1-1S4.4,12,5,12z M5,2h7v2H5V2z"}))})).withConfig({displayName:"book__CollecticonBook",componentId:"sc-12x3af2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand collecticons icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12.042,0h-8v2h8V0z M10.87,11.828C10.114,12.584,9.111,13,8.042,13s-2.072-0.416-2.828-1.172S4.042,10.069,4.042,9 s0.416-2.072,1.172-2.828S6.973,5,8.042,5s2.072,0.416,2.828,1.172C11.383,6.684,11.739,7.316,11.917,8h2.041 c-0.475-2.838-2.944-5-5.916-5c-3.312,0-6,2.688-6,6s2.688,6,6,6c2.972,0,5.441-2.163,5.916-5h-2.041 C11.742,10.684,11.383,11.316,10.87,11.828z"}))})).withConfig({displayName:"brand-collecticons__CollecticonBrandCollecticons",componentId:"sc-egpnjr-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand development seed 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M9.053,13.581c-0.003-0.322,0.084-0.6,0.219-0.891c-0.288,0.253-0.403,0.541-0.506,0.931c0.028-0.456,0.25-3.45,0.25-3.6 c0.766-2.188,0.425-8.722,1.4-9.534C9.291,0.691,8.913,1.841,8.55,2.753C8.194,1.681,8.475,1,7.294,0.625 c0.944,0.8,0.756,1.491,0.95,2.594c-0.566-0.734-0.391-1.65-1.041-2.4C7.019,0.628,6.406,0.162,6.406,0.162 c0,0.028,0.491,1.009,0.581,1.528c0.091,0.519,0.306,1.556,0.275,1.938C7.341,5.747,7.875,7.8,8.241,9.878 c0.059,0.353,0.244,1.391,0.244,1.391L8.525,11.7c-0.066-0.284-0.125-0.541-0.163-0.65c-0.106-0.312-0.366-1.103-0.428-1.431 C7.044,7.787,5.416,4.2,3.241,3.669C4.475,4.763,5.803,6.206,6.1,7.6C5.437,6.669,2.831,4.681,1.772,3.956 c1.997,2.072,3.6,4.219,5.337,6.522c0.503,0.653,1.131,1.978,1.178,2.278c0.034,0.222,0.075,1.05,0.1,1.559 c-0.972-2.344-1.506-3.534-3.297-4.587C4.784,9.566,3.834,9.237,3.834,9.237c0.431,0.475,0.959,0.5,1.353,1.166 C4.372,9.869,3.525,9.775,2.594,9.744c2.991,1.547,4.606,1.978,5.616,4.95C8.291,15.181,8.169,15.55,8.178,16h0.669 c-0.003-0.316,0.003-0.616,0-0.678c0.031-0.206,0.041-0.831,0.131-1.022c0.312-0.794,0.819-1.169,1.525-1.631 C9.862,12.875,9.541,12.797,9.053,13.581z M11.997,6.578c-0.247,0.234-0.978,1.162-0.978,1.162c0.044-1.312,0.372-2.719,1.209-3.7 c-1.163,0.762-1.822,2.644-2.125,3.794c-0.119,0.463-1.497,3.144-0.856,4.584c0.125-0.525,0.422-1.038,0.75-1.487 c0.153-0.203,0.794-1.228,1.438-2.688c0.566-1.469,1.491-2.328,2.8-3.056C13.25,5.338,12.687,5.906,11.997,6.578z"}))})).withConfig({displayName:"brand-development-seed-2__CollecticonBrandDevelopmentSeed2",componentId:"sc-1963e18-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand development seed icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M15,0H1C0.447,0,0,0.447,0,1v14c0,0.553,0.447,1,1,1h7.178c-0.009-0.45,0.113-0.819,0.031-1.306 c-1.009-2.972-2.625-3.403-5.616-4.95c0.931,0.031,1.778,0.125,2.594,0.659C4.794,9.738,4.266,9.713,3.834,9.238 c0,0,0.95,0.328,1.256,0.491c1.791,1.053,2.325,2.244,3.297,4.587c-0.025-0.509-0.066-1.337-0.1-1.559 c-0.047-0.3-0.675-1.625-1.178-2.278c-1.737-2.303-3.341-4.45-5.338-6.522C2.831,4.681,5.438,6.669,6.1,7.6 C5.803,6.206,4.475,4.763,3.241,3.669C5.416,4.2,7.044,7.788,7.934,9.619c0.062,0.328,0.322,1.119,0.428,1.431 c0.038,0.109,0.097,0.366,0.163,0.65l-0.041-0.431c0,0-0.184-1.038-0.244-1.391c-0.366-2.078-0.9-4.131-0.978-6.25 c0.031-0.381-0.184-1.419-0.275-1.938c-0.091-0.519-0.581-1.5-0.581-1.528l0,0c0,0,0.613,0.466,0.797,0.656 c0.65,0.75,0.475,1.666,1.041,2.4C8.05,2.116,8.238,1.425,7.294,0.625C8.475,1,8.194,1.681,8.55,2.753 c0.363-0.913,0.741-2.062,1.866-2.266c-0.975,0.812-0.634,7.347-1.4,9.534c0,0.15-0.222,3.144-0.25,3.6 c0.103-0.391,0.219-0.678,0.506-0.931c-0.134,0.291-0.222,0.569-0.219,0.891c0.488-0.784,0.809-0.706,1.45-0.913 c-0.706,0.462-1.212,0.837-1.525,1.631c-0.091,0.191-0.1,0.816-0.131,1.022c0.003,0.062-0.003,0.359,0,0.675H15c0.553,0,1-0.447,1-1 V1C16,0.447,15.553,0,15,0z M11.434,8.244c-0.644,1.459-1.284,2.484-1.438,2.688c-0.328,0.45-0.625,0.962-0.75,1.488 c-0.641-1.441,0.738-4.122,0.856-4.584c0.303-1.15,0.962-3.031,2.125-3.794l0,0l0,0l0,0c-0.837,0.981-1.166,2.387-1.209,3.7 c0,0,0.731-0.928,0.978-1.162c0.691-0.672,1.253-1.241,2.238-1.391C12.925,5.916,12,6.775,11.434,8.244z"}))})).withConfig({displayName:"brand-development-seed__CollecticonBrandDevelopmentSeed",componentId:"sc-1d6uv5p-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand dropbox icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8.011,3.76L4.005,6.317l4.005,2.557L4.005,11.43L0,8.852l4.005-2.557L0,3.76l4.005-2.557L8.011,3.76z M3.984,12.24 l4.005-2.557l4.005,2.557l-4.005,2.557L3.984,12.24z M8.011,8.852l4.005-2.557L8.011,3.76l3.984-2.557L16,3.76l-4.005,2.557 L16,8.874l-4.005,2.557L8.011,8.852z"}))})).withConfig({displayName:"brand-dropbox__CollecticonBrandDropbox",componentId:"sc-1ahotra-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand facebook icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M15.117,0H0.883C0.395,0,0,0.395,0,0.883v14.234C0,15.605,0.395,16,0.883,16h7.664V9.812H6.469V7.391h2.078V5.608 c0-2.067,1.262-3.192,3.106-3.192c0.883,0,1.642,0.066,1.863,0.095v2.16l-1.271,0.001c-1.003,0-1.197,0.477-1.197,1.176v1.543h2.398 l-0.312,2.422h-2.086V16h4.07C15.605,16,16,15.605,16,15.117V0.883C16,0.395,15.605,0,15.117,0z"}))})).withConfig({displayName:"brand-facebook__CollecticonBrandFacebook",componentId:"sc-1vrmzn7-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand flickr icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,8c0,1.933,1.567,3.5,3.5,3.5S7,9.933,7,8S5.433,4.5,3.5,4.5S0,6.067,0,8z M9,8c0,1.933,1.567,3.5,3.5,3.5S16,9.933,16,8 s-1.567-3.5-3.5-3.5S9,6.067,9,8z"}))})).withConfig({displayName:"brand-flickr__CollecticonBrandFlickr",componentId:"sc-2bpfaz-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand github icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7.999,0C3.582,0,0,3.582,0,8c0,3.534,2.292,6.533,5.471,7.591 c0.4,0.073,0.546-0.174,0.546-0.386c0-0.19-0.007-0.693-0.011-1.361c-2.225,0.483-2.695-1.072-2.695-1.072 c-0.364-0.924-0.888-1.17-0.888-1.17c-0.726-0.496,0.055-0.486,0.055-0.486c0.803,0.057,1.225,0.824,1.225,0.824 c0.714,1.223,1.872,0.87,2.328,0.665c0.073-0.517,0.279-0.87,0.508-1.069c-1.776-0.202-3.644-0.888-3.644-3.954 c0-0.873,0.312-1.587,0.823-2.147C3.637,5.233,3.362,4.419,3.798,3.318c0,0,0.672-0.215,2.2,0.82C6.636,3.961,7.32,3.872,8,3.869 c0.679,0.003,1.364,0.092,2.003,0.269c1.527-1.035,2.198-0.82,2.198-0.82c0.436,1.101,0.162,1.915,0.08,2.117 c0.513,0.559,0.822,1.273,0.822,2.147c0,3.073-1.87,3.75-3.653,3.948c0.287,0.247,0.543,0.735,0.543,1.481 c0,1.069-0.01,1.932-0.01,2.195c0,0.214,0.144,0.463,0.55,0.385C13.71,14.53,16,11.534,16,8C16,3.582,12.418,0,7.999,0z"}))})).withConfig({displayName:"brand-github__CollecticonBrandGithub",componentId:"sc-1i7dd0q-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand human rights icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7.734,0c0.334,0.184,1.469,0.938,1.469,2.297c0,1.203-1.941,4.791-1.188,5.722l4.812-6c0,0,1.197,1.456,0.478,2.688 c-0.747,1.281-2.588,2.781-3.325,3.897C9.524,9.294,9.746,9.663,9.746,9.663l5.834-3.194c0,0,0.469,1.391-0.641,2.391 c-1.172,1.056-3.931,1.475-3.931,2.575h4.006c0,0-0.409,1.216-1.184,1.384c-0.684,0.15-2.144-0.247-2.831,0.372 C10.271,13.847,9.456,16,7.015,16c-1.641,0-2.912-1.184-3.703-2.738c-0.913-1.797-1.938-2.663-2.991-2.881 c0,0,0.575-1.359,2.088-1.359c2.081,0,2.972,3.409,4.544,3.409c0.453,0,0.934-0.234,0.934-0.903c0-0.725-1.044-1.325-1.334-1.525 C5.862,9.522,5.309,8.756,5.665,7.472L7.734,0"}))})).withConfig({displayName:"brand-human-rights__CollecticonBrandHumanRights",componentId:"sc-1pwhpak-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand id icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,14.462h2.518V4.963H0V14.462z M0,3.83h2.518V1.538H0V3.83z M15.756,5.599c-0.163-0.744-0.468-1.435-0.916-2.074 c-0.558-0.79-1.288-1.333-2.189-1.629c-0.529-0.174-1.192-0.267-1.988-0.279H5.124v12.845h5.538c1.942,0,3.378-0.799,4.308-2.396 C15.657,10.88,16,9.434,16,7.725C16,7.051,15.919,6.343,15.756,5.599z M12.862,10.357c-0.5,1.249-1.385,1.874-2.653,1.874H7.73 V3.847h2.479c1.222,0,2.038,0.35,2.448,1.05c0.41,0.7,0.615,1.704,0.615,3.011C13.272,8.856,13.135,9.672,12.862,10.357z"}))})).withConfig({displayName:"brand-id__CollecticonBrandId",componentId:"sc-arpc4b-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand instagram icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,4C5.791,4,4,5.791,4,8s1.791,4,4,4s4-1.791,4-4S10.209,4,8,4z M8,10c-1.103,0-2-0.897-2-2s0.897-2,2-2s2,0.897,2,2 S9.103,10,8,10z M11,0H5C2.237,0,0,2.237,0,5v6c0,2.762,2.237,5,5,5h6c2.762,0,5-2.238,5-5V5C16,2.237,13.762,0,11,0z M14,11 c0,1.653-1.347,3-3,3H5c-1.653,0-3-1.347-3-3V5c0-1.653,1.347-3,3-3h6c1.653,0,3,1.347,3,3V11z M12,3c-0.553,0-1,0.447-1,1 s0.447,1,1,1s1-0.447,1-1S12.553,3,12,3z"}))})).withConfig({displayName:"brand-instagram__CollecticonBrandInstagram",componentId:"sc-3ob4n4-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand lastfm icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3.997,12.445c2.072,0,3.059-0.972,3.059-0.972L6.469,9.88c0,0-0.953,1.062-2.381,1.062c-1.266,0-2.162-1.1-2.162-2.859 c0-2.253,1.138-3.059,2.253-3.059c1.613,0,2.125,1.044,2.566,2.381l0.588,1.831c0.588,1.778,1.688,3.206,4.856,3.206 c2.272,0,3.812-0.697,3.812-2.528c0-1.484-0.844-2.253-2.419-2.622l-1.172-0.256c-0.806-0.184-1.044-0.512-1.044-1.062 c0-0.622,0.494-0.991,1.3-0.991c0.878,0,1.356,0.331,1.428,1.119l1.831-0.219c-0.147-1.65-1.284-2.328-3.153-2.328 c-1.65,0-3.262,0.622-3.262,2.622c0,1.247,0.606,2.034,2.125,2.4l1.247,0.294c0.934,0.219,1.247,0.606,1.247,1.137 c0,0.678-0.659,0.953-1.906,0.953c-1.85,0-2.622-0.972-3.059-2.309L8.556,6.82C7.791,4.436,6.562,3.558,4.125,3.558 C1.428,3.558,0,5.261,0,8.158C0,10.942,1.428,12.445,3.997,12.445z"}))})).withConfig({displayName:"brand-lastfm__CollecticonBrandLastfm",componentId:"sc-1360vss-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand linkedin icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.815,0H1.18C0.53,0,0,0.517,0,1.153v13.694C0,15.485,0.53,16,1.18,16h13.636C15.467,16,16,15.485,16,14.847V1.153 C16,0.517,15.467,0,14.815,0z M4.746,13.634H2.371V5.999h2.376V13.634z M3.559,4.955c-0.762,0-1.377-0.617-1.377-1.377 c0-0.759,0.615-1.376,1.377-1.376c0.759,0,1.376,0.617,1.376,1.376C4.935,4.339,4.319,4.955,3.559,4.955z M13.633,13.634h-2.371 V9.922c0-0.886-0.017-2.025-1.233-2.025c-1.235,0-1.423,0.964-1.423,1.96v3.778H6.235V5.999h2.274v1.043h0.033 c0.317-0.6,1.091-1.233,2.245-1.233c2.401,0,2.845,1.581,2.845,3.638V13.634z"}))})).withConfig({displayName:"brand-linkedin__CollecticonBrandLinkedin",componentId:"sc-1tarsql-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand medium icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,0v16h16V0H0z M13.292,3.791l-0.858,0.823c-0.074,0.056-0.111,0.149-0.095,0.241v6.045 c-0.015,0.092,0.021,0.184,0.095,0.241l0.838,0.823v0.181H9.057v-0.181l0.868-0.843c0.085-0.085,0.085-0.11,0.085-0.241V5.993 l-2.414,6.13H7.271l-2.81-6.13v4.109c-0.023,0.173,0.034,0.347,0.156,0.472l1.129,1.37v0.181H2.544v-0.181l1.129-1.37 c0.121-0.125,0.175-0.3,0.146-0.472V5.351C3.832,5.219,3.781,5.089,3.683,5L2.679,3.791V3.61h3.116l2.409,5.283l2.118-5.283h2.971 V3.791z"}))})).withConfig({displayName:"brand-medium__CollecticonBrandMedium",componentId:"sc-1ct5yr7-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand satsummit icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11,5L9,7V4L8,3L7,4v3L5,5H0v6h5l2-2v4h2V9l2,2h5V5H11z M2,10H1V6h1V10z M4,10H3V6h1V10z M13,10h-1V6h1V10z M15,10h-1V6h1 V10z"}))})).withConfig({displayName:"brand-satsummit__CollecticonBrandSatsummit",componentId:"sc-1cwtnh8-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand skype icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M15.239,9.03c0.044-0.325,0.069-0.655,0.069-0.992c0-4.036-3.29-7.309-7.347-7.309c-0.403,0-0.799,0.033-1.183,0.096 c-0.69-0.449-1.511-0.711-2.394-0.711C1.961,0.115,0,2.078,0,4.499c0,0.881,0.259,1.7,0.706,2.387 c-0.06,0.376-0.091,0.76-0.091,1.152c0,4.037,3.288,7.309,7.346,7.309c0.458,0,0.904-0.045,1.337-0.123 c0.673,0.418,1.467,0.661,2.317,0.661c2.422,0,4.384-1.963,4.384-4.385C16,10.585,15.72,9.734,15.239,9.03z M8.648,13.425 c-2.335,0.122-3.427-0.395-4.428-1.334c-1.118-1.049-0.669-2.245,0.242-2.306c0.91-0.061,1.456,1.032,1.942,1.335 c0.485,0.303,2.331,0.993,3.306-0.122c1.062-1.213-0.706-1.841-2.002-2.031c-1.85-0.274-4.186-1.275-4.004-3.247 C3.886,3.748,5.379,2.738,6.95,2.595c2.002-0.182,3.306,0.303,4.337,1.183c1.192,1.017,0.547,2.153-0.212,2.244 C10.318,6.114,9.468,4.351,7.8,4.324C6.08,4.297,4.918,6.114,7.041,6.63c2.124,0.516,4.398,0.728,5.218,2.669 C13.078,11.241,10.985,13.303,8.648,13.425z"}))})).withConfig({displayName:"brand-skype__CollecticonBrandSkype",componentId:"sc-1q1785s-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand slack icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,10.111c0,0.925,0.756,1.681,1.681,1.681c0.925,0,1.681-0.756,1.681-1.681V8.43H1.681C0.756,8.43,0,9.186,0,10.111z M16,5.889c0-0.925-0.756-1.681-1.681-1.681c-0.925,0-1.681,0.756-1.681,1.681V7.57h1.681C15.244,7.57,16,6.814,16,5.889z M10.111,7.57c0.925,0,1.681-0.756,1.681-1.681V1.681C11.792,0.756,11.036,0,10.111,0C9.186,0,8.43,0.756,8.43,1.681v4.208 C8.43,6.814,9.186,7.57,10.111,7.57z M5.889,8.43c-0.925,0-1.681,0.756-1.681,1.681v4.208C4.208,15.244,4.964,16,5.889,16 c0.925,0,1.681-0.756,1.681-1.681v-4.208C7.57,9.186,6.814,8.43,5.889,8.43z M5.889,4.208H1.681C0.756,4.208,0,4.964,0,5.889 C0,6.814,0.756,7.57,1.681,7.57h4.208c0.925,0,1.681-0.756,1.681-1.681C7.57,4.964,6.814,4.208,5.889,4.208z M5.889,0 C4.964,0,4.208,0.756,4.208,1.681c0,0.925,0.756,1.681,1.681,1.681H7.57V1.681C7.57,0.756,6.814,0,5.889,0z M14.319,8.43h-4.208 c-0.925,0-1.681,0.756-1.681,1.681c0,0.925,0.756,1.681,1.681,1.681h4.208c0.925,0,1.681-0.756,1.681-1.681 C16,9.186,15.244,8.43,14.319,8.43z M10.111,12.638H8.43v1.681C8.43,15.244,9.186,16,10.111,16c0.925,0,1.681-0.756,1.681-1.681 C11.792,13.394,11.036,12.638,10.111,12.638z"}))})).withConfig({displayName:"brand-slack__CollecticonBrandSlack",componentId:"sc-1j15ji4-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand soundcloud icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2.035,7.791c-0.05,0-0.091,0.041-0.094,0.094L1.8,9.638l0.141,1.694c0.003,0.053,0.044,0.091,0.094,0.091 c0.05,0,0.091-0.041,0.094-0.091l0.159-1.694L2.129,7.884C2.125,7.828,2.085,7.791,2.035,7.791z M2.676,7.903 c-0.056,0-0.104,0.047-0.107,0.106L2.435,9.635l0.134,1.71c0.003,0.059,0.05,0.106,0.106,0.106c0.056,0,0.103-0.047,0.106-0.106 l0.15-1.71L2.782,8.009C2.779,7.95,2.732,7.903,2.676,7.903z M3.319,6.872c-0.066,0-0.119,0.053-0.122,0.119L3.072,9.635l0.125,1.71 c0.003,0.066,0.056,0.119,0.122,0.119c0.066,0,0.119-0.053,0.122-0.119l0.141-1.71L3.441,6.99C3.435,6.922,3.382,6.872,3.319,6.872z M1.4,7.85c-0.044,0-0.075,0.034-0.081,0.078l-0.15,1.707l0.15,1.644c0.003,0.047,0.038,0.078,0.081,0.078 c0.041,0,0.075-0.034,0.081-0.078L1.65,9.635L1.482,7.928C1.475,7.881,1.444,7.85,1.4,7.85z M0.181,8.681 c-0.034,0-0.059,0.025-0.066,0.063L0,9.635l0.116,0.875c0.003,0.038,0.031,0.063,0.066,0.063c0.031,0,0.059-0.025,0.063-0.063 l0.138-0.875L0.244,8.747C0.241,8.706,0.213,8.681,0.181,8.681z M0.772,8.131c-0.034,0-0.063,0.028-0.066,0.066L0.55,9.635 l0.156,1.407c0.003,0.038,0.031,0.066,0.066,0.066c0.034,0,0.063-0.025,0.066-0.066l0.178-1.407L0.838,8.197 C0.835,8.159,0.806,8.131,0.772,8.131z M3.957,6.262c-0.072,0-0.131,0.059-0.134,0.134L3.707,9.644l0.116,1.697 c0.003,0.075,0.063,0.134,0.134,0.134c0.072,0,0.131-0.059,0.134-0.134l0.131-1.697L4.091,6.397 C4.088,6.318,4.029,6.262,3.957,6.262z M7.405,5.403C7.373,5.381,7.333,5.368,7.292,5.368S7.214,5.381,7.183,5.402 c-0.056,0.038-0.094,0.1-0.094,0.169v0.038L7.014,9.635c0,0.003,0.078,1.635,0.078,1.635c0,0.003,0,0.003,0,0.006 c0.003,0.047,0.019,0.088,0.047,0.122c0.038,0.044,0.094,0.075,0.156,0.075c0.056,0,0.106-0.022,0.141-0.059 c0.038-0.038,0.059-0.088,0.063-0.144l0.009-0.163l0.078-1.469L7.501,5.571C7.492,5.5,7.458,5.44,7.405,5.403z M14.034,7.537 c-0.269,0-0.528,0.053-0.763,0.153c-0.156-1.775-1.644-3.166-3.46-3.166c-0.444,0-0.878,0.088-1.26,0.234 C8.402,4.815,8.364,4.874,8.361,4.99v6.248c0.003,0.122,0.094,0.216,0.213,0.225c0.006,0,5.457,0,5.457,0 c1.088,0,1.969-0.872,1.969-1.96C16.003,8.419,15.122,7.537,14.034,7.537z M6.617,6.031c-0.103,0-0.188,0.084-0.191,0.188 L6.342,9.635l0.084,1.644c0.003,0.103,0.084,0.188,0.191,0.188c0.103,0,0.188-0.081,0.191-0.188l0.094-1.644L6.808,6.218 C6.804,6.112,6.72,6.031,6.617,6.031z M8.073,5.018C8.042,4.999,8.005,4.987,7.964,4.987c-0.053,0-0.1,0.019-0.138,0.05 c-0.047,0.041-0.078,0.1-0.081,0.166v0.022L7.658,9.638l0.044,0.816l0.044,0.794c0,0.119,0.1,0.216,0.216,0.216 c0.119,0,0.216-0.097,0.216-0.216v0.003l0.097-1.61L8.177,5.206C8.18,5.124,8.136,5.056,8.073,5.018z M5.948,5.915 c-0.097,0-0.175,0.078-0.175,0.175L5.679,9.635l0.094,1.653c0.003,0.097,0.078,0.175,0.175,0.175s0.172-0.078,0.175-0.175 l0.103-1.653L6.123,6.087C6.12,5.99,6.042,5.915,5.948,5.915z M5.282,5.834c-0.088,0-0.159,0.072-0.163,0.163l-0.1,3.638l0.1,1.669 c0.003,0.091,0.075,0.159,0.163,0.159s0.159-0.072,0.163-0.159l0.113-1.669L5.445,5.996C5.442,5.906,5.37,5.834,5.282,5.834z M4.623,5.968c-0.081,0-0.147,0.066-0.15,0.147l-0.11,3.52l0.109,1.682c0.003,0.081,0.069,0.147,0.15,0.147s0.144-0.066,0.15-0.147 l0.122-1.682l-0.121-3.52C4.767,6.031,4.701,5.968,4.623,5.968z"}))})).withConfig({displayName:"brand-soundcloud__CollecticonBrandSoundcloud",componentId:"sc-1sstkof-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand tumblr icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M9.707,15.997c-3.396,0-4.687-2.503-4.687-4.274V6.496H3.412V4.43c2.418-0.875,3.009-3.062,3.14-4.312 C6.561,0.034,6.63,0,6.667,0h2.343v4.074h3.199v2.421H8.995v4.98c0.009,0.669,0.25,1.581,1.472,1.581h0.059 c0.422-0.012,0.99-0.137,1.29-0.278l0.772,2.284c-0.291,0.425-1.6,0.915-2.771,0.937H9.698C9.698,15.997,9.707,15.997,9.707,15.997z"}))})).withConfig({displayName:"brand-tumblr__CollecticonBrandTumblr",componentId:"sc-2ls7o1-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand twitter icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,3.038c-0.589,0.261-1.221,0.438-1.885,0.517c0.678-0.406,1.198-1.05,1.443-1.816c-0.634,0.376-1.337,0.649-2.085,0.797 c-0.599-0.638-1.452-1.037-2.396-1.037c-1.813,0-3.283,1.47-3.283,3.282c0,0.257,0.029,0.508,0.085,0.748 c-2.728-0.137-5.147-1.444-6.766-3.43C0.831,2.584,0.669,3.148,0.669,3.75c0,1.139,0.579,2.144,1.46,2.732 C1.592,6.465,1.086,6.317,0.643,6.071c0,0.014,0,0.027,0,0.041c0,1.59,1.132,2.917,2.633,3.219C3,9.406,2.71,9.447,2.411,9.447 c-0.212,0-0.417-0.021-0.618-0.059c0.418,1.304,1.63,2.253,3.066,2.28c-1.123,0.88-2.539,1.405-4.077,1.405 c-0.265,0-0.526-0.016-0.783-0.046c1.453,0.931,3.178,1.475,5.032,1.475c6.038,0,9.34-5.002,9.34-9.34 c0-0.142-0.003-0.284-0.01-0.425C15.003,4.274,15.56,3.696,16,3.038z"}))})).withConfig({displayName:"brand-twitter__CollecticonBrandTwitter",componentId:"sc-1joz4pi-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"brand youtube icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6.364,10.379L6.364,5.621L10.545,8L6.364,10.379ZM15.666,4.124C15.482,3.431 14.939,2.885 14.251,2.7C13.003,2.364 8,2.364 8,2.364C8,2.364 2.997,2.364 1.749,2.7C1.061,2.885 0.518,3.431 0.334,4.124C0,5.38 0,8 0,8C0,8 0,10.62 0.334,11.876C0.518,12.569 1.061,13.115 1.749,13.3C2.997,13.636 8,13.636 8,13.636C8,13.636 13.003,13.636 14.251,13.3C14.939,13.115 15.482,12.569 15.666,11.876C16,10.62 16,8 16,8C16,8 16,5.38 15.666,4.124"}))})).withConfig({displayName:"brand-youtube__CollecticonBrandYoutube",componentId:"sc-sr8y6n-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"briefcase icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6,2h4v1h2V2c0-1.1-0.9-2-2-2H6C4.9,0,4,0.9,4,2v1h2V2z M0,14c0,0.55,0.45,1,1,1h14c0.55,0,1-0.45,1-1V8H0V14z M7,9h2v1 c0,0.553-0.447,1-1,1s-1-0.447-1-1V9z M15,4H1C0.45,4,0,4.45,0,5v2h16V5C16,4.45,15.55,4,15,4z"}))})).withConfig({displayName:"briefcase__CollecticonBriefcase",componentId:"sc-kf8guy-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"calendar range icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"calendar-range",d:"M15,15L1,15C0.447,15 0,14.553 0,14L0,3C0,2.447 0.447,2 1,2L2,2L2,4L5,4L5,2L11,2L11,4L14,4L14,2L15,2C15.553,2 16,2.447 16,3L16,14C16,14.553 15.553,15 15,15ZM14,6L2,6L2,13L14,13L14,6ZM9,12L7,12L7,10L9,10L9,12ZM6,12L4,12L4,10L6,10L6,12ZM12,9L10,9L10,7L12,7L12,9ZM9,9L7,9L7,7L9,7L9,9ZM4,3L3,3L3,0.494C3,0.222 3.222,0 3.497,0L3.506,0C3.778,0 4,0.222 4,0.494L4,3ZM13,3L12,3L12,0.494C12,0.222 12.222,0 12.497,0L12.506,0C12.778,0 13,0.222 13,0.494L13,3Z"}))})).withConfig({displayName:"calendar-range__CollecticonCalendarRange",componentId:"sc-d7veqq-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"calendar slot icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"calendar-day",d:"M6,7L4,7L4,9L6,9L6,7ZM15,2L14,2L14,4L11,4L11,2L5,2L5,4L2,4L2,2L1,2C0.447,2 0,2.447 0,3L0,14C0,14.553 0.447,15 1,15L15,15C15.553,15 16,14.553 16,14L16,3C16,2.447 15.553,2 15,2ZM14,13L2,13L2,6L14,6L14,13ZM4,0.494C4,0.222 3.778,0 3.506,0L3.497,0C3.222,0 3,0.222 3,0.494L3,3L4,3L4,0.494ZM13,0.494C13,0.222 12.778,0 12.506,0L12.497,0C12.222,0 12,0.222 12,0.494L12,3L13,3L13,0.494Z"}))})).withConfig({displayName:"calendar-slot__CollecticonCalendarSlot",componentId:"sc-149d7hp-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"calendar icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6,7H4v2h2V7z M6,10H4v2h2V10z M9,7H7v2h2V7z M9,10H7v2h2V10z M12,7h-2v2h2V7z M12,10h-2v2h2V10z M15,2h-1v2h-3V2H5v2H2V2H1 C0.447,2,0,2.447,0,3v11c0,0.553,0.447,1,1,1h14c0.553,0,1-0.447,1-1V3C16,2.447,15.553,2,15,2z M14,13H2V6h12V13z M4,0.494 C4,0.222,3.778,0,3.506,0H3.497C3.222,0,3,0.222,3,0.494V3h1V0.494z M13,0.494C13,0.222,12.778,0,12.506,0h-0.009 C12.222,0,12,0.222,12,0.494V3h1V0.494z"}))})).withConfig({displayName:"calendar__CollecticonCalendar",componentId:"sc-8vlmvg-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"camera icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6,8.5c0,1.103,0.897,2,2,2s2-0.897,2-2s-0.897-2-2-2S6,7.397,6,8.5z M15,3h-3.5C11.25,2,11,1,10,1H6C5,1,4.75,2,4.5,3H1 C0.45,3,0,3.45,0,4v9c0,0.55,0.45,1,1,1h14c0.55,0,1-0.45,1-1V4C16,3.45,15.55,3,15,3z M8,12.5c-2.209,0-4-1.791-4-4s1.791-4,4-4 s4,1.791,4,4S10.209,12.5,8,12.5z"}))})).withConfig({displayName:"camera__CollecticonCamera",componentId:"sc-1o7mf61-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chart bars icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,14L16,16L0,16L0,14L16,14ZM11,5L11,13L9,13L9,5L11,5ZM15,1L15,13L13,13L13,1L15,1ZM3,9L3,13L1,13L1,9L3,9ZM7,3L7,13L5,13L5,3L7,3Z"}))})).withConfig({displayName:"chart-bars__CollecticonChartBars",componentId:"sc-uuv0u5-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chart line icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,14L16,16L0,16L0,14L16,14ZM13.292,4.39C13.109,4.141 13,3.833 13,3.5C13,2.672 13.672,2 14.5,2C15.328,2 16,2.672 16,3.5C16,4.328 15.328,5 14.5,5C14.483,5 14.466,5 14.448,4.999L10.708,10.61C10.891,10.859 11,11.167 11,11.5C11,12.328 10.328,13 9.5,13C8.672,13 8,12.328 8,11.5C8,11.193 8.092,10.907 8.251,10.67L5.626,6.995C5.584,6.998 5.542,7 5.5,7C5.458,7 5.416,6.998 5.374,6.995L2.749,10.67C2.908,10.907 3,11.193 3,11.5C3,12.328 2.328,13 1.5,13C0.672,13 0,12.328 0,11.5C0,10.672 0.672,10 1.5,10C1.542,10 1.584,10.002 1.626,10.005L4.251,6.33C4.092,6.093 4,5.807 4,5.5C4,4.672 4.672,4 5.5,4C6.328,4 7,4.672 7,5.5C7,5.807 6.908,6.093 6.749,6.33L9.374,10.005C9.416,10.002 9.458,10 9.5,10C9.517,10 9.534,10 9.552,10.001L13.292,4.39Z"}))})).withConfig({displayName:"chart-line__CollecticonChartLine",componentId:"sc-ct4my2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chart pie icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7,9L14,9C13.95,12.913 10.833,16 7,16C3.137,16 0,12.863 0,9C0,5.137 3.137,2 7,2L7,9ZM16,7L9,7L9,0L10.41,0.142C13.576,0.793 15.962,3.577 16,7Z"}))})).withConfig({displayName:"chart-pie__CollecticonChartPie",componentId:"sc-10flqng-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron down small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"12.586,4.586 8,9.172 3.414,4.586 2,6 8,12 14,6"}))})).withConfig({displayName:"chevron-down--small__CollecticonChevronDownSmall",componentId:"sc-j16u51-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron down trail small icon"),/*@__PURE__*/eE(eI).createElement("g",{id:"chevron-down-trail--small"},/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a100",d:"M12.586,6.586l-4.586,4.586l-4.586,-4.586l-1.414,1.414l6,6l6,-6l-1.414,-1.414Z"}),/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a32",d:"M12.586,1.586l-4.586,4.586l-4.586,-4.586l-1.414,1.414l6,6l6,-6l-1.414,-1.414Z",opacity:"0.32"})))})).withConfig({displayName:"chevron-down-trail--small__CollecticonChevronDownTrailSmall",componentId:"sc-1ga8kui-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron down icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"14.586,3.586 8,10.172 1.414,3.586 0,5 8,13 16,5"}))})).withConfig({displayName:"chevron-down__CollecticonChevronDown",componentId:"sc-16oe913-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron left small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"11.414,12.586 6.828,8 11.414,3.414 10,2 4,8 10,14"}))})).withConfig({displayName:"chevron-left--small__CollecticonChevronLeftSmall",componentId:"sc-18vjqa1-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron left trail small icon"),/*@__PURE__*/eE(eI).createElement("g",{id:"chevron-left-trail--small"},/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a32",d:"M14.414,12.586l-4.586,-4.586l4.586,-4.586l-1.414,-1.414l-6,6l6,6l1.414,-1.414Z",opacity:"0.32"}),/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a100",d:"M9.414,12.586l-4.586,-4.586l4.586,-4.586l-1.414,-1.414l-6,6l6,6l1.414,-1.414Z"})))})).withConfig({displayName:"chevron-left-trail--small__CollecticonChevronLeftTrailSmall",componentId:"sc-r4sk2v-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron left icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"12.414,14.586 5.828,8 12.414,1.414 11,0 3,8 11,16 "}))})).withConfig({displayName:"chevron-left__CollecticonChevronLeft",componentId:"sc-o6152v-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron right small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"4.586,3.414 9.172,8 4.586,12.586 6,14 12,8 6,2"}))})).withConfig({displayName:"chevron-right--small__CollecticonChevronRightSmall",componentId:"sc-1oue0hw-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron right trail small icon"),/*@__PURE__*/eE(eI).createElement("g",{id:"chevron-right-trail--small"},/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a100",d:"M6.586,3.414l4.586,4.586l-4.586,4.586l1.414,1.414l6,-6l-6,-6l-1.414,1.414Z"}),/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a32",d:"M1.586,3.414l4.586,4.586l-4.586,4.586l1.414,1.414l6,-6l-6,-6l-1.414,1.414Z",opacity:"0.32"})))})).withConfig({displayName:"chevron-right-trail--small__CollecticonChevronRightTrailSmall",componentId:"sc-cr3ier-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron right icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"3.586,1.414 10.172,8 3.586,14.586 5,16 13,8 5,0"}))})).withConfig({displayName:"chevron-right__CollecticonChevronRight",componentId:"sc-138s8d2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron step backward icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2,15h2V1H2V15z M14.4,2.4L13,1L6,8l7,7l1.4-1.4L8.8,8L14.4,2.4z"}))})).withConfig({displayName:"chevron-step-backward__CollecticonChevronStepBackward",componentId:"sc-1h8m6i3-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron step forward icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,1h-2v14h2V1z M7.2,8l-5.6,5.6L3,15l7-7L3,1L1.6,2.4L7.2,8z"}))})).withConfig({displayName:"chevron-step-forward__CollecticonChevronStepForward",componentId:"sc-ymfau8-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron up small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"3.414,11.414 8,6.828 12.586,11.414 14,10 8,4 2,10"}))})).withConfig({displayName:"chevron-up--small__CollecticonChevronUpSmall",componentId:"sc-1vuskgk-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron up trail small icon"),/*@__PURE__*/eE(eI).createElement("g",{id:"chevron-up-trail--small"},/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a32",d:"M3.414,14.414l4.586,-4.586l4.586,4.586l1.414,-1.414l-6,-6l-6,6l1.414,1.414Z",opacity:"0.32"}),/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-a100",d:"M3.414,9.414l4.586,-4.586l4.586,4.586l1.414,-1.414l-6,-6l-6,6l1.414,1.414Z"})))})).withConfig({displayName:"chevron-up-trail--small__CollecticonChevronUpTrailSmall",componentId:"sc-1u82jsn-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"chevron up icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"1.414,12.414 8,5.828 14.586,12.414 16,11 8,3 0,11"}))})).withConfig({displayName:"chevron-up__CollecticonChevronUp",componentId:"sc-ks5tuk-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle exclamation icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7,9h2V4H7V9z M9,11c0-0.553-0.447-1-1-1s-1,0.447-1,1s0.447,1,1,1S9,11.553,9,11z M16,8c0-4.419-3.581-8-8-8S0,3.581,0,8 s3.581,8,8,8S16,12.419,16,8z M14,8c0,1.603-0.625,3.109-1.756,4.244C11.109,13.375,9.603,14,8,14s-3.109-0.625-4.244-1.756 C2.625,11.109,2,9.603,2,8s0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8z"}))})).withConfig({displayName:"circle-exclamation__CollecticonCircleExclamation",componentId:"sc-1k0psd0-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle forbidden icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,8c0,4.419,3.581,8,8,8s8-3.581,8-8s-3.581-8-8-8S0,3.581,0,8z M12.891,11.478L4.522,3.109C5.531,2.391,6.734,2,8,2 c1.603,0,3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8C14,9.266,13.609,10.469,12.891,11.478z M2,8 c0-1.266,0.391-2.469,1.109-3.478l8.369,8.369C10.469,13.609,9.266,14,8,14c-1.603,0-3.109-0.625-4.244-1.756 C2.625,11.109,2,9.603,2,8z"}))})).withConfig({displayName:"circle-forbidden__CollecticonCircleForbidden",componentId:"sc-1o35ffe-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle information icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7,12h2V7H7V12z M8,4C7.448,4,7,4.448,7,5s0.448,1,1,1c0.552,0,1-0.448,1-1S8.552,4,8,4z M8,0C3.582,0,0,3.582,0,8 c0,4.418,3.582,8,8,8s8-3.582,8-8C16,3.582,12.418,0,8,0z M12.243,12.243C11.109,13.376,9.603,14,8,14s-3.109-0.624-4.243-1.757 C2.624,11.109,2,9.603,2,8s0.624-3.109,1.757-4.243C4.891,2.624,6.397,2,8,2s3.109,0.624,4.243,1.757C13.376,4.891,14,6.397,14,8 C14,9.603,13.376,11.109,12.243,12.243z"}))})).withConfig({displayName:"circle-information__CollecticonCircleInformation",componentId:"sc-17lqoff-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle pause icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244C11.109,13.375,9.603,14,8,14 s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8c0-1.603,0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2 s3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8C14,9.603,13.375,11.109,12.244,12.244z M5,11h2V5H5V11z M9,11h2V5H9V11z"}))})).withConfig({displayName:"circle-pause__CollecticonCirclePause",componentId:"sc-kbggwr-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle play next icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M5,11l4-3L5,5V11z M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244 C11.109,13.375,9.603,14,8,14s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8c0-1.603,0.625-3.109,1.756-4.244 C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8C14,9.603,13.375,11.109,12.244,12.244z M9,8v3h2V5H9 V8z"}))})).withConfig({displayName:"circle-play-next__CollecticonCirclePlayNext",componentId:"sc-ha7um8-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle play icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6,12l6-4L6,4V12z M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244 C11.109,13.375,9.603,14,8,14s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8s0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2 s3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8S13.375,11.109,12.244,12.244z"}))})).withConfig({displayName:"circle-play__CollecticonCirclePlay",componentId:"sc-15udb8c-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle question icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,10.5c-0.552,0-1,0.448-1,1c0,0.552,0.448,1,1,1c0.552,0,1-0.448,1-1C9,10.948,8.552,10.5,8,10.5z M8,0 C3.582,0,0,3.582,0,8c0,4.418,3.582,8,8,8s8-3.582,8-8C16,3.582,12.418,0,8,0z M12.243,12.243C11.109,13.376,9.603,14,8,14 s-3.109-0.624-4.243-1.757C2.624,11.109,2,9.603,2,8s0.624-3.109,1.757-4.243C4.891,2.624,6.397,2,8,2s3.109,0.624,4.243,1.757 C13.376,4.891,14,6.397,14,8C14,9.603,13.376,11.109,12.243,12.243z M7.927,3.755c-2.248,0-2.76,1.695-2.802,2.906h1.571 c0.028-0.256,0.101-1.418,1.221-1.418c0.672,0,1.206,0.406,1.206,1.175c0,0.695-0.724,1.155-1.303,1.711 C7.241,8.685,7.168,9.325,7.168,9.824V10c0.146,0,1.615,0,1.615,0V9.824c0-1.256,1.967-1.594,1.967-3.541 C10.75,5.059,9.874,3.755,7.927,3.755z"}))})).withConfig({displayName:"circle-question__CollecticonCircleQuestion",componentId:"sc-1tmmqtp-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle record icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"circle-record",d:"M8,0.035C12.406,0.035 15.983,3.612 15.983,8.017C15.983,12.423 12.406,16 8,16C3.594,16 0.017,12.423 0.017,8.017C0.017,3.612 3.594,0.035 8,0.035ZM8,2.035C4.698,2.035 2.017,4.716 2.017,8.017C2.017,11.319 4.698,14 8,14C11.302,14 13.983,11.319 13.983,8.017C13.983,4.716 11.302,2.035 8,2.035ZM7.989,5.017C9.636,5.017 10.972,6.354 10.972,8C10.972,9.646 9.636,10.983 7.989,10.983C6.343,10.983 5.007,9.646 5.007,8C5.007,6.354 6.343,5.017 7.989,5.017Z"}))})).withConfig({displayName:"circle-record__CollecticonCircleRecord",componentId:"sc-dorv0a-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle stop icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M5,11h6V5H5V11z M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244 C11.109,13.375,9.603,14,8,14s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8s0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2 s3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8S13.375,11.109,12.244,12.244z"}))})).withConfig({displayName:"circle-stop__CollecticonCircleStop",componentId:"sc-p4y1fg-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle tick icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244C11.109,13.375,9.603,14,8,14 s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8s0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756 C13.375,4.891,14,6.397,14,8S13.375,11.109,12.244,12.244z M10.784,4.916L7.016,9.103L5.262,7.372L3.856,8.794L7.1,12l5.169-5.747 L10.784,4.916z"}))})).withConfig({displayName:"circle-tick__CollecticonCircleTick",componentId:"sc-ucs8qm-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"circle xmark icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M10.294,4.294L8,6.584L5.706,4.291L4.291,5.706L6.584,8l-2.294,2.294l1.416,1.416L8,9.416l2.294,2.294l1.416-1.416L9.416,8 l2.294-2.294L10.294,4.294z M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244 C11.109,13.375,9.603,14,8,14s-3.109-0.625-4.244-1.756C2.625,11.109,2,9.603,2,8s0.625-3.109,1.756-4.244C4.891,2.625,6.397,2,8,2 s3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8S13.375,11.109,12.244,12.244z"}))})).withConfig({displayName:"circle-xmark__CollecticonCircleXmark",componentId:"sc-1rxb9gg-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"clipboard tick icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11,2c0-0.6-0.4-1-1-1H9.4C9.2,0.4,8.7,0,8,0S6.8,0.4,6.6,1H6C5.4,1,5,1.4,5,2v2h6V2z M13,2h-1v2h1v10H3V4h1V2H3 C1.9,2,1,2.9,1,4v10c0,1.1,0.9,2,2,2h10c1.1,0,2-0.9,2-2V4C15,2.9,14.1,2,13,2z M7,9.7L5.2,8L3.8,9.4L7,12.6l5.2-5.7l-1.5-1.3L7,9.7 z"}))})).withConfig({displayName:"clipboard-tick__CollecticonClipboardTick",componentId:"sc-1pdrcx1-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"clipboard icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11,6H5v2h6V6z M11,2c0-0.6-0.4-1-1-1H9.4C9.2,0.4,8.7,0,8,0S6.8,0.4,6.6,1H6C5.4,1,5,1.4,5,2v2h6V2z M11,10H5v2h6V10z M13,2h-1v2h1v10H3V4h1V2H3C1.9,2,1,2.9,1,4v10c0,1.1,0.9,2,2,2h10c1.1,0,2-0.9,2-2V4C15,2.9,14.1,2,13,2z"}))})).withConfig({displayName:"clipboard__CollecticonClipboard",componentId:"sc-a2zain-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"clock back icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C5.609,0,3.463,1.047,2,2.709V0H0v6h6V4H3.528C3.6,3.916,3.681,3.838,3.756,3.756 C4.891,2.625,6.397,2,8,2s3.109,0.625,4.244,1.756C13.375,4.891,14,6.397,14,8s-0.625,3.109-1.756,4.244 C11.109,13.375,9.603,14,8,14s-3.113-0.619-4.244-1.756S2,9.603,2,8H0c0,4.419,3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M7,4v4.416 l3.291,3.291l1.416-1.416L9,7.584V4H7z"}))})).withConfig({displayName:"clock-back__CollecticonClockBack",componentId:"sc-rxii24-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"clock icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M9,4H7v4.416l3.294,3.291l1.413-1.416L9,7.584V4z M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M8,14 c-3.312,0-6-2.688-6-6s2.688-6,6-6s6,2.688,6,6S11.312,14,8,14z"}))})).withConfig({displayName:"clock__CollecticonClock",componentId:"sc-183mh7f-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"code icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12.294,3.294l-1.416,1.416L13.5,8l-2.622,3.294l1.416,1.416L16,8L12.294,3.294z M5.122,4.706L3.706,3.291L0,8l3.706,4.706 l1.416-1.416L2.5,8L5.122,4.706z M6,13h2l2-10H8L6,13z"}))})).withConfig({displayName:"code__CollecticonCode",componentId:"sc-i0rakm-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"cog icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,9V7l-2.259-0.753c-0.113-0.372-0.262-0.728-0.441-1.066l1.066-2.131L12.95,1.634L10.819,2.7 c-0.338-0.178-0.694-0.325-1.066-0.441L9,0H7L6.247,2.259C5.875,2.372,5.519,2.522,5.181,2.7L3.05,1.638L1.638,3.05l1.066,2.131 C2.522,5.519,2.375,5.875,2.259,6.247L0,7v2l2.259,0.753c0.112,0.372,0.263,0.728,0.441,1.066L1.634,12.95l1.416,1.416L5.181,13.3 c0.338,0.178,0.694,0.328,1.066,0.441L7,16h2l0.753-2.259c0.372-0.113,0.728-0.262,1.066-0.441l2.131,1.066l1.416-1.416L13.3,10.819 c0.178-0.337,0.328-0.694,0.441-1.066L16,9z M8,11c-1.656,0-3-1.344-3-3s1.344-3,3-3s3,1.344,3,3S9.656,11,8,11z"}))})).withConfig({displayName:"cog__CollecticonCog",componentId:"sc-1sd7ai6-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"compass 2 icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"15,1 1,6 8,8 10,15"}))})).withConfig({displayName:"compass-2__CollecticonCompass2",componentId:"sc-1tbgltj-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"compass icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M8,14c-3.312,0-6-2.688-6-6s2.688-6,6-6s6,2.688,6,6 S11.312,14,8,14z M6.5,6.5L4,11v1h1l4.5-2.5L12,5V4h-1L6.5,6.5z M8,9C7.447,9,7,8.553,7,8s0.447-1,1-1s1,0.447,1,1S8.553,9,8,9z"}))})).withConfig({displayName:"compass__CollecticonCompass",componentId:"sc-1ka5acc-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"crosshair 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244C11.35,13.137,10.225,13.716,9,13.919V11H7 v2.919c-1.222-0.203-2.35-0.781-3.244-1.675C2.862,11.35,2.287,10.222,2.081,9H5V7H2.081c0.203-1.222,0.781-2.35,1.675-3.244 S5.775,2.284,7,2.081V5h2V2.081c1.222,0.203,2.35,0.781,3.244,1.675C13.137,4.65,13.716,5.775,13.919,7H11v2h2.919 C13.712,10.222,13.137,11.35,12.244,12.244z"}))})).withConfig({displayName:"crosshair-2__CollecticonCrosshair2",componentId:"sc-6nf0hc-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"crosshair icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13.916,7C13.494,4.488,11.512,2.506,9,2.084V0H7v2.084C4.488,2.506,2.506,4.488,2.084,7H0v2h2.084 C2.506,11.512,4.488,13.494,7,13.916V16h2v-2.084c2.512-0.422,4.494-2.403,4.916-4.916H16V7H13.916z M10.828,10.828 C10.072,11.584,9.069,12,8,12s-2.072-0.416-2.828-1.172S4,9.069,4,8s0.416-2.072,1.172-2.828S6.931,4,8,4s2.072,0.416,2.828,1.172 S12,6.931,12,8S11.584,10.072,10.828,10.828z M8,6C6.897,6,6,6.897,6,8s0.897,2,2,2s2-0.897,2-2S9.103,6,8,6z"}))})).withConfig({displayName:"crosshair__CollecticonCrosshair",componentId:"sc-1amsdvw-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"disc dollar icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12,6H6.181C5.909,6,5.688,6.222,5.688,6.494v0.009 c0,0.272,0.222,0.494,0.494,0.494H10c1.103,0,2,0.897,2,2v1c0,1.103-0.897,2-2,2H9v1H7v-1H4v-2h5.506C9.778,9.997,10,9.775,10,9.503 V9.494C10,9.222,9.778,9,9.506,9H6H5.981C4.887,9,4,8.112,4,7.019V6c0-1.103,0.897-2,2-2h1V3h2v1h3V6z"}))})).withConfig({displayName:"disc-dollar__CollecticonDiscDollar",componentId:"sc-1dlkh66-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"disc xmark icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.582,0,0,3.582,0,8s3.582,8,8,8s8-3.582,8-8S12.418,0,8,0z M12.707,11.293l-1.414,1.414L8,9.414l-3.293,3.293 l-1.414-1.414L6.586,8L3.293,4.707l1.414-1.414L8,6.586l3.293-3.293l1.414,1.414L9.414,8L12.707,11.293z"}))})).withConfig({displayName:"disc-xmark__CollecticonDiscXmark",componentId:"sc-1c7ctan-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"download 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12.706,8.294l-1.416-1.416L9,9.172V0H7v9.172L4.706,6.878L3.291,8.294L8,13L12.706,8.294z M16,14H0v2h16V14z"}))})).withConfig({displayName:"download-2__CollecticonDownload2",componentId:"sc-13uh0ce-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"download icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12.706,8.294l-1.416-1.416L9,9.172V0H7v9.172L4.706,6.878L3.291,8.294L8,13L12.706,8.294z M14,4v10H2V4H0v12h16V4H14z"}))})).withConfig({displayName:"download__CollecticonDownload",componentId:"sc-1wcnsuh-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"drop icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,13c2,0,4.497-1.5,4-4C11,9,6,13,8,13z M8,0c0,0-7,5-7,10c0,4,3.688,6,7,6s7-2,7-6C15,5,8,0,8,0z M12.606,11.687 c-0.244,0.456-0.6,0.866-1.062,1.209c-0.466,0.35-1.019,0.622-1.641,0.816C9.294,13.9,8.637,14,8,14s-1.294-0.1-1.903-0.288 c-0.622-0.191-1.175-0.466-1.641-0.816c-0.463-0.347-0.819-0.753-1.062-1.209C3.131,11.194,3,10.625,3,10 c0-0.788,0.278-1.684,0.825-2.669c0.494-0.891,1.2-1.831,2.094-2.794C6.659,3.741,7.406,3.056,8,2.553 c0.594,0.503,1.341,1.184,2.084,1.984c0.894,0.966,1.6,1.906,2.094,2.794C12.722,8.316,13,9.212,13,10 C13,10.625,12.866,11.194,12.606,11.687z"}))})).withConfig({displayName:"drop__CollecticonDrop",componentId:"sc-x9gde6-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"ellipsis horizontal icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,8c0-1.103-0.897-2-2-2S0,6.897,0,8s0.897,2,2,2S4,9.103,4,8z M6,8c0,1.103,0.897,2,2,2s2-0.897,2-2S9.103,6,8,6 S6,6.897,6,8z M12,8c0,1.103,0.897,2,2,2s2-0.897,2-2s-0.897-2-2-2S12,6.897,12,8z"}))})).withConfig({displayName:"ellipsis-horizontal__CollecticonEllipsisHorizontal",componentId:"sc-1qnc74s-0"})([""]);var dM=rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"ellipsis vertical icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,4c1.103,0,2-0.897,2-2S9.103,0,8,0S6,0.897,6,2S6.897,4,8,4z M8,6C6.897,6,6,6.897,6,8s0.897,2,2,2s2-0.897,2-2 S9.103,6,8,6z M8,12c-1.103,0-2,0.897-2,2s0.897,2,2,2s2-0.897,2-2S9.103,12,8,12z"}))})).withConfig({displayName:"ellipsis-vertical__CollecticonEllipsisVertical",componentId:"sc-179rm06-0"})([""]);rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"envelope icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,6v8h16V6l-8,5L0,6z M0,2v2l8,5l8-5V2H0z"}))})).withConfig({displayName:"envelope__CollecticonEnvelope",componentId:"sc-yidx52-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"equal small icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2,11h12V9H2V11z M2,5v2h12V5H2z"}))})).withConfig({displayName:"equal--small__CollecticonEqualSmall",componentId:"sc-wsga5u-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"equal icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M1,11h14V9H1V11z M1,5v2h14V5H1z"}))})).withConfig({displayName:"equal__CollecticonEqual",componentId:"sc-1fa0j72-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"exclamation small icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M9,11C9,10.447 8.553,10 8,10C7.447,10 7,10.447 7,11C7,11.553 7.447,12 8,12C8.553,12 9,11.553 9,11ZM9,4L9,9L7,9L7,4L9,4Z"}))})).withConfig({displayName:"exclamation--small__CollecticonExclamationSmall",componentId:"sc-8rmq3h-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"expand collapse icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"expand-collapse",d:"M4.414,15.414L8,11.828L11.586,15.414L13,14L8,9L3,14L4.414,15.414ZM11.586,0.586L8,4.172L4.414,0.586L3,2L8,7L13,2L11.586,0.586Z"}))})).withConfig({displayName:"expand-collapse__CollecticonExpandCollapse",componentId:"sc-12n4ycf-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"expand down left icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13,11H9v2h6V1H3v6h2V3h8V11z M0,8v8h8v-2H3.412l6.294-6.294L8.294,6.294L2,12.587V8H0z"}))})).withConfig({displayName:"expand-down-left__CollecticonExpandDownLeft",componentId:"sc-1rjpycs-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"expand down right icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3,3h8v4h2V1H1v12h6v-2H3V3z M14,8v4.587L7.706,6.294L6.294,7.706L12.587,14H8v2h8V8H14z"}))})).withConfig({displayName:"expand-down-right__CollecticonExpandDownRight",componentId:"sc-10e6gt6-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"expand from left icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"expand-from-left",d:"M16,16L0,16L0,0L16,0L16,16ZM4,2L4,14L14,14L14,2L4,2ZM5.586,5.414L8.172,8L5.586,10.586L7,12L11,8L7,4L5.586,5.414Z"}))})).withConfig({displayName:"expand-from-left__CollecticonExpandFromLeft",componentId:"sc-xntp9m-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"expand from right icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"expand-from-right",d:"M0,0L16,0L16,16L0,16L0,0ZM12,14L12,2L2,2L2,14L12,14ZM10.414,10.586L7.828,8L10.414,5.414L9,4L5,8L9,12L10.414,10.586Z"}))})).withConfig({displayName:"expand-from-right__CollecticonExpandFromRight",componentId:"sc-8rny95-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"expand top left icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13,13H5V9H3v6h12V3H9v2h4V13z M2,8V3.413l6.294,6.294l1.413-1.413L3.412,2H8V0L0,0l0,8H2z"}))})).withConfig({displayName:"expand-top-left__CollecticonExpandTopLeft",componentId:"sc-1bzl97p-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"expand top right icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3,5h4V3H1v12h12V9h-2v4H3V5z M16,8V0L8,0v2h4.587L6.294,8.294l1.413,1.413L14,3.413V8H16z"}))})).withConfig({displayName:"expand-top-right__CollecticonExpandTopRight",componentId:"sc-1bjhv94-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"eye disabled icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11.685,2.886L11.686,2.886L14.586,-0.014L16,1.4L13.345,4.055C15.264,5.792 16,8 16,8C16,8 14,14 8,14C6.537,14 5.312,13.643 4.296,13.104L1.4,16L-0.014,14.586L2.64,11.932L2.64,11.932L4.055,10.516L4.055,10.516L5.472,9.1L5.472,9.1L11.685,2.886ZM5.806,11.594C6.444,11.846 7.173,12 8,12C11.479,12 13.214,9.267 13.832,8C13.519,7.356 12.917,6.338 11.949,5.49C11.97,5.658 12,5.825 12,6C12,8.209 10.209,10 8,10C7.81,10 7.622,9.987 7.439,9.961L5.806,11.594ZM1.669,10.902C0.478,9.435 0,8 0,8C0,8 2,2 8,2C8.828,2 9.579,2.114 10.26,2.311L4.549,8.023C4.2,7.429 4,6.738 4,6C4,5.826 4.03,5.66 4.051,5.491C3.082,6.34 2.481,7.358 2.168,8C2.361,8.396 2.661,8.932 3.088,9.484L1.669,10.902Z"}))})).withConfig({displayName:"eye-disabled__CollecticonEyeDisabled",componentId:"sc-4xvufx-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"eye icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,2C2,2 0,8 0,8C0,8 2,14 8,14C14,14 16,8 16,8C16,8 14,2 8,2ZM8,12C4.519,12 2.787,9.272 2.168,8C2.481,7.358 3.082,6.34 4.051,5.491C4.03,5.66 4,5.826 4,6C4,8.209 5.791,10 8,10C10.209,10 12,8.209 12,6C12,5.825 11.97,5.658 11.949,5.49C12.917,6.338 13.519,7.356 13.832,8C13.214,9.267 11.479,12 8,12Z"}))})).withConfig({displayName:"eye__CollecticonEye",componentId:"sc-1wfb5gr-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"face happy icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M5,7C5.553,7 6,6.553 6,6C6,5.447 5.553,5 5,5C4.447,5 4,5.447 4,6C4,6.553 4.447,7 5,7ZM8,10C7.263,10 6.616,9.597 6.269,9L4.125,9C4.569,10.725 6.134,12 8,12C9.863,12 11.431,10.725 11.875,9L9.731,9C9.384,9.597 8.738,10 8,10ZM8,0C3.581,0 0,3.581 0,8C0,12.419 3.581,16 8,16C12.419,16 16,12.419 16,8C16,3.581 12.419,0 8,0ZM12.244,12.244C11.109,13.375 9.603,14 8,14C6.397,14 4.891,13.375 3.756,12.244C2.625,11.109 2,9.603 2,8C2,6.397 2.625,4.891 3.756,3.756C4.891,2.625 6.397,2 8,2C9.603,2 11.109,2.625 12.244,3.756C13.375,4.891 14,6.397 14,8C14,9.603 13.375,11.109 12.244,12.244ZM11,5C10.447,5 10,5.447 10,6C10,6.553 10.447,7 11,7C11.553,7 12,6.553 12,6C12,5.447 11.553,5 11,5Z"}))})).withConfig({displayName:"face-happy__CollecticonFaceHappy",componentId:"sc-1h06tny-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"face sad icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,8C6.134,8 4.569,9.275 4.125,11L6.269,11C6.616,10.403 7.263,10 8,10C8.738,10 9.384,10.403 9.731,11L11.875,11C11.431,9.275 9.863,8 8,8ZM5,7C5.553,7 6,6.553 6,6C6,5.447 5.553,5 5,5C4.447,5 4,5.447 4,6C4,6.553 4.447,7 5,7ZM8,0C3.581,0 0,3.581 0,8C0,12.419 3.581,16 8,16C12.419,16 16,12.419 16,8C16,3.581 12.419,0 8,0ZM12.244,12.244C11.109,13.375 9.603,14 8,14C6.397,14 4.891,13.375 3.756,12.244C2.625,11.109 2,9.603 2,8C2,6.397 2.625,4.891 3.756,3.756C4.891,2.625 6.397,2 8,2C9.603,2 11.109,2.625 12.244,3.756C13.375,4.891 14,6.397 14,8C14,9.603 13.375,11.109 12.244,12.244ZM11,5C10.447,5 10,5.447 10,6C10,6.553 10.447,7 11,7C11.553,7 12,6.553 12,6C12,5.447 11.553,5 11,5Z"}))})).withConfig({displayName:"face-sad__CollecticonFaceSad",componentId:"sc-wspec2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"factory icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,16h3V0H0V16z M10,8V4L4,8v8h6v-4h2v4h4V4L10,8z"}))})).withConfig({displayName:"factory__CollecticonFactory",componentId:"sc-1to3481-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"fence icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,0l-2,2v2h-2V2L8,0L6,2v2H4V2L2,0L0,2v14h4v-2h2v2h4v-2h2v2h4V2L14,0z M4,12V6h2v6H4z M10,12V6h2v6H10z"}))})).withConfig({displayName:"fence__CollecticonFence",componentId:"sc-ndm71b-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"filter icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7,16L7,10L0,2L0,0L16,0L16,2L9,10L9,14L7,16Z"}))})).withConfig({displayName:"filter__CollecticonFilter",componentId:"sc-eblqxv-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"flag pole icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2.009,0H1.991C1.444,0,1,0.444,1,0.991V16h2V0.991C3,0.444,2.556,0,2.009,0z M16,1H4v8h12l-4-4L16,1z"}))})).withConfig({displayName:"flag-pole__CollecticonFlagPole",componentId:"sc-13b70b-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"flame icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M9.65,4.05C9.8,4.2,9.95,4.35,10.1,4.5c0.9,0.95,1.6,1.9,2.1,2.8c0.55,1,0.85,1.9,0.85,2.65c0,0.6-0.15,1.2-0.4,1.7 c-0.25,0.45-0.6,0.85-1.05,1.2c-0.45,0.35-1,0.6-1.65,0.8C9.3,13.9,8.65,14,8,14s-1.3-0.1-1.9-0.3s-1.15-0.45-1.65-0.8 C4,12.55,3.65,12.15,3.4,11.7C3.15,11.2,3,10.65,3,10c0-0.6,0.2-1.3,0.65-2.1C3.75,7.7,3.85,7.5,4,7.3c0.8,0.65,1.55,0.8,2.05,0.8 C6.9,8.1,7.7,7.7,8.35,7c0.4-0.5,0.75-1.1,1-1.85C9.45,4.8,9.55,4.45,9.65,4.05 M8,0c0,3.9-0.85,6.1-1.95,6.1C5.45,6.1,4.7,5.45,4,4 c-1.65,1.85-3,4-3,6c0,4,3.7,6,7,6l0,0c3.3,0,7-2,7-6C15,5,8,0,8,0L8,0z"}))})).withConfig({displayName:"flame__CollecticonFlame",componentId:"sc-fx7lds-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"folder icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7,1l2,2h7v11H0V1H7z"}))})).withConfig({displayName:"folder__CollecticonFolder",componentId:"sc-1s4zkne-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"gauge icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M8,14c-3.312,0-6-2.688-6-6s2.688-6,6-6s6,2.688,6,6 S11.312,14,8,14z M8.225,8.016L6.172,5.387l0.575,3.287C6.591,8.912,6.5,9.194,6.5,9.5C6.5,10.328,7.172,11,8,11s1.5-0.672,1.5-1.5 C9.5,8.75,8.947,8.125,8.225,8.016z M8,3C5.581,3,3.562,4.719,3.1,7h1.141C4.412,6.344,4.756,5.744,5.25,5.25 C5.984,4.516,6.963,4.113,8,4.113s2.016,0.403,2.75,1.137c0.494,0.494,0.837,1.094,1.009,1.75H12.9C12.438,4.719,10.419,3,8,3z"}))})).withConfig({displayName:"gauge__CollecticonGauge",componentId:"sc-5yj9ve-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"git fork icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13,9v2h-2.488c-0.047-0.006-0.131-0.044-0.169-0.069L7.416,8l2.931-2.931C10.384,5.041,10.469,5.006,10.516,5H13v2l3-3 l-3-3v2h-2.5C9.962,3,9.319,3.266,8.941,3.647L6.584,6H0v4h6.584l2.353,2.353C9.319,12.734,9.959,13,10.497,13h2.5v2l3-3L13,9z"}))})).withConfig({displayName:"git-fork__CollecticonGitFork",componentId:"sc-kkuh2n-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"globe icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C3.581,0,0,3.581,0,8s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M3.756,12.244C2.625,11.109,2,9.603,2,8 c0-0.569,0.078-1.122,0.231-1.653l0.506,1.334l2.819,2.225l0.469,0.106l-0.691,1.106l1.022,2.653 C5.384,13.497,4.494,12.978,3.756,12.244z M12.822,11.575c-0.175,0.234-0.369,0.459-0.578,0.669 c-1.084,1.084-2.512,1.703-4.041,1.753l1.678-1.325l0.216-1.131L5.856,9.569L5.594,9.112L5.25,8.875L5.072,8.091L4.491,8.328 l0.194-0.762l0.694-0.091l0.619,0.688L6.2,6.975l0.759-1.05l0.809-0.287L7.85,5.091L7.675,4.903l0.766-0.125l0.087-0.6L7.834,3.462 L7.241,3.541L6.506,3.175l-0.4,1.253L5.222,3.891l1.284-1.344L4.862,2.881c0.831-0.509,1.772-0.809,2.759-0.869L9.484,3.65 l0.684,0.184l0.144-0.528l0.703-0.491c0.441,0.256,0.85,0.572,1.219,0.941c0.184,0.184,0.356,0.381,0.516,0.584l-0.544,0.941 l-0.534,0.106l0.656,4.137l0.731,0.766L12.822,11.575z M12.859,6.191l0.247-0.331L13.387,6.2L12.859,6.191z"}))})).withConfig({displayName:"globe__CollecticonGlobe",componentId:"sc-10oai70-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"grip horizontal icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"grip-horizontal",d:"M3,7l-0,-2l-2,0l-0,2l2,0Zm-0,4l-0,-2l-2,0l-0,2l2,0Zm4,-4l-0,-2l-2,0l-0,2l2,0Zm-0,4l-0,-2l-2,0l-0,2l2,0Zm4,-4l-0,-2l-2,0l-0,2l2,0Zm0,4l0,-2l-2,0l0,2l2,0Zm4,-4l-0,-2l-2,0l-0,2l2,0Zm-0,4l-0,-2l-2,0l0,2l2,0Z"}))})).withConfig({displayName:"grip-horizontal__CollecticonGripHorizontal",componentId:"sc-16u2dmc-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"grip vertical icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"grip-vertical",d:"M7,13L5,13L5,15L7,15L7,13ZM11,13L9,13L9,15L11,15L11,13ZM7,9L5,9L5,11L7,11L7,9ZM11,9L9,9L9,11L11,11L11,9ZM7,5L5,5L5,7L7,7L7,5ZM11,5L9,5L9,7L11,7L11,5ZM7,1L5,1L5,3L7,3L7,1ZM11,1L9,1L9,3L11,3L11,1Z"}))})).withConfig({displayName:"grip-vertical__CollecticonGripVertical",componentId:"sc-maqm4u-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"hamburger menu icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M1,9h14V7H1V9z M1,14h14v-2H1V14z M1,2v2h14V2H1z"}))})).withConfig({displayName:"hamburger-menu__CollecticonHamburgerMenu",componentId:"sc-179stu8-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"hand pan icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"hand-pan",d:"M8,8L8,1C8,0.448 8.448,0 9,0C9.552,0 10,0.448 10,1L10,8L11,8L11,2C11,1.448 11.448,1 12,1C12.552,1 13,1.448 13,2L13,8L14,8L14,5C14,4.448 14.448,4 15,4C15.552,4 16,4.448 16,5L16,9L16,9.001L16,14C16,14.53 15.789,15.039 15.414,15.414C15.039,15.789 14.53,16 14,16C11.883,16 8.628,16 7,16C6.37,16 5.778,15.704 5.4,15.2C3.88,13.174 0,8 0,8C0,8 0,8 0,8C0.574,7.426 1.482,7.362 2.131,7.848L5,10L5,3C5,2.448 5.448,2 6,2C6.552,2 7,2.448 7,3L7,8L8,8Z"}))})).withConfig({displayName:"hand-pan__CollecticonHandPan",componentId:"sc-1o21t5t-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"hand swipe horizontal icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"hand-swipe-horizontal",d:"M5,11L5,4.5C5,3.672 5.672,3 6.5,3C7.328,3 8,3.672 8,4.5L8,8L9.528,8C9.838,8 10.145,8.072 10.422,8.211C11.005,8.502 12.076,9.038 12.894,9.447C13.572,9.786 14,10.479 14,11.236C14,12.022 14,13.063 14,14C14,14.53 13.789,15.039 13.414,15.414C13.039,15.789 12.53,16 12,16L6.702,16C6.247,16 5.807,15.845 5.452,15.562C4.154,14.523 1,12 1,12C1,11.448 1.448,11 2,11L5,11ZM2,4.5C2,2.016 4.016,-0 6.5,-0C8.984,-0 11,2.016 11,4.5C11,4.5 9,4.5 9,4.5C9,3.12 7.88,2 6.5,2C5.12,2 4,3.12 4,4.5C4,4.5 2,4.5 2,4.5Z"}))})).withConfig({displayName:"hand-swipe-horizontal__CollecticonHandSwipeHorizontal",componentId:"sc-15beqjt-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"hand thumbs down icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3,10L3,1L0,1L0,10L3,10ZM15,11C15.265,11 15.52,10.895 15.707,10.707C15.895,10.52 16,10.265 16,10C16,8.833 16,6.975 16,6.277C16,6.096 15.951,5.918 15.857,5.762C15.455,5.092 14.295,3.158 13.583,1.971C13.221,1.369 12.57,1 11.868,1C10.397,1 7.805,1 6,1C5.47,1 4.961,1.211 4.586,1.586C4.211,1.961 4,2.47 4,3C4,5.255 4,8.803 4,10.298C4,10.753 4.155,11.193 4.438,11.548C5.477,12.846 8,16 8,16C8,16 8,16 8,16C8.552,16 9,15.552 9,15L9,11L15,11Z"}))})).withConfig({displayName:"hand-thumbs-down__CollecticonHandThumbsDown",componentId:"sc-1kyach0-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"hand thumbs up icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3,6L3,15L0,15L0,6L3,6ZM15,5C15.265,5 15.52,5.105 15.707,5.293C15.895,5.48 16,5.735 16,6C16,7.167 16,9.025 16,9.723C16,9.904 15.951,10.082 15.857,10.238C15.455,10.908 14.295,12.842 13.583,14.029C13.221,14.631 12.57,15 11.868,15C10.397,15 7.805,15 6,15C5.47,15 4.961,14.789 4.586,14.414C4.211,14.039 4,13.53 4,13C4,10.745 4,7.197 4,5.702C4,5.247 4.155,4.807 4.438,4.452C5.477,3.154 8,0 8,0C8,0 8,0 8,0C8.552,0 9,0.448 9,1L9,5L15,5Z"}))})).withConfig({displayName:"hand-thumbs-up__CollecticonHandThumbsUp",componentId:"sc-ywkjmo-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"heading icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"heading",d:"M11,8l-6,0l0,-7l-2,0l0,14l2,0l0,-5l6,0l0,5l2,0l0,-14l-2,0l0,7Z"}))})).withConfig({displayName:"heading__CollecticonHeading",componentId:"sc-1rw8j61-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"heart icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11.75,1C10.126,1,8.716,1.911,8,3.249C7.284,1.911,5.874,1,4.25,1C1.903,1,0,2.903,0,5.25C0,11,8,15,8,15s8-4,8-9.75 C16,2.903,14.097,1,11.75,1z"}))})).withConfig({displayName:"heart__CollecticonHeart",componentId:"sc-18uyj45-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"house icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"0,6 0,16 6,16 6,10 10,10 10,16 16,16 16,6 8,0"}))})).withConfig({displayName:"house__CollecticonHouse",componentId:"sc-1fgnmhh-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"houses icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,8v7h3v-4h3v4h6V8L6,3L0,8z M10,1L7.6,3L13,7.5V13h3V6L10,1z"}))})).withConfig({displayName:"houses__CollecticonHouses",componentId:"sc-39h0d0-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"iso stack icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,9L0,5l8-4l8,4L8,9z M14.397,7.2L16,8l-8,4L0,8l1.603-0.8L8,10.397L14.397,7.2z M14.397,10.2L16,11l-8,4l-8-4l1.603-0.8 L8,13.397L14.397,10.2z"}))})).withConfig({displayName:"iso-stack__CollecticonIsoStack",componentId:"sc-187l9aa-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"italic icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"italic",d:"M9.439,3l-5,10l-3.439,0l-0,2l9,0l0,-2l-3.439,0l5,-10l3.439,0l0,-2l-9,0l0,2l3.439,0Z"}))})).withConfig({displayName:"italic__CollecticonItalic",componentId:"sc-ra4udc-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"keyboard icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,4c-0,-1.105 -0.895,-2 -2,-2c-3.074,0 -8.926,0 -12,0c-1.105,0 -2,0.895 -2,2c0,2.22 0,5.78 0,8c0,1.105 0.895,2 2,2c3.074,0 8.926,0 12,0c1.105,-0 2,-0.895 2,-2c0,-2.22 0,-5.78 0,-8Zm-4,6l0,2l-8,0l0,-2l8,0Zm-8,-3l0,2l-2,0l0,-2l2,0Zm3,0l0,2l-2,0l0,-2l2,0Zm3,0l0,2l-2,0l0,-2l2,0Zm4,0l0,2l-3,0l0,-2l3,0Zm-10,-3l0,2l-2,0l0,-2l2,0Zm3,0l0,2l-2,0l0,-2l2,0Zm3,0l0,2l-2,0l0,-2l2,0Zm4,0l0,2l-3,0l0,-2l3,0Z"}))})).withConfig({displayName:"keyboard__CollecticonKeyboard",componentId:"sc-kehk32-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"layout column 2x icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,16L7,16L7,0L0,0L0,16ZM15,16L15,0L8,0L8,16L15,16Z"}))})).withConfig({displayName:"layout-column-2x__CollecticonLayoutColumn2x",componentId:"sc-11ojdwa-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"layout grid 2x2 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7,9L7,16L0,16L0,9L7,9ZM15,9L15,16L8,16L8,9L15,9ZM7,1L7,8L0,8L0,1L7,1ZM15,1L15,8L8,8L8,1L15,1Z"}))})).withConfig({displayName:"layout-grid-2x2__CollecticonLayoutGrid2x2",componentId:"sc-14yggc1-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"layout grid 3x3 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M1,1h4v4H1V1z M6,1h4v4H6V1z M11,1h4v4h-4V1z M1,6h4v4H1V6z M6,6h4v4H6V6z M11,6h4v4h-4V6z M1,11h4v4H1V11z M6,11h4v4H6V11z M11,11h4v4h-4V11z"}))})).withConfig({displayName:"layout-grid-3x3__CollecticonLayoutGrid3x3",componentId:"sc-1j22hjj-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"layout row 2x icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,0L0,7L16,7L16,0L0,0ZM0,15L16,15L16,8L0,8L0,15Z"}))})).withConfig({displayName:"layout-row-2x__CollecticonLayoutRow2x",componentId:"sc-uoth1p-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"leaf icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C4.134,0,1,3.134,1,7v9h2v-4c0-3.866,3.134-7,7-7h2c-3.866,0-7,3.134-7,7v2h3c3.866,0,7-3.134,7-7V0H8z"}))})).withConfig({displayName:"leaf__CollecticonLeaf",componentId:"sc-1mdo8m2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"link icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6.794,12.794C6.316,13.269,5.681,13.531,5,13.531s-1.316-0.262-1.794-0.738c-0.987-0.988-0.987-2.597,0-3.584L5.5,6.916 L4.084,5.5L1.791,7.794c-1.766,1.769-1.766,4.644,0.003,6.413C2.647,15.062,3.784,15.531,5,15.531s2.353-0.469,3.206-1.325 l2.294-2.294L9.084,10.5L6.794,12.794z M14.206,1.794C13.353,0.938,12.216,0.469,11,0.469S8.647,0.938,7.794,1.794L5.5,4.084 L6.916,5.5l2.294-2.294C9.684,2.731,10.319,2.469,11,2.469s1.316,0.263,1.794,0.737c0.988,0.987,0.988,2.597,0,3.584L10.5,9.084 l1.416,1.416l2.294-2.294C15.975,6.438,15.975,3.562,14.206,1.794z M11.706,5.706l-1.416-1.416l-6,6l1.416,1.416L11.706,5.706z"}))})).withConfig({displayName:"link__CollecticonLink",componentId:"sc-w4hhqn-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"list numbered icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"list-numbered",d:"M0,10l0,-1l2,0c0.552,0 1,0.448 1,1l0,1c-0,0.552 -0.448,1 -1,1l-0.75,0c-0.066,-0 -0.13,0.026 -0.177,0.073c-0.047,0.047 -0.073,0.111 -0.073,0.177c0,0.153 0,0.347 0,0.5c-0,0.066 0.026,0.13 0.073,0.177c0.047,0.047 0.111,0.073 0.177,0.073l1.75,0l0,1l-2,0c-0.552,-0 -1,-0.448 -1,-1l0,-1c0,-0.552 0.448,-1 1,-1l0.75,-0c0.066,0 0.13,-0.026 0.177,-0.073c0.047,-0.047 0.073,-0.111 0.073,-0.177c0,-0.153 0,-0.347 0,-0.5c0,-0.066 -0.026,-0.13 -0.073,-0.177c-0.047,-0.047 -0.111,-0.073 -0.177,-0.073l-1.75,0Zm4,1l12,0l0,2l-12,0l0,-2Zm0,-4l12,0l0,2l-12,0l0,-2Zm-3,-3.75c0,-0.066 -0.026,-0.13 -0.073,-0.177c-0.047,-0.047 -0.111,-0.073 -0.177,-0.073l-0.75,0l0,-1l1,0c0.552,0 1,0.448 1,1c-0,1.185 0,4 0,4l-1,0l0,-3.75Zm3,-0.25l12,0l0,2l-12,0l0,-2Z"}))})).withConfig({displayName:"list-numbered__CollecticonListNumbered",componentId:"sc-1y4r290-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"list icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,3v2h12V3H4z M0,5h2V3H0V5z M4,9h12V7H4V9z M0,9h2V7H0V9z M4,13h12v-2H4V13z M0,13h2v-2H0V13z"}))})).withConfig({displayName:"list__CollecticonList",componentId:"sc-33nw9x-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"lock 2 open icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12.25,7H12V4c0-1.653-1.347-3-3-3H7C5.347,1,4,2.347,4,4v1h2V4c0-0.55,0.45-1,1-1h2c0.55,0,1,0.45,1,1v3H3.75 C3.338,7,3,7.338,3,7.75v6.5C3,14.662,3.338,15,3.75,15h8.5c0.412,0,0.75-0.338,0.75-0.75v-6.5C13,7.338,12.662,7,12.25,7z"}))})).withConfig({displayName:"lock-2-open__CollecticonLock2Open",componentId:"sc-zzwhkx-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"lock 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12.25,7H12V4c0-1.653-1.347-3-3-3H7C5.347,1,4,2.347,4,4v3H3.75C3.338,7,3,7.338,3,7.75v6.5C3,14.663,3.338,15,3.75,15h8.5 c0.413,0,0.75-0.337,0.75-0.75v-6.5C13,7.338,12.663,7,12.25,7z M6,4c0-0.55,0.45-1,1-1h2c0.55,0,1,0.45,1,1v3H6V4z"}))})).withConfig({displayName:"lock-2__CollecticonLock2",componentId:"sc-1pa8bjy-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"lock open icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,7h-1V4c0-2.206-1.794-4-4-4H7C4.794,0,3,1.794,3,4h2c0-1.103,0.897-2,2-2h2c1.103,0,2,0.897,2,2v3H8H2 C1.45,7,1,7.45,1,8v7c0,0.55,0.45,1,1,1h12c0.55,0,1-0.45,1-1V8C15,7.45,14.55,7,14,7z M9,12.731V13.5c0,0.55-0.45,1-1,1 s-1-0.45-1-1v-0.769C6.403,12.384,6,11.741,6,11c0-1.103,0.897-2,2-2s2,0.897,2,2C10,11.741,9.597,12.384,9,12.731z"}))})).withConfig({displayName:"lock-open__CollecticonLockOpen",componentId:"sc-xf9pgz-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"lock icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,7h-1V4c0-2.206-1.794-4-4-4H7C4.794,0,3,1.794,3,4v3H2C1.45,7,1,7.45,1,8v7c0,0.55,0.45,1,1,1h12c0.55,0,1-0.45,1-1V8 C15,7.45,14.55,7,14,7z M9,12.731V13.5c0,0.55-0.45,1-1,1s-1-0.45-1-1v-0.769C6.403,12.384,6,11.741,6,11c0-1.103,0.897-2,2-2 s2,0.897,2,2C10,11.741,9.597,12.384,9,12.731z M5,7V4c0-1.103,0.897-2,2-2h2c1.103,0,2,0.897,2,2v3H5z"}))})).withConfig({displayName:"lock__CollecticonLock",componentId:"sc-o95j22-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"login icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,14l0,-12l-6,0l0,-2l8,0l0,16l-8,0l0,-2l6,0Zm-6.998,-0.998l4.998,-5.002l-5,-5l-1.416,1.416l2.588,2.584l-8.172,0l0,2l8.172,0l-2.586,2.586l1.416,1.416Z"}))})).withConfig({displayName:"login__CollecticonLogin",componentId:"sc-1y1wjb9-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"logout icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,14l0,-12l-6,0l0,-2l8,0l0,16l-8,0l0,-2l6,0Zm-9.002,-0.998l-4.998,-5.002l5,-5l1.416,1.416l-2.588,2.584l8.172,0l0,2l-8.172,0l2.586,2.586l-1.416,1.416Z"}))})).withConfig({displayName:"logout__CollecticonLogout",componentId:"sc-1iqecrb-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"magnifier left icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M15.708,13.587l-3.675-3.675C12.646,8.92,13,7.751,13,6.5C13,2.91,10.09,0,6.5,0S0,2.91,0,6.5S2.91,13,6.5,13 c1.251,0,2.42-0.354,3.412-0.967l3.675,3.675c0.389,0.389,1.025,0.389,1.414,0l0.707-0.707 C16.097,14.612,16.097,13.976,15.708,13.587z M3.318,9.682C2.468,8.832,2,7.702,2,6.5s0.468-2.332,1.318-3.182S5.298,2,6.5,2 s2.332,0.468,3.182,1.318C10.532,4.168,11,5.298,11,6.5s-0.468,2.332-1.318,3.182C8.832,10.532,7.702,11,6.5,11 S4.168,10.532,3.318,9.682z"}))})).withConfig({displayName:"magnifier-left__CollecticonMagnifierLeft",componentId:"sc-16fyszn-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"magnifier right icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0.292,15.001l0.707,0.707c0.389,0.389,1.025,0.389,1.414,0l3.675-3.675C7.08,12.646,8.249,13,9.5,13 c3.59,0,6.5-2.91,6.5-6.5S13.09,0,9.5,0S3,2.91,3,6.5c0,1.251,0.354,2.42,0.967,3.412l-3.675,3.675 C-0.097,13.976-0.097,14.612,0.292,15.001z M9.5,11c-1.202,0-2.332-0.468-3.182-1.318C5.468,8.832,5,7.702,5,6.5 s0.468-2.332,1.318-3.182S8.298,2,9.5,2s2.332,0.468,3.182,1.318C13.532,4.168,14,5.298,14,6.5s-0.468,2.332-1.318,3.182 C11.832,10.532,10.702,11,9.5,11z"}))})).withConfig({displayName:"magnifier-right__CollecticonMagnifierRight",componentId:"sc-mpkmvd-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"map icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,3l5-2v12l-5,2V3z M11,3v12l-5-1.667v-12L11,3z M16,1v12l-4,1.6v-12L16,1z"}))})).withConfig({displayName:"map__CollecticonMap",componentId:"sc-zq8trt-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"marker icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,0C4.688,0,2,2.688,2,6c0,6,6,10,6,10s6-4,6-10C14,2.688,11.312,0,8,0z M8,8C6.344,8,5,6.656,5,5s1.344-3,3-3s3,1.344,3,3 S9.656,8,8,8z"}))})).withConfig({displayName:"marker__CollecticonMarker",componentId:"sc-9444h2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"minus small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"14,7 2,7 2,9 14,9"}))})).withConfig({displayName:"minus--small__CollecticonMinusSmall",componentId:"sc-idjajx-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"minus icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"15,7 1,7 1,9 15,9"}))})).withConfig({displayName:"minus__CollecticonMinus",componentId:"sc-1dxv3e5-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"mobile phone icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11.5,0h-7C3.675,0,3,0.675,3,1.5v13C3,15.325,3.675,16,4.5,16h7c0.825,0,1.5-0.675,1.5-1.5v-13C13,0.675,12.325,0,11.5,0z M8,15c-0.553,0-1-0.447-1-1s0.447-1,1-1s1,0.447,1,1S8.553,15,8,15z M12,12H4V2h8V12z"}))})).withConfig({displayName:"mobile-phone__CollecticonMobilePhone",componentId:"sc-lfadc0-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"options tick icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,5l-11.012,0l0,9l11.012,0l0,1.988l-13,0l0,-12.976l13,0l0,1.988Zm-16,-4.988l14,0l0,1.988l-12.012,0l0,12l-1.988,0l0,-12l0,-1.988Zm8.2,8.36l-1.406,1.422l3.243,3.206l5.169,-5.747l-1.484,-1.338l-3.769,4.187l-1.753,-1.73Z"}))})).withConfig({displayName:"options-tick__CollecticonOptionsTick",componentId:"sc-1rof8rz-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"page cog icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.706,4.206l-3.912-3.912C10.606,0.106,10.353,0,10.088,0H1v7h2V2h7v3h3v9H9v2h6V4.916C15,4.65,14.894,4.394,14.706,4.206 z M7.592,12.385L9,12.15v-1.288l-1.408-0.231c-0.069-0.25-0.166-0.482-0.288-0.697L8.137,8.77l-0.91-0.91L6.066,8.692 C5.847,8.573,5.618,8.473,5.377,8.407L5.146,7H3.857L3.626,8.407C3.382,8.473,3.15,8.573,2.934,8.692L1.771,7.86L0.86,8.77 l0.832,1.163c-0.119,0.219-0.219,0.447-0.285,0.691L0,10.856v1.288l1.408,0.231c0.066,0.244,0.166,0.475,0.285,0.691L0.86,14.23 l0.91,0.91l1.164-0.832c0.219,0.119,0.447,0.219,0.691,0.285L3.857,16h1.289l0.231-1.407c0.244-0.066,0.476-0.166,0.688-0.285 l1.164,0.832l0.91-0.91l-0.829-1.154C7.426,12.857,7.527,12.629,7.592,12.385z M4.492,12.788c-0.71,0-1.289-0.579-1.289-1.288 s0.579-1.288,1.289-1.288c0.71,0,1.289,0.575,1.289,1.288S5.202,12.788,4.492,12.788z"}))})).withConfig({displayName:"page-cog__CollecticonPageCog",componentId:"sc-ne538-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"page label icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.706,4.206l-3.912-3.912C10.606,0.106,10.353,0,10.088,0H1v8H0v4h10V8H3V2h7v3h3v9H3v-1H1v3h14V4.916 C15,4.65,14.894,4.394,14.706,4.206z"}))})).withConfig({displayName:"page-label__CollecticonPageLabel",componentId:"sc-ihkl7a-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"page lock open icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.706,4.206l-3.913-3.913C10.606,0.106,10.353,0,10.087,0H1v9h2V2h7v3h3v9H9v2h6V4.916C15,4.65,14.894,4.394,14.706,4.206 z M9,10h2V9c0-1.653-1.347-3-3-3S5,7.347,5,9v1H0.991C0.447,10,0,10.447,0,10.991v4.019C0,15.553,0.447,16,0.991,16h6.019 C7.553,16,8,15.553,8,15.009v-4.019C8,10.447,7.553,10,7.009,10H7V9c0-0.55,0.45-1,1-1s1,0.45,1,1V10z M4,14c-0.553,0-1-0.447-1-1 s0.447-1,1-1s1,0.447,1,1S4.553,14,4,14z"}))})).withConfig({displayName:"page-lock-open__CollecticonPageLockOpen",componentId:"sc-9vft70-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"page tick icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.706,4.206l-3.913-3.913C10.606,0.106,10.353,0,10.087,0H1v16h14V4.916C15,4.65,14.894,4.394,14.706,4.206z M13,14H3V2h7 v3h3V14z M5.2,8.372L3.794,9.794L7.037,13l5.169-5.747l-1.484-1.338l-3.769,4.187L5.2,8.372z"}))})).withConfig({displayName:"page-tick__CollecticonPageTick",componentId:"sc-19po8ir-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"page up icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.706,4.206c0.188,0.188 0.294,0.444 0.294,0.71l0,11.084l-14,0l0,-16l9.087,0c0.266,0 0.519,0.106 0.706,0.293l3.913,3.913Zm-1.706,9.794l0,-9l-3,0l0,-3l-7,0l0,12l10,0Zm-7.586,-3.586l-1.414,-1.414l4,-4l4,4l-1.414,1.414l-1.586,-1.586l0,4.172l-2,0l0,-4.172l-1.586,1.586Z"}))})).withConfig({displayName:"page-up__CollecticonPageUp",componentId:"sc-gbkx4m-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"page icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.706,4.206l-3.913-3.913C10.606,0.106,10.353,0,10.087,0H1v16h14V4.916C15,4.65,14.894,4.394,14.706,4.206z M13,14H3V2h7 v3h3V14z"}))})).withConfig({displayName:"page__CollecticonPage",componentId:"sc-k2xb9e-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"pages icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3,3H1v13h11v-2H3V3z M12,0H4v13h11V3L12,0z M13,11H6V2h5v2h2V11z"}))})).withConfig({displayName:"pages__CollecticonPages",componentId:"sc-1td2367-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"pencil icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M1,11v4h4l7-7L8,4L1,11z M11,1L9,3l4,4l2-2L11,1z"}))})).withConfig({displayName:"pencil__CollecticonPencil",componentId:"sc-1kh2dl6-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"pi icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"pi",d:"M4,4L6,4L6,14L4,14L4,4ZM14,14L12,14C11.47,14 10.961,13.789 10.586,13.414C10.211,13.039 10,12.53 10,12C10,9.082 10,4 10,4L12,4C12,4 12,9.749 12,11.5C12,11.633 12.053,11.76 12.146,11.854C12.24,11.947 12.367,12 12.5,12C13.092,12 14,12 14,12L14,14ZM2,2L14,2L14,4L2,4L2,2Z"}))})).withConfig({displayName:"pi__CollecticonPi",componentId:"sc-wten9m-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"picture icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11.5,7C12.328,7,13,6.328,13,5.5S12.328,4,11.5,4S10,4.672,10,5.5S10.672,7,11.5,7z M13,8l-4,2L6,5l-3,6v1h10V8z M0,1v14 h16V1H0z M14,13H2V3h12V13z"}))})).withConfig({displayName:"picture__CollecticonPicture",componentId:"sc-23cpjo-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"pilcrow icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,14L6,14L6,10C3.792,10 2,8.208 2,6C2,3.823 3.742,2.051 6,2L14,2L14,4L12,4L12,14L10,14L10,4L8,4L8,14Z"}))})).withConfig({displayName:"pilcrow__CollecticonPilcrow",componentId:"sc-1b83p3i-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"plus small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"14,7 9,7 9,2 7,2 7,7 2,7 2,9 7,9 7,14 9,14 9,9 14,9"}))})).withConfig({displayName:"plus--small__CollecticonPlusSmall",componentId:"sc-1fqmt3p-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"plus icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"15,7 9,7 9,1 7,1 7,7 1,7 1,9 7,9 7,15 9,15 9,9 15,9"}))})).withConfig({displayName:"plus__CollecticonPlus",componentId:"sc-1fkp87s-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"pop down icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2,14h10V5H2V14z M4,7h6v5H4V7z M5,2v2h8v7h2V2H5z"}))})).withConfig({displayName:"pop-down__CollecticonPopDown",componentId:"sc-1unqzj7-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"pop up icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,2v9h10V2H4z M12,9H6V4h6V9z M3,5H1v9h10v-2H3V5z"}))})).withConfig({displayName:"pop-up__CollecticonPopUp",componentId:"sc-1l36dux-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"printer icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13,1H3v2h10V1z M15,4H1C0.45,4,0,4.45,0,5v5c0,0.55,0.45,1,1,1h2v4h10v-4h2c0.55,0,1-0.45,1-1V5C16,4.45,15.55,4,15,4z M11,13H5V9h6V13z M14,7c-0.552,0-1-0.448-1-1s0.448-1,1-1s1,0.448,1,1S14.552,7,14,7z"}))})).withConfig({displayName:"printer__CollecticonPrinter",componentId:"sc-1t5531d-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"quote left icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,3V1c-4.188,0-7,2.812-7,7v7h7V8h-5C11,4.916,12.916,3,16,3z M0,8v7h7V8H2c0-3.084,1.916-5,5-5V1C2.812,1,0,3.812,0,8z"}))})).withConfig({displayName:"quote-left__CollecticonQuoteLeft",componentId:"sc-4aykvt-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"quote right icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,8h5c0,3.084-1.916,5-5,5v2c4.188,0,7-2.812,7-7V1H0V8z M9,1v7h5c0,3.084-1.916,5-5,5v2c4.188,0,7-2.812,7-7V1H9z"}))})).withConfig({displayName:"quote-right__CollecticonQuoteRight",componentId:"sc-16q59gl-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"resize center horizontal icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6.999,16h2.002V0H6.999V16z M5.414,5.414L4,4L0,8l4,4l1.414-1.414L3.828,9H6V7H3.828L5.414,5.414z M12,4l-1.414,1.414 L12.172,7H10v2h2.172l-1.586,1.586L12,12l4-4L12,4z"}))})).withConfig({displayName:"resize-center-horizontal__CollecticonResizeCenterHorizontal",componentId:"sc-1uhrfmw-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"resize center vertical icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,6.999v2.002h16V6.999H0z M7,3.828V6h2V3.828l1.586,1.586L12,4L8,0L4,4l1.414,1.414L7,3.828z M9,12.172V10H7v2.172 l-1.586-1.586L4,12l4,4l4-4l-1.414-1.414L9,12.172z"}))})).withConfig({displayName:"resize-center-vertical__CollecticonResizeCenterVertical",componentId:"sc-17ttas-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"resize in icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2,8L8,8L8,14L6,14L6,11.4L1.4,16L-0.014,14.586L4.572,10L2,10L2,8ZM8,2L10,2L10,4.6L14.6,0L16.014,1.414L11.428,6L14,6L14,8L8,8L8,2Z"}))})).withConfig({displayName:"resize-in__CollecticonResizeIn",componentId:"sc-yqh48y-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"resize out icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M1.986,12.6L6.586,8L8,9.414L3.414,14L5.986,14L5.986,16L1.986,16L-0.014,16L-0.014,10L1.986,10L1.986,12.6ZM12.586,2L10.014,2L10.014,0L16.014,0L16.014,6L14.014,6L14.014,3.4L9.414,8L8,6.586L12.586,2Z"}))})).withConfig({displayName:"resize-out__CollecticonResizeOut",componentId:"sc-14snpdr-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"road icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,16L13,0H9v1H7V0H3L0,16h7v-4h2v4H16z M7,3h2v2H7V3z M7,10V7h2v3H7z"}))})).withConfig({displayName:"road__CollecticonRoad",componentId:"sc-kxef51-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"rock icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6.516,2.612L9.325,3.55l0.734,2.934l0.188,0.75l0.644,0.428l2.238,1.494L13.734,14H2.441l0.331-1.65l1.125-0.562 l0.875-0.438l0.191-0.959L6.516,2.612 M5,0L3,10l-2,1l-1,5h16l-1-8l-3-2l-1-4L5,0L5,0z"}))})).withConfig({displayName:"rock__CollecticonRock",componentId:"sc-1m4dfhv-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"rss feed icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M1,5v2c1.081,0,2.128,0.211,3.113,0.628c0.952,0.403,1.808,0.98,2.543,1.715s1.312,1.591,1.715,2.543 C8.789,12.872,9,13.919,9,15h2C11,9.477,6.523,5,1,5z M4,10c-1.105,0-2,0.895-2,2s0.895,2,2,2s2-0.895,2-2S5.105,10,4,10z M1,1v2 c1.621,0,3.192,0.317,4.67,0.942c1.429,0.604,2.712,1.47,3.815,2.573c1.103,1.103,1.968,2.386,2.573,3.815 C12.683,11.808,13,13.379,13,15h2C15,7.268,8.732,1,1,1z"}))})).withConfig({displayName:"rss-feed__CollecticonRssFeed",componentId:"sc-krf4ws-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"share 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13.5,11c-0.609,0-1.169,0.219-1.603,0.581l-6.9-3.45C5,8.088,5,8.044,5,8c0-0.044,0-0.088-0.003-0.131l6.9-3.45 C12.331,4.781,12.891,5,13.5,5C14.881,5,16,3.881,16,2.5S14.881,0,13.5,0S11,1.119,11,2.5c0,0.044,0,0.088,0.003,0.131l-6.9,3.45 C3.669,5.719,3.109,5.5,2.5,5.5C1.119,5.5,0,6.619,0,8s1.119,2.5,2.5,2.5c0.609,0,1.169-0.219,1.603-0.581l6.9,3.45 C11,13.412,11,13.456,11,13.5c0,1.381,1.119,2.5,2.5,2.5s2.5-1.119,2.5-2.5S14.881,11,13.5,11z"}))})).withConfig({displayName:"share-2__CollecticonShare2",componentId:"sc-2o6k8j-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"share icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M10,6v2h3v6H3V8h3V6H1v10h14V6H10z M7,3.328V11h2V3.328l1.834,1.834L12,4L8,0L4,4l1.166,1.166L7,3.328z"}))})).withConfig({displayName:"share__CollecticonShare",componentId:"sc-ob5ay5-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"shrink to left icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"shrink-to-left",d:"M16,16L0,16L0,0L16,0L16,16ZM4,2L4,14L14,14L14,2L4,2ZM10.414,10.586L7.828,8L10.414,5.414L9,4L5,8L9,12L10.414,10.586Z"}))})).withConfig({displayName:"shrink-to-left__CollecticonShrinkToLeft",componentId:"sc-tcmzh2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"shrink to right icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"shrink-to-right",d:"M0,0L16,0L16,16L0,16L0,0ZM12,14L12,2L2,2L2,14L12,14ZM5.586,5.414L8.172,8L5.586,10.586L7,12L11,8L7,4L5.586,5.414Z"}))})).withConfig({displayName:"shrink-to-right__CollecticonShrinkToRight",componentId:"sc-1fxnoaq-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"sign danger icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M15.006,12.262L8.994,1.737c-0.547-0.956-1.438-0.956-1.984,0L0.994,12.262C0.447,13.219,0.9,14,2,14h12 C15.1,14,15.553,13.219,15.006,12.262z M8,13c-0.691,0-1.25-0.559-1.25-1.25c0-0.691,0.559-1.25,1.25-1.25 c0.691,0,1.25,0.559,1.25,1.25C9.25,12.441,8.691,13,8,13z M9,10H7V5h2V10z"}))})).withConfig({displayName:"sign-danger__CollecticonSignDanger",componentId:"sc-1ecz7b4-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"sliders horizontal icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,12H0v2h4v1h3v-4H4V12z M9,10h3V6H9v1H0v2h9V10z M3,5h3V1H3v1H0v2h3V5z M8,14h8v-2H8V14z M7,2v2h9V2H7z M13,9h3V7h-3V9z"}))})).withConfig({displayName:"sliders-horizontal__CollecticonSlidersHorizontal",componentId:"sc-11z3834-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"sliders vertical icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M12,12v4h2v-4h1V9h-4v3H12z M10,7V4H6v3h1v9h2V7H10z M5,13v-3H1v3h1v3h2v-3H5z M14,8V0h-2v8H14z M2,9h2V0H2V9z M9,3V0H7v3H9z"}))})).withConfig({displayName:"sliders-vertical__CollecticonSlidersVertical",componentId:"sc-12f45x9-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"sort asc icon"),/*@__PURE__*/eE(eI).createElement("g",{id:"sort-asc"},/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-down",d:"M8.002,11.5l-3.294,-2.622l-1.416,1.416l4.71,3.706l4.706,-3.706l-1.416,-1.416l-3.29,2.622Z",opacity:"0.32"}),/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-up",d:"M7.998,4.5l3.294,2.622l1.416,-1.416l-4.71,-3.706l-4.706,3.706l1.416,1.416l3.29,-2.622Z"})))})).withConfig({displayName:"sort-asc__CollecticonSortAsc",componentId:"sc-1swvzh4-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"sort desc icon"),/*@__PURE__*/eE(eI).createElement("g",{id:"sort-desc"},/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-down",d:"M8.002,11.5l-3.294,-2.622l-1.416,1.416l4.71,3.706l4.706,-3.706l-1.416,-1.416l-3.29,2.622Z"}),/*@__PURE__*/eE(eI).createElement("path",{id:"arrow-up",d:"M7.998,4.5l3.294,2.622l1.416,-1.416l-4.71,-3.706l-4.706,3.706l1.416,1.416l3.29,-2.622Z",opacity:"0.32"})))})).withConfig({displayName:"sort-desc__CollecticonSortDesc",componentId:"sc-1g5jihn-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"sort none icon"),/*@__PURE__*/eE(eI).createElement("path",{opacity:"0.32",d:"M8,11.5L4.706,8.878l-1.416,1.416L8,14l4.706-3.706l-1.416-1.416L8,11.5z M8,4.5l3.294,2.622l1.416-1.416L8,2L3.294,5.706 l1.416,1.416L8,4.5z"}))})).withConfig({displayName:"sort-none__CollecticonSortNone",componentId:"sc-u7zsfg-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"sort icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,11.5L4.706,8.878l-1.416,1.416L8,14l4.706-3.706l-1.416-1.416L8,11.5z M8,4.5l3.294,2.622l1.416-1.416L8,2L3.294,5.706 l1.416,1.416L8,4.5z"}))})).withConfig({displayName:"sort__CollecticonSort",componentId:"sc-dgizvs-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"spark icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M10,1L3,9h4.5L6,15l7-8H8.5L10,1z"}))})).withConfig({displayName:"spark__CollecticonSpark",componentId:"sc-bhnjlj-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"speech balloon icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M4,13L2,13C1.47,13 0.961,12.789 0.586,12.414C0.211,12.039 0,11.53 0,11C0,9.257 0,6.743 0,5C0,4.47 0.211,3.961 0.586,3.586C0.961,3.211 1.47,3 2,3C5.074,3 10.926,3 14,3C14.53,3 15.039,3.211 15.414,3.586C15.789,3.961 16,4.47 16,5C16,6.743 16,9.257 16,11C16,11.53 15.789,12.039 15.414,12.414C15.039,12.789 14.53,13 14,13L8,13L4,16L4,13Z"}))})).withConfig({displayName:"speech-balloon__CollecticonSpeechBalloon",componentId:"sc-13d2rgy-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"square small icon"),/*@__PURE__*/eE(eI).createElement("rect",{x:"4",y:"4",width:"8",height:"8"}))})).withConfig({displayName:"square--small__CollecticonSquareSmall",componentId:"sc-tacoml-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"square icon"),/*@__PURE__*/eE(eI).createElement("rect",{x:"2",y:"2",width:"12",height:"12"}))})).withConfig({displayName:"square__CollecticonSquare",componentId:"sc-f9q5rr-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"star icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,6.204l-5.528-0.803L8,0.392L5.528,5.401L0,6.204l4,3.899l-0.944,5.505L8,13.009l4.944,2.599L12,10.103L16,6.204z"}))})).withConfig({displayName:"star__CollecticonStar",componentId:"sc-1y1tcee-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"steam icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M7,16h2v-6H7V16z M12.603,3.044C11.844,1.256,10.069,0,8,0C5.238,0,3,2.237,3,5C1.344,5,0,6.344,0,8s1.344,3,3,3h0.284L4,15 h2L5,9H3C2.45,9,2,8.55,2,8s0.45-1,1-1h2V5c0-1.653,1.347-3,3-3c1.206,0,2.291,0.719,2.762,1.828L11.2,4.856l1.103,0.166 c0.466,0.072,0.897,0.306,1.209,0.669C13.734,5.947,14,6.381,14,7c0,1.103-0.897,2-2,2h-1l-1,6h2l0.725-4.066 C14.587,10.594,16,8.962,16,7C16,4.997,14.525,3.338,12.603,3.044z"}))})).withConfig({displayName:"steam__CollecticonSteam",componentId:"sc-1yiviod-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"subscript 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"subscript",d:"M13,12l0,-1l2,0c0.552,0 1,0.448 1,1l0,1c-0,0.552 -0.448,1 -1,1l-0.75,0c-0.066,-0 -0.13,0.026 -0.177,0.073c-0.047,0.047 -0.073,0.111 -0.073,0.177c0,0.153 0,0.347 0,0.5c-0,0.066 0.026,0.13 0.073,0.177c0.047,0.047 0.111,0.073 0.177,0.073l1.75,0l0,1l-2,0c-0.552,-0 -1,-0.448 -1,-1l0,-1c0,-0.552 0.448,-1 1,-1l0.75,-0c0.066,0 0.13,-0.026 0.177,-0.073c0.047,-0.047 0.073,-0.111 0.073,-0.177c0,-0.153 0,-0.347 0,-0.5c0,-0.066 -0.026,-0.13 -0.073,-0.177c-0.047,-0.047 -0.111,-0.073 -0.177,-0.073l-1.75,0Zm-1,3l-2,0l0,-5l-6,0l0,5l-2,0l0,-9c0,-2.76 2.24,-5 5,-5c2.76,0 5,2.24 5,5l0,9Zm-2,-7l0,-2c0,-1.656 -1.344,-3 -3,-3c-1.656,0 -3,1.344 -3,3l0,2l6,0Z"}))})).withConfig({displayName:"subscript-2__CollecticonSubscript2",componentId:"sc-c9wj65-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"subscript icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M13,12l0,-1l2,0c0.552,0 1,0.448 1,1l0,1c-0,0.552 -0.448,1 -1,1l-0.75,0c-0.066,-0 -0.13,0.026 -0.177,0.073c-0.047,0.047 -0.073,0.111 -0.073,0.177c0,0.153 0,0.347 0,0.5c-0,0.066 0.026,0.13 0.073,0.177c0.047,0.047 0.111,0.073 0.177,0.073l1.75,0l0,1l-2,0c-0.552,-0 -1,-0.448 -1,-1l0,-1c0,-0.552 0.448,-1 1,-1l0.75,-0c0.066,0 0.13,-0.026 0.177,-0.073c0.047,-0.047 0.073,-0.111 0.073,-0.177c0,-0.153 0,-0.347 0,-0.5c0,-0.066 -0.026,-0.13 -0.073,-0.177c-0.047,-0.047 -0.111,-0.073 -0.177,-0.073l-1.75,0Zm-4.586,-4l4,4l-2.828,0l-2.586,-2.586l-2.586,2.586l-2.828,0l4,-4l-4,-4l2.828,0l2.586,2.586l2.586,-2.586l2.828,0l-4,4Z"}))})).withConfig({displayName:"subscript__CollecticonSubscript",componentId:"sc-10v17n7-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"superscript 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"superscript",d:"M12,15l-2,0l0,-5l-6,0l0,5l-2,0l0,-9c0,-2.76 2.24,-5 5,-5c2.76,0 5,2.24 5,5l0,9Zm-2,-7l0,-2c0,-1.656 -1.344,-3 -3,-3c-1.656,0 -3,1.344 -3,3l0,2l6,0Zm3,-7l0,-1l2,0c0.552,0 1,0.448 1,1l0,1c-0,0.552 -0.448,1 -1,1l-0.75,0c-0.066,-0 -0.13,0.026 -0.177,0.073c-0.047,0.047 -0.073,0.111 -0.073,0.177c0,0.153 0,0.347 0,0.5c-0,0.066 0.026,0.13 0.073,0.177c0.047,0.047 0.111,0.073 0.177,0.073l1.75,0l0,1l-2,0c-0.552,-0 -1,-0.448 -1,-1l0,-1c0,-0.552 0.448,-1 1,-1l0.75,-0c0.066,0 0.13,-0.026 0.177,-0.073c0.047,-0.047 0.073,-0.111 0.073,-0.177c0,-0.153 0,-0.347 0,-0.5c0,-0.066 -0.026,-0.13 -0.073,-0.177c-0.047,-0.047 -0.111,-0.073 -0.177,-0.073l-1.75,0Z"}))})).withConfig({displayName:"superscript-2__CollecticonSuperscript2",componentId:"sc-1p3lqd0-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"superscript icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"superscript",d:"M8.414,8l4,4l-2.828,0l-2.586,-2.586l-2.586,2.586l-2.828,0l4,-4l-4,-4l2.828,0l2.586,2.586l2.586,-2.586l2.828,0l-4,4Zm4.586,-7l0,-1l2,0c0.552,0 1,0.448 1,1l0,1c-0,0.552 -0.448,1 -1,1l-0.75,0c-0.066,-0 -0.13,0.026 -0.177,0.073c-0.047,0.047 -0.073,0.111 -0.073,0.177c0,0.153 0,0.347 0,0.5c-0,0.066 0.026,0.13 0.073,0.177c0.047,0.047 0.111,0.073 0.177,0.073l1.75,0l0,1l-2,0c-0.552,-0 -1,-0.448 -1,-1l0,-1c0,-0.552 0.448,-1 1,-1l0.75,-0c0.066,0 0.13,-0.026 0.177,-0.073c0.047,-0.047 0.073,-0.111 0.073,-0.177c0,-0.153 0,-0.347 0,-0.5c0,-0.066 -0.026,-0.13 -0.073,-0.177c-0.047,-0.047 -0.111,-0.073 -0.177,-0.073l-1.75,0Z"}))})).withConfig({displayName:"superscript__CollecticonSuperscript",componentId:"sc-1wli6ww-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"swap horizontal icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,11h11.2l-2.6,2.6L10,15l6-6H0V11z M4.8,5l2.6-2.6L6,1L0,7h16V5H4.8z"}))})).withConfig({displayName:"swap-horizontal__CollecticonSwapHorizontal",componentId:"sc-11czhsy-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"swap vertical icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M5,16L5,4.8L2.4,7.4L1,6L7,0L7,16L5,16ZM11,11.2L13.6,8.6L15,10L9,16L9,0L11,0L11,11.2Z"}))})).withConfig({displayName:"swap-vertical__CollecticonSwapVertical",componentId:"sc-1b5kgbc-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"table add column icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"table-add-column",d:"M12,11l-0,2l2,0l-0,-2l2,0l-0,-2l-2,0l-0,-2l-2,0l-0,2l-2,0l-0,2l2,0Zm2,-5l-0,-5c0,-0.265 -0.105,-0.52 -0.293,-0.707c-0.187,-0.188 -0.442,-0.293 -0.707,-0.293l-10,-0c-0.552,-0 -1,0.448 -1,1c-0,2.577 -0,11.423 0,14c0,0.552 0.448,1 1,1c1.916,0 8.084,0 10,0c0.552,-0 1,-0.448 1,-1l-0,-1l-5,0l-0,-12l3,0l-0,4l2,0Zm-10,-4l3,0l-0,12l-3,0l-0,-12Z"}))})).withConfig({displayName:"table-add-column__CollecticonTableAddColumn",componentId:"sc-1v902ed-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"table add row icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"table-add-row",d:"M11,12l2,0l0,2l-2,0l0,2l-2,0l0,-2l-2,0l0,-2l2,0l0,-2l2,0l0,2Zm-5,2l-5,-0c-0.265,0 -0.52,-0.105 -0.707,-0.293c-0.188,-0.187 -0.293,-0.442 -0.293,-0.707l-0,-10c-0,-0.552 0.448,-1 1,-1c2.577,0 11.423,-0 14,0c0.552,0 1,0.448 1,1c-0,1.916 0,8.084 -0,10c-0,0.552 -0.448,1 -1,1l-1,-0l0,-5l-12,-0l0,3l4,0l0,2Zm-4,-10l0,3l12,0l0,-3l-12,0Z"}))})).withConfig({displayName:"table-add-row__CollecticonTableAddRow",componentId:"sc-633nv5-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"table subtract column icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"table-subtract-column",d:"M11.414,13l1.586,-1.586l1.586,1.586l1.414,-1.414l-1.586,-1.586l1.586,-1.586l-1.414,-1.414l-1.586,1.586l-1.586,-1.586l-1.414,1.414l1.586,1.586l-1.586,1.586l1.414,1.414Zm2.586,-7l-0,-5c0,-0.265 -0.105,-0.52 -0.293,-0.707c-0.187,-0.188 -0.442,-0.293 -0.707,-0.293l-10,-0c-0.552,-0 -1,0.448 -1,1c-0,2.577 -0,11.423 0,14c0,0.552 0.448,1 1,1c1.916,0 8.084,0 10,0c0.552,-0 1,-0.448 1,-1l-0,-1l-5,0l-0,-12l3,0l-0,4l2,0Zm-10,-4l3,0l-0,12l-3,0l-0,-12Z"}))})).withConfig({displayName:"table-subtract-column__CollecticonTableSubtractColumn",componentId:"sc-1fyh4v8-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"table subtract row icon"),/*@__PURE__*/eE(eI).createElement("path",{id:"table-subtract-row",d:"M13,11.414l-1.586,1.586l1.586,1.586l-1.414,1.414l-1.586,-1.586l-1.586,1.586l-1.414,-1.414l1.586,-1.586l-1.586,-1.586l1.414,-1.414l1.586,1.586l1.586,-1.586l1.414,1.414Zm-7,2.586l-5,-0c-0.265,0 -0.52,-0.105 -0.707,-0.293c-0.188,-0.187 -0.293,-0.442 -0.293,-0.707l-0,-10c-0,-0.552 0.448,-1 1,-1c2.577,0 11.423,-0 14,0c0.552,0 1,0.448 1,1c-0,1.916 0,8.084 -0,10c-0,0.552 -0.448,1 -1,1l-1,-0l0,-5l-12,-0l0,3l4,0l0,2Zm-4,-10l0,3l12,0l0,-3l-12,0Z"}))})).withConfig({displayName:"table-subtract-row__CollecticonTableSubtractRow",componentId:"sc-m6hsld-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"table icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M1,16C0.448,16 0,15.552 0,15C0,12.127 0,3.873 0,1C0,0.448 0.448,0 1,0C3.873,0 12.127,0 15,0C15.552,0 16,0.448 16,1C16,3.873 16,12.127 16,15C16,15.552 15.552,16 15,16C12.127,16 3.873,16 1,16ZM2,7L2,14L4,14L4,7L2,7ZM6,7L6,14L10,14L10,7L6,7ZM12,7L12,14L14,14L14,7L12,7ZM2,2L2,5L14,5L14,2L2,2Z"}))})).withConfig({displayName:"table__CollecticonTable",componentId:"sc-1ck2wmp-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"tag icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14.497,0H9.988C9.162,0,8.007,0.478,7.423,1.063L0.438,8.047c-0.585,0.585-0.585,1.541,0,2.125l5.389,5.389 c0.584,0.585,1.541,0.585,2.125,0l6.984-6.984C15.522,7.993,16,6.838,16,6.012V1.503C16,0.676,15.324,0,14.497,0z M12.5,5 C11.672,5,11,4.328,11,3.5S11.672,2,12.5,2S14,2.672,14,3.5S13.328,5,12.5,5z"}))})).withConfig({displayName:"tag__CollecticonTag",componentId:"sc-kmqdpo-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"target icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,4C5.791,4,4,5.791,4,8s1.791,4,4,4s4-1.791,4-4S10.209,4,8,4z M8,10.5c-1.378,0-2.5-1.122-2.5-2.5S6.622,5.5,8,5.5 s2.5,1.122,2.5,2.5S9.378,10.5,8,10.5z M8,7C7.447,7,7,7.447,7,8s0.447,1,1,1s1-0.447,1-1S8.553,7,8,7z M8,0C3.581,0,0,3.581,0,8 s3.581,8,8,8s8-3.581,8-8S12.419,0,8,0z M12.244,12.244C11.109,13.375,9.603,14,8,14s-3.109-0.625-4.244-1.756 C2.622,11.112,2,9.603,2,8s0.625-3.109,1.756-4.244C4.888,2.622,6.397,2,8,2s3.109,0.625,4.244,1.756C13.378,4.888,14,6.397,14,8 S13.375,11.109,12.244,12.244z"}))})).withConfig({displayName:"target__CollecticonTarget",componentId:"sc-o9hlvz-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"text block icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,10h16V8H0V10z M0,0v2h16V0H0z M0,14h8v-2H0V14z M0,6h16V4H0V6z"}))})).withConfig({displayName:"text-block__CollecticonTextBlock",componentId:"sc-xb76he-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"tick small icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2,9.014L3.414,7.6L6.004,10.189L12.593,3.6L14.007,5.014L6.003,13.017L2,9.014Z"}))})).withConfig({displayName:"tick--small__CollecticonTickSmall",componentId:"sc-1gw1pv0-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"tick icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M0,9.014L1.414,7.6L5.004,11.189L14.593,1.6L16.007,3.014L5.003,14.017L0,9.014Z"}))})).withConfig({displayName:"tick__CollecticonTick",componentId:"sc-kz2lfw-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"trash bin icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M11,5h2v8.5c0,0.825-0.675,1.5-1.5,1.5h-7C3.675,15,3,14.325,3,13.5V5h2v8h2V5h2v8h2V5z M2,2h12v2H2V2z M6,0h4v1H6V0z"}))})).withConfig({displayName:"trash-bin__CollecticonTrashBin",componentId:"sc-1md69fn-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle down small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"8,11 3,6 13,6"}))})).withConfig({displayName:"triangle-down--small__CollecticonTriangleDownSmall",componentId:"sc-1mvvmvk-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle down icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"8,13 0,5 16,5"}))})).withConfig({displayName:"triangle-down__CollecticonTriangleDown",componentId:"sc-yiau6v-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle left small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"5,8 10,3 10,13"}))})).withConfig({displayName:"triangle-left--small__CollecticonTriangleLeftSmall",componentId:"sc-1wii1zs-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle left icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"3,8 11,0 11,16"}))})).withConfig({displayName:"triangle-left__CollecticonTriangleLeft",componentId:"sc-15tp8d3-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle right small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"11,8 6,13 6,3"}))})).withConfig({displayName:"triangle-right--small__CollecticonTriangleRightSmall",componentId:"sc-f8t04i-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle right icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"13,8 5,16 5,0"}))})).withConfig({displayName:"triangle-right__CollecticonTriangleRight",componentId:"sc-nu28g8-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle up small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"8,5 13,10 3,10"}))})).withConfig({displayName:"triangle-up--small__CollecticonTriangleUpSmall",componentId:"sc-19tjeu7-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"triangle up icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"8,3 16,11 0,11"}))})).withConfig({displayName:"triangle-up__CollecticonTriangleUp",componentId:"sc-iwnypi-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"tumblr reblog icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M2,5h10.672l-1.837,1.834L12,8l4-4l-4-4l-1.166,1.166L12.672,3H0v7l2-2V5z M14,11H3.328l1.838-1.834L4,8l-4,4l4,4 l1.166-1.166L3.328,13H16V6l-2,2V11z"}))})).withConfig({displayName:"tumblr-reblog__CollecticonTumblrReblog",componentId:"sc-53971o-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"ufo icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M6,13L3,15L3.889,12.333L0,10L16,10L12.111,12.333L13,15L10,13L6,13ZM16,9L0,9L0,8L3,6C3,3.24 5.24,1 8,1C10.76,1 13,3.24 13,6L16,8L16,9Z"}))})).withConfig({displayName:"ufo__CollecticonUfo",componentId:"sc-19wp69f-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"underline icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3,13l10,0l0,2l-10,0l0,-2Zm8,-12l2,0l0,6c0,2.76 -2.24,5 -5,5c-2.76,0 -5,-2.24 -5,-5l0,-6l2,0l-0,6c-0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3l0,-6Z"}))})).withConfig({displayName:"underline__CollecticonUnderline",componentId:"sc-1rup4pw-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"upload 2 icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3.294,7.706l1.416,1.416L7,6.828V16h2V6.828l2.294,2.294l1.416-1.416L8,3L3.294,7.706z M0,2h16V0H0V2z"}))})).withConfig({displayName:"upload-2__CollecticonUpload2",componentId:"sc-p2a7et-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"upload icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M3.294,7.706l1.416,1.416L7,6.828V16h2V6.828l2.294,2.294l1.416-1.416L8,3L3.294,7.706z M2,12V2h12v10h2V0H0v12H2z"}))})).withConfig({displayName:"upload__CollecticonUpload",componentId:"sc-1ww7u5j-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"user group icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M14,12.5C14,11.837 13.737,11.201 13.268,10.732C12.799,10.263 12.163,10 11.5,10C9.447,10 6.553,10 4.5,10C3.837,10 3.201,10.263 2.732,10.732C2.263,11.201 2,11.837 2,12.5C2,14.147 2,15 2,15L14,15C14,15 14,14.147 14,12.5ZM12,6L14,6C14.53,6 15.039,6.211 15.414,6.586C15.789,6.961 16,7.47 16,8L16,11L14.663,11C14.101,9.818 12.896,9 11.5,9L10.645,9C11.476,8.267 12,7.194 12,6ZM1.337,11L0,11C0,11 0,9.392 0,8C0,7.47 0.211,6.961 0.586,6.586C0.961,6.211 1.47,6 2,6L4,6C4,7.194 4.524,8.267 5.355,9L4.5,9C3.104,9 1.899,9.817 1.337,11ZM8,3C9.656,3 11,4.344 11,6C11,7.656 9.656,9 8,9C6.344,9 5,7.656 5,6C5,4.344 6.344,3 8,3ZM4.127,4.996C4.085,4.999 4.043,5 4,5C2.896,5 2,4.104 2,3C2,1.896 2.896,1 4,1C4.954,1 5.753,1.67 5.952,2.564C5.061,3.097 4.394,3.966 4.127,4.996ZM10.048,2.564C10.247,1.67 11.046,1 12,1C13.104,1 14,1.896 14,3C14,4.104 13.104,5 12,5C11.957,5 11.915,4.999 11.873,4.996C11.606,3.966 10.939,3.097 10.048,2.564Z"}))})).withConfig({displayName:"user-group__CollecticonUserGroup",componentId:"sc-1o3ubat-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"user icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M8,8c2.209,0,4-1.791,4-4s-1.791-4-4-4S4,1.791,4,4S5.791,8,8,8z M12,10H4c-2.209,0-4,1.791-4,4v2h16v-2 C16,11.791,14.209,10,12,10z"}))})).withConfig({displayName:"user__CollecticonUser",componentId:"sc-jgwre8-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"users icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M16,12.5C16,11.837 15.737,11.201 15.268,10.732C14.799,10.263 14.163,10 13.5,10C11.447,10 8.553,10 6.5,10C5.837,10 5.201,10.263 4.732,10.732C4.263,11.201 4,11.837 4,12.5C4,14.147 4,15 4,15L16,15C16,15 16,14.147 16,12.5ZM3,13L0,13C0,13 0,12.147 0,10.5C0,9.837 0.263,9.201 0.732,8.732C1.201,8.263 1.837,8 2.5,8L6.536,8C6.754,8.376 7.031,8.714 7.355,9L6.5,9C4.567,9 3,10.567 3,12.5L3,13ZM10,3C11.656,3 13,4.344 13,6C13,7.656 11.656,9 10,9C8.344,9 7,7.656 7,6C7,4.344 8.344,3 10,3ZM6.126,6.997C6.084,6.999 6.042,7 6,7C4.344,7 3,5.656 3,4C3,2.344 4.344,1 6,1C7.026,1 7.932,1.516 8.473,2.302C7.022,2.903 6,4.333 6,6C6,6.344 6.044,6.679 6.126,6.997Z"}))})).withConfig({displayName:"users__CollecticonUsers",componentId:"sc-1543no2-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"way icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M15,3L15,4.268C15.598,4.614 16,5.26 16,6C16,7.104 15.104,8 14,8C12.896,8 12,7.104 12,6C12,5.26 12.402,4.614 13,4.268L13,3.5C13,2.672 12.328,2 11.5,2C10.672,2 10,2.672 10,3.5L10,12L10,12.013C9.993,14.215 8.203,16 6,16C3.792,16 2,14.208 2,12L2,11.829C0.835,11.417 0,10.305 0,9C0,7.344 1.344,6 3,6C4.656,6 6,7.344 6,9C6,10.305 5.165,11.417 4,11.829L4,12.006C4,12.108 4.008,12.21 4.024,12.311C4.049,12.471 4.094,12.629 4.157,12.778C4.254,13.008 4.395,13.219 4.569,13.397C4.736,13.568 4.933,13.709 5.15,13.81C5.336,13.898 5.535,13.957 5.739,13.983C5.958,14.012 6.181,14.004 6.397,13.961C6.583,13.923 6.764,13.859 6.932,13.77C7.13,13.665 7.311,13.527 7.464,13.362C7.615,13.2 7.738,13.014 7.828,12.812C7.898,12.654 7.948,12.487 7.975,12.317C7.992,12.212 8,12.106 8,12L8,3.5C8,1.568 9.568,0 11.5,0C13.262,0 14.721,1.305 14.964,3L15,3ZM3,8C2.448,8 2,8.448 2,9C2,9.552 2.448,10 3,10C3.552,10 4,9.552 4,9C4,8.448 3.552,8 3,8Z"}))})).withConfig({displayName:"way__CollecticonWay",componentId:"sc-1ws2bod-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"wrench icon"),/*@__PURE__*/eE(eI).createElement("path",{d:"M15.379,12.379L8.79,5.79C8.913,5.379,9,4.951,9,4.5C9,2.015,6.985,0,4.5,0C4.049,0,3.621,0.087,3.21,0.21l2.291,2.291 c0.828,0.828,0.828,2.17,0,2.998L5.499,5.501c-0.828,0.828-2.17,0.828-2.998,0L0.21,3.21C0.087,3.621,0,4.049,0,4.5 C0,6.985,2.015,9,4.5,9c0.451,0,0.879-0.087,1.29-0.21l6.589,6.589c0.828,0.828,2.17,0.828,2.998,0l0.002-0.002 C16.207,14.549,16.207,13.207,15.379,12.379z M13.75,14.75c-0.552,0-1-0.448-1-1s0.448-1,1-1s1,0.448,1,1S14.302,14.75,13.75,14.75z"}))})).withConfig({displayName:"wrench__CollecticonWrench",componentId:"sc-13hjr0s-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"xmark small icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"13.707,3.707 12.293,2.293 8,6.586 3.707,2.293 2.293,3.707 6.586,8 2.293,12.293 3.707,13.707 8,9.414  12.293,13.707 13.707,12.293 9.414,8"}))})).withConfig({displayName:"xmark--small__CollecticonXmarkSmall",componentId:"sc-194sjhs-0"})([""]),rd(dT(function(r){return /*@__PURE__*/eE(eI).createElement("svg",r,/*@__PURE__*/eE(eI).createElement("title",null,r.title||"xmark icon"),/*@__PURE__*/eE(eI).createElement("polygon",{points:"14.707,2.707 13.293,1.293 8,6.586 2.707,1.293 1.293,2.707 6.586,8 1.293,13.293 2.707,14.707 8,9.414 13.293,14.707 14.707,13.293 9.414,8"}))})).withConfig({displayName:"xmark__CollecticonXmark",componentId:"sc-pn541c-0"})([""]);var eI=eT("exYeM");function dk({teamMember:r}){// const groups = useAtomValue(groupsAtom)
// const groupsWithoutCurrent = groups.filter(
//   (group) => group !== teamMember.properties.group
// )
let n=(0,eL.useAtomValue)(ac),[i,o]=(0,eL.useAtom)(as),a=(0,eI.useCallback)(()=>{let a=n.filter(n=>n.properties.group===r.properties.group||i.includes(n.properties.name)),s=a.map(r=>r.properties.name);o(s)},[n,r,i]),s=(0,eI.useCallback)(()=>{let a=n.filter(n=>n.properties.group===r.properties.group),s=a.map(r=>r.properties.name),l=i.filter(r=>!s.includes(r));o(l)},[n,r,i]);return/*#__PURE__*/(0,eM.jsx)(c3,{alignment:"right",triggerElement:r=>/*#__PURE__*/(0,eM.jsx)(hi,{variation:"base-text",...r,children:/*#__PURE__*/(0,eM.jsx)(dM,{title:"More options",meaningful:!0})}),children:/*#__PURE__*/(0,eM.jsxs)(cY,{children:[/*#__PURE__*/(0,eM.jsxs)(cK,{onClick:a,children:["Select all members from group ",r.properties.group]}),/*#__PURE__*/(0,eM.jsxs)(cK,{onClick:s,children:["Deselect all members from group ",r.properties.group]})]})})}let dI=rd.tr`
  color: ${({disabled:r})=>r?"grey":"inherit"};
`,dL=rd.td`
  display: flex;
  align-items: center;
  justify-content: space-between;
`;function dA(){let[r,n]=(0,eL.useAtom)(al),[i,o]=(0,eL.useAtom)(au),a=(0,eL.useAtomValue)(ah),[s,l]=(0,eL.useAtom)(as),u=(0,eL.useAtomValue)(ac),c=(0,eL.useAtomValue)(ad),h=(0,eL.useAtomValue)(ap),d=(0,eI.useCallback)(r=>{let n=s.includes(r);n?l(s.filter(n=>n!==r)):l([...s,r])},[s]),f=(0,eI.useCallback)(a=>{let u=a.properties.isCustom?i:r,c=a.properties.isCustom?o:n,h=u.filter(r=>r.properties.name!==a.properties.name);c(h),l(s.filter(r=>r!==a.properties.name))},[o,n,i,r]),p=(0,eI.useCallback)(()=>{o([]),n([]),l([])},[o,n,l]),m=(0,eI.useMemo)(()=>{if(!u?.length)return[];let r=u.map(r=>{let n=a.find(n=>n.properties.name===r.properties.name),i=h?.properties.airportTeamMembers.find(n=>n.properties.name===r.properties.name);return{...r,properties:{...r.properties,isSelected:n,...i}}}).toSorted((r,n)=>r.properties.name.localeCompare(n.properties.name));return r},[u,h,i,a]);return/*#__PURE__*/(0,eM.jsxs)(eM.Fragment,{children:[/*#__PURE__*/(0,eM.jsx)("h2",{children:"2. Select who is coming"}),/*#__PURE__*/(0,eM.jsx)("em",{children:"Please select at least 2 team members to show results."}),/*#__PURE__*/(0,eM.jsx)(aS,{children:/*#__PURE__*/(0,eM.jsxs)("tbody",{children:[!!m.length&&/*#__PURE__*/(0,eM.jsxs)("tr",{children:[/*#__PURE__*/(0,eM.jsx)("th",{}),/*#__PURE__*/(0,eM.jsx)("th",{}),/*#__PURE__*/(0,eM.jsx)("th",{children:"Name"}),c?.length?/*#__PURE__*/(0,eM.jsx)("th",{children:"Group"}):null,/*#__PURE__*/(0,eM.jsx)("th",{children:"CO"}),/*#__PURE__*/(0,eM.jsx)("th",{children:"Total dist"}),/*#__PURE__*/(0,eM.jsxs)("th",{children:[" ",/*#__PURE__*/(0,eM.jsx)(uL,{radius:"rounded",size:"small",variation:"base-outline",onClick:p,children:/*#__PURE__*/(0,eM.jsx)("img",{src:"./trash-bin.svg"})})]})]}),m.map(r=>/*#__PURE__*/(0,eM.jsxs)(dI,{disabled:null===r.distance,title:null===r.distance?"Team member does not have coordinates":"",children:[/*#__PURE__*/(0,eM.jsx)("td",{children:/*#__PURE__*/(0,eM.jsx)("img",{src:"./user.png"})}),/*#__PURE__*/(0,eM.jsx)("td",{children:/*#__PURE__*/(0,eM.jsx)("input",{type:"checkbox",checked:r.properties.isSelected,onChange:()=>d(r.properties.name)})}),/*#__PURE__*/(0,eM.jsx)("td",{children:r.properties.name}),c?.length?/*#__PURE__*/(0,eM.jsxs)(dL,{children:[r.properties.group," ",/*#__PURE__*/(0,eM.jsx)(dk,{teamMember:r})]}):null,/*#__PURE__*/(0,eM.jsx)("td",{children:r.properties.co2?an(r.properties.co2):"-"}),/*#__PURE__*/(0,eM.jsxs)("td",{children:[r.properties.distance?Math.round(r.properties.distance):"-"," ","km"]}),/*#__PURE__*/(0,eM.jsx)("td",{children:/*#__PURE__*/(0,eM.jsx)(uL,{radius:"rounded",size:"small",variation:"base-outline",onClick:()=>f(r),children:/*#__PURE__*/(0,eM.jsx)("img",{src:"./trash-bin.svg"})})})]},r.properties.name))]})})]})}let dz=rd.div`
  height: 100%;
  width: 100%;
  position: relative;
`,dP=rd.div`
  position: absolute;
  width: 100%;
  top: 0;
  left: 0;
  z-index: 100;
  padding: 1rem;
  pointer-events: none;
`,dO=rd.div`
  background: white;
  min-width: 450px;
  max-width: 30vw;
  margin-bottom: 1rem;
  pointer-events: all;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);

  & > h2 {
    font-size: 1.1rem;
  }
`,dD=rd(dO)``,dR=rd(dO)`
  min-height: 30vh;
  max-height: 40vh;
  overflow: scroll;
`,dF=rd(dO)`
  background: white;
  justify-content: center;
  width: 100%;
  min-width: 100%;
  max-width: 100%;
`;function dB({baseTeam:r}){let n=(0,eL.useSetAtom)(ao),i=(0,eL.useSetAtom)(al),[o,a]=(0,eL.useAtom)(as),[s,l]=(0,eL.useAtom)(aa),u=(0,eL.useAtomValue)(af),c=(0,eL.useAtomValue)(ac);return(0,eI.useEffect)(()=>{let n=JSON.parse(localStorage.getItem("teamMembers")),o=JSON.parse(localStorage.getItem("selectedTeamMemberNames"));i(n||r),a(o||["Jules Verne","Octavia Butler","Salim Ali","Stanislas Lem","Ursula K. Le Guin","Wangari Maathai"])},[r]),(0,eI.useEffect)(()=>{localStorage.setItem("teamMembers",JSON.stringify(c))},[c]),(0,eI.useEffect)(()=>{localStorage.setItem("selectedTeamMemberNames",JSON.stringify(o))},[o]),// Load airports
// TODO: Group airports by urban area
(0,eI.useEffect)(()=>{fetch("https://raw.githubusercontent.com/nerik/airports-streamlined/main/airports_large_medium.geojson").then(r=>r.json()).then(r=>{n(r)})},[]),// Set selected result the first time, once we have results
(0,eI.useEffect)(()=>{!s&&u?.length&&l(u[0].properties.iata_code)},[s,u]),// Select first result every time results change
(0,eI.useEffect)(()=>{u?.length&&l(u[0].properties.iata_code)},[u]),/*#__PURE__*/(0,eM.jsxs)(eM.Fragment,{children:[/*#__PURE__*/(0,eM.jsx)(dz,{children:/*#__PURE__*/(0,eM.jsx)(aw,{})}),/*#__PURE__*/(0,eM.jsxs)(dP,{children:[/*#__PURE__*/(0,eM.jsx)(dD,{children:/*#__PURE__*/(0,eM.jsx)(uD,{})}),/*#__PURE__*/(0,eM.jsx)(dR,{children:/*#__PURE__*/(0,eM.jsx)(dA,{})}),!!u?.length&&/*#__PURE__*/(0,eM.jsx)(dF,{children:/*#__PURE__*/(0,eM.jsx)(aO,{})})]})]})}var dN=[{type:"Feature",geometry:{type:"Point",coordinates:[-122.336457,37.8711583]},properties:{group:"Science fiction writers",name:"Ursula K. Le Guin"}},{type:"Feature",geometry:{type:"Point",coordinates:[32.158889,53.975]},properties:{group:"Science fiction writers",name:"Isaac Asimov"}},{type:"Feature",geometry:{type:"Point",coordinates:[-118.2018486,34.184451]},properties:{group:"Science fiction writers",name:"Octavia Butler"}},{type:"Feature",geometry:{type:"Point",coordinates:[-1.7038558,47.2381431]},properties:{group:"Science fiction writers",name:"Jules Verne"}},{type:"Feature",geometry:{type:"Point",coordinates:[-.0079634,51.394831]},properties:{group:"Science fiction writers",name:"H.G. Wells"}},{type:"Feature",geometry:{type:"Point",coordinates:[23.9421963,49.8326679]},properties:{group:"Science fiction writers",name:"Stanislaw Lem"}},{type:"Feature",geometry:{type:"Point",coordinates:[15.316667,44.566667]},properties:{name:"Nikola Tesla",group:"Inventors"}},{type:"Feature",geometry:{type:"Point",coordinates:[33.483333,-13.033333]},properties:{name:"William Kamkwamba",group:"Inventors"}},{type:"Feature",geometry:{type:"Point",coordinates:[-74.006111,40.712778]},properties:{name:"Grace Hopper",group:"Inventors"}},{type:"Feature",geometry:{type:"Point",coordinates:[36.916667,-.433333]},properties:{name:"Wangari Maathai",group:"Scientists"}},{type:"Feature",geometry:{type:"Point",coordinates:[72.8775,19.076111]},properties:{name:"Salim Ali",group:"Scientists"}}];function dj(){let r='"Antarctica VAR", sans-serif';return l5({type:{base:{family:r},heading:{family:r,settings:'"wdth" 24, "wght" 640',weight:"normal"}},button:{type:{family:r,settings:'"wdth" 32, "wght" 592',weight:"normal",case:"uppercase"}},layout:{max:"1920px",// The gap is defined as a multiplier of the layout.space The elements
// that use the gap should use it as a parameter for the glsp function
gap:{xsmall:1,small:1,medium:2,large:2,xlarge:2}}})}let dV=rd.div`
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  max-width: ${lj("layout.max")};
  margin: 0 auto;
  font-size: 0.9rem;
`,dU=rd.div`
  flex-grow: 1;
  display: flex;
  flex-direction: column;
`,dq=rd.header`
  display: flex;
  justify-content: space-between;
  height: 50px;
  position: sticky;
  top: 0;
  z-index: 999;
  background: white;
  padding: 0.3rem 1rem;

  h1 {
    font-size: 1.4rem;
  }
`,d$=rd.main`
  flex-grow: 1;
  display: flex;
  flex-direction: column;
`,dH=rd.div`
  position: relative;
  height: calc(100vh - 50px);
`,dZ=document.getElementById("app"),dG=c(dZ);dG.render(/*#__PURE__*/(0,eM.jsx)(function(){return/*#__PURE__*/(0,eM.jsx)(ut,{theme:dj,children:/*#__PURE__*/(0,eM.jsx)(dV,{children:/*#__PURE__*/(0,eM.jsx)(dU,{children:/*#__PURE__*/(0,eM.jsxs)(d$,{children:[/*#__PURE__*/(0,eM.jsx)(dq,{children:/*#__PURE__*/(0,eM.jsx)("h1",{children:"Coordinate: gather sustainably"})}),/*#__PURE__*/(0,eM.jsx)(dH,{children:/*#__PURE__*/(0,eM.jsx)(dB,{baseTeam:dN})})]})})})})},{}))}();//# sourceMappingURL=index.7dd61b76.js.map

//# sourceMappingURL=index.7dd61b76.js.map
